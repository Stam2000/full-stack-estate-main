var M2=Object.defineProperty;var D2=(t,e,n)=>e in t?M2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Xs=(t,e,n)=>(D2(t,typeof e!="symbol"?e+"":e,n),n);function fA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Hn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ro(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dA={exports:{}},dm={},hA={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf=Symbol.for("react.element"),$2=Symbol.for("react.portal"),B2=Symbol.for("react.fragment"),F2=Symbol.for("react.strict_mode"),U2=Symbol.for("react.profiler"),z2=Symbol.for("react.provider"),V2=Symbol.for("react.context"),q2=Symbol.for("react.forward_ref"),H2=Symbol.for("react.suspense"),Z2=Symbol.for("react.memo"),W2=Symbol.for("react.lazy"),Nx=Symbol.iterator;function G2(t){return t===null||typeof t!="object"?null:(t=Nx&&t[Nx]||t["@@iterator"],typeof t=="function"?t:null)}var pA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mA=Object.assign,gA={};function cu(t,e,n){this.props=t,this.context=e,this.refs=gA,this.updater=n||pA}cu.prototype.isReactComponent={};cu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yA(){}yA.prototype=cu.prototype;function tw(t,e,n){this.props=t,this.context=e,this.refs=gA,this.updater=n||pA}var nw=tw.prototype=new yA;nw.constructor=tw;mA(nw,cu.prototype);nw.isPureReactComponent=!0;var Ix=Array.isArray,vA=Object.prototype.hasOwnProperty,rw={current:null},_A={key:!0,ref:!0,__self:!0,__source:!0};function bA(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)vA.call(e,r)&&!_A.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Xf,type:t,key:s,ref:a,props:i,_owner:rw.current}}function K2(t,e){return{$$typeof:Xf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function iw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xf}function J2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jx=/\/+/g;function Kg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?J2(""+t.key):e.toString(36)}function Rh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Xf:case $2:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Kg(a,0):r,Ix(i)?(n="",t!=null&&(n=t.replace(jx,"$&/")+"/"),Rh(i,e,n,"",function(c){return c})):i!=null&&(iw(i)&&(i=K2(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(jx,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Ix(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Kg(s,l);a+=Rh(s,e,n,u,i)}else if(u=G2(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Kg(s,l++),a+=Rh(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Fd(t,e,n){if(t==null)return t;var r=[],i=0;return Rh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function X2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ir={current:null},Lh={transition:null},Y2={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:Lh,ReactCurrentOwner:rw};function wA(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:Fd,forEach:function(t,e,n){Fd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fd(t,function(){e++}),e},toArray:function(t){return Fd(t,function(e){return e})||[]},only:function(t){if(!iw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ot.Component=cu;ot.Fragment=B2;ot.Profiler=U2;ot.PureComponent=tw;ot.StrictMode=F2;ot.Suspense=H2;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y2;ot.act=wA;ot.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mA({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=rw.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)vA.call(e,u)&&!_A.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Xf,type:t.type,key:i,ref:s,props:r,_owner:a}};ot.createContext=function(t){return t={$$typeof:V2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:z2,_context:t},t.Consumer=t};ot.createElement=bA;ot.createFactory=function(t){var e=bA.bind(null,t);return e.type=t,e};ot.createRef=function(){return{current:null}};ot.forwardRef=function(t){return{$$typeof:q2,render:t}};ot.isValidElement=iw;ot.lazy=function(t){return{$$typeof:W2,_payload:{_status:-1,_result:t},_init:X2}};ot.memo=function(t,e){return{$$typeof:Z2,type:t,compare:e===void 0?null:e}};ot.startTransition=function(t){var e=Lh.transition;Lh.transition={};try{t()}finally{Lh.transition=e}};ot.unstable_act=wA;ot.useCallback=function(t,e){return ir.current.useCallback(t,e)};ot.useContext=function(t){return ir.current.useContext(t)};ot.useDebugValue=function(){};ot.useDeferredValue=function(t){return ir.current.useDeferredValue(t)};ot.useEffect=function(t,e){return ir.current.useEffect(t,e)};ot.useId=function(){return ir.current.useId()};ot.useImperativeHandle=function(t,e,n){return ir.current.useImperativeHandle(t,e,n)};ot.useInsertionEffect=function(t,e){return ir.current.useInsertionEffect(t,e)};ot.useLayoutEffect=function(t,e){return ir.current.useLayoutEffect(t,e)};ot.useMemo=function(t,e){return ir.current.useMemo(t,e)};ot.useReducer=function(t,e,n){return ir.current.useReducer(t,e,n)};ot.useRef=function(t){return ir.current.useRef(t)};ot.useState=function(t){return ir.current.useState(t)};ot.useSyncExternalStore=function(t,e,n){return ir.current.useSyncExternalStore(t,e,n)};ot.useTransition=function(){return ir.current.useTransition()};ot.version="18.3.1";hA.exports=ot;var K=hA.exports;const zl=Ro(K),Q2=fA({__proto__:null,default:zl},[K]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eD=K,tD=Symbol.for("react.element"),nD=Symbol.for("react.fragment"),rD=Object.prototype.hasOwnProperty,iD=eD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sD={key:!0,ref:!0,__self:!0,__source:!0};function xA(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)rD.call(e,r)&&!sD.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:tD,type:t,key:s,ref:a,props:i,_owner:iD.current}}dm.Fragment=nD;dm.jsx=xA;dm.jsxs=xA;dA.exports=dm;var I=dA.exports,Dv={},EA={exports:{}},Nr={},SA={exports:{}},TA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Z,q){var B=Z.length;Z.push(q);e:for(;0<B;){var j=B-1>>>1,U=Z[j];if(0<i(U,q))Z[j]=q,Z[B]=U,B=j;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var q=Z[0],B=Z.pop();if(B!==q){Z[0]=B;e:for(var j=0,U=Z.length,H=U>>>1;j<H;){var Y=2*(j+1)-1,J=Z[Y],V=Y+1,Q=Z[V];if(0>i(J,B))V<U&&0>i(Q,J)?(Z[j]=Q,Z[V]=B,j=V):(Z[j]=J,Z[Y]=B,j=Y);else if(V<U&&0>i(Q,B))Z[j]=Q,Z[V]=B,j=V;else break e}}return q}function i(Z,q){var B=Z.sortIndex-q.sortIndex;return B!==0?B:Z.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],f=1,d=null,p=3,m=!1,g=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(Z){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=Z)r(c),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(c)}}function E(Z){if(b=!1,x(Z),!g)if(n(u)!==null)g=!0,G(T);else{var q=n(c);q!==null&&W(E,q.startTime-Z)}}function T(Z,q){g=!1,b&&(b=!1,y(C),C=-1),m=!0;var B=p;try{for(x(q),d=n(u);d!==null&&(!(d.expirationTime>q)||Z&&!P());){var j=d.callback;if(typeof j=="function"){d.callback=null,p=d.priorityLevel;var U=j(d.expirationTime<=q);q=t.unstable_now(),typeof U=="function"?d.callback=U:d===n(u)&&r(u),x(q)}else r(u);d=n(u)}if(d!==null)var H=!0;else{var Y=n(c);Y!==null&&W(E,Y.startTime-q),H=!1}return H}finally{d=null,p=B,m=!1}}var O=!1,A=null,C=-1,M=5,R=-1;function P(){return!(t.unstable_now()-R<M)}function N(){if(A!==null){var Z=t.unstable_now();R=Z;var q=!0;try{q=A(!0,Z)}finally{q?$():(O=!1,A=null)}}else O=!1}var $;if(typeof v=="function")$=function(){v(N)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,z=D.port2;D.port1.onmessage=N,$=function(){z.postMessage(null)}}else $=function(){w(N,0)};function G(Z){A=Z,O||(O=!0,$())}function W(Z,q){C=w(function(){Z(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,G(T))},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(Z){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var B=p;p=q;try{return Z()}finally{p=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Z,q){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var B=p;p=Z;try{return q()}finally{p=B}},t.unstable_scheduleCallback=function(Z,q,B){var j=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?j+B:j):B=j,Z){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=B+U,Z={id:f++,callback:q,priorityLevel:Z,startTime:B,expirationTime:U,sortIndex:-1},B>j?(Z.sortIndex=B,e(c,Z),n(u)===null&&Z===n(c)&&(b?(y(C),C=-1):b=!0,W(E,B-j))):(Z.sortIndex=U,e(u,Z),g||m||(g=!0,G(T))),Z},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(Z){var q=p;return function(){var B=p;p=q;try{return Z.apply(this,arguments)}finally{p=B}}}})(TA);SA.exports=TA;var aD=SA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oD=K,kr=aD;function ge(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PA=new Set,rf={};function Lo(t,e){Vl(t,e),Vl(t+"Capture",e)}function Vl(t,e){for(rf[t]=e,t=0;t<e.length;t++)PA.add(e[t])}var Ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$v=Object.prototype.hasOwnProperty,lD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mx={},Dx={};function uD(t){return $v.call(Dx,t)?!0:$v.call(Mx,t)?!1:lD.test(t)?Dx[t]=!0:(Mx[t]=!0,!1)}function cD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fD(t,e,n,r){if(e===null||typeof e>"u"||cD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sr(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dn[t]=new sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dn[e]=new sr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dn[t]=new sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dn[t]=new sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dn[t]=new sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dn[t]=new sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dn[t]=new sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dn[t]=new sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dn[t]=new sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var sw=/[\-:]([a-z])/g;function aw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sw,aw);Dn[e]=new sr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sw,aw);Dn[e]=new sr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sw,aw);Dn[e]=new sr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dn[t]=new sr(t,1,!1,t.toLowerCase(),null,!1,!1)});Dn.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dn[t]=new sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function ow(t,e,n,r){var i=Dn.hasOwnProperty(e)?Dn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fD(e,n,i,r)&&(n=null),r||i===null?uD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vs=oD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ud=Symbol.for("react.element"),sl=Symbol.for("react.portal"),al=Symbol.for("react.fragment"),lw=Symbol.for("react.strict_mode"),Bv=Symbol.for("react.profiler"),OA=Symbol.for("react.provider"),AA=Symbol.for("react.context"),uw=Symbol.for("react.forward_ref"),Fv=Symbol.for("react.suspense"),Uv=Symbol.for("react.suspense_list"),cw=Symbol.for("react.memo"),sa=Symbol.for("react.lazy"),kA=Symbol.for("react.offscreen"),$x=Symbol.iterator;function Gu(t){return t===null||typeof t!="object"?null:(t=$x&&t[$x]||t["@@iterator"],typeof t=="function"?t:null)}var Xt=Object.assign,Jg;function vc(t){if(Jg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jg=e&&e[1]||""}return`
`+Jg+t}var Xg=!1;function Yg(t,e){if(!t||Xg)return"";Xg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{Xg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vc(t):""}function dD(t){switch(t.tag){case 5:return vc(t.type);case 16:return vc("Lazy");case 13:return vc("Suspense");case 19:return vc("SuspenseList");case 0:case 2:case 15:return t=Yg(t.type,!1),t;case 11:return t=Yg(t.type.render,!1),t;case 1:return t=Yg(t.type,!0),t;default:return""}}function zv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case al:return"Fragment";case sl:return"Portal";case Bv:return"Profiler";case lw:return"StrictMode";case Fv:return"Suspense";case Uv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case AA:return(t.displayName||"Context")+".Consumer";case OA:return(t._context.displayName||"Context")+".Provider";case uw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cw:return e=t.displayName||null,e!==null?e:zv(t.type)||"Memo";case sa:e=t._payload,t=t._init;try{return zv(t(e))}catch{}}return null}function hD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zv(e);case 8:return e===lw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function CA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pD(t){var e=CA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zd(t){t._valueTracker||(t._valueTracker=pD(t))}function RA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=CA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function op(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vv(t,e){var n=e.checked;return Xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pa(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function LA(t,e){e=e.checked,e!=null&&ow(t,"checked",e,!1)}function qv(t,e){LA(t,e);var n=Pa(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hv(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hv(t,e.type,Pa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hv(t,e,n){(e!=="number"||op(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _c=Array.isArray;function Cl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pa(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Zv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ge(91));return Xt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ux(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ge(92));if(_c(n)){if(1<n.length)throw Error(ge(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pa(n)}}function NA(t,e){var n=Pa(e.value),r=Pa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function IA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?IA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vd,jA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vd=Vd||document.createElement("div"),Vd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function sf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Nc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mD=["Webkit","ms","Moz","O"];Object.keys(Nc).forEach(function(t){mD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Nc[e]=Nc[t]})});function MA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Nc.hasOwnProperty(t)&&Nc[t]?(""+e).trim():e+"px"}function DA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=MA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var gD=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gv(t,e){if(e){if(gD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ge(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ge(62))}}function Kv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jv=null;function fw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xv=null,Rl=null,Ll=null;function Vx(t){if(t=ed(t)){if(typeof Xv!="function")throw Error(ge(280));var e=t.stateNode;e&&(e=ym(e),Xv(t.stateNode,t.type,e))}}function $A(t){Rl?Ll?Ll.push(t):Ll=[t]:Rl=t}function BA(){if(Rl){var t=Rl,e=Ll;if(Ll=Rl=null,Vx(t),e)for(t=0;t<e.length;t++)Vx(e[t])}}function FA(t,e){return t(e)}function UA(){}var Qg=!1;function zA(t,e,n){if(Qg)return t(e,n);Qg=!0;try{return FA(t,e,n)}finally{Qg=!1,(Rl!==null||Ll!==null)&&(UA(),BA())}}function af(t,e){var n=t.stateNode;if(n===null)return null;var r=ym(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ge(231,e,typeof n));return n}var Yv=!1;if(Ms)try{var Ku={};Object.defineProperty(Ku,"passive",{get:function(){Yv=!0}}),window.addEventListener("test",Ku,Ku),window.removeEventListener("test",Ku,Ku)}catch{Yv=!1}function yD(t,e,n,r,i,s,a,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var Ic=!1,lp=null,up=!1,Qv=null,vD={onError:function(t){Ic=!0,lp=t}};function _D(t,e,n,r,i,s,a,l,u){Ic=!1,lp=null,yD.apply(vD,arguments)}function bD(t,e,n,r,i,s,a,l,u){if(_D.apply(this,arguments),Ic){if(Ic){var c=lp;Ic=!1,lp=null}else throw Error(ge(198));up||(up=!0,Qv=c)}}function No(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function VA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qx(t){if(No(t)!==t)throw Error(ge(188))}function wD(t){var e=t.alternate;if(!e){if(e=No(t),e===null)throw Error(ge(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return qx(i),t;if(s===r)return qx(i),e;s=s.sibling}throw Error(ge(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(ge(189))}}if(n.alternate!==r)throw Error(ge(190))}if(n.tag!==3)throw Error(ge(188));return n.stateNode.current===n?t:e}function qA(t){return t=wD(t),t!==null?HA(t):null}function HA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=HA(t);if(e!==null)return e;t=t.sibling}return null}var ZA=kr.unstable_scheduleCallback,Hx=kr.unstable_cancelCallback,xD=kr.unstable_shouldYield,ED=kr.unstable_requestPaint,cn=kr.unstable_now,SD=kr.unstable_getCurrentPriorityLevel,dw=kr.unstable_ImmediatePriority,WA=kr.unstable_UserBlockingPriority,cp=kr.unstable_NormalPriority,TD=kr.unstable_LowPriority,GA=kr.unstable_IdlePriority,hm=null,ns=null;function PD(t){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(hm,t,void 0,(t.current.flags&128)===128)}catch{}}var Ti=Math.clz32?Math.clz32:kD,OD=Math.log,AD=Math.LN2;function kD(t){return t>>>=0,t===0?32:31-(OD(t)/AD|0)|0}var qd=64,Hd=4194304;function bc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=bc(l):(s&=a,s!==0&&(r=bc(s)))}else a=n&~i,a!==0?r=bc(a):s!==0&&(r=bc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ti(e),i=1<<n,r|=t[n],e&=~i;return r}function CD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Ti(s),l=1<<a,u=i[a];u===-1?(!(l&n)||l&r)&&(i[a]=CD(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function e_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KA(){var t=qd;return qd<<=1,!(qd&4194240)&&(qd=64),t}function ey(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ti(e),t[e]=n}function LD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ti(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function hw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ti(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Pt=0;function JA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var XA,pw,YA,QA,ek,t_=!1,Zd=[],ga=null,ya=null,va=null,of=new Map,lf=new Map,ua=[],ND="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zx(t,e){switch(t){case"focusin":case"focusout":ga=null;break;case"dragenter":case"dragleave":ya=null;break;case"mouseover":case"mouseout":va=null;break;case"pointerover":case"pointerout":of.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":lf.delete(e.pointerId)}}function Ju(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ed(e),e!==null&&pw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ID(t,e,n,r,i){switch(e){case"focusin":return ga=Ju(ga,t,e,n,r,i),!0;case"dragenter":return ya=Ju(ya,t,e,n,r,i),!0;case"mouseover":return va=Ju(va,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return of.set(s,Ju(of.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,lf.set(s,Ju(lf.get(s)||null,t,e,n,r,i)),!0}return!1}function tk(t){var e=ao(t.target);if(e!==null){var n=No(e);if(n!==null){if(e=n.tag,e===13){if(e=VA(n),e!==null){t.blockedOn=e,ek(t.priority,function(){YA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=n_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jv=r,n.target.dispatchEvent(r),Jv=null}else return e=ed(n),e!==null&&pw(e),t.blockedOn=n,!1;e.shift()}return!0}function Wx(t,e,n){Nh(t)&&n.delete(e)}function jD(){t_=!1,ga!==null&&Nh(ga)&&(ga=null),ya!==null&&Nh(ya)&&(ya=null),va!==null&&Nh(va)&&(va=null),of.forEach(Wx),lf.forEach(Wx)}function Xu(t,e){t.blockedOn===e&&(t.blockedOn=null,t_||(t_=!0,kr.unstable_scheduleCallback(kr.unstable_NormalPriority,jD)))}function uf(t){function e(i){return Xu(i,t)}if(0<Zd.length){Xu(Zd[0],t);for(var n=1;n<Zd.length;n++){var r=Zd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ga!==null&&Xu(ga,t),ya!==null&&Xu(ya,t),va!==null&&Xu(va,t),of.forEach(e),lf.forEach(e),n=0;n<ua.length;n++)r=ua[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ua.length&&(n=ua[0],n.blockedOn===null);)tk(n),n.blockedOn===null&&ua.shift()}var Nl=Vs.ReactCurrentBatchConfig,dp=!0;function MD(t,e,n,r){var i=Pt,s=Nl.transition;Nl.transition=null;try{Pt=1,mw(t,e,n,r)}finally{Pt=i,Nl.transition=s}}function DD(t,e,n,r){var i=Pt,s=Nl.transition;Nl.transition=null;try{Pt=4,mw(t,e,n,r)}finally{Pt=i,Nl.transition=s}}function mw(t,e,n,r){if(dp){var i=n_(t,e,n,r);if(i===null)cy(t,e,r,hp,n),Zx(t,r);else if(ID(i,t,e,n,r))r.stopPropagation();else if(Zx(t,r),e&4&&-1<ND.indexOf(t)){for(;i!==null;){var s=ed(i);if(s!==null&&XA(s),s=n_(t,e,n,r),s===null&&cy(t,e,r,hp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else cy(t,e,r,null,n)}}var hp=null;function n_(t,e,n,r){if(hp=null,t=fw(r),t=ao(t),t!==null)if(e=No(t),e===null)t=null;else if(n=e.tag,n===13){if(t=VA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hp=t,null}function nk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SD()){case dw:return 1;case WA:return 4;case cp:case TD:return 16;case GA:return 536870912;default:return 16}default:return 16}}var da=null,gw=null,Ih=null;function rk(){if(Ih)return Ih;var t,e=gw,n=e.length,r,i="value"in da?da.value:da.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Ih=i.slice(t,1<r?1-r:void 0)}function jh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wd(){return!0}function Gx(){return!1}function Ir(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Wd:Gx,this.isPropagationStopped=Gx,this}return Xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wd)},persist:function(){},isPersistent:Wd}),e}var fu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yw=Ir(fu),Qf=Xt({},fu,{view:0,detail:0}),$D=Ir(Qf),ty,ny,Yu,pm=Xt({},Qf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yu&&(Yu&&t.type==="mousemove"?(ty=t.screenX-Yu.screenX,ny=t.screenY-Yu.screenY):ny=ty=0,Yu=t),ty)},movementY:function(t){return"movementY"in t?t.movementY:ny}}),Kx=Ir(pm),BD=Xt({},pm,{dataTransfer:0}),FD=Ir(BD),UD=Xt({},Qf,{relatedTarget:0}),ry=Ir(UD),zD=Xt({},fu,{animationName:0,elapsedTime:0,pseudoElement:0}),VD=Ir(zD),qD=Xt({},fu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HD=Ir(qD),ZD=Xt({},fu,{data:0}),Jx=Ir(ZD),WD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=KD[t])?!!e[t]:!1}function vw(){return JD}var XD=Xt({},Qf,{key:function(t){if(t.key){var e=WD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vw,charCode:function(t){return t.type==="keypress"?jh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YD=Ir(XD),QD=Xt({},pm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xx=Ir(QD),e$=Xt({},Qf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vw}),t$=Ir(e$),n$=Xt({},fu,{propertyName:0,elapsedTime:0,pseudoElement:0}),r$=Ir(n$),i$=Xt({},pm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),s$=Ir(i$),a$=[9,13,27,32],_w=Ms&&"CompositionEvent"in window,jc=null;Ms&&"documentMode"in document&&(jc=document.documentMode);var o$=Ms&&"TextEvent"in window&&!jc,ik=Ms&&(!_w||jc&&8<jc&&11>=jc),Yx=" ",Qx=!1;function sk(t,e){switch(t){case"keyup":return a$.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ak(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ol=!1;function l$(t,e){switch(t){case"compositionend":return ak(e);case"keypress":return e.which!==32?null:(Qx=!0,Yx);case"textInput":return t=e.data,t===Yx&&Qx?null:t;default:return null}}function u$(t,e){if(ol)return t==="compositionend"||!_w&&sk(t,e)?(t=rk(),Ih=gw=da=null,ol=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ik&&e.locale!=="ko"?null:e.data;default:return null}}var c$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!c$[t.type]:e==="textarea"}function ok(t,e,n,r){$A(r),e=pp(e,"onChange"),0<e.length&&(n=new yw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Mc=null,cf=null;function f$(t){vk(t,0)}function mm(t){var e=cl(t);if(RA(e))return t}function d$(t,e){if(t==="change")return e}var lk=!1;if(Ms){var iy;if(Ms){var sy="oninput"in document;if(!sy){var tE=document.createElement("div");tE.setAttribute("oninput","return;"),sy=typeof tE.oninput=="function"}iy=sy}else iy=!1;lk=iy&&(!document.documentMode||9<document.documentMode)}function nE(){Mc&&(Mc.detachEvent("onpropertychange",uk),cf=Mc=null)}function uk(t){if(t.propertyName==="value"&&mm(cf)){var e=[];ok(e,cf,t,fw(t)),zA(f$,e)}}function h$(t,e,n){t==="focusin"?(nE(),Mc=e,cf=n,Mc.attachEvent("onpropertychange",uk)):t==="focusout"&&nE()}function p$(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mm(cf)}function m$(t,e){if(t==="click")return mm(e)}function g$(t,e){if(t==="input"||t==="change")return mm(e)}function y$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ci=typeof Object.is=="function"?Object.is:y$;function ff(t,e){if(Ci(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!$v.call(e,i)||!Ci(t[i],e[i]))return!1}return!0}function rE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iE(t,e){var n=rE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rE(n)}}function ck(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ck(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fk(){for(var t=window,e=op();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=op(t.document)}return e}function bw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function v$(t){var e=fk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ck(n.ownerDocument.documentElement,n)){if(r!==null&&bw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=iE(n,s);var a=iE(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _$=Ms&&"documentMode"in document&&11>=document.documentMode,ll=null,r_=null,Dc=null,i_=!1;function sE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;i_||ll==null||ll!==op(r)||(r=ll,"selectionStart"in r&&bw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Dc&&ff(Dc,r)||(Dc=r,r=pp(r_,"onSelect"),0<r.length&&(e=new yw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ll)))}function Gd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ul={animationend:Gd("Animation","AnimationEnd"),animationiteration:Gd("Animation","AnimationIteration"),animationstart:Gd("Animation","AnimationStart"),transitionend:Gd("Transition","TransitionEnd")},ay={},dk={};Ms&&(dk=document.createElement("div").style,"AnimationEvent"in window||(delete ul.animationend.animation,delete ul.animationiteration.animation,delete ul.animationstart.animation),"TransitionEvent"in window||delete ul.transitionend.transition);function gm(t){if(ay[t])return ay[t];if(!ul[t])return t;var e=ul[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dk)return ay[t]=e[n];return t}var hk=gm("animationend"),pk=gm("animationiteration"),mk=gm("animationstart"),gk=gm("transitionend"),yk=new Map,aE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ja(t,e){yk.set(t,e),Lo(e,[t])}for(var oy=0;oy<aE.length;oy++){var ly=aE[oy],b$=ly.toLowerCase(),w$=ly[0].toUpperCase()+ly.slice(1);ja(b$,"on"+w$)}ja(hk,"onAnimationEnd");ja(pk,"onAnimationIteration");ja(mk,"onAnimationStart");ja("dblclick","onDoubleClick");ja("focusin","onFocus");ja("focusout","onBlur");ja(gk,"onTransitionEnd");Vl("onMouseEnter",["mouseout","mouseover"]);Vl("onMouseLeave",["mouseout","mouseover"]);Vl("onPointerEnter",["pointerout","pointerover"]);Vl("onPointerLeave",["pointerout","pointerover"]);Lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x$=new Set("cancel close invalid load scroll toggle".split(" ").concat(wc));function oE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bD(r,e,void 0,t),t.currentTarget=null}function vk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;oE(i,l,c),s=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;oE(i,l,c),s=u}}}if(up)throw t=Qv,up=!1,Qv=null,t}function It(t,e){var n=e[u_];n===void 0&&(n=e[u_]=new Set);var r=t+"__bubble";n.has(r)||(_k(e,t,2,!1),n.add(r))}function uy(t,e,n){var r=0;e&&(r|=4),_k(n,t,r,e)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function df(t){if(!t[Kd]){t[Kd]=!0,PA.forEach(function(n){n!=="selectionchange"&&(x$.has(n)||uy(n,!1,t),uy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kd]||(e[Kd]=!0,uy("selectionchange",!1,e))}}function _k(t,e,n,r){switch(nk(e)){case 1:var i=MD;break;case 4:i=DD;break;default:i=mw}n=i.bind(null,e,n,t),i=void 0,!Yv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function cy(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;l!==null;){if(a=ao(l),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}l=l.parentNode}}r=r.return}zA(function(){var c=s,f=fw(n),d=[];e:{var p=yk.get(t);if(p!==void 0){var m=yw,g=t;switch(t){case"keypress":if(jh(n)===0)break e;case"keydown":case"keyup":m=YD;break;case"focusin":g="focus",m=ry;break;case"focusout":g="blur",m=ry;break;case"beforeblur":case"afterblur":m=ry;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Kx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=FD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=t$;break;case hk:case pk:case mk:m=VD;break;case gk:m=r$;break;case"scroll":m=$D;break;case"wheel":m=s$;break;case"copy":case"cut":case"paste":m=HD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Xx}var b=(e&4)!==0,w=!b&&t==="scroll",y=b?p!==null?p+"Capture":null:p;b=[];for(var v=c,x;v!==null;){x=v;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,y!==null&&(E=af(v,y),E!=null&&b.push(hf(v,E,x)))),w)break;v=v.return}0<b.length&&(p=new m(p,g,null,n,f),d.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Jv&&(g=n.relatedTarget||n.fromElement)&&(ao(g)||g[Ds]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?ao(g):null,g!==null&&(w=No(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(b=Kx,E="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(b=Xx,E="onPointerLeave",y="onPointerEnter",v="pointer"),w=m==null?p:cl(m),x=g==null?p:cl(g),p=new b(E,v+"leave",m,n,f),p.target=w,p.relatedTarget=x,E=null,ao(f)===c&&(b=new b(y,v+"enter",g,n,f),b.target=x,b.relatedTarget=w,E=b),w=E,m&&g)t:{for(b=m,y=g,v=0,x=b;x;x=Wo(x))v++;for(x=0,E=y;E;E=Wo(E))x++;for(;0<v-x;)b=Wo(b),v--;for(;0<x-v;)y=Wo(y),x--;for(;v--;){if(b===y||y!==null&&b===y.alternate)break t;b=Wo(b),y=Wo(y)}b=null}else b=null;m!==null&&lE(d,p,m,b,!1),g!==null&&w!==null&&lE(d,w,g,b,!0)}}e:{if(p=c?cl(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var T=d$;else if(eE(p))if(lk)T=g$;else{T=p$;var O=h$}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=m$);if(T&&(T=T(t,c))){ok(d,T,n,f);break e}O&&O(t,p,c),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Hv(p,"number",p.value)}switch(O=c?cl(c):window,t){case"focusin":(eE(O)||O.contentEditable==="true")&&(ll=O,r_=c,Dc=null);break;case"focusout":Dc=r_=ll=null;break;case"mousedown":i_=!0;break;case"contextmenu":case"mouseup":case"dragend":i_=!1,sE(d,n,f);break;case"selectionchange":if(_$)break;case"keydown":case"keyup":sE(d,n,f)}var A;if(_w)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ol?sk(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(ik&&n.locale!=="ko"&&(ol||C!=="onCompositionStart"?C==="onCompositionEnd"&&ol&&(A=rk()):(da=f,gw="value"in da?da.value:da.textContent,ol=!0)),O=pp(c,C),0<O.length&&(C=new Jx(C,t,null,n,f),d.push({event:C,listeners:O}),A?C.data=A:(A=ak(n),A!==null&&(C.data=A)))),(A=o$?l$(t,n):u$(t,n))&&(c=pp(c,"onBeforeInput"),0<c.length&&(f=new Jx("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=A))}vk(d,e)})}function hf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pp(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=af(t,n),s!=null&&r.unshift(hf(t,s,i)),s=af(t,e),s!=null&&r.push(hf(t,s,i))),t=t.return}return r}function Wo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lE(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=af(n,s),u!=null&&a.unshift(hf(n,u,l))):i||(u=af(n,s),u!=null&&a.push(hf(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var E$=/\r\n?/g,S$=/\u0000|\uFFFD/g;function uE(t){return(typeof t=="string"?t:""+t).replace(E$,`
`).replace(S$,"")}function Jd(t,e,n){if(e=uE(e),uE(t)!==e&&n)throw Error(ge(425))}function mp(){}var s_=null,a_=null;function o_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var l_=typeof setTimeout=="function"?setTimeout:void 0,T$=typeof clearTimeout=="function"?clearTimeout:void 0,cE=typeof Promise=="function"?Promise:void 0,P$=typeof queueMicrotask=="function"?queueMicrotask:typeof cE<"u"?function(t){return cE.resolve(null).then(t).catch(O$)}:l_;function O$(t){setTimeout(function(){throw t})}function fy(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),uf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);uf(e)}function _a(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var du=Math.random().toString(36).slice(2),Xi="__reactFiber$"+du,pf="__reactProps$"+du,Ds="__reactContainer$"+du,u_="__reactEvents$"+du,A$="__reactListeners$"+du,k$="__reactHandles$"+du;function ao(t){var e=t[Xi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ds]||n[Xi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fE(t);t!==null;){if(n=t[Xi])return n;t=fE(t)}return e}t=n,n=t.parentNode}return null}function ed(t){return t=t[Xi]||t[Ds],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ge(33))}function ym(t){return t[pf]||null}var c_=[],fl=-1;function Ma(t){return{current:t}}function Dt(t){0>fl||(t.current=c_[fl],c_[fl]=null,fl--)}function Lt(t,e){fl++,c_[fl]=t.current,t.current=e}var Oa={},Gn=Ma(Oa),hr=Ma(!1),bo=Oa;function ql(t,e){var n=t.type.contextTypes;if(!n)return Oa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function pr(t){return t=t.childContextTypes,t!=null}function gp(){Dt(hr),Dt(Gn)}function dE(t,e,n){if(Gn.current!==Oa)throw Error(ge(168));Lt(Gn,e),Lt(hr,n)}function bk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ge(108,hD(t)||"Unknown",i));return Xt({},n,r)}function yp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Oa,bo=Gn.current,Lt(Gn,t),Lt(hr,hr.current),!0}function hE(t,e,n){var r=t.stateNode;if(!r)throw Error(ge(169));n?(t=bk(t,e,bo),r.__reactInternalMemoizedMergedChildContext=t,Dt(hr),Dt(Gn),Lt(Gn,t)):Dt(hr),Lt(hr,n)}var Ss=null,vm=!1,dy=!1;function wk(t){Ss===null?Ss=[t]:Ss.push(t)}function C$(t){vm=!0,wk(t)}function Da(){if(!dy&&Ss!==null){dy=!0;var t=0,e=Pt;try{var n=Ss;for(Pt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ss=null,vm=!1}catch(i){throw Ss!==null&&(Ss=Ss.slice(t+1)),ZA(dw,Da),i}finally{Pt=e,dy=!1}}return null}var dl=[],hl=0,vp=null,_p=0,Hr=[],Zr=0,wo=null,Ts=1,Ps="";function Ya(t,e){dl[hl++]=_p,dl[hl++]=vp,vp=t,_p=e}function xk(t,e,n){Hr[Zr++]=Ts,Hr[Zr++]=Ps,Hr[Zr++]=wo,wo=t;var r=Ts;t=Ps;var i=32-Ti(r)-1;r&=~(1<<i),n+=1;var s=32-Ti(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ts=1<<32-Ti(e)+i|n<<i|r,Ps=s+t}else Ts=1<<s|n<<i|r,Ps=t}function ww(t){t.return!==null&&(Ya(t,1),xk(t,1,0))}function xw(t){for(;t===vp;)vp=dl[--hl],dl[hl]=null,_p=dl[--hl],dl[hl]=null;for(;t===wo;)wo=Hr[--Zr],Hr[Zr]=null,Ps=Hr[--Zr],Hr[Zr]=null,Ts=Hr[--Zr],Hr[Zr]=null}var Pr=null,Tr=null,zt=!1,wi=null;function Ek(t,e){var n=Gr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function pE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pr=t,Tr=_a(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pr=t,Tr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wo!==null?{id:Ts,overflow:Ps}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pr=t,Tr=null,!0):!1;default:return!1}}function f_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function d_(t){if(zt){var e=Tr;if(e){var n=e;if(!pE(t,e)){if(f_(t))throw Error(ge(418));e=_a(n.nextSibling);var r=Pr;e&&pE(t,e)?Ek(r,n):(t.flags=t.flags&-4097|2,zt=!1,Pr=t)}}else{if(f_(t))throw Error(ge(418));t.flags=t.flags&-4097|2,zt=!1,Pr=t}}}function mE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pr=t}function Xd(t){if(t!==Pr)return!1;if(!zt)return mE(t),zt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!o_(t.type,t.memoizedProps)),e&&(e=Tr)){if(f_(t))throw Sk(),Error(ge(418));for(;e;)Ek(t,e),e=_a(e.nextSibling)}if(mE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ge(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tr=_a(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tr=null}}else Tr=Pr?_a(t.stateNode.nextSibling):null;return!0}function Sk(){for(var t=Tr;t;)t=_a(t.nextSibling)}function Hl(){Tr=Pr=null,zt=!1}function Ew(t){wi===null?wi=[t]:wi.push(t)}var R$=Vs.ReactCurrentBatchConfig;function Qu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ge(309));var r=n.stateNode}if(!r)throw Error(ge(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(ge(284));if(!n._owner)throw Error(ge(290,t))}return t}function Yd(t,e){throw t=Object.prototype.toString.call(e),Error(ge(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gE(t){var e=t._init;return e(t._payload)}function Tk(t){function e(y,v){if(t){var x=y.deletions;x===null?(y.deletions=[v],y.flags|=16):x.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Ea(y,v),y.index=0,y.sibling=null,y}function s(y,v,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<v?(y.flags|=2,v):x):(y.flags|=2,v)):(y.flags|=1048576,v)}function a(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,v,x,E){return v===null||v.tag!==6?(v=_y(x,y.mode,E),v.return=y,v):(v=i(v,x),v.return=y,v)}function u(y,v,x,E){var T=x.type;return T===al?f(y,v,x.props.children,E,x.key):v!==null&&(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===sa&&gE(T)===v.type)?(E=i(v,x.props),E.ref=Qu(y,v,x),E.return=y,E):(E=zh(x.type,x.key,x.props,null,y.mode,E),E.ref=Qu(y,v,x),E.return=y,E)}function c(y,v,x,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=by(x,y.mode,E),v.return=y,v):(v=i(v,x.children||[]),v.return=y,v)}function f(y,v,x,E,T){return v===null||v.tag!==7?(v=go(x,y.mode,E,T),v.return=y,v):(v=i(v,x),v.return=y,v)}function d(y,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=_y(""+v,y.mode,x),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ud:return x=zh(v.type,v.key,v.props,null,y.mode,x),x.ref=Qu(y,null,v),x.return=y,x;case sl:return v=by(v,y.mode,x),v.return=y,v;case sa:var E=v._init;return d(y,E(v._payload),x)}if(_c(v)||Gu(v))return v=go(v,y.mode,x,null),v.return=y,v;Yd(y,v)}return null}function p(y,v,x,E){var T=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return T!==null?null:l(y,v,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ud:return x.key===T?u(y,v,x,E):null;case sl:return x.key===T?c(y,v,x,E):null;case sa:return T=x._init,p(y,v,T(x._payload),E)}if(_c(x)||Gu(x))return T!==null?null:f(y,v,x,E,null);Yd(y,x)}return null}function m(y,v,x,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(x)||null,l(v,y,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ud:return y=y.get(E.key===null?x:E.key)||null,u(v,y,E,T);case sl:return y=y.get(E.key===null?x:E.key)||null,c(v,y,E,T);case sa:var O=E._init;return m(y,v,x,O(E._payload),T)}if(_c(E)||Gu(E))return y=y.get(x)||null,f(v,y,E,T,null);Yd(v,E)}return null}function g(y,v,x,E){for(var T=null,O=null,A=v,C=v=0,M=null;A!==null&&C<x.length;C++){A.index>C?(M=A,A=null):M=A.sibling;var R=p(y,A,x[C],E);if(R===null){A===null&&(A=M);break}t&&A&&R.alternate===null&&e(y,A),v=s(R,v,C),O===null?T=R:O.sibling=R,O=R,A=M}if(C===x.length)return n(y,A),zt&&Ya(y,C),T;if(A===null){for(;C<x.length;C++)A=d(y,x[C],E),A!==null&&(v=s(A,v,C),O===null?T=A:O.sibling=A,O=A);return zt&&Ya(y,C),T}for(A=r(y,A);C<x.length;C++)M=m(A,y,C,x[C],E),M!==null&&(t&&M.alternate!==null&&A.delete(M.key===null?C:M.key),v=s(M,v,C),O===null?T=M:O.sibling=M,O=M);return t&&A.forEach(function(P){return e(y,P)}),zt&&Ya(y,C),T}function b(y,v,x,E){var T=Gu(x);if(typeof T!="function")throw Error(ge(150));if(x=T.call(x),x==null)throw Error(ge(151));for(var O=T=null,A=v,C=v=0,M=null,R=x.next();A!==null&&!R.done;C++,R=x.next()){A.index>C?(M=A,A=null):M=A.sibling;var P=p(y,A,R.value,E);if(P===null){A===null&&(A=M);break}t&&A&&P.alternate===null&&e(y,A),v=s(P,v,C),O===null?T=P:O.sibling=P,O=P,A=M}if(R.done)return n(y,A),zt&&Ya(y,C),T;if(A===null){for(;!R.done;C++,R=x.next())R=d(y,R.value,E),R!==null&&(v=s(R,v,C),O===null?T=R:O.sibling=R,O=R);return zt&&Ya(y,C),T}for(A=r(y,A);!R.done;C++,R=x.next())R=m(A,y,C,R.value,E),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?C:R.key),v=s(R,v,C),O===null?T=R:O.sibling=R,O=R);return t&&A.forEach(function(N){return e(y,N)}),zt&&Ya(y,C),T}function w(y,v,x,E){if(typeof x=="object"&&x!==null&&x.type===al&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ud:e:{for(var T=x.key,O=v;O!==null;){if(O.key===T){if(T=x.type,T===al){if(O.tag===7){n(y,O.sibling),v=i(O,x.props.children),v.return=y,y=v;break e}}else if(O.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===sa&&gE(T)===O.type){n(y,O.sibling),v=i(O,x.props),v.ref=Qu(y,O,x),v.return=y,y=v;break e}n(y,O);break}else e(y,O);O=O.sibling}x.type===al?(v=go(x.props.children,y.mode,E,x.key),v.return=y,y=v):(E=zh(x.type,x.key,x.props,null,y.mode,E),E.ref=Qu(y,v,x),E.return=y,y=E)}return a(y);case sl:e:{for(O=x.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(y,v.sibling),v=i(v,x.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=by(x,y.mode,E),v.return=y,y=v}return a(y);case sa:return O=x._init,w(y,v,O(x._payload),E)}if(_c(x))return g(y,v,x,E);if(Gu(x))return b(y,v,x,E);Yd(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,x),v.return=y,y=v):(n(y,v),v=_y(x,y.mode,E),v.return=y,y=v),a(y)):n(y,v)}return w}var Zl=Tk(!0),Pk=Tk(!1),bp=Ma(null),wp=null,pl=null,Sw=null;function Tw(){Sw=pl=wp=null}function Pw(t){var e=bp.current;Dt(bp),t._currentValue=e}function h_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Il(t,e){wp=t,Sw=pl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dr=!0),t.firstContext=null)}function Yr(t){var e=t._currentValue;if(Sw!==t)if(t={context:t,memoizedValue:e,next:null},pl===null){if(wp===null)throw Error(ge(308));pl=t,wp.dependencies={lanes:0,firstContext:t}}else pl=pl.next=t;return e}var oo=null;function Ow(t){oo===null?oo=[t]:oo.push(t)}function Ok(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ow(e)):(n.next=i.next,i.next=n),e.interleaved=n,$s(t,r)}function $s(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var aa=!1;function Aw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ak(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ks(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ba(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,mt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,$s(t,n)}return i=r.interleaved,i===null?(e.next=e,Ow(r)):(e.next=i.next,i.next=e),r.interleaved=e,$s(t,n)}function Mh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hw(t,n)}}function yE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xp(t,e,n,r){var i=t.updateQueue;aa=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?s=c:a.next=c,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(s!==null){var d=i.baseState;a=0,f=c=u=null,l=s;do{var p=l.lane,m=l.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,b=l;switch(p=e,m=n,b.tag){case 1:if(g=b.payload,typeof g=="function"){d=g.call(m,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=b.payload,p=typeof g=="function"?g.call(m,d,p):g,p==null)break e;d=Xt({},d,p);break e;case 2:aa=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=m,u=d):f=f.next=m,a|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(f===null&&(u=d),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Eo|=a,t.lanes=a,t.memoizedState=d}}function vE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ge(191,i));i.call(r)}}}var td={},rs=Ma(td),mf=Ma(td),gf=Ma(td);function lo(t){if(t===td)throw Error(ge(174));return t}function kw(t,e){switch(Lt(gf,e),Lt(mf,t),Lt(rs,td),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wv(e,t)}Dt(rs),Lt(rs,e)}function Wl(){Dt(rs),Dt(mf),Dt(gf)}function kk(t){lo(gf.current);var e=lo(rs.current),n=Wv(e,t.type);e!==n&&(Lt(mf,t),Lt(rs,n))}function Cw(t){mf.current===t&&(Dt(rs),Dt(mf))}var Gt=Ma(0);function Ep(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hy=[];function Rw(){for(var t=0;t<hy.length;t++)hy[t]._workInProgressVersionPrimary=null;hy.length=0}var Dh=Vs.ReactCurrentDispatcher,py=Vs.ReactCurrentBatchConfig,xo=0,Jt=null,wn=null,On=null,Sp=!1,$c=!1,yf=0,L$=0;function Bn(){throw Error(ge(321))}function Lw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ci(t[n],e[n]))return!1;return!0}function Nw(t,e,n,r,i,s){if(xo=s,Jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dh.current=t===null||t.memoizedState===null?M$:D$,t=n(r,i),$c){s=0;do{if($c=!1,yf=0,25<=s)throw Error(ge(301));s+=1,On=wn=null,e.updateQueue=null,Dh.current=$$,t=n(r,i)}while($c)}if(Dh.current=Tp,e=wn!==null&&wn.next!==null,xo=0,On=wn=Jt=null,Sp=!1,e)throw Error(ge(300));return t}function Iw(){var t=yf!==0;return yf=0,t}function Gi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?Jt.memoizedState=On=t:On=On.next=t,On}function Qr(){if(wn===null){var t=Jt.alternate;t=t!==null?t.memoizedState:null}else t=wn.next;var e=On===null?Jt.memoizedState:On.next;if(e!==null)On=e,wn=t;else{if(t===null)throw Error(ge(310));wn=t,t={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},On===null?Jt.memoizedState=On=t:On=On.next=t}return On}function vf(t,e){return typeof e=="function"?e(t):e}function my(t){var e=Qr(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=wn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,u=null,c=s;do{var f=c.lane;if((xo&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=d,a=r):u=u.next=d,Jt.lanes|=f,Eo|=f}c=c.next}while(c!==null&&c!==s);u===null?a=r:u.next=l,Ci(r,e.memoizedState)||(dr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Jt.lanes|=s,Eo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gy(t){var e=Qr(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Ci(s,e.memoizedState)||(dr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ck(){}function Rk(t,e){var n=Jt,r=Qr(),i=e(),s=!Ci(r.memoizedState,i);if(s&&(r.memoizedState=i,dr=!0),r=r.queue,jw(Ik.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||On!==null&&On.memoizedState.tag&1){if(n.flags|=2048,_f(9,Nk.bind(null,n,r,i,e),void 0,null),kn===null)throw Error(ge(349));xo&30||Lk(n,e,i)}return i}function Lk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Nk(t,e,n,r){e.value=n,e.getSnapshot=r,jk(e)&&Mk(t)}function Ik(t,e,n){return n(function(){jk(e)&&Mk(t)})}function jk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ci(t,n)}catch{return!0}}function Mk(t){var e=$s(t,1);e!==null&&Pi(e,t,1,-1)}function _E(t){var e=Gi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vf,lastRenderedState:t},e.queue=t,t=t.dispatch=j$.bind(null,Jt,t),[e.memoizedState,t]}function _f(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Jt.updateQueue,e===null?(e={lastEffect:null,stores:null},Jt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Dk(){return Qr().memoizedState}function $h(t,e,n,r){var i=Gi();Jt.flags|=t,i.memoizedState=_f(1|e,n,void 0,r===void 0?null:r)}function _m(t,e,n,r){var i=Qr();r=r===void 0?null:r;var s=void 0;if(wn!==null){var a=wn.memoizedState;if(s=a.destroy,r!==null&&Lw(r,a.deps)){i.memoizedState=_f(e,n,s,r);return}}Jt.flags|=t,i.memoizedState=_f(1|e,n,s,r)}function bE(t,e){return $h(8390656,8,t,e)}function jw(t,e){return _m(2048,8,t,e)}function $k(t,e){return _m(4,2,t,e)}function Bk(t,e){return _m(4,4,t,e)}function Fk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Uk(t,e,n){return n=n!=null?n.concat([t]):null,_m(4,4,Fk.bind(null,e,t),n)}function Mw(){}function zk(t,e){var n=Qr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Vk(t,e){var n=Qr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qk(t,e,n){return xo&21?(Ci(n,e)||(n=KA(),Jt.lanes|=n,Eo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dr=!0),t.memoizedState=n)}function N$(t,e){var n=Pt;Pt=n!==0&&4>n?n:4,t(!0);var r=py.transition;py.transition={};try{t(!1),e()}finally{Pt=n,py.transition=r}}function Hk(){return Qr().memoizedState}function I$(t,e,n){var r=xa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zk(t))Wk(e,n);else if(n=Ok(t,e,n,r),n!==null){var i=er();Pi(n,t,r,i),Gk(n,e,r)}}function j$(t,e,n){var r=xa(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zk(t))Wk(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Ci(l,a)){var u=e.interleaved;u===null?(i.next=i,Ow(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Ok(t,e,i,r),n!==null&&(i=er(),Pi(n,t,r,i),Gk(n,e,r))}}function Zk(t){var e=t.alternate;return t===Jt||e!==null&&e===Jt}function Wk(t,e){$c=Sp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Gk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hw(t,n)}}var Tp={readContext:Yr,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useInsertionEffect:Bn,useLayoutEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useMutableSource:Bn,useSyncExternalStore:Bn,useId:Bn,unstable_isNewReconciler:!1},M$={readContext:Yr,useCallback:function(t,e){return Gi().memoizedState=[t,e===void 0?null:e],t},useContext:Yr,useEffect:bE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$h(4194308,4,Fk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $h(4194308,4,t,e)},useInsertionEffect:function(t,e){return $h(4,2,t,e)},useMemo:function(t,e){var n=Gi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=I$.bind(null,Jt,t),[r.memoizedState,t]},useRef:function(t){var e=Gi();return t={current:t},e.memoizedState=t},useState:_E,useDebugValue:Mw,useDeferredValue:function(t){return Gi().memoizedState=t},useTransition:function(){var t=_E(!1),e=t[0];return t=N$.bind(null,t[1]),Gi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Jt,i=Gi();if(zt){if(n===void 0)throw Error(ge(407));n=n()}else{if(n=e(),kn===null)throw Error(ge(349));xo&30||Lk(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,bE(Ik.bind(null,r,s,t),[t]),r.flags|=2048,_f(9,Nk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Gi(),e=kn.identifierPrefix;if(zt){var n=Ps,r=Ts;n=(r&~(1<<32-Ti(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=yf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=L$++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},D$={readContext:Yr,useCallback:zk,useContext:Yr,useEffect:jw,useImperativeHandle:Uk,useInsertionEffect:$k,useLayoutEffect:Bk,useMemo:Vk,useReducer:my,useRef:Dk,useState:function(){return my(vf)},useDebugValue:Mw,useDeferredValue:function(t){var e=Qr();return qk(e,wn.memoizedState,t)},useTransition:function(){var t=my(vf)[0],e=Qr().memoizedState;return[t,e]},useMutableSource:Ck,useSyncExternalStore:Rk,useId:Hk,unstable_isNewReconciler:!1},$$={readContext:Yr,useCallback:zk,useContext:Yr,useEffect:jw,useImperativeHandle:Uk,useInsertionEffect:$k,useLayoutEffect:Bk,useMemo:Vk,useReducer:gy,useRef:Dk,useState:function(){return gy(vf)},useDebugValue:Mw,useDeferredValue:function(t){var e=Qr();return wn===null?e.memoizedState=t:qk(e,wn.memoizedState,t)},useTransition:function(){var t=gy(vf)[0],e=Qr().memoizedState;return[t,e]},useMutableSource:Ck,useSyncExternalStore:Rk,useId:Hk,unstable_isNewReconciler:!1};function gi(t,e){if(t&&t.defaultProps){e=Xt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function p_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bm={isMounted:function(t){return(t=t._reactInternals)?No(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=er(),i=xa(t),s=ks(r,i);s.payload=e,n!=null&&(s.callback=n),e=ba(t,s,i),e!==null&&(Pi(e,t,i,r),Mh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=er(),i=xa(t),s=ks(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ba(t,s,i),e!==null&&(Pi(e,t,i,r),Mh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=er(),r=xa(t),i=ks(n,r);i.tag=2,e!=null&&(i.callback=e),e=ba(t,i,r),e!==null&&(Pi(e,t,r,n),Mh(e,t,r))}};function wE(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!ff(n,r)||!ff(i,s):!0}function Kk(t,e,n){var r=!1,i=Oa,s=e.contextType;return typeof s=="object"&&s!==null?s=Yr(s):(i=pr(e)?bo:Gn.current,r=e.contextTypes,s=(r=r!=null)?ql(t,i):Oa),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function xE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bm.enqueueReplaceState(e,e.state,null)}function m_(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Aw(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Yr(s):(s=pr(e)?bo:Gn.current,i.context=ql(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(p_(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&bm.enqueueReplaceState(i,i.state,null),xp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Gl(t,e){try{var n="",r=e;do n+=dD(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function yy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function g_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var B$=typeof WeakMap=="function"?WeakMap:Map;function Jk(t,e,n){n=ks(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Op||(Op=!0,P_=r),g_(t,e)},n}function Xk(t,e,n){n=ks(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){g_(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){g_(t,e),typeof r!="function"&&(wa===null?wa=new Set([this]):wa.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function EE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new B$;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Q$.bind(null,t,e,n),e.then(t,t))}function SE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function TE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ks(-1,1),e.tag=2,ba(n,e,1))),n.lanes|=1),t)}var F$=Vs.ReactCurrentOwner,dr=!1;function Yn(t,e,n,r){e.child=t===null?Pk(e,null,n,r):Zl(e,t.child,n,r)}function PE(t,e,n,r,i){n=n.render;var s=e.ref;return Il(e,i),r=Nw(t,e,n,r,s,i),n=Iw(),t!==null&&!dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bs(t,e,i)):(zt&&n&&ww(e),e.flags|=1,Yn(t,e,r,i),e.child)}function OE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!qw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Yk(t,e,s,r,i)):(t=zh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:ff,n(a,r)&&t.ref===e.ref)return Bs(t,e,i)}return e.flags|=1,t=Ea(s,r),t.ref=e.ref,t.return=e,e.child=t}function Yk(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ff(s,r)&&t.ref===e.ref)if(dr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(dr=!0);else return e.lanes=t.lanes,Bs(t,e,i)}return y_(t,e,n,r,i)}function Qk(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lt(gl,Er),Er|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Lt(gl,Er),Er|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Lt(gl,Er),Er|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Lt(gl,Er),Er|=r;return Yn(t,e,i,n),e.child}function eC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function y_(t,e,n,r,i){var s=pr(n)?bo:Gn.current;return s=ql(e,s),Il(e,i),n=Nw(t,e,n,r,s,i),r=Iw(),t!==null&&!dr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bs(t,e,i)):(zt&&r&&ww(e),e.flags|=1,Yn(t,e,n,i),e.child)}function AE(t,e,n,r,i){if(pr(n)){var s=!0;yp(e)}else s=!1;if(Il(e,i),e.stateNode===null)Bh(t,e),Kk(e,n,r),m_(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Yr(c):(c=pr(n)?bo:Gn.current,c=ql(e,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==c)&&xE(e,a,r,c),aa=!1;var p=e.memoizedState;a.state=p,xp(e,r,a,i),u=e.memoizedState,l!==r||p!==u||hr.current||aa?(typeof f=="function"&&(p_(e,n,f,r),u=e.memoizedState),(l=aa||wE(e,n,l,r,p,u,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Ak(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:gi(e.type,l),a.props=c,d=e.pendingProps,p=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Yr(u):(u=pr(n)?bo:Gn.current,u=ql(e,u));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==d||p!==u)&&xE(e,a,r,u),aa=!1,p=e.memoizedState,a.state=p,xp(e,r,a,i);var g=e.memoizedState;l!==d||p!==g||hr.current||aa?(typeof m=="function"&&(p_(e,n,m,r),g=e.memoizedState),(c=aa||wE(e,n,c,r,p,g,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),a.props=r,a.state=g,a.context=u,r=c):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return v_(t,e,n,r,s,i)}function v_(t,e,n,r,i,s){eC(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&hE(e,n,!1),Bs(t,e,s);r=e.stateNode,F$.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Zl(e,t.child,null,s),e.child=Zl(e,null,l,s)):Yn(t,e,l,s),e.memoizedState=r.state,i&&hE(e,n,!0),e.child}function tC(t){var e=t.stateNode;e.pendingContext?dE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dE(t,e.context,!1),kw(t,e.containerInfo)}function kE(t,e,n,r,i){return Hl(),Ew(i),e.flags|=256,Yn(t,e,n,r),e.child}var __={dehydrated:null,treeContext:null,retryLane:0};function b_(t){return{baseLanes:t,cachePool:null,transitions:null}}function nC(t,e,n){var r=e.pendingProps,i=Gt.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Lt(Gt,i&1),t===null)return d_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Em(a,r,0,null),t=go(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=b_(n),e.memoizedState=__,t):Dw(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return U$(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ea(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Ea(l,s):(s=go(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?b_(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=__,r}return s=t.child,t=s.sibling,r=Ea(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Dw(t,e){return e=Em({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qd(t,e,n,r){return r!==null&&Ew(r),Zl(e,t.child,null,n),t=Dw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function U$(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=yy(Error(ge(422))),Qd(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Em({mode:"visible",children:r.children},i,0,null),s=go(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Zl(e,t.child,null,a),e.child.memoizedState=b_(a),e.memoizedState=__,s);if(!(e.mode&1))return Qd(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(ge(419)),r=yy(s,r,void 0),Qd(t,e,a,r)}if(l=(a&t.childLanes)!==0,dr||l){if(r=kn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,$s(t,i),Pi(r,t,i,-1))}return Vw(),r=yy(Error(ge(421))),Qd(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=eB.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Tr=_a(i.nextSibling),Pr=e,zt=!0,wi=null,t!==null&&(Hr[Zr++]=Ts,Hr[Zr++]=Ps,Hr[Zr++]=wo,Ts=t.id,Ps=t.overflow,wo=e),e=Dw(e,r.children),e.flags|=4096,e)}function CE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),h_(t.return,e,n)}function vy(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function rC(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Yn(t,e,r.children,n),r=Gt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&CE(t,n,e);else if(t.tag===19)CE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Lt(Gt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ep(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),vy(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ep(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}vy(e,!0,n,null,s);break;case"together":vy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Eo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ge(153));if(e.child!==null){for(t=e.child,n=Ea(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ea(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function z$(t,e,n){switch(e.tag){case 3:tC(e),Hl();break;case 5:kk(e);break;case 1:pr(e.type)&&yp(e);break;case 4:kw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Lt(bp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Lt(Gt,Gt.current&1),e.flags|=128,null):n&e.child.childLanes?nC(t,e,n):(Lt(Gt,Gt.current&1),t=Bs(t,e,n),t!==null?t.sibling:null);Lt(Gt,Gt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return rC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Lt(Gt,Gt.current),r)break;return null;case 22:case 23:return e.lanes=0,Qk(t,e,n)}return Bs(t,e,n)}var iC,w_,sC,aC;iC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};w_=function(){};sC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,lo(rs.current);var s=null;switch(n){case"input":i=Vv(t,i),r=Vv(t,r),s=[];break;case"select":i=Xt({},i,{value:void 0}),r=Xt({},r,{value:void 0}),s=[];break;case"textarea":i=Zv(t,i),r=Zv(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mp)}Gv(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(rf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(rf.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&It("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};aC=function(t,e,n,r){n!==r&&(e.flags|=4)};function ec(t,e){if(!zt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Fn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function V$(t,e,n){var r=e.pendingProps;switch(xw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fn(e),null;case 1:return pr(e.type)&&gp(),Fn(e),null;case 3:return r=e.stateNode,Wl(),Dt(hr),Dt(Gn),Rw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wi!==null&&(k_(wi),wi=null))),w_(t,e),Fn(e),null;case 5:Cw(e);var i=lo(gf.current);if(n=e.type,t!==null&&e.stateNode!=null)sC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ge(166));return Fn(e),null}if(t=lo(rs.current),Xd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Xi]=e,r[pf]=s,t=(e.mode&1)!==0,n){case"dialog":It("cancel",r),It("close",r);break;case"iframe":case"object":case"embed":It("load",r);break;case"video":case"audio":for(i=0;i<wc.length;i++)It(wc[i],r);break;case"source":It("error",r);break;case"img":case"image":case"link":It("error",r),It("load",r);break;case"details":It("toggle",r);break;case"input":Bx(r,s),It("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},It("invalid",r);break;case"textarea":Ux(r,s),It("invalid",r)}Gv(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Jd(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Jd(r.textContent,l,t),i=["children",""+l]):rf.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&It("scroll",r)}switch(n){case"input":zd(r),Fx(r,s,!0);break;case"textarea":zd(r),zx(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=mp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=IA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Xi]=e,t[pf]=r,iC(t,e,!1,!1),e.stateNode=t;e:{switch(a=Kv(n,r),n){case"dialog":It("cancel",t),It("close",t),i=r;break;case"iframe":case"object":case"embed":It("load",t),i=r;break;case"video":case"audio":for(i=0;i<wc.length;i++)It(wc[i],t);i=r;break;case"source":It("error",t),i=r;break;case"img":case"image":case"link":It("error",t),It("load",t),i=r;break;case"details":It("toggle",t),i=r;break;case"input":Bx(t,r),i=Vv(t,r),It("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Xt({},r,{value:void 0}),It("invalid",t);break;case"textarea":Ux(t,r),i=Zv(t,r),It("invalid",t);break;default:i=r}Gv(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?DA(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&jA(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&sf(t,u):typeof u=="number"&&sf(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(rf.hasOwnProperty(s)?u!=null&&s==="onScroll"&&It("scroll",t):u!=null&&ow(t,s,u,a))}switch(n){case"input":zd(t),Fx(t,r,!1);break;case"textarea":zd(t),zx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pa(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Cl(t,!!r.multiple,s,!1):r.defaultValue!=null&&Cl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=mp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Fn(e),null;case 6:if(t&&e.stateNode!=null)aC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ge(166));if(n=lo(gf.current),lo(rs.current),Xd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xi]=e,(s=r.nodeValue!==n)&&(t=Pr,t!==null))switch(t.tag){case 3:Jd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xi]=e,e.stateNode=r}return Fn(e),null;case 13:if(Dt(Gt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(zt&&Tr!==null&&e.mode&1&&!(e.flags&128))Sk(),Hl(),e.flags|=98560,s=!1;else if(s=Xd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ge(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ge(317));s[Xi]=e}else Hl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fn(e),s=!1}else wi!==null&&(k_(wi),wi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Gt.current&1?En===0&&(En=3):Vw())),e.updateQueue!==null&&(e.flags|=4),Fn(e),null);case 4:return Wl(),w_(t,e),t===null&&df(e.stateNode.containerInfo),Fn(e),null;case 10:return Pw(e.type._context),Fn(e),null;case 17:return pr(e.type)&&gp(),Fn(e),null;case 19:if(Dt(Gt),s=e.memoizedState,s===null)return Fn(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)ec(s,!1);else{if(En!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ep(t),a!==null){for(e.flags|=128,ec(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Lt(Gt,Gt.current&1|2),e.child}t=t.sibling}s.tail!==null&&cn()>Kl&&(e.flags|=128,r=!0,ec(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ep(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ec(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!zt)return Fn(e),null}else 2*cn()-s.renderingStartTime>Kl&&n!==1073741824&&(e.flags|=128,r=!0,ec(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=cn(),e.sibling=null,n=Gt.current,Lt(Gt,r?n&1|2:n&1),e):(Fn(e),null);case 22:case 23:return zw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Er&1073741824&&(Fn(e),e.subtreeFlags&6&&(e.flags|=8192)):Fn(e),null;case 24:return null;case 25:return null}throw Error(ge(156,e.tag))}function q$(t,e){switch(xw(e),e.tag){case 1:return pr(e.type)&&gp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wl(),Dt(hr),Dt(Gn),Rw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cw(e),null;case 13:if(Dt(Gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ge(340));Hl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Dt(Gt),null;case 4:return Wl(),null;case 10:return Pw(e.type._context),null;case 22:case 23:return zw(),null;case 24:return null;default:return null}}var eh=!1,Vn=!1,H$=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function ml(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nn(t,e,r)}else n.current=null}function x_(t,e,n){try{n()}catch(r){nn(t,e,r)}}var RE=!1;function Z$(t,e){if(s_=dp,t=fk(),bw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,c=0,f=0,d=t,p=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(l=a+i),d!==s||r!==0&&d.nodeType!==3||(u=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===t)break t;if(p===n&&++c===i&&(l=a),p===s&&++f===r&&(u=a),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(a_={focusedElem:t,selectionRange:n},dp=!1,Ae=e;Ae!==null;)if(e=Ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ae=t;else for(;Ae!==null;){e=Ae;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var b=g.memoizedProps,w=g.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?b:gi(e.type,b),w);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(E){nn(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,Ae=t;break}Ae=e.return}return g=RE,RE=!1,g}function Bc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&x_(e,n,s)}i=i.next}while(i!==r)}}function wm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function E_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oC(t){var e=t.alternate;e!==null&&(t.alternate=null,oC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xi],delete e[pf],delete e[u_],delete e[A$],delete e[k$])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lC(t){return t.tag===5||t.tag===3||t.tag===4}function LE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function S_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mp));else if(r!==4&&(t=t.child,t!==null))for(S_(t,e,n),t=t.sibling;t!==null;)S_(t,e,n),t=t.sibling}function T_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(T_(t,e,n),t=t.sibling;t!==null;)T_(t,e,n),t=t.sibling}var Nn=null,vi=!1;function Ys(t,e,n){for(n=n.child;n!==null;)uC(t,e,n),n=n.sibling}function uC(t,e,n){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(hm,n)}catch{}switch(n.tag){case 5:Vn||ml(n,e);case 6:var r=Nn,i=vi;Nn=null,Ys(t,e,n),Nn=r,vi=i,Nn!==null&&(vi?(t=Nn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Nn.removeChild(n.stateNode));break;case 18:Nn!==null&&(vi?(t=Nn,n=n.stateNode,t.nodeType===8?fy(t.parentNode,n):t.nodeType===1&&fy(t,n),uf(t)):fy(Nn,n.stateNode));break;case 4:r=Nn,i=vi,Nn=n.stateNode.containerInfo,vi=!0,Ys(t,e,n),Nn=r,vi=i;break;case 0:case 11:case 14:case 15:if(!Vn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&x_(n,e,a),i=i.next}while(i!==r)}Ys(t,e,n);break;case 1:if(!Vn&&(ml(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){nn(n,e,l)}Ys(t,e,n);break;case 21:Ys(t,e,n);break;case 22:n.mode&1?(Vn=(r=Vn)||n.memoizedState!==null,Ys(t,e,n),Vn=r):Ys(t,e,n);break;default:Ys(t,e,n)}}function NE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new H$),e.forEach(function(r){var i=tB.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function oi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Nn=l.stateNode,vi=!1;break e;case 3:Nn=l.stateNode.containerInfo,vi=!0;break e;case 4:Nn=l.stateNode.containerInfo,vi=!0;break e}l=l.return}if(Nn===null)throw Error(ge(160));uC(s,a,i),Nn=null,vi=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){nn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cC(e,t),e=e.sibling}function cC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(oi(e,t),qi(t),r&4){try{Bc(3,t,t.return),wm(3,t)}catch(b){nn(t,t.return,b)}try{Bc(5,t,t.return)}catch(b){nn(t,t.return,b)}}break;case 1:oi(e,t),qi(t),r&512&&n!==null&&ml(n,n.return);break;case 5:if(oi(e,t),qi(t),r&512&&n!==null&&ml(n,n.return),t.flags&32){var i=t.stateNode;try{sf(i,"")}catch(b){nn(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&LA(i,s),Kv(l,a);var c=Kv(l,s);for(a=0;a<u.length;a+=2){var f=u[a],d=u[a+1];f==="style"?DA(i,d):f==="dangerouslySetInnerHTML"?jA(i,d):f==="children"?sf(i,d):ow(i,f,d,c)}switch(l){case"input":qv(i,s);break;case"textarea":NA(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Cl(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Cl(i,!!s.multiple,s.defaultValue,!0):Cl(i,!!s.multiple,s.multiple?[]:"",!1))}i[pf]=s}catch(b){nn(t,t.return,b)}}break;case 6:if(oi(e,t),qi(t),r&4){if(t.stateNode===null)throw Error(ge(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(b){nn(t,t.return,b)}}break;case 3:if(oi(e,t),qi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{uf(e.containerInfo)}catch(b){nn(t,t.return,b)}break;case 4:oi(e,t),qi(t);break;case 13:oi(e,t),qi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Fw=cn())),r&4&&NE(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Vn=(c=Vn)||f,oi(e,t),Vn=c):oi(e,t),qi(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(Ae=t,f=t.child;f!==null;){for(d=Ae=f;Ae!==null;){switch(p=Ae,m=p.child,p.tag){case 0:case 11:case 14:case 15:Bc(4,p,p.return);break;case 1:ml(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(b){nn(r,n,b)}}break;case 5:ml(p,p.return);break;case 22:if(p.memoizedState!==null){jE(d);continue}}m!==null?(m.return=p,Ae=m):jE(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,u=d.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=MA("display",a))}catch(b){nn(t,t.return,b)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(b){nn(t,t.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:oi(e,t),qi(t),r&4&&NE(t);break;case 21:break;default:oi(e,t),qi(t)}}function qi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(lC(n)){var r=n;break e}n=n.return}throw Error(ge(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(sf(i,""),r.flags&=-33);var s=LE(t);T_(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=LE(t);S_(t,l,a);break;default:throw Error(ge(161))}}catch(u){nn(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function W$(t,e,n){Ae=t,fC(t)}function fC(t,e,n){for(var r=(t.mode&1)!==0;Ae!==null;){var i=Ae,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||eh;if(!a){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Vn;l=eh;var c=Vn;if(eh=a,(Vn=u)&&!c)for(Ae=i;Ae!==null;)a=Ae,u=a.child,a.tag===22&&a.memoizedState!==null?ME(i):u!==null?(u.return=a,Ae=u):ME(i);for(;s!==null;)Ae=s,fC(s),s=s.sibling;Ae=i,eh=l,Vn=c}IE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ae=s):IE(t)}}function IE(t){for(;Ae!==null;){var e=Ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vn||wm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:gi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vE(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vE(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&uf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}Vn||e.flags&512&&E_(e)}catch(p){nn(e,e.return,p)}}if(e===t){Ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function jE(t){for(;Ae!==null;){var e=Ae;if(e===t){Ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ae=n;break}Ae=e.return}}function ME(t){for(;Ae!==null;){var e=Ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wm(4,e)}catch(u){nn(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){nn(e,i,u)}}var s=e.return;try{E_(e)}catch(u){nn(e,s,u)}break;case 5:var a=e.return;try{E_(e)}catch(u){nn(e,a,u)}}}catch(u){nn(e,e.return,u)}if(e===t){Ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ae=l;break}Ae=e.return}}var G$=Math.ceil,Pp=Vs.ReactCurrentDispatcher,$w=Vs.ReactCurrentOwner,Jr=Vs.ReactCurrentBatchConfig,mt=0,kn=null,pn=null,Mn=0,Er=0,gl=Ma(0),En=0,bf=null,Eo=0,xm=0,Bw=0,Fc=null,fr=null,Fw=0,Kl=1/0,xs=null,Op=!1,P_=null,wa=null,th=!1,ha=null,Ap=0,Uc=0,O_=null,Fh=-1,Uh=0;function er(){return mt&6?cn():Fh!==-1?Fh:Fh=cn()}function xa(t){return t.mode&1?mt&2&&Mn!==0?Mn&-Mn:R$.transition!==null?(Uh===0&&(Uh=KA()),Uh):(t=Pt,t!==0||(t=window.event,t=t===void 0?16:nk(t.type)),t):1}function Pi(t,e,n,r){if(50<Uc)throw Uc=0,O_=null,Error(ge(185));Yf(t,n,r),(!(mt&2)||t!==kn)&&(t===kn&&(!(mt&2)&&(xm|=n),En===4&&ca(t,Mn)),mr(t,r),n===1&&mt===0&&!(e.mode&1)&&(Kl=cn()+500,vm&&Da()))}function mr(t,e){var n=t.callbackNode;RD(t,e);var r=fp(t,t===kn?Mn:0);if(r===0)n!==null&&Hx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Hx(n),e===1)t.tag===0?C$(DE.bind(null,t)):wk(DE.bind(null,t)),P$(function(){!(mt&6)&&Da()}),n=null;else{switch(JA(r)){case 1:n=dw;break;case 4:n=WA;break;case 16:n=cp;break;case 536870912:n=GA;break;default:n=cp}n=_C(n,dC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dC(t,e){if(Fh=-1,Uh=0,mt&6)throw Error(ge(327));var n=t.callbackNode;if(jl()&&t.callbackNode!==n)return null;var r=fp(t,t===kn?Mn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=kp(t,r);else{e=r;var i=mt;mt|=2;var s=pC();(kn!==t||Mn!==e)&&(xs=null,Kl=cn()+500,mo(t,e));do try{X$();break}catch(l){hC(t,l)}while(!0);Tw(),Pp.current=s,mt=i,pn!==null?e=0:(kn=null,Mn=0,e=En)}if(e!==0){if(e===2&&(i=e_(t),i!==0&&(r=i,e=A_(t,i))),e===1)throw n=bf,mo(t,0),ca(t,r),mr(t,cn()),n;if(e===6)ca(t,r);else{if(i=t.current.alternate,!(r&30)&&!K$(i)&&(e=kp(t,r),e===2&&(s=e_(t),s!==0&&(r=s,e=A_(t,s))),e===1))throw n=bf,mo(t,0),ca(t,r),mr(t,cn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ge(345));case 2:Qa(t,fr,xs);break;case 3:if(ca(t,r),(r&130023424)===r&&(e=Fw+500-cn(),10<e)){if(fp(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){er(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=l_(Qa.bind(null,t,fr,xs),e);break}Qa(t,fr,xs);break;case 4:if(ca(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Ti(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*G$(r/1960))-r,10<r){t.timeoutHandle=l_(Qa.bind(null,t,fr,xs),r);break}Qa(t,fr,xs);break;case 5:Qa(t,fr,xs);break;default:throw Error(ge(329))}}}return mr(t,cn()),t.callbackNode===n?dC.bind(null,t):null}function A_(t,e){var n=Fc;return t.current.memoizedState.isDehydrated&&(mo(t,e).flags|=256),t=kp(t,e),t!==2&&(e=fr,fr=n,e!==null&&k_(e)),t}function k_(t){fr===null?fr=t:fr.push.apply(fr,t)}function K$(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ci(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ca(t,e){for(e&=~Bw,e&=~xm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ti(e),r=1<<n;t[n]=-1,e&=~r}}function DE(t){if(mt&6)throw Error(ge(327));jl();var e=fp(t,0);if(!(e&1))return mr(t,cn()),null;var n=kp(t,e);if(t.tag!==0&&n===2){var r=e_(t);r!==0&&(e=r,n=A_(t,r))}if(n===1)throw n=bf,mo(t,0),ca(t,e),mr(t,cn()),n;if(n===6)throw Error(ge(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qa(t,fr,xs),mr(t,cn()),null}function Uw(t,e){var n=mt;mt|=1;try{return t(e)}finally{mt=n,mt===0&&(Kl=cn()+500,vm&&Da())}}function So(t){ha!==null&&ha.tag===0&&!(mt&6)&&jl();var e=mt;mt|=1;var n=Jr.transition,r=Pt;try{if(Jr.transition=null,Pt=1,t)return t()}finally{Pt=r,Jr.transition=n,mt=e,!(mt&6)&&Da()}}function zw(){Er=gl.current,Dt(gl)}function mo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,T$(n)),pn!==null)for(n=pn.return;n!==null;){var r=n;switch(xw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gp();break;case 3:Wl(),Dt(hr),Dt(Gn),Rw();break;case 5:Cw(r);break;case 4:Wl();break;case 13:Dt(Gt);break;case 19:Dt(Gt);break;case 10:Pw(r.type._context);break;case 22:case 23:zw()}n=n.return}if(kn=t,pn=t=Ea(t.current,null),Mn=Er=e,En=0,bf=null,Bw=xm=Eo=0,fr=Fc=null,oo!==null){for(e=0;e<oo.length;e++)if(n=oo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}oo=null}return t}function hC(t,e){do{var n=pn;try{if(Tw(),Dh.current=Tp,Sp){for(var r=Jt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Sp=!1}if(xo=0,On=wn=Jt=null,$c=!1,yf=0,$w.current=null,n===null||n.return===null){En=1,bf=e,pn=null;break}e:{var s=t,a=n.return,l=n,u=e;if(e=Mn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=SE(a);if(m!==null){m.flags&=-257,TE(m,a,l,s,e),m.mode&1&&EE(s,c,e),e=m,u=c;var g=e.updateQueue;if(g===null){var b=new Set;b.add(u),e.updateQueue=b}else g.add(u);break e}else{if(!(e&1)){EE(s,c,e),Vw();break e}u=Error(ge(426))}}else if(zt&&l.mode&1){var w=SE(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),TE(w,a,l,s,e),Ew(Gl(u,l));break e}}s=u=Gl(u,l),En!==4&&(En=2),Fc===null?Fc=[s]:Fc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Jk(s,u,e);yE(s,y);break e;case 1:l=u;var v=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(wa===null||!wa.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=Xk(s,l,e);yE(s,E);break e}}s=s.return}while(s!==null)}gC(n)}catch(T){e=T,pn===n&&n!==null&&(pn=n=n.return);continue}break}while(!0)}function pC(){var t=Pp.current;return Pp.current=Tp,t===null?Tp:t}function Vw(){(En===0||En===3||En===2)&&(En=4),kn===null||!(Eo&268435455)&&!(xm&268435455)||ca(kn,Mn)}function kp(t,e){var n=mt;mt|=2;var r=pC();(kn!==t||Mn!==e)&&(xs=null,mo(t,e));do try{J$();break}catch(i){hC(t,i)}while(!0);if(Tw(),mt=n,Pp.current=r,pn!==null)throw Error(ge(261));return kn=null,Mn=0,En}function J$(){for(;pn!==null;)mC(pn)}function X$(){for(;pn!==null&&!xD();)mC(pn)}function mC(t){var e=vC(t.alternate,t,Er);t.memoizedProps=t.pendingProps,e===null?gC(t):pn=e,$w.current=null}function gC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=q$(n,e),n!==null){n.flags&=32767,pn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{En=6,pn=null;return}}else if(n=V$(n,e,Er),n!==null){pn=n;return}if(e=e.sibling,e!==null){pn=e;return}pn=e=t}while(e!==null);En===0&&(En=5)}function Qa(t,e,n){var r=Pt,i=Jr.transition;try{Jr.transition=null,Pt=1,Y$(t,e,n,r)}finally{Jr.transition=i,Pt=r}return null}function Y$(t,e,n,r){do jl();while(ha!==null);if(mt&6)throw Error(ge(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ge(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(LD(t,s),t===kn&&(pn=kn=null,Mn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||th||(th=!0,_C(cp,function(){return jl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Jr.transition,Jr.transition=null;var a=Pt;Pt=1;var l=mt;mt|=4,$w.current=null,Z$(t,n),cC(n,t),v$(a_),dp=!!s_,a_=s_=null,t.current=n,W$(n),ED(),mt=l,Pt=a,Jr.transition=s}else t.current=n;if(th&&(th=!1,ha=t,Ap=i),s=t.pendingLanes,s===0&&(wa=null),PD(n.stateNode),mr(t,cn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Op)throw Op=!1,t=P_,P_=null,t;return Ap&1&&t.tag!==0&&jl(),s=t.pendingLanes,s&1?t===O_?Uc++:(Uc=0,O_=t):Uc=0,Da(),null}function jl(){if(ha!==null){var t=JA(Ap),e=Jr.transition,n=Pt;try{if(Jr.transition=null,Pt=16>t?16:t,ha===null)var r=!1;else{if(t=ha,ha=null,Ap=0,mt&6)throw Error(ge(331));var i=mt;for(mt|=4,Ae=t.current;Ae!==null;){var s=Ae,a=s.child;if(Ae.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(Ae=c;Ae!==null;){var f=Ae;switch(f.tag){case 0:case 11:case 15:Bc(8,f,s)}var d=f.child;if(d!==null)d.return=f,Ae=d;else for(;Ae!==null;){f=Ae;var p=f.sibling,m=f.return;if(oC(f),f===c){Ae=null;break}if(p!==null){p.return=m,Ae=p;break}Ae=m}}}var g=s.alternate;if(g!==null){var b=g.child;if(b!==null){g.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}Ae=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Ae=a;else e:for(;Ae!==null;){if(s=Ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bc(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Ae=y;break e}Ae=s.return}}var v=t.current;for(Ae=v;Ae!==null;){a=Ae;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,Ae=x;else e:for(a=v;Ae!==null;){if(l=Ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:wm(9,l)}}catch(T){nn(l,l.return,T)}if(l===a){Ae=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,Ae=E;break e}Ae=l.return}}if(mt=i,Da(),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(hm,t)}catch{}r=!0}return r}finally{Pt=n,Jr.transition=e}}return!1}function $E(t,e,n){e=Gl(n,e),e=Jk(t,e,1),t=ba(t,e,1),e=er(),t!==null&&(Yf(t,1,e),mr(t,e))}function nn(t,e,n){if(t.tag===3)$E(t,t,n);else for(;e!==null;){if(e.tag===3){$E(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wa===null||!wa.has(r))){t=Gl(n,t),t=Xk(e,t,1),e=ba(e,t,1),t=er(),e!==null&&(Yf(e,1,t),mr(e,t));break}}e=e.return}}function Q$(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=er(),t.pingedLanes|=t.suspendedLanes&n,kn===t&&(Mn&n)===n&&(En===4||En===3&&(Mn&130023424)===Mn&&500>cn()-Fw?mo(t,0):Bw|=n),mr(t,e)}function yC(t,e){e===0&&(t.mode&1?(e=Hd,Hd<<=1,!(Hd&130023424)&&(Hd=4194304)):e=1);var n=er();t=$s(t,e),t!==null&&(Yf(t,e,n),mr(t,n))}function eB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yC(t,n)}function tB(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ge(314))}r!==null&&r.delete(e),yC(t,n)}var vC;vC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||hr.current)dr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dr=!1,z$(t,e,n);dr=!!(t.flags&131072)}else dr=!1,zt&&e.flags&1048576&&xk(e,_p,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bh(t,e),t=e.pendingProps;var i=ql(e,Gn.current);Il(e,n),i=Nw(null,e,r,t,i,n);var s=Iw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pr(r)?(s=!0,yp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Aw(e),i.updater=bm,e.stateNode=i,i._reactInternals=e,m_(e,r,t,n),e=v_(null,e,r,!0,s,n)):(e.tag=0,zt&&s&&ww(e),Yn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=rB(r),t=gi(r,t),i){case 0:e=y_(null,e,r,t,n);break e;case 1:e=AE(null,e,r,t,n);break e;case 11:e=PE(null,e,r,t,n);break e;case 14:e=OE(null,e,r,gi(r.type,t),n);break e}throw Error(ge(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),y_(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),AE(t,e,r,i,n);case 3:e:{if(tC(e),t===null)throw Error(ge(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Ak(t,e),xp(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Gl(Error(ge(423)),e),e=kE(t,e,r,n,i);break e}else if(r!==i){i=Gl(Error(ge(424)),e),e=kE(t,e,r,n,i);break e}else for(Tr=_a(e.stateNode.containerInfo.firstChild),Pr=e,zt=!0,wi=null,n=Pk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hl(),r===i){e=Bs(t,e,n);break e}Yn(t,e,r,n)}e=e.child}return e;case 5:return kk(e),t===null&&d_(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,o_(r,i)?a=null:s!==null&&o_(r,s)&&(e.flags|=32),eC(t,e),Yn(t,e,a,n),e.child;case 6:return t===null&&d_(e),null;case 13:return nC(t,e,n);case 4:return kw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zl(e,null,r,n):Yn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),PE(t,e,r,i,n);case 7:return Yn(t,e,e.pendingProps,n),e.child;case 8:return Yn(t,e,e.pendingProps.children,n),e.child;case 12:return Yn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Lt(bp,r._currentValue),r._currentValue=a,s!==null)if(Ci(s.value,a)){if(s.children===i.children&&!hr.current){e=Bs(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=ks(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),h_(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ge(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),h_(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Yn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Il(e,n),i=Yr(i),r=r(i),e.flags|=1,Yn(t,e,r,n),e.child;case 14:return r=e.type,i=gi(r,e.pendingProps),i=gi(r.type,i),OE(t,e,r,i,n);case 15:return Yk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),Bh(t,e),e.tag=1,pr(r)?(t=!0,yp(e)):t=!1,Il(e,n),Kk(e,r,i),m_(e,r,i,n),v_(null,e,r,!0,t,n);case 19:return rC(t,e,n);case 22:return Qk(t,e,n)}throw Error(ge(156,e.tag))};function _C(t,e){return ZA(t,e)}function nB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(t,e,n,r){return new nB(t,e,n,r)}function qw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rB(t){if(typeof t=="function")return qw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uw)return 11;if(t===cw)return 14}return 2}function Ea(t,e){var n=t.alternate;return n===null?(n=Gr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zh(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")qw(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case al:return go(n.children,i,s,e);case lw:a=8,i|=8;break;case Bv:return t=Gr(12,n,e,i|2),t.elementType=Bv,t.lanes=s,t;case Fv:return t=Gr(13,n,e,i),t.elementType=Fv,t.lanes=s,t;case Uv:return t=Gr(19,n,e,i),t.elementType=Uv,t.lanes=s,t;case kA:return Em(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case OA:a=10;break e;case AA:a=9;break e;case uw:a=11;break e;case cw:a=14;break e;case sa:a=16,r=null;break e}throw Error(ge(130,t==null?t:typeof t,""))}return e=Gr(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function go(t,e,n,r){return t=Gr(7,t,r,e),t.lanes=n,t}function Em(t,e,n,r){return t=Gr(22,t,r,e),t.elementType=kA,t.lanes=n,t.stateNode={isHidden:!1},t}function _y(t,e,n){return t=Gr(6,t,null,e),t.lanes=n,t}function by(t,e,n){return e=Gr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iB(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ey(0),this.expirationTimes=ey(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ey(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hw(t,e,n,r,i,s,a,l,u){return t=new iB(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Gr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aw(s),t}function sB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function bC(t){if(!t)return Oa;t=t._reactInternals;e:{if(No(t)!==t||t.tag!==1)throw Error(ge(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ge(171))}if(t.tag===1){var n=t.type;if(pr(n))return bk(t,n,e)}return e}function wC(t,e,n,r,i,s,a,l,u){return t=Hw(n,r,!0,t,i,s,a,l,u),t.context=bC(null),n=t.current,r=er(),i=xa(n),s=ks(r,i),s.callback=e??null,ba(n,s,i),t.current.lanes=i,Yf(t,i,r),mr(t,r),t}function Sm(t,e,n,r){var i=e.current,s=er(),a=xa(i);return n=bC(n),e.context===null?e.context=n:e.pendingContext=n,e=ks(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ba(i,e,a),t!==null&&(Pi(t,i,a,s),Mh(t,i,a)),a}function Cp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function BE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zw(t,e){BE(t,e),(t=t.alternate)&&BE(t,e)}function aB(){return null}var xC=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ww(t){this._internalRoot=t}Tm.prototype.render=Ww.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ge(409));Sm(t,e,null,null)};Tm.prototype.unmount=Ww.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;So(function(){Sm(null,t,null,null)}),e[Ds]=null}};function Tm(t){this._internalRoot=t}Tm.prototype.unstable_scheduleHydration=function(t){if(t){var e=QA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ua.length&&e!==0&&e<ua[n].priority;n++);ua.splice(n,0,t),n===0&&tk(t)}};function Gw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function FE(){}function oB(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Cp(a);s.call(c)}}var a=wC(e,r,t,0,null,!1,!1,"",FE);return t._reactRootContainer=a,t[Ds]=a.current,df(t.nodeType===8?t.parentNode:t),So(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=Cp(u);l.call(c)}}var u=Hw(t,0,!1,null,null,!1,!1,"",FE);return t._reactRootContainer=u,t[Ds]=u.current,df(t.nodeType===8?t.parentNode:t),So(function(){Sm(e,u,n,r)}),u}function Om(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var u=Cp(a);l.call(u)}}Sm(e,a,t,i)}else a=oB(n,e,t,i,r);return Cp(a)}XA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bc(e.pendingLanes);n!==0&&(hw(e,n|1),mr(e,cn()),!(mt&6)&&(Kl=cn()+500,Da()))}break;case 13:So(function(){var r=$s(t,1);if(r!==null){var i=er();Pi(r,t,1,i)}}),Zw(t,1)}};pw=function(t){if(t.tag===13){var e=$s(t,134217728);if(e!==null){var n=er();Pi(e,t,134217728,n)}Zw(t,134217728)}};YA=function(t){if(t.tag===13){var e=xa(t),n=$s(t,e);if(n!==null){var r=er();Pi(n,t,e,r)}Zw(t,e)}};QA=function(){return Pt};ek=function(t,e){var n=Pt;try{return Pt=t,e()}finally{Pt=n}};Xv=function(t,e,n){switch(e){case"input":if(qv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ym(r);if(!i)throw Error(ge(90));RA(r),qv(r,i)}}}break;case"textarea":NA(t,n);break;case"select":e=n.value,e!=null&&Cl(t,!!n.multiple,e,!1)}};FA=Uw;UA=So;var lB={usingClientEntryPoint:!1,Events:[ed,cl,ym,$A,BA,Uw]},tc={findFiberByHostInstance:ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uB={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qA(t),t===null?null:t.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||aB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{hm=nh.inject(uB),ns=nh}catch{}}Nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lB;Nr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gw(e))throw Error(ge(200));return sB(t,e,null,n)};Nr.createRoot=function(t,e){if(!Gw(t))throw Error(ge(299));var n=!1,r="",i=xC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Hw(t,1,!1,null,null,n,!1,r,i),t[Ds]=e.current,df(t.nodeType===8?t.parentNode:t),new Ww(e)};Nr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ge(188)):(t=Object.keys(t).join(","),Error(ge(268,t)));return t=qA(e),t=t===null?null:t.stateNode,t};Nr.flushSync=function(t){return So(t)};Nr.hydrate=function(t,e,n){if(!Pm(e))throw Error(ge(200));return Om(null,t,e,!0,n)};Nr.hydrateRoot=function(t,e,n){if(!Gw(t))throw Error(ge(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=xC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=wC(e,null,t,1,n??null,i,!1,s,a),t[Ds]=e.current,df(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Tm(e)};Nr.render=function(t,e,n){if(!Pm(e))throw Error(ge(200));return Om(null,t,e,!1,n)};Nr.unmountComponentAtNode=function(t){if(!Pm(t))throw Error(ge(40));return t._reactRootContainer?(So(function(){Om(null,null,t,!1,function(){t._reactRootContainer=null,t[Ds]=null})}),!0):!1};Nr.unstable_batchedUpdates=Uw;Nr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pm(n))throw Error(ge(200));if(t==null||t._reactInternals===void 0)throw Error(ge(38));return Om(t,e,n,!1,r)};Nr.version="18.3.1-next-f1338f8080-20240426";function EC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EC)}catch(t){console.error(t)}}EC(),EA.exports=Nr;var nd=EA.exports;const cB=Ro(nd),fB=fA({__proto__:null,default:cB},[nd]);var UE=nd;Dv.createRoot=UE.createRoot,Dv.hydrateRoot=UE.hydrateRoot;/**
 * @remix-run/router v1.15.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rn(){return rn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rn.apply(this,arguments)}var un;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(un||(un={}));const zE="popstate";function dB(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:l}=r.location;return wf("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:To(i)}return pB(e,n,null,t)}function nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Jl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hB(){return Math.random().toString(36).substr(2,8)}function VE(t,e){return{usr:t.state,key:t.key,idx:e}}function wf(t,e,n,r){return n===void 0&&(n=null),rn({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qs(e):e,{state:n,key:e&&e.key||r||hB()})}function To(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function pB(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l=un.Pop,u=null,c=f();c==null&&(c=0,a.replaceState(rn({},a.state,{idx:c}),""));function f(){return(a.state||{idx:null}).idx}function d(){l=un.Pop;let w=f(),y=w==null?null:w-c;c=w,u&&u({action:l,location:b.location,delta:y})}function p(w,y){l=un.Push;let v=wf(b.location,w,y);n&&n(v,w),c=f()+1;let x=VE(v,c),E=b.createHref(v);try{a.pushState(x,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(E)}s&&u&&u({action:l,location:b.location,delta:1})}function m(w,y){l=un.Replace;let v=wf(b.location,w,y);n&&n(v,w),c=f();let x=VE(v,c),E=b.createHref(v);a.replaceState(x,"",E),s&&u&&u({action:l,location:b.location,delta:0})}function g(w){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof w=="string"?w:To(w);return v=v.replace(/ $/,"%20"),nt(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let b={get action(){return l},get location(){return t(i,a)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(zE,d),u=w,()=>{i.removeEventListener(zE,d),u=null}},createHref(w){return e(i,w)},createURL:g,encodeLocation(w){let y=g(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:m,go(w){return a.go(w)}};return b}var en;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(en||(en={}));const mB=new Set(["lazy","caseSensitive","path","id","index","children"]);function gB(t){return t.index===!0}function C_(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let a=[...n,s],l=typeof i.id=="string"?i.id:a.join("-");if(nt(i.index!==!0||!i.children,"Cannot specify children on an index route"),nt(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),gB(i)){let u=rn({},i,e(i),{id:l});return r[l]=u,u}else{let u=rn({},i,e(i),{id:l,children:void 0});return r[l]=u,i.children&&(u.children=C_(i.children,e,a,r)),u}})}function yl(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?qs(e):e,i=hu(r.pathname||"/",n);if(i==null)return null;let s=SC(t);vB(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=CB(i);a=OB(s[l],u)}return a}function yB(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function SC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};u.relativePath.startsWith("/")&&(nt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Cs([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(nt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),SC(s.children,e,f,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:TB(c,s.index),routesMeta:f})};return t.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,a);else for(let u of TC(s.path))i(s,a,u)}),e}function TC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=TC(r.join("/")),l=[];return l.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...a),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function vB(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PB(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _B=/^:[\w-]+$/,bB=3,wB=2,xB=1,EB=10,SB=-2,qE=t=>t==="*";function TB(t,e){let n=t.split("/"),r=n.length;return n.some(qE)&&(r+=SB),e&&(r+=wB),n.filter(i=>!qE(i)).reduce((i,s)=>i+(_B.test(s)?bB:s===""?xB:EB),r)}function PB(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function OB(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",f=AB({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c);if(!f)return null;Object.assign(r,f.params);let d=l.route;s.push({params:r,pathname:Cs([i,f.pathname]),pathnameBase:NB(Cs([i,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(i=Cs([i,f.pathnameBase]))}return s}function AB(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kB(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,f,d)=>{let{paramName:p,isOptional:m}=f;if(p==="*"){let b=l[d]||"";a=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const g=l[d];return m&&!g?c[p]=void 0:c[p]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function kB(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Jl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function CB(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function hu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function RB(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?qs(t):t;return{pathname:n?n.startsWith("/")?n:LB(n,e):e,search:IB(r),hash:jB(i)}}function LB(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function wy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Am(t,e){let n=PC(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function km(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=qs(t):(i=rn({},t),nt(!i.pathname||!i.pathname.includes("?"),wy("?","pathname","search",i)),nt(!i.pathname||!i.pathname.includes("#"),wy("#","pathname","hash",i)),nt(!i.search||!i.search.includes("#"),wy("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let d=e.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}l=d>=0?e[d]:"/"}let u=RB(i,l),c=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||f)&&(u.pathname+="/"),u}const Cs=t=>t.join("/").replace(/\/\/+/g,"/"),NB=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),IB=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,jB=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class R_ extends Error{}class MB{constructor(e,n){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],nt(e&&typeof e=="object"&&!Array.isArray(e),"defer() only accepts plain objects");let r;this.abortPromise=new Promise((s,a)=>r=a),this.controller=new AbortController;let i=()=>r(new R_("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",i),this.controller.signal.addEventListener("abort",i),this.data=Object.entries(e).reduce((s,a)=>{let[l,u]=a;return Object.assign(s,{[l]:this.trackPromise(l,u)})},{}),this.done&&this.unlistenAbortSignal(),this.init=n}trackPromise(e,n){if(!(n instanceof Promise))return n;this.deferredKeys.push(e),this.pendingKeysSet.add(e);let r=Promise.race([n,this.abortPromise]).then(i=>this.onSettle(r,e,void 0,i),i=>this.onSettle(r,e,i));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(e,n,r,i){if(this.controller.signal.aborted&&r instanceof R_)return this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:()=>r}),Promise.reject(r);if(this.pendingKeysSet.delete(n),this.done&&this.unlistenAbortSignal(),r===void 0&&i===void 0){let s=new Error('Deferred data for key "'+n+'" resolved/rejected with `undefined`, you must resolve/reject with a value or `null`.');return Object.defineProperty(e,"_error",{get:()=>s}),this.emit(!1,n),Promise.reject(s)}return i===void 0?(Object.defineProperty(e,"_error",{get:()=>r}),this.emit(!1,n),Promise.reject(r)):(Object.defineProperty(e,"_data",{get:()=>i}),this.emit(!1,n),i)}emit(e,n){this.subscribers.forEach(r=>r(e,n))}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((e,n)=>this.pendingKeysSet.delete(n)),this.emit(!0)}async resolveData(e){let n=!1;if(!this.done){let r=()=>this.cancel();e.addEventListener("abort",r),n=await new Promise(i=>{this.subscribe(s=>{e.removeEventListener("abort",r),(s||this.done)&&i(s)})})}return n}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return nt(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((e,n)=>{let[r,i]=n;return Object.assign(e,{[r]:$B(i)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function DB(t){return t instanceof Promise&&t._tracked===!0}function $B(t){if(!DB(t))return t;if(t._error)throw t._error;return t._data}const OC=function(e,n){n===void 0&&(n={});let r=typeof n=="number"?{status:n}:n;return new MB(e,r)};class Kw{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function AC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kC=["post","put","patch","delete"],BB=new Set(kC),FB=["get",...kC],UB=new Set(FB),zB=new Set([301,302,303,307,308]),VB=new Set([307,308]),xy={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},qB={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},nc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},CC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,HB=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),RC="remix-router-transitions";function ZB(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;nt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let te=t.detectErrorBoundary;i=se=>({hasErrorBoundary:te(se)})}else i=HB;let s={},a=C_(t.routes,i,void 0,s),l,u=t.basename||"/",c=rn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),f=null,d=new Set,p=null,m=null,g=null,b=t.hydrationData!=null,w=yl(a,t.history.location,u),y=null;if(w==null){let te=qr(404,{pathname:t.history.location.pathname}),{matches:se,route:ue}=YE(a);w=se,y={[ue.id]:te}}let v,x=w.some(te=>te.route.lazy),E=w.some(te=>te.route.loader);if(x)v=!1;else if(!E)v=!0;else if(c.v7_partialHydration){let te=t.hydrationData?t.hydrationData.loaderData:null,se=t.hydrationData?t.hydrationData.errors:null;v=w.every(ue=>ue.route.loader&&ue.route.loader.hydrate!==!0&&(te&&te[ue.route.id]!==void 0||se&&se[ue.route.id]!==void 0))}else v=t.hydrationData!=null;let T,O={historyAction:t.history.action,location:t.history.location,matches:w,initialized:v,navigation:xy,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||y,fetchers:new Map,blockers:new Map},A=un.Pop,C=!1,M,R=!1,P=new Map,N=null,$=!1,D=!1,z=[],G=[],W=new Map,Z=0,q=-1,B=new Map,j=new Set,U=new Map,H=new Map,Y=new Set,J=new Map,V=new Map,Q=!1;function re(){if(f=t.history.listen(te=>{let{action:se,location:ue,delta:xe}=te;if(Q){Q=!1;return}Jl(V.size===0||xe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ke=Bi({currentLocation:O.location,nextLocation:ue,historyAction:se});if(ke&&xe!=null){Q=!0,t.history.go(xe*-1),hs(ke,{state:"blocked",location:ue,proceed(){hs(ke,{state:"proceeding",proceed:void 0,reset:void 0,location:ue}),t.history.go(xe)},reset(){let Ke=new Map(O.blockers);Ke.set(ke,nc),me({blockers:Ke})}});return}return We(se,ue)}),n){rF(e,P);let te=()=>iF(e,P);e.addEventListener("pagehide",te),N=()=>e.removeEventListener("pagehide",te)}return O.initialized||We(un.Pop,O.location,{initialHydration:!0}),T}function ie(){f&&f(),N&&N(),d.clear(),M&&M.abort(),O.fetchers.forEach((te,se)=>sn(se)),O.blockers.forEach((te,se)=>$i(se))}function ce(te){return d.add(te),()=>d.delete(te)}function me(te,se){se===void 0&&(se={}),O=rn({},O,te);let ue=[],xe=[];c.v7_fetcherPersist&&O.fetchers.forEach((ke,Ke)=>{ke.state==="idle"&&(Y.has(Ke)?xe.push(Ke):ue.push(Ke))}),[...d].forEach(ke=>ke(O,{deletedFetchers:xe,unstable_viewTransitionOpts:se.viewTransitionOpts,unstable_flushSync:se.flushSync===!0})),c.v7_fetcherPersist&&(ue.forEach(ke=>O.fetchers.delete(ke)),xe.forEach(ke=>sn(ke)))}function Ce(te,se,ue){var xe,ke;let{flushSync:Ke}=ue===void 0?{}:ue,Fe=O.actionData!=null&&O.navigation.formMethod!=null&&_i(O.navigation.formMethod)&&O.navigation.state==="loading"&&((xe=te.state)==null?void 0:xe._isRedirect)!==!0,Re;se.actionData?Object.keys(se.actionData).length>0?Re=se.actionData:Re=null:Fe?Re=O.actionData:Re=null;let Le=se.loaderData?XE(O.loaderData,se.loaderData,se.matches||[],se.errors):O.loaderData,Qe=O.blockers;Qe.size>0&&(Qe=new Map(Qe),Qe.forEach((_e,xt)=>Qe.set(xt,nc)));let qt=C===!0||O.navigation.formMethod!=null&&_i(O.navigation.formMethod)&&((ke=te.state)==null?void 0:ke._isRedirect)!==!0;l&&(a=l,l=void 0),$||A===un.Pop||(A===un.Push?t.history.push(te,te.state):A===un.Replace&&t.history.replace(te,te.state));let Me;if(A===un.Pop){let _e=P.get(O.location.pathname);_e&&_e.has(te.pathname)?Me={currentLocation:O.location,nextLocation:te}:P.has(te.pathname)&&(Me={currentLocation:te,nextLocation:O.location})}else if(R){let _e=P.get(O.location.pathname);_e?_e.add(te.pathname):(_e=new Set([te.pathname]),P.set(O.location.pathname,_e)),Me={currentLocation:O.location,nextLocation:te}}me(rn({},se,{actionData:Re,loaderData:Le,historyAction:A,location:te,initialized:!0,navigation:xy,revalidation:"idle",restoreScrollPosition:za(te,se.matches||O.matches),preventScrollReset:qt,blockers:Qe}),{viewTransitionOpts:Me,flushSync:Ke===!0}),A=un.Pop,C=!1,R=!1,$=!1,D=!1,z=[],G=[]}async function je(te,se){if(typeof te=="number"){t.history.go(te);return}let ue=L_(O.location,O.matches,u,c.v7_prependBasename,te,c.v7_relativeSplatPath,se==null?void 0:se.fromRouteId,se==null?void 0:se.relative),{path:xe,submission:ke,error:Ke}=HE(c.v7_normalizeFormMethod,!1,ue,se),Fe=O.location,Re=wf(O.location,xe,se&&se.state);Re=rn({},Re,t.history.encodeLocation(Re));let Le=se&&se.replace!=null?se.replace:void 0,Qe=un.Push;Le===!0?Qe=un.Replace:Le===!1||ke!=null&&_i(ke.formMethod)&&ke.formAction===O.location.pathname+O.location.search&&(Qe=un.Replace);let qt=se&&"preventScrollReset"in se?se.preventScrollReset===!0:void 0,Me=(se&&se.unstable_flushSync)===!0,_e=Bi({currentLocation:Fe,nextLocation:Re,historyAction:Qe});if(_e){hs(_e,{state:"blocked",location:Re,proceed(){hs(_e,{state:"proceeding",proceed:void 0,reset:void 0,location:Re}),je(te,se)},reset(){let xt=new Map(O.blockers);xt.set(_e,nc),me({blockers:xt})}});return}return await We(Qe,Re,{submission:ke,pendingError:Ke,preventScrollReset:qt,replace:se&&se.replace,enableViewTransition:se&&se.unstable_viewTransition,flushSync:Me})}function Ze(){if($e(),me({revalidation:"loading"}),O.navigation.state!=="submitting"){if(O.navigation.state==="idle"){We(O.historyAction,O.location,{startUninterruptedRevalidation:!0});return}We(A||O.historyAction,O.navigation.location,{overrideNavigation:O.navigation})}}async function We(te,se,ue){M&&M.abort(),M=null,A=te,$=(ue&&ue.startUninterruptedRevalidation)===!0,ri(O.location,O.matches),C=(ue&&ue.preventScrollReset)===!0,R=(ue&&ue.enableViewTransition)===!0;let xe=l||a,ke=ue&&ue.overrideNavigation,Ke=yl(xe,se,u),Fe=(ue&&ue.flushSync)===!0;if(!Ke){let xt=qr(404,{pathname:se.pathname}),{matches:vn,route:Ft}=YE(xe);ni(),Ce(se,{matches:vn,loaderData:{},errors:{[Ft.id]:xt}},{flushSync:Fe});return}if(O.initialized&&!D&&XB(O.location,se)&&!(ue&&ue.submission&&_i(ue.submission.formMethod))){Ce(se,{matches:Ke},{flushSync:Fe});return}M=new AbortController;let Re=ic(t.history,se,M.signal,ue&&ue.submission),Le,Qe;if(ue&&ue.pendingError)Qe={[zc(Ke).route.id]:ue.pendingError};else if(ue&&ue.submission&&_i(ue.submission.formMethod)){let xt=await $t(Re,se,ue.submission,Ke,{replace:ue.replace,flushSync:Fe});if(xt.shortCircuited)return;Le=xt.pendingActionData,Qe=xt.pendingActionError,ke=Ey(se,ue.submission),Fe=!1,Re=new Request(Re.url,{signal:Re.signal})}let{shortCircuited:qt,loaderData:Me,errors:_e}=await At(Re,se,Ke,ke,ue&&ue.submission,ue&&ue.fetcherSubmission,ue&&ue.replace,ue&&ue.initialHydration===!0,Fe,Le,Qe);qt||(M=null,Ce(se,rn({matches:Ke},Le?{actionData:Le}:{},{loaderData:Me,errors:_e})))}async function $t(te,se,ue,xe,ke){ke===void 0&&(ke={}),$e();let Ke=tF(se,ue);me({navigation:Ke},{flushSync:ke.flushSync===!0});let Fe,Re=I_(xe,se);if(!Re.route.action&&!Re.route.lazy)Fe={type:en.error,error:qr(405,{method:te.method,pathname:se.pathname,routeId:Re.route.id})};else if(Fe=await rc("action",te,Re,xe,s,i,u,c.v7_relativeSplatPath),te.signal.aborted)return{shortCircuited:!0};if(co(Fe)){let Le;return ke&&ke.replace!=null?Le=ke.replace:Le=Fe.location===O.location.pathname+O.location.search,await be(O,Fe,{submission:ue,replace:Le}),{shortCircuited:!0}}if(vl(Fe)){let Le=zc(xe,Re.route.id);return(ke&&ke.replace)!==!0&&(A=un.Push),{pendingActionData:{},pendingActionError:{[Le.route.id]:Fe.error}}}if(uo(Fe))throw qr(400,{type:"defer-action"});return{pendingActionData:{[Re.route.id]:Fe.data}}}async function At(te,se,ue,xe,ke,Ke,Fe,Re,Le,Qe,qt){let Me=xe||Ey(se,ke),_e=ke||Ke||tS(Me),xt=l||a,[vn,Ft]=ZE(t.history,O,ue,_e,se,c.v7_partialHydration&&Re===!0,D,z,G,Y,U,j,xt,u,Qe,qt);if(ni(qe=>!(ue&&ue.some(Ye=>Ye.route.id===qe))||vn&&vn.some(Ye=>Ye.route.id===qe)),q=++Z,vn.length===0&&Ft.length===0){let qe=Bt();return Ce(se,rn({matches:ue,loaderData:{},errors:qt||null},Qe?{actionData:Qe}:{},qe?{fetchers:new Map(O.fetchers)}:{}),{flushSync:Le}),{shortCircuited:!0}}if(!$&&(!c.v7_partialHydration||!Re)){Ft.forEach(Ye=>{let Qt=O.fetchers.get(Ye.key),an=sc(void 0,Qt?Qt.data:void 0);O.fetchers.set(Ye.key,an)});let qe=Qe||O.actionData;me(rn({navigation:Me},qe?Object.keys(qe).length===0?{actionData:null}:{actionData:qe}:{},Ft.length>0?{fetchers:new Map(O.fetchers)}:{}),{flushSync:Le})}Ft.forEach(qe=>{W.has(qe.key)&&Cn(qe.key),qe.controller&&W.set(qe.key,qe.controller)});let jr=()=>Ft.forEach(qe=>Cn(qe.key));M&&M.signal.addEventListener("abort",jr);let{results:Fi,loaderResults:ii,fetcherResults:Ee}=await he(O.matches,ue,vn,Ft,te);if(te.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",jr),Ft.forEach(qe=>W.delete(qe.key));let ee=QE(Fi);if(ee){if(ee.idx>=vn.length){let qe=Ft[ee.idx-vn.length].key;j.add(qe)}return await be(O,ee.result,{replace:Fe}),{shortCircuited:!0}}let{loaderData:ye,errors:Oe}=JE(O,ue,vn,ii,qt,Ft,Ee,J);J.forEach((qe,Ye)=>{qe.subscribe(Qt=>{(Qt||qe.done)&&J.delete(Ye)})}),c.v7_partialHydration&&Re&&O.errors&&Object.entries(O.errors).filter(qe=>{let[Ye]=qe;return!vn.some(Qt=>Qt.route.id===Ye)}).forEach(qe=>{let[Ye,Qt]=qe;Oe=Object.assign(Oe||{},{[Ye]:Qt})});let gt=Bt(),Nt=ti(q),Ut=gt||Nt||Ft.length>0;return rn({loaderData:ye,errors:Oe},Ut?{fetchers:new Map(O.fetchers)}:{})}function oe(te,se,ue,xe){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");W.has(te)&&Cn(te);let ke=(xe&&xe.unstable_flushSync)===!0,Ke=l||a,Fe=L_(O.location,O.matches,u,c.v7_prependBasename,ue,c.v7_relativeSplatPath,se,xe==null?void 0:xe.relative),Re=yl(Ke,Fe,u);if(!Re){Ve(te,se,qr(404,{pathname:Fe}),{flushSync:ke});return}let{path:Le,submission:Qe,error:qt}=HE(c.v7_normalizeFormMethod,!0,Fe,xe);if(qt){Ve(te,se,qt,{flushSync:ke});return}let Me=I_(Re,Le);if(C=(xe&&xe.preventScrollReset)===!0,Qe&&_i(Qe.formMethod)){fe(te,se,Le,Me,Re,ke,Qe);return}U.set(te,{routeId:se,path:Le}),we(te,se,Le,Me,Re,ke,Qe)}async function fe(te,se,ue,xe,ke,Ke,Fe){if($e(),U.delete(te),!xe.route.action&&!xe.route.lazy){let Ye=qr(405,{method:Fe.formMethod,pathname:ue,routeId:se});Ve(te,se,Ye,{flushSync:Ke});return}let Re=O.fetchers.get(te);Be(te,nF(Fe,Re),{flushSync:Ke});let Le=new AbortController,Qe=ic(t.history,ue,Le.signal,Fe);W.set(te,Le);let qt=Z,Me=await rc("action",Qe,xe,ke,s,i,u,c.v7_relativeSplatPath);if(Qe.signal.aborted){W.get(te)===Le&&W.delete(te);return}if(c.v7_fetcherPersist&&Y.has(te)){if(co(Me)||vl(Me)){Be(te,ra(void 0));return}}else{if(co(Me))if(W.delete(te),q>qt){Be(te,ra(void 0));return}else return j.add(te),Be(te,sc(Fe)),be(O,Me,{fetcherSubmission:Fe});if(vl(Me)){Ve(te,se,Me.error);return}}if(uo(Me))throw qr(400,{type:"defer-action"});let _e=O.navigation.location||O.location,xt=ic(t.history,_e,Le.signal),vn=l||a,Ft=O.navigation.state!=="idle"?yl(vn,O.navigation.location,u):O.matches;nt(Ft,"Didn't find any matches after fetcher action");let jr=++Z;B.set(te,jr);let Fi=sc(Fe,Me.data);O.fetchers.set(te,Fi);let[ii,Ee]=ZE(t.history,O,Ft,Fe,_e,!1,D,z,G,Y,U,j,vn,u,{[xe.route.id]:Me.data},void 0);Ee.filter(Ye=>Ye.key!==te).forEach(Ye=>{let Qt=Ye.key,an=O.fetchers.get(Qt),$o=sc(void 0,an?an.data:void 0);O.fetchers.set(Qt,$o),W.has(Qt)&&Cn(Qt),Ye.controller&&W.set(Qt,Ye.controller)}),me({fetchers:new Map(O.fetchers)});let ee=()=>Ee.forEach(Ye=>Cn(Ye.key));Le.signal.addEventListener("abort",ee);let{results:ye,loaderResults:Oe,fetcherResults:gt}=await he(O.matches,Ft,ii,Ee,xt);if(Le.signal.aborted)return;Le.signal.removeEventListener("abort",ee),B.delete(te),W.delete(te),Ee.forEach(Ye=>W.delete(Ye.key));let Nt=QE(ye);if(Nt){if(Nt.idx>=ii.length){let Ye=Ee[Nt.idx-ii.length].key;j.add(Ye)}return be(O,Nt.result)}let{loaderData:Ut,errors:qe}=JE(O,O.matches,ii,Oe,void 0,Ee,gt,J);if(O.fetchers.has(te)){let Ye=ra(Me.data);O.fetchers.set(te,Ye)}ti(jr),O.navigation.state==="loading"&&jr>q?(nt(A,"Expected pending action"),M&&M.abort(),Ce(O.navigation.location,{matches:Ft,loaderData:Ut,errors:qe,fetchers:new Map(O.fetchers)})):(me({errors:qe,loaderData:XE(O.loaderData,Ut,Ft,qe),fetchers:new Map(O.fetchers)}),D=!1)}async function we(te,se,ue,xe,ke,Ke,Fe){let Re=O.fetchers.get(te);Be(te,sc(Fe,Re?Re.data:void 0),{flushSync:Ke});let Le=new AbortController,Qe=ic(t.history,ue,Le.signal);W.set(te,Le);let qt=Z,Me=await rc("loader",Qe,xe,ke,s,i,u,c.v7_relativeSplatPath);if(uo(Me)&&(Me=await IC(Me,Qe.signal,!0)||Me),W.get(te)===Le&&W.delete(te),!Qe.signal.aborted){if(Y.has(te)){Be(te,ra(void 0));return}if(co(Me))if(q>qt){Be(te,ra(void 0));return}else{j.add(te),await be(O,Me);return}if(vl(Me)){Ve(te,se,Me.error);return}nt(!uo(Me),"Unhandled fetcher deferred data"),Be(te,ra(Me.data))}}async function be(te,se,ue){let{submission:xe,fetcherSubmission:ke,replace:Ke}=ue===void 0?{}:ue;se.revalidate&&(D=!0);let Fe=wf(te.location,se.location,{_isRedirect:!0});if(nt(Fe,"Expected a location on the redirect navigation"),n){let _e=!1;if(se.reloadDocument)_e=!0;else if(CC.test(se.location)){const xt=t.history.createURL(se.location);_e=xt.origin!==e.location.origin||hu(xt.pathname,u)==null}if(_e){Ke?e.location.replace(se.location):e.location.assign(se.location);return}}M=null;let Re=Ke===!0?un.Replace:un.Push,{formMethod:Le,formAction:Qe,formEncType:qt}=te.navigation;!xe&&!ke&&Le&&Qe&&qt&&(xe=tS(te.navigation));let Me=xe||ke;if(VB.has(se.status)&&Me&&_i(Me.formMethod))await We(Re,Fe,{submission:rn({},Me,{formAction:se.location}),preventScrollReset:C});else{let _e=Ey(Fe,xe);await We(Re,Fe,{overrideNavigation:_e,fetcherSubmission:ke,preventScrollReset:C})}}async function he(te,se,ue,xe,ke){let Ke=await Promise.all([...ue.map(Le=>rc("loader",ke,Le,se,s,i,u,c.v7_relativeSplatPath)),...xe.map(Le=>Le.matches&&Le.match&&Le.controller?rc("loader",ic(t.history,Le.path,Le.controller.signal),Le.match,Le.matches,s,i,u,c.v7_relativeSplatPath):{type:en.error,error:qr(404,{pathname:Le.path})})]),Fe=Ke.slice(0,ue.length),Re=Ke.slice(ue.length);return await Promise.all([eS(te,ue,Fe,Fe.map(()=>ke.signal),!1,O.loaderData),eS(te,xe.map(Le=>Le.match),Re,xe.map(Le=>Le.controller?Le.controller.signal:null),!0)]),{results:Ke,loaderResults:Fe,fetcherResults:Re}}function $e(){D=!0,z.push(...ni()),U.forEach((te,se)=>{W.has(se)&&(G.push(se),Cn(se))})}function Be(te,se,ue){ue===void 0&&(ue={}),O.fetchers.set(te,se),me({fetchers:new Map(O.fetchers)},{flushSync:(ue&&ue.flushSync)===!0})}function Ve(te,se,ue,xe){xe===void 0&&(xe={});let ke=zc(O.matches,se);sn(te),me({errors:{[ke.route.id]:ue},fetchers:new Map(O.fetchers)},{flushSync:(xe&&xe.flushSync)===!0})}function Yt(te){return c.v7_fetcherPersist&&(H.set(te,(H.get(te)||0)+1),Y.has(te)&&Y.delete(te)),O.fetchers.get(te)||qB}function sn(te){let se=O.fetchers.get(te);W.has(te)&&!(se&&se.state==="loading"&&B.has(te))&&Cn(te),U.delete(te),B.delete(te),j.delete(te),Y.delete(te),O.fetchers.delete(te)}function bt(te){if(c.v7_fetcherPersist){let se=(H.get(te)||0)-1;se<=0?(H.delete(te),Y.add(te)):H.set(te,se)}else sn(te);me({fetchers:new Map(O.fetchers)})}function Cn(te){let se=W.get(te);nt(se,"Expected fetch controller: "+te),se.abort(),W.delete(te)}function wt(te){for(let se of te){let ue=Yt(se),xe=ra(ue.data);O.fetchers.set(se,xe)}}function Bt(){let te=[],se=!1;for(let ue of j){let xe=O.fetchers.get(ue);nt(xe,"Expected fetcher: "+ue),xe.state==="loading"&&(j.delete(ue),te.push(ue),se=!0)}return wt(te),se}function ti(te){let se=[];for(let[ue,xe]of B)if(xe<te){let ke=O.fetchers.get(ue);nt(ke,"Expected fetcher: "+ue),ke.state==="loading"&&(Cn(ue),B.delete(ue),se.push(ue))}return wt(se),se.length>0}function Gs(te,se){let ue=O.blockers.get(te)||nc;return V.get(te)!==se&&V.set(te,se),ue}function $i(te){O.blockers.delete(te),V.delete(te)}function hs(te,se){let ue=O.blockers.get(te)||nc;nt(ue.state==="unblocked"&&se.state==="blocked"||ue.state==="blocked"&&se.state==="blocked"||ue.state==="blocked"&&se.state==="proceeding"||ue.state==="blocked"&&se.state==="unblocked"||ue.state==="proceeding"&&se.state==="unblocked","Invalid blocker state transition: "+ue.state+" -> "+se.state);let xe=new Map(O.blockers);xe.set(te,se),me({blockers:xe})}function Bi(te){let{currentLocation:se,nextLocation:ue,historyAction:xe}=te;if(V.size===0)return;V.size>1&&Jl(!1,"A router only supports one blocker at a time");let ke=Array.from(V.entries()),[Ke,Fe]=ke[ke.length-1],Re=O.blockers.get(Ke);if(!(Re&&Re.state==="proceeding")&&Fe({currentLocation:se,nextLocation:ue,historyAction:xe}))return Ke}function ni(te){let se=[];return J.forEach((ue,xe)=>{(!te||te(xe))&&(ue.cancel(),se.push(xe),J.delete(xe))}),se}function ju(te,se,ue){if(p=te,g=se,m=ue||null,!b&&O.navigation===xy){b=!0;let xe=za(O.location,O.matches);xe!=null&&me({restoreScrollPosition:xe})}return()=>{p=null,g=null,m=null}}function Vt(te,se){return m&&m(te,se.map(xe=>yB(xe,O.loaderData)))||te.key}function ri(te,se){if(p&&g){let ue=Vt(te,se);p[ue]=g()}}function za(te,se){if(p){let ue=Vt(te,se),xe=p[ue];if(typeof xe=="number")return xe}return null}function Va(te){s={},l=C_(te,i,void 0,s)}return T={get basename(){return u},get future(){return c},get state(){return O},get routes(){return a},get window(){return e},initialize:re,subscribe:ce,enableScrollRestoration:ju,navigate:je,fetch:oe,revalidate:Ze,createHref:te=>t.history.createHref(te),encodeLocation:te=>t.history.encodeLocation(te),getFetcher:Yt,deleteFetcher:bt,dispose:ie,getBlocker:Gs,deleteBlocker:$i,_internalFetchControllers:W,_internalActiveDeferreds:J,_internalSetRoutes:Va},T}function WB(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function L_(t,e,n,r,i,s,a,l){let u,c;if(a){u=[];for(let d of e)if(u.push(d),d.route.id===a){c=d;break}}else u=e,c=e[e.length-1];let f=km(i||".",Am(u,s),hu(t.pathname,n)||t.pathname,l==="path");return i==null&&(f.search=t.search,f.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!Jw(f.search)&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(f.pathname=f.pathname==="/"?n:Cs([n,f.pathname])),To(f)}function HE(t,e,n,r){if(!r||!WB(r))return{path:n};if(r.formMethod&&!eF(r.formMethod))return{path:n,error:qr(405,{method:r.formMethod})};let i=()=>({path:n,error:qr(400,{type:"invalid-body"})}),s=r.formMethod||"get",a=t?s.toUpperCase():s.toLowerCase(),l=NC(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!_i(a))return i();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((m,g)=>{let[b,w]=g;return""+m+b+"="+w+`
`},""):String(r.body);return{path:n,submission:{formMethod:a,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!_i(a))return i();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:a,formAction:l,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}nt(typeof FormData=="function","FormData is not available in this environment");let u,c;if(r.formData)u=N_(r.formData),c=r.formData;else if(r.body instanceof FormData)u=N_(r.body),c=r.body;else if(r.body instanceof URLSearchParams)u=r.body,c=KE(u);else if(r.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(r.body),c=KE(u)}catch{return i()}let f={formMethod:a,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(_i(f.formMethod))return{path:n,submission:f};let d=qs(n);return e&&d.search&&Jw(d.search)&&u.append("index",""),d.search="?"+u,{path:To(d),submission:f}}function GB(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function ZE(t,e,n,r,i,s,a,l,u,c,f,d,p,m,g,b){let w=b?Object.values(b)[0]:g?Object.values(g)[0]:void 0,y=t.createURL(e.location),v=t.createURL(i),x=b?Object.keys(b)[0]:void 0,T=GB(n,x).filter((A,C)=>{let{route:M}=A;if(M.lazy)return!0;if(M.loader==null)return!1;if(s)return M.loader.hydrate?!0:e.loaderData[M.id]===void 0&&(!e.errors||e.errors[M.id]===void 0);if(KB(e.loaderData,e.matches[C],A)||l.some(N=>N===A.route.id))return!0;let R=e.matches[C],P=A;return WE(A,rn({currentUrl:y,currentParams:R.params,nextUrl:v,nextParams:P.params},r,{actionResult:w,defaultShouldRevalidate:a||y.pathname+y.search===v.pathname+v.search||y.search!==v.search||LC(R,P)}))}),O=[];return f.forEach((A,C)=>{if(s||!n.some($=>$.route.id===A.routeId)||c.has(C))return;let M=yl(p,A.path,m);if(!M){O.push({key:C,routeId:A.routeId,path:A.path,matches:null,match:null,controller:null});return}let R=e.fetchers.get(C),P=I_(M,A.path),N=!1;d.has(C)?N=!1:u.includes(C)?N=!0:R&&R.state!=="idle"&&R.data===void 0?N=a:N=WE(P,rn({currentUrl:y,currentParams:e.matches[e.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params},r,{actionResult:w,defaultShouldRevalidate:a})),N&&O.push({key:C,routeId:A.routeId,path:A.path,matches:M,match:P,controller:new AbortController})}),[T,O]}function KB(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function LC(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function WE(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function GE(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];nt(i,"No route found in manifest");let s={};for(let a in r){let u=i[a]!==void 0&&a!=="hasErrorBoundary";Jl(!u,'Route "'+i.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!u&&!mB.has(a)&&(s[a]=r[a])}Object.assign(i,s),Object.assign(i,rn({},e(i),{lazy:void 0}))}async function rc(t,e,n,r,i,s,a,l,u){u===void 0&&(u={});let c,f,d,p=b=>{let w,y=new Promise((v,x)=>w=x);return d=()=>w(),e.signal.addEventListener("abort",d),Promise.race([b({request:e,params:n.params,context:u.requestContext}),y])};try{let b=n.route[t];if(n.route.lazy)if(b){let w,y=await Promise.all([p(b).catch(v=>{w=v}),GE(n.route,s,i)]);if(w)throw w;f=y[0]}else if(await GE(n.route,s,i),b=n.route[t],b)f=await p(b);else if(t==="action"){let w=new URL(e.url),y=w.pathname+w.search;throw qr(405,{method:e.method,pathname:y,routeId:n.route.id})}else return{type:en.data,data:void 0};else if(b)f=await p(b);else{let w=new URL(e.url),y=w.pathname+w.search;throw qr(404,{pathname:y})}nt(f!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(b){c=en.error,f=b}finally{d&&e.signal.removeEventListener("abort",d)}if(QB(f)){let b=f.status;if(zB.has(b)){let y=f.headers.get("Location");if(nt(y,"Redirects returned/thrown from loaders/actions must have a Location header"),!CC.test(y))y=L_(new URL(e.url),r.slice(0,r.indexOf(n)+1),a,!0,y,l);else if(!u.isStaticRequest){let v=new URL(e.url),x=y.startsWith("//")?new URL(v.protocol+y):new URL(y),E=hu(x.pathname,a)!=null;x.origin===v.origin&&E&&(y=x.pathname+x.search+x.hash)}if(u.isStaticRequest)throw f.headers.set("Location",y),f;return{type:en.redirect,status:b,location:y,revalidate:f.headers.get("X-Remix-Revalidate")!==null,reloadDocument:f.headers.get("X-Remix-Reload-Document")!==null}}if(u.isRouteRequest)throw{type:c===en.error?en.error:en.data,response:f};let w;try{let y=f.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?f.body==null?w=null:w=await f.json():w=await f.text()}catch(y){return{type:en.error,error:y}}return c===en.error?{type:c,error:new Kw(b,f.statusText,w),headers:f.headers}:{type:en.data,data:w,statusCode:f.status,headers:f.headers}}if(c===en.error)return{type:c,error:f};if(YB(f)){var m,g;return{type:en.deferred,deferredData:f,statusCode:(m=f.init)==null?void 0:m.status,headers:((g=f.init)==null?void 0:g.headers)&&new Headers(f.init.headers)}}return{type:en.data,data:f}}function ic(t,e,n,r){let i=t.createURL(NC(e)).toString(),s={signal:n};if(r&&_i(r.formMethod)){let{formMethod:a,formEncType:l}=r;s.method=a.toUpperCase(),l==="application/json"?(s.headers=new Headers({"Content-Type":l}),s.body=JSON.stringify(r.json)):l==="text/plain"?s.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?s.body=N_(r.formData):s.body=r.formData}return new Request(i,s)}function N_(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function KE(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function JB(t,e,n,r,i){let s={},a=null,l,u=!1,c={};return n.forEach((f,d)=>{let p=e[d].route.id;if(nt(!co(f),"Cannot handle redirect results in processLoaderData"),vl(f)){let m=zc(t,p),g=f.error;r&&(g=Object.values(r)[0],r=void 0),a=a||{},a[m.route.id]==null&&(a[m.route.id]=g),s[p]=void 0,u||(u=!0,l=AC(f.error)?f.error.status:500),f.headers&&(c[p]=f.headers)}else uo(f)?(i.set(p,f.deferredData),s[p]=f.deferredData.data):s[p]=f.data,f.statusCode!=null&&f.statusCode!==200&&!u&&(l=f.statusCode),f.headers&&(c[p]=f.headers)}),r&&(a=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:a,statusCode:l||200,loaderHeaders:c}}function JE(t,e,n,r,i,s,a,l){let{loaderData:u,errors:c}=JB(e,n,r,i,l);for(let f=0;f<s.length;f++){let{key:d,match:p,controller:m}=s[f];nt(a!==void 0&&a[f]!==void 0,"Did not find corresponding fetcher result");let g=a[f];if(!(m&&m.signal.aborted))if(vl(g)){let b=zc(t.matches,p==null?void 0:p.route.id);c&&c[b.route.id]||(c=rn({},c,{[b.route.id]:g.error})),t.fetchers.delete(d)}else if(co(g))nt(!1,"Unhandled fetcher revalidation redirect");else if(uo(g))nt(!1,"Unhandled fetcher deferred data");else{let b=ra(g.data);t.fetchers.set(d,b)}}return{loaderData:u,errors:c}}function XE(t,e,n,r){let i=rn({},e);for(let s of n){let a=s.route.id;if(e.hasOwnProperty(a)?e[a]!==void 0&&(i[a]=e[a]):t[a]!==void 0&&s.route.loader&&(i[a]=t[a]),r&&r.hasOwnProperty(a))break}return i}function zc(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function YE(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function qr(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new Kw(t||500,a,new Error(l),!0)}function QE(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(co(n))return{result:n,idx:e}}}function NC(t){let e=typeof t=="string"?qs(t):t;return To(rn({},e,{hash:""}))}function XB(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function uo(t){return t.type===en.deferred}function vl(t){return t.type===en.error}function co(t){return(t&&t.type)===en.redirect}function YB(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function QB(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function eF(t){return UB.has(t.toLowerCase())}function _i(t){return BB.has(t.toLowerCase())}async function eS(t,e,n,r,i,s){for(let a=0;a<n.length;a++){let l=n[a],u=e[a];if(!u)continue;let c=t.find(d=>d.route.id===u.route.id),f=c!=null&&!LC(c,u)&&(s&&s[u.route.id])!==void 0;if(uo(l)&&(i||f)){let d=r[a];nt(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await IC(l,d,i).then(p=>{p&&(n[a]=p||n[a])})}}}async function IC(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:en.data,data:t.deferredData.unwrappedData}}catch(i){return{type:en.error,error:i}}return{type:en.data,data:t.deferredData.data}}}function Jw(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function I_(t,e){let n=typeof e=="string"?qs(e).search:e.search;if(t[t.length-1].route.index&&Jw(n||""))return t[t.length-1];let r=PC(t);return r[r.length-1]}function tS(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:a}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:a,text:void 0}}}function Ey(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function tF(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function sc(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function nF(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function ra(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function rF(t,e){try{let n=t.sessionStorage.getItem(RC);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function iF(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(RC,JSON.stringify(n))}catch(r){Jl(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.22.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xf(){return xf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xf.apply(this,arguments)}const Cm=K.createContext(null),jC=K.createContext(null),j_=K.createContext(null),$a=K.createContext(null),Rm=K.createContext(null),Hs=K.createContext({outlet:null,matches:[],isDataRoute:!1}),MC=K.createContext(null);function sF(t,e){let{relative:n}=e===void 0?{}:e;pu()||nt(!1);let{basename:r,navigator:i}=K.useContext($a),{hash:s,pathname:a,search:l}=$C(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:Cs([r,a])),i.createHref({pathname:u,search:l,hash:s})}function pu(){return K.useContext(Rm)!=null}function mu(){return pu()||nt(!1),K.useContext(Rm).location}function DC(t){K.useContext($a).static||K.useLayoutEffect(t)}function Zs(){let{isDataRoute:t}=K.useContext(Hs);return t?_F():aF()}function aF(){pu()||nt(!1);let t=K.useContext(Cm),{basename:e,future:n,navigator:r}=K.useContext($a),{matches:i}=K.useContext(Hs),{pathname:s}=mu(),a=JSON.stringify(Am(i,n.v7_relativeSplatPath)),l=K.useRef(!1);return DC(()=>{l.current=!0}),K.useCallback(function(c,f){if(f===void 0&&(f={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let d=km(c,JSON.parse(a),s,f.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Cs([e,d.pathname])),(f.replace?r.replace:r.push)(d,f.state,f)},[e,r,a,s,t])}const oF=K.createContext(null);function lF(t){let e=K.useContext(Hs).outlet;return e&&K.createElement(oF.Provider,{value:t},e)}function $C(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=K.useContext($a),{matches:i}=K.useContext(Hs),{pathname:s}=mu(),a=JSON.stringify(Am(i,r.v7_relativeSplatPath));return K.useMemo(()=>km(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function uF(t,e,n,r){pu()||nt(!1);let{navigator:i}=K.useContext($a),{matches:s}=K.useContext(Hs),a=s[s.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=mu(),f;if(e){var d;let w=typeof e=="string"?qs(e):e;u==="/"||(d=w.pathname)!=null&&d.startsWith(u)||nt(!1),f=w}else f=c;let p=f.pathname||"/",m=p;if(u!=="/"){let w=u.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let g=yl(t,{pathname:m}),b=pF(g&&g.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Cs([u,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:Cs([u,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return e&&b?K.createElement(Rm.Provider,{value:{location:xf({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:un.Pop}},b):b}function cF(){let t=yF(),e=AC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),n?K.createElement("pre",{style:i},n):null,null)}const fF=K.createElement(cF,null);class dF extends K.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?K.createElement(Hs.Provider,{value:this.props.routeContext},K.createElement(MC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hF(t){let{routeContext:e,match:n,children:r}=t,i=K.useContext(Cm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),K.createElement(Hs.Provider,{value:e},r)}function pF(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let a=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let f=a.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id]));f>=0||nt(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let d=a[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=f),d.route.id){let{loaderData:p,errors:m}=n,g=d.route.loader&&p[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){u=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((f,d,p)=>{let m,g=!1,b=null,w=null;n&&(m=l&&d.route.id?l[d.route.id]:void 0,b=d.route.errorElement||fF,u&&(c<0&&p===0?(bF("route-fallback",!1),g=!0,w=null):c===p&&(g=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(a.slice(0,p+1)),v=()=>{let x;return m?x=b:g?x=w:d.route.Component?x=K.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=f,K.createElement(hF,{match:d,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?K.createElement(dF,{location:n.location,revalidation:n.revalidation,component:b,error:m,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var BC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(BC||{}),Xl=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Xl||{});function mF(t){let e=K.useContext(Cm);return e||nt(!1),e}function FC(t){let e=K.useContext(jC);return e||nt(!1),e}function gF(t){let e=K.useContext(Hs);return e||nt(!1),e}function Xw(t){let e=gF(),n=e.matches[e.matches.length-1];return n.route.id||nt(!1),n.route.id}function Yw(){let t=FC(Xl.UseLoaderData),e=Xw(Xl.UseLoaderData);if(t.errors&&t.errors[e]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+e+")");return}return t.loaderData[e]}function yF(){var t;let e=K.useContext(MC),n=FC(Xl.UseRouteError),r=Xw(Xl.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function vF(){let t=K.useContext(j_);return t==null?void 0:t._data}function _F(){let{router:t}=mF(BC.UseNavigateStable),e=Xw(Xl.UseNavigateStable),n=K.useRef(!1);return DC(()=>{n.current=!0}),K.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,xf({fromRouteId:e},s)))},[t,e])}const nS={};function bF(t,e,n){!e&&!nS[t]&&(nS[t]=!0)}function wF(t){let{to:e,replace:n,state:r,relative:i}=t;pu()||nt(!1);let{future:s,static:a}=K.useContext($a),{matches:l}=K.useContext(Hs),{pathname:u}=mu(),c=Zs(),f=km(e,Am(l,s.v7_relativeSplatPath),u,i==="path"),d=JSON.stringify(f);return K.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function UC(t){return lF(t.context)}function xF(t){let{basename:e="/",children:n=null,location:r,navigationType:i=un.Pop,navigator:s,static:a=!1,future:l}=t;pu()&&nt(!1);let u=e.replace(/^\/*/,"/"),c=K.useMemo(()=>({basename:u,navigator:s,static:a,future:xf({v7_relativeSplatPath:!1},l)}),[u,l,s,a]);typeof r=="string"&&(r=qs(r));let{pathname:f="/",search:d="",hash:p="",state:m=null,key:g="default"}=r,b=K.useMemo(()=>{let w=hu(f,u);return w==null?null:{location:{pathname:w,search:d,hash:p,state:m,key:g},navigationType:i}},[u,f,d,p,m,g,i]);return b==null?null:K.createElement($a.Provider,{value:c},K.createElement(Rm.Provider,{children:n,value:b}))}function Vc(t){let{children:e,errorElement:n,resolve:r}=t;return K.createElement(SF,{resolve:r,errorElement:n},K.createElement(TF,null,e))}var Fr=function(t){return t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error",t}(Fr||{});const EF=new Promise(()=>{});class SF extends K.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,n){console.error("<Await> caught the following error during render",e,n)}render(){let{children:e,errorElement:n,resolve:r}=this.props,i=null,s=Fr.pending;if(!(r instanceof Promise))s=Fr.success,i=Promise.resolve(),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_data",{get:()=>r});else if(this.state.error){s=Fr.error;let a=this.state.error;i=Promise.reject().catch(()=>{}),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_error",{get:()=>a})}else r._tracked?(i=r,s=i._error!==void 0?Fr.error:i._data!==void 0?Fr.success:Fr.pending):(s=Fr.pending,Object.defineProperty(r,"_tracked",{get:()=>!0}),i=r.then(a=>Object.defineProperty(r,"_data",{get:()=>a}),a=>Object.defineProperty(r,"_error",{get:()=>a})));if(s===Fr.error&&i._error instanceof R_)throw EF;if(s===Fr.error&&!n)throw i._error;if(s===Fr.error)return K.createElement(j_.Provider,{value:i,children:n});if(s===Fr.success)return K.createElement(j_.Provider,{value:i,children:e});throw i}}function TF(t){let{children:e}=t,n=vF(),r=typeof e=="function"?e(n):e;return K.createElement(K.Fragment,null,r)}function PF(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:K.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:K.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:K.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.22.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ef(){return Ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ef.apply(this,arguments)}function OF(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function AF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function kF(t,e){return t.button===0&&(!e||e==="_self")&&!AF(t)}function M_(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function CF(t,e){let n=M_(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const RF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],LF="6";try{window.__reactRouterVersion=LF}catch{}function NF(t,e){return ZB({basename:e==null?void 0:e.basename,future:Ef({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:dB({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||IF(),routes:t,mapRouteProperties:PF,window:e==null?void 0:e.window}).initialize()}function IF(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Ef({},e,{errors:jF(e.errors)})),e}function jF(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Kw(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let a=new s(i.message);a.stack="",n[r]=a}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const MF=K.createContext({isTransitioning:!1}),DF=K.createContext(new Map),$F="startTransition",rS=Q2[$F],BF="flushSync",iS=fB[BF];function FF(t){rS?rS(t):t()}function ac(t){iS?iS(t):t()}class UF{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function zF(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=K.useState(n.state),[a,l]=K.useState(),[u,c]=K.useState({isTransitioning:!1}),[f,d]=K.useState(),[p,m]=K.useState(),[g,b]=K.useState(),w=K.useRef(new Map),{v7_startTransition:y}=r||{},v=K.useCallback(A=>{y?FF(A):A()},[y]),x=K.useCallback((A,C)=>{let{deletedFetchers:M,unstable_flushSync:R,unstable_viewTransitionOpts:P}=C;M.forEach($=>w.current.delete($)),A.fetchers.forEach(($,D)=>{$.data!==void 0&&w.current.set(D,$.data)});let N=n.window==null||typeof n.window.document.startViewTransition!="function";if(!P||N){R?ac(()=>s(A)):v(()=>s(A));return}if(R){ac(()=>{p&&(f&&f.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let $=n.window.document.startViewTransition(()=>{ac(()=>s(A))});$.finished.finally(()=>{ac(()=>{d(void 0),m(void 0),l(void 0),c({isTransitioning:!1})})}),ac(()=>m($));return}p?(f&&f.resolve(),p.skipTransition(),b({state:A,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(l(A),c({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[n.window,p,f,w,v]);K.useLayoutEffect(()=>n.subscribe(x),[n,x]),K.useEffect(()=>{u.isTransitioning&&!u.flushSync&&d(new UF)},[u]),K.useEffect(()=>{if(f&&a&&n.window){let A=a,C=f.promise,M=n.window.document.startViewTransition(async()=>{v(()=>s(A)),await C});M.finished.finally(()=>{d(void 0),m(void 0),l(void 0),c({isTransitioning:!1})}),m(M)}},[v,a,f,n.window]),K.useEffect(()=>{f&&a&&i.location.key===a.location.key&&f.resolve()},[f,p,i.location,a]),K.useEffect(()=>{!u.isTransitioning&&g&&(l(g.state),c({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),b(void 0))},[u.isTransitioning,g]),K.useEffect(()=>{},[]);let E=K.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:A=>n.navigate(A),push:(A,C,M)=>n.navigate(A,{state:C,preventScrollReset:M==null?void 0:M.preventScrollReset}),replace:(A,C,M)=>n.navigate(A,{replace:!0,state:C,preventScrollReset:M==null?void 0:M.preventScrollReset})}),[n]),T=n.basename||"/",O=K.useMemo(()=>({router:n,navigator:E,static:!1,basename:T}),[n,E,T]);return K.createElement(K.Fragment,null,K.createElement(Cm.Provider,{value:O},K.createElement(jC.Provider,{value:i},K.createElement(DF.Provider,{value:w.current},K.createElement(MF.Provider,{value:u},K.createElement(xF,{basename:T,location:i.location,navigationType:i.historyAction,navigator:E,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?K.createElement(VF,{routes:n.routes,future:n.future,state:i}):e))))),null)}function VF(t){let{routes:e,future:n,state:r}=t;return uF(e,void 0,r,n)}const qF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fs=K.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:l,target:u,to:c,preventScrollReset:f,unstable_viewTransition:d}=e,p=OF(e,RF),{basename:m}=K.useContext($a),g,b=!1;if(typeof c=="string"&&HF.test(c)&&(g=c,qF))try{let x=new URL(window.location.href),E=c.startsWith("//")?new URL(x.protocol+c):new URL(c),T=hu(E.pathname,m);E.origin===x.origin&&T!=null?c=T+E.search+E.hash:b=!0}catch{}let w=sF(c,{relative:i}),y=ZF(c,{replace:a,state:l,target:u,preventScrollReset:f,relative:i,unstable_viewTransition:d});function v(x){r&&r(x),x.defaultPrevented||y(x)}return K.createElement("a",Ef({},p,{href:g||w,onClick:b||s?r:v,ref:n,target:u}))});var sS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sS||(sS={}));var aS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(aS||(aS={}));function ZF(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,unstable_viewTransition:l}=e===void 0?{}:e,u=Zs(),c=mu(),f=$C(t,{relative:a});return K.useCallback(d=>{if(kF(d,n)){d.preventDefault();let p=r!==void 0?r:To(c)===To(f);u(t,{replace:p,state:i,preventScrollReset:s,relative:a,unstable_viewTransition:l})}},[c,u,f,r,i,n,t,s,a,l])}function WF(t){let e=K.useRef(M_(t)),n=K.useRef(!1),r=mu(),i=K.useMemo(()=>CF(r.search,n.current?null:e.current),[r.search]),s=Zs(),a=K.useCallback((l,u)=>{const c=M_(typeof l=="function"?l(i):l);n.current=!0,s("?"+c,u)},[s,i]);return[i,a]}const GF=["buy","rent"];function KF(){const[t,e]=K.useState({type:"buy",city:"",minPrice:0,maxPrice:0}),n=i=>{e(s=>({...s,type:i}))},r=i=>{e(s=>({...s,[i.target.name]:i.target.value}))};return I.jsxs("div",{className:"searchBar",children:[I.jsx("div",{className:"type",children:GF.map(i=>I.jsx("button",{onClick:()=>n(i),className:t.type===i?"active":"",children:i},i))}),I.jsxs("form",{children:[I.jsx("input",{type:"text",name:"city",placeholder:"City",onChange:r}),I.jsx("input",{type:"number",name:"minPrice",min:0,max:1e7,placeholder:"Min Price",onChange:r}),I.jsx("input",{type:"number",name:"maxPrice",min:0,max:1e7,placeholder:"Max Price",onChange:r}),I.jsx(Fs,{to:`/list?type=${t.type}&city=${t.city}&minPrice=${t.minPrice}&maxPrice=${t.maxPrice}`,children:I.jsx("button",{children:I.jsx("img",{src:"/search.png",alt:""})})})]})]})}const fs=K.createContext(),JF=({children:t})=>{const[e,n]=K.useState(JSON.parse(localStorage.getItem("user"))||null),r=i=>{n(i)};return K.useEffect(()=>{localStorage.setItem("user",JSON.stringify(e))},[e]),I.jsx(fs.Provider,{value:{currentUser:e,updateUser:r},children:t})};function XF(){return K.useContext(fs),I.jsxs("div",{className:"homePage",children:[I.jsx("div",{className:"textContainer",children:I.jsxs("div",{className:"wrapper",children:[I.jsx("h1",{className:"title",children:"Find Real Estate & Get Your Dream Place"}),I.jsx("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Eos explicabo suscipit cum eius, iure est nulla animi consequatur facilis id pariatur fugit quos laudantium temporibus dolor ea repellat provident impedit!"}),I.jsx(KF,{}),I.jsxs("div",{className:"boxes",children:[I.jsxs("div",{className:"box",children:[I.jsx("h1",{children:"16+"}),I.jsx("h2",{children:"Years of Experience"})]}),I.jsxs("div",{className:"box",children:[I.jsx("h1",{children:"200"}),I.jsx("h2",{children:"Award Gained"})]}),I.jsxs("div",{className:"box",children:[I.jsx("h1",{children:"2000+"}),I.jsx("h2",{children:"Property Ready"})]})]})]})}),I.jsx("div",{className:"imgContainer",children:I.jsx("img",{src:"/bg.png",alt:""})})]})}function YF(){const[t,e]=WF(),[n,r]=K.useState({type:t.get("type")||"",city:t.get("city")||"",property:t.get("property")||"",minPrice:t.get("minPrice")||"",maxPrice:t.get("maxPrice")||"",bedroom:t.get("bedroom")||""}),i=a=>{r({...n,[a.target.name]:a.target.value})},s=()=>{e(n)};return I.jsxs("div",{className:"filter",children:[I.jsxs("h1",{children:["Search results for ",I.jsx("b",{children:t.get("city")})]}),I.jsx("div",{className:"top",children:I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"city",children:"Location"}),I.jsx("input",{type:"text",id:"city",name:"city",placeholder:"City Location",onChange:i,defaultValue:n.city})]})}),I.jsxs("div",{className:"bottom",children:[I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"type",children:"Type"}),I.jsxs("select",{name:"type",id:"type",onChange:i,defaultValue:n.type,children:[I.jsx("option",{value:"",children:"any"}),I.jsx("option",{value:"buy",children:"Buy"}),I.jsx("option",{value:"rent",children:"Rent"})]})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"property",children:"Property"}),I.jsxs("select",{name:"property",id:"property",onChange:i,defaultValue:n.property,children:[I.jsx("option",{value:"",children:"any"}),I.jsx("option",{value:"apartment",children:"Apartment"}),I.jsx("option",{value:"house",children:"House"}),I.jsx("option",{value:"condo",children:"Condo"}),I.jsx("option",{value:"land",children:"Land"})]})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"minPrice",children:"Min Price"}),I.jsx("input",{type:"number",id:"minPrice",name:"minPrice",placeholder:"any",onChange:i,defaultValue:n.minPrice})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"maxPrice",children:"Max Price"}),I.jsx("input",{type:"text",id:"maxPrice",name:"maxPrice",placeholder:"any",onChange:i,defaultValue:n.maxPrice})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"bedroom",children:"Bedroom"}),I.jsx("input",{type:"text",id:"bedroom",name:"bedroom",placeholder:"any",onChange:i,defaultValue:n.bedroom})]}),I.jsx("button",{onClick:s,children:I.jsx("img",{src:"/search.png",alt:""})})]})]})}function QF(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function Lm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const D_=t=>Array.isArray(t);function zC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Sf(t){return typeof t=="string"||Array.isArray(t)}function oS(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Qw(t,e,n,r){if(typeof e=="function"){const[i,s]=oS(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=oS(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Nm(t,e,n){const r=t.getProps();return Qw(r,e,n!==void 0?n:r.custom,t)}const e0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],t0=["initial",...e0],rd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Io=new Set(rd),Rs=t=>t*1e3,Ls=t=>t/1e3,e3={type:"spring",stiffness:500,damping:25,restSpeed:10},t3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),n3={type:"keyframes",duration:.8},r3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},i3=(t,{keyframes:e})=>e.length>2?n3:Io.has(t)?t.startsWith("scale")?t3(e[1]):e3:r3;function n0(t,e){return t?t[e]||t.default||t:void 0}const s3={skipAnimations:!1,useManualTiming:!1},a3=t=>t!==null;function Im(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(a3),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Wn=t=>t;let VC=Wn;function o3(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){s.has(c)&&(u.schedule(c),t()),c(a)}const u={schedule:(c,f=!1,d=!1)=>{const m=d&&r?e:n;return f&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(a=c,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(l),r=!1,i&&(i=!1,u.process(c))}};return u}const rh=["read","resolveKeyframes","update","preRender","render","postRender"],l3=40;function qC(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=rh.reduce((y,v)=>(y[v]=o3(s),y),{}),{read:l,resolveKeyframes:u,update:c,preRender:f,render:d,postRender:p}=a,m=()=>{const y=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,l3),1),i.timestamp=y,i.isProcessing=!0,l.process(i),u.process(i),c.process(i),f.process(i),d.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(m))},g=()=>{n=!0,r=!0,i.isProcessing||t(m)};return{schedule:rh.reduce((y,v)=>{const x=a[v];return y[v]=(E,T=!1,O=!1)=>(n||g(),x.schedule(E,T,O)),y},{}),cancel:y=>{for(let v=0;v<rh.length;v++)a[rh[v]].cancel(y)},state:i,steps:a}}const{schedule:Ct,cancel:Aa,state:In,steps:Sy}=qC(typeof requestAnimationFrame<"u"?requestAnimationFrame:Wn,!0),HC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,u3=1e-7,c3=12;function f3(t,e,n,r,i){let s,a,l=0;do a=e+(n-e)/2,s=HC(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>u3&&++l<c3);return a}function id(t,e,n,r){if(t===e&&n===r)return Wn;const i=s=>f3(s,0,1,t,n);return s=>s===0||s===1?s:HC(i(s),e,r)}const ZC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,WC=t=>e=>1-t(1-e),GC=id(.33,1.53,.69,.99),r0=WC(GC),KC=ZC(r0),JC=t=>(t*=2)<1?.5*r0(t):.5*(2-Math.pow(2,-10*(t-1))),i0=t=>1-Math.sin(Math.acos(t)),XC=WC(i0),YC=ZC(i0),QC=t=>/^0[^.\s]+$/u.test(t);function d3(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||QC(t):!0}const eR=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),tR=t=>e=>typeof e=="string"&&e.startsWith(t),nR=tR("--"),h3=tR("var(--"),s0=t=>h3(t)?p3.test(t.split("/*")[0].trim()):!1,p3=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,m3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function g3(t){const e=m3.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function rR(t,e,n=1){const[r,i]=g3(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return eR(a)?parseFloat(a):a}return s0(i)?rR(i,e,n+1):i}const Us=(t,e,n)=>n>e?e:n<t?t:n,gu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Tf={...gu,transform:t=>Us(0,1,t)},ih={...gu,default:1},sd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ia=sd("deg"),is=sd("%"),Ue=sd("px"),y3=sd("vh"),v3=sd("vw"),lS={...is,parse:t=>is.parse(t)/100,transform:t=>is.transform(t*100)},_3=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),uS=t=>t===gu||t===Ue,cS=(t,e)=>parseFloat(t.split(", ")[e]),fS=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return cS(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?cS(s[1],t):0}},b3=new Set(["x","y","z"]),w3=rd.filter(t=>!b3.has(t));function x3(t){const e=[];return w3.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Yl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:fS(4,13),y:fS(5,14)};Yl.translateX=Yl.x;Yl.translateY=Yl.y;const iR=t=>e=>e.test(t),E3={test:t=>t==="auto",parse:t=>t},sR=[gu,Ue,is,ia,v3,y3,E3],dS=t=>sR.find(iR(t)),yo=new Set;let $_=!1,B_=!1;function aR(){if(B_){const t=Array.from(yo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=x3(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var l;(l=r.getValue(s))===null||l===void 0||l.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}B_=!1,$_=!1,yo.forEach(t=>t.complete()),yo.clear()}function oR(){yo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(B_=!0)})}function S3(){oR(),aR()}class a0{constructor(e,n,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(yo.add(this),$_||($_=!0,Ct.read(oR),Ct.resolveKeyframes(aR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i==null?void 0:i.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const u=r.readValue(n,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),yo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,yo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const qc=t=>Math.round(t*1e5)/1e5,o0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function T3(t){return t==null}const P3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,l0=(t,e)=>n=>!!(typeof n=="string"&&P3.test(n)&&n.startsWith(t)||e&&!T3(n)&&Object.prototype.hasOwnProperty.call(n,e)),lR=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,l]=r.match(o0);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},O3=t=>Us(0,255,t),Ty={...gu,transform:t=>Math.round(O3(t))},fo={test:l0("rgb","red"),parse:lR("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Ty.transform(t)+", "+Ty.transform(e)+", "+Ty.transform(n)+", "+qc(Tf.transform(r))+")"};function A3(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const F_={test:l0("#"),parse:A3,transform:fo.transform},_l={test:l0("hsl","hue"),parse:lR("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+is.transform(qc(e))+", "+is.transform(qc(n))+", "+qc(Tf.transform(r))+")"},zn={test:t=>fo.test(t)||F_.test(t)||_l.test(t),parse:t=>fo.test(t)?fo.parse(t):_l.test(t)?_l.parse(t):F_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?fo.transform(t):_l.transform(t)},k3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function C3(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(o0))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(k3))===null||n===void 0?void 0:n.length)||0)>0}const uR="number",cR="color",R3="var",L3="var(",hS="${}",N3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Pf(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(N3,u=>(zn.test(u)?(r.color.push(s),i.push(cR),n.push(zn.parse(u))):u.startsWith(L3)?(r.var.push(s),i.push(R3),n.push(u)):(r.number.push(s),i.push(uR),n.push(parseFloat(u))),++s,hS)).split(hS);return{values:n,split:l,indexes:r,types:i}}function fR(t){return Pf(t).values}function dR(t){const{split:e,types:n}=Pf(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const l=n[a];l===uR?s+=qc(i[a]):l===cR?s+=zn.transform(i[a]):s+=i[a]}return s}}const I3=t=>typeof t=="number"?0:t;function j3(t){const e=fR(t);return dR(t)(e.map(I3))}const ka={test:C3,parse:fR,createTransformer:dR,getAnimatableNone:j3},M3=new Set(["brightness","contrast","saturate","opacity"]);function D3(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(o0)||[];if(!r)return t;const i=n.replace(r,"");let s=M3.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const $3=/\b([a-z-]*)\(.*?\)/gu,U_={...ka,getAnimatableNone:t=>{const e=t.match($3);return e?e.map(D3).join(" "):t}},B3={borderWidth:Ue,borderTopWidth:Ue,borderRightWidth:Ue,borderBottomWidth:Ue,borderLeftWidth:Ue,borderRadius:Ue,radius:Ue,borderTopLeftRadius:Ue,borderTopRightRadius:Ue,borderBottomRightRadius:Ue,borderBottomLeftRadius:Ue,width:Ue,maxWidth:Ue,height:Ue,maxHeight:Ue,top:Ue,right:Ue,bottom:Ue,left:Ue,padding:Ue,paddingTop:Ue,paddingRight:Ue,paddingBottom:Ue,paddingLeft:Ue,margin:Ue,marginTop:Ue,marginRight:Ue,marginBottom:Ue,marginLeft:Ue,backgroundPositionX:Ue,backgroundPositionY:Ue},F3={rotate:ia,rotateX:ia,rotateY:ia,rotateZ:ia,scale:ih,scaleX:ih,scaleY:ih,scaleZ:ih,skew:ia,skewX:ia,skewY:ia,distance:Ue,translateX:Ue,translateY:Ue,translateZ:Ue,x:Ue,y:Ue,z:Ue,perspective:Ue,transformPerspective:Ue,opacity:Tf,originX:lS,originY:lS,originZ:Ue},pS={...gu,transform:Math.round},u0={...B3,...F3,zIndex:pS,size:Ue,fillOpacity:Tf,strokeOpacity:Tf,numOctaves:pS},U3={...u0,color:zn,backgroundColor:zn,outlineColor:zn,fill:zn,stroke:zn,borderColor:zn,borderTopColor:zn,borderRightColor:zn,borderBottomColor:zn,borderLeftColor:zn,filter:U_,WebkitFilter:U_},c0=t=>U3[t];function hR(t,e){let n=c0(t);return n!==U_&&(n=ka),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const z3=new Set(["auto","none","0"]);function V3(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!z3.has(s)&&Pf(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=hR(n,i)}class pR extends a0{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let c=e[u];if(typeof c=="string"&&(c=c.trim(),s0(c))){const f=rR(c,n.current);f!==void 0&&(e[u]=f),u===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!_3.has(r)||e.length!==2)return;const[i,s]=e,a=dS(i),l=dS(s);if(a!==l)if(uS(a)&&uS(l))for(let u=0;u<e.length;u++){const c=e[u];typeof c=="string"&&(e[u]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)d3(e[i])&&r.push(i);r.length&&V3(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,l=i[a];i[a]=Yl[r](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([u,c])=>{n.getValue(u).set(c)}),this.resolveNoneKeyframes()}}function f0(t){return typeof t=="function"}let Vh;function q3(){Vh=void 0}const ss={now:()=>(Vh===void 0&&ss.set(In.isProcessing||s3.useManualTiming?In.timestamp:performance.now()),Vh),set:t=>{Vh=t,queueMicrotask(q3)}},mS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ka.test(t)||t==="0")&&!t.startsWith("url("));function H3(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Z3(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=mS(i,e),l=mS(s,e);return!a||!l?!1:H3(t)||(n==="spring"||f0(n))&&r}const W3=40;class mR{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ss.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>W3?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&S3(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ss.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:l,onUpdate:u,isGenerator:c}=this.options;if(!c&&!Z3(e,r,i,s))if(a)this.options.duration=0;else{u==null||u(Im(e,this.options,n)),l==null||l(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,n);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...f},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Ql=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},gR=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Ql(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function yR(t,e){return e?t*(1e3/e):0}const G3=5;function vR(t,e,n){const r=Math.max(e-G3,0);return yR(n-t(r),e-r)}const tn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Py=.001;function K3({duration:t=tn.duration,bounce:e=tn.bounce,velocity:n=tn.velocity,mass:r=tn.mass}){let i,s,a=1-e;a=Us(tn.minDamping,tn.maxDamping,a),t=Us(tn.minDuration,tn.maxDuration,Ls(t)),a<1?(i=c=>{const f=c*a,d=f*t,p=f-n,m=z_(c,a),g=Math.exp(-d);return Py-p/m*g},s=c=>{const d=c*a*t,p=d*n+n,m=Math.pow(a,2)*Math.pow(c,2)*t,g=Math.exp(-d),b=z_(Math.pow(c,2),a);return(-i(c)+Py>0?-1:1)*((p-m)*g)/b}):(i=c=>{const f=Math.exp(-c*t),d=(c-n)*t+1;return-Py+f*d},s=c=>{const f=Math.exp(-c*t),d=(n-c)*(t*t);return f*d});const l=5/t,u=X3(i,s,l);if(t=Rs(t),isNaN(u))return{stiffness:tn.stiffness,damping:tn.damping,duration:t};{const c=Math.pow(u,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:t}}}const J3=12;function X3(t,e,n){let r=n;for(let i=1;i<J3;i++)r=r-t(r)/e(r);return r}function z_(t,e){return t*Math.sqrt(1-e*e)}const V_=2e4;function _R(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<V_;)e+=n,r=t.next(e);return e>=V_?1/0:e}const Y3=["duration","bounce"],Q3=["stiffness","damping","mass"];function gS(t,e){return e.some(n=>t[n]!==void 0)}function e4(t){let e={velocity:tn.velocity,stiffness:tn.stiffness,damping:tn.damping,mass:tn.mass,isResolvedFromDuration:!1,...t};if(!gS(t,Q3)&&gS(t,Y3))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Us(.05,1,1-t.bounce)*Math.sqrt(i);e={...e,mass:tn.mass,stiffness:i,damping:s}}else{const n=K3(t);e={...e,...n,mass:tn.mass},e.isResolvedFromDuration=!0}return e}function bR(t=tn.visualDuration,e=tn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:c,mass:f,duration:d,velocity:p,isResolvedFromDuration:m}=e4({...n,velocity:-Ls(n.velocity||0)}),g=p||0,b=c/(2*Math.sqrt(u*f)),w=a-s,y=Ls(Math.sqrt(u/f)),v=Math.abs(w)<5;r||(r=v?tn.restSpeed.granular:tn.restSpeed.default),i||(i=v?tn.restDelta.granular:tn.restDelta.default);let x;if(b<1){const T=z_(y,b);x=O=>{const A=Math.exp(-b*y*O);return a-A*((g+b*y*w)/T*Math.sin(T*O)+w*Math.cos(T*O))}}else if(b===1)x=T=>a-Math.exp(-y*T)*(w+(g+y*w)*T);else{const T=y*Math.sqrt(b*b-1);x=O=>{const A=Math.exp(-b*y*O),C=Math.min(T*O,300);return a-A*((g+b*y*w)*Math.sinh(C)+T*w*Math.cosh(C))/T}}const E={calculatedDuration:m&&d||null,next:T=>{const O=x(T);if(m)l.done=T>=d;else{let A=0;b<1&&(A=T===0?Rs(g):vR(x,T,O));const C=Math.abs(A)<=r,M=Math.abs(a-O)<=i;l.done=C&&M}return l.value=l.done?a:O,l},toString:()=>{const T=Math.min(_R(E),V_),O=gR(A=>E.next(T*A).value,T,30);return T+"ms "+O}};return E}function yS({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:u,restDelta:c=.5,restSpeed:f}){const d=t[0],p={done:!1,value:d},m=C=>l!==void 0&&C<l||u!==void 0&&C>u,g=C=>l===void 0?u:u===void 0||Math.abs(l-C)<Math.abs(u-C)?l:u;let b=n*e;const w=d+b,y=a===void 0?w:a(w);y!==w&&(b=y-d);const v=C=>-b*Math.exp(-C/r),x=C=>y+v(C),E=C=>{const M=v(C),R=x(C);p.done=Math.abs(M)<=c,p.value=p.done?y:R};let T,O;const A=C=>{m(p.value)&&(T=C,O=bR({keyframes:[p.value,g(p.value)],velocity:vR(x,C,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:f}))};return A(0),{calculatedDuration:null,next:C=>{let M=!1;return!O&&T===void 0&&(M=!0,E(C),A(C)),T!==void 0&&C>=T?O.next(C-T):(!M&&E(C),p)}}}const t4=id(.42,0,1,1),n4=id(0,0,.58,1),wR=id(.42,0,.58,1),r4=t=>Array.isArray(t)&&typeof t[0]!="number",d0=t=>Array.isArray(t)&&typeof t[0]=="number",i4={linear:Wn,easeIn:t4,easeInOut:wR,easeOut:n4,circIn:i0,circInOut:YC,circOut:XC,backIn:r0,backInOut:KC,backOut:GC,anticipate:JC},vS=t=>{if(d0(t)){VC(t.length===4);const[e,n,r,i]=t;return id(e,n,r,i)}else if(typeof t=="string")return i4[t];return t},s4=(t,e)=>n=>e(t(n)),Sa=(...t)=>t.reduce(s4),Kt=(t,e,n)=>t+(e-t)*n;function Oy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function a4({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const l=n<.5?n*(1+e):n+e-n*e,u=2*n-l;i=Oy(u,l,t+1/3),s=Oy(u,l,t),a=Oy(u,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Rp(t,e){return n=>n>0?e:t}const Ay=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},o4=[F_,fo,_l],l4=t=>o4.find(e=>e.test(t));function _S(t){const e=l4(t);if(!e)return!1;let n=e.parse(t);return e===_l&&(n=a4(n)),n}const bS=(t,e)=>{const n=_S(t),r=_S(e);if(!n||!r)return Rp(t,e);const i={...n};return s=>(i.red=Ay(n.red,r.red,s),i.green=Ay(n.green,r.green,s),i.blue=Ay(n.blue,r.blue,s),i.alpha=Kt(n.alpha,r.alpha,s),fo.transform(i))},q_=new Set(["none","hidden"]);function u4(t,e){return q_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function c4(t,e){return n=>Kt(t,e,n)}function h0(t){return typeof t=="number"?c4:typeof t=="string"?s0(t)?Rp:zn.test(t)?bS:h4:Array.isArray(t)?xR:typeof t=="object"?zn.test(t)?bS:f4:Rp}function xR(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>h0(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function f4(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=h0(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function d4(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],l=t.indexes[a][i[a]],u=(n=t.values[l])!==null&&n!==void 0?n:0;r[s]=u,i[a]++}return r}const h4=(t,e)=>{const n=ka.createTransformer(e),r=Pf(t),i=Pf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?q_.has(t)&&!i.values.length||q_.has(e)&&!r.values.length?u4(t,e):Sa(xR(d4(r,i),i.values),n):Rp(t,e)};function ER(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Kt(t,e,n):h0(t)(t,e)}function p4(t,e,n){const r=[],i=n||ER,s=t.length-1;for(let a=0;a<s;a++){let l=i(t[a],t[a+1]);if(e){const u=Array.isArray(e)?e[a]||Wn:e;l=Sa(u,l)}r.push(l)}return r}function m4(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(VC(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=p4(e,r,i),l=a.length,u=c=>{let f=0;if(l>1)for(;f<t.length-2&&!(c<t[f+1]);f++);const d=Ql(t[f],t[f+1],c);return a[f](d)};return n?c=>u(Us(t[0],t[s-1],c)):u}function g4(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ql(0,e,r);t.push(Kt(n,1,i))}}function y4(t){const e=[0];return g4(e,t.length-1),e}function v4(t,e){return t.map(n=>n*e)}function _4(t,e){return t.map(()=>e||wR).splice(0,t.length-1)}function Lp({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=r4(r)?r.map(vS):vS(r),s={done:!1,value:e[0]},a=v4(n&&n.length===e.length?n:y4(e),t),l=m4(a,e,{ease:Array.isArray(i)?i:_4(e,i)});return{calculatedDuration:t,next:u=>(s.value=l(u),s.done=u>=t,s)}}const b4=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ct.update(e,!0),stop:()=>Aa(e),now:()=>In.isProcessing?In.timestamp:ss.now()}},w4={decay:yS,inertia:yS,tween:Lp,keyframes:Lp,spring:bR},x4=t=>t/100;class p0 extends mR{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||a0,l=(u,c)=>this.onKeyframesResolved(u,c);this.resolver=new a(s,l,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,l=f0(n)?n:w4[n]||Lp;let u,c;l!==Lp&&typeof e[0]!="number"&&(u=Sa(x4,ER(e[0],e[1])),e=[0,100]);const f=l({...this.options,keyframes:e});s==="mirror"&&(c=l({...this.options,keyframes:[...e].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=_R(f));const{calculatedDuration:d}=f,p=d+i,m=p*(r+1)-i;return{generator:f,mirroredGenerator:c,mapPercentToKeyframes:u,calculatedDuration:d,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:l,keyframes:u,calculatedDuration:c,totalDuration:f,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:g,repeatDelay:b,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-p*(this.speed>=0?1:-1),v=this.speed>=0?y<0:y>f;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let x=this.currentTime,E=s;if(m){const C=Math.min(this.currentTime,f)/d;let M=Math.floor(C),R=C%1;!R&&C>=1&&(R=1),R===1&&M--,M=Math.min(M,m+1),!!(M%2)&&(g==="reverse"?(R=1-R,b&&(R-=b/d)):g==="mirror"&&(E=a)),x=Us(0,1,R)*d}const T=v?{done:!1,value:u[0]}:E.next(x);l&&(T.value=l(T.value));let{done:O}=T;!v&&c!==null&&(O=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return A&&i!==void 0&&(T.value=Im(u,this.options,i)),w&&w(T.value),A&&this.finish(),T}get duration(){const{resolved:e}=this;return e?Ls(e.calculatedDuration):0}get time(){return Ls(this.currentTime)}set time(e){e=Rs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ls(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=b4,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const E4=new Set(["opacity","clipPath","filter","transform"]);function m0(t){let e;return()=>(e===void 0&&(e=t()),e)}const S4={linearEasing:void 0};function T4(t,e){const n=m0(t);return()=>{var r;return(r=S4[e])!==null&&r!==void 0?r:n()}}const Np=T4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function SR(t){return!!(typeof t=="function"&&Np()||!t||typeof t=="string"&&(t in H_||Np())||d0(t)||Array.isArray(t)&&t.every(SR))}const xc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,H_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:xc([0,.65,.55,1]),circOut:xc([.55,0,1,.45]),backIn:xc([.31,.01,.66,-.59]),backOut:xc([.33,1.53,.69,.99])};function TR(t,e){if(t)return typeof t=="function"&&Np()?gR(t,e):d0(t)?xc(t):Array.isArray(t)?t.map(n=>TR(n,e)||H_.easeOut):H_[t]}function P4(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:l="easeInOut",times:u}={}){const c={[e]:n};u&&(c.offset=u);const f=TR(l,i);return Array.isArray(f)&&(c.easing=f),t.animate(c,{delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function wS(t,e){t.timeline=e,t.onfinish=null}const O4=m0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ip=10,A4=2e4;function k4(t){return f0(t.type)||t.type==="spring"||!SR(t.ease)}function C4(t,e){const n=new p0({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<A4;)r=n.sample(s),i.push(r.value),s+=Ip;return{times:void 0,keyframes:i,duration:s-Ip,ease:"linear"}}const PR={anticipate:JC,backInOut:KC,circInOut:YC};function R4(t){return t in PR}class xS extends mR{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new pR(s,(a,l)=>this.onKeyframesResolved(a,l),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:a,type:l,motionValue:u,name:c,startTime:f}=this.options;if(!(!((r=u.owner)===null||r===void 0)&&r.current))return!1;if(typeof a=="string"&&Np()&&R4(a)&&(a=PR[a]),k4(this.options)){const{onComplete:p,onUpdate:m,motionValue:g,element:b,...w}=this.options,y=C4(e,w);e=y.keyframes,e.length===1&&(e[1]=e[0]),i=y.duration,s=y.times,a=y.ease,l="keyframes"}const d=P4(u.owner.current,c,e,{...this.options,duration:i,times:s,ease:a});return d.startTime=f??this.calcStartTime(),this.pendingTimeline?(wS(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:p}=this.options;u.set(Im(e,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:i,times:s,type:l,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Ls(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Ls(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Rs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Wn;const{animation:r}=n;wS(r,e)}return Wn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:a,times:l}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:f,onComplete:d,element:p,...m}=this.options,g=new p0({...m,keyframes:r,duration:i,type:s,ease:a,times:l,isGenerator:!0}),b=Rs(this.time);c.setWithVelocity(g.sample(b-Ip).value,g.sample(b).value,Ip)}const{onStop:u}=this.options;u&&u(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:a,type:l}=e;return O4()&&r&&E4.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&a!==0&&l!=="inertia"}}const L4=m0(()=>window.ScrollTimeline!==void 0);class N4{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>L4()&&i.attachTimeline?i.attachTimeline(e):n(i));return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function I4({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:l,from:u,elapsed:c,...f}){return!!Object.keys(f).length}const g0=(t,e,n,r={},i,s)=>a=>{const l=n0(r,t)||{},u=l.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Rs(u);let f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-c,onUpdate:p=>{e.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:i};I4(l)||(f={...f,...i3(t,f)}),f.duration&&(f.duration=Rs(f.duration)),f.repeatDelay&&(f.repeatDelay=Rs(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let d=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const p=Im(f.keyframes,l);if(p!==void 0)return Ct.update(()=>{f.onUpdate(p),f.onComplete()}),new N4([])}return!s&&xS.supports(f)?new xS(f):new p0(f)},j4=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),M4=t=>D_(t)?t[t.length-1]||0:t;function y0(t,e){t.indexOf(e)===-1&&t.push(e)}function v0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class _0{constructor(){this.subscriptions=[]}add(e){return y0(this.subscriptions,e),()=>v0(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ES=30,D4=t=>!isNaN(parseFloat(t));class $4{constructor(e,n={}){this.version="11.13.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=ss.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ss.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=D4(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new _0);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ct.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ss.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ES)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ES);return yR(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Of(t,e){return new $4(t,e)}function B4(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Of(n))}function F4(t,e){const n=Nm(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const l=M4(s[a]);B4(t,a,l)}}const b0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),U4="framerAppearId",OR="data-"+b0(U4);function AR(t){return t.props[OR]}const Zn=t=>!!(t&&t.getVelocity);function z4(t){return!!(Zn(t)&&t.add)}function Z_(t,e){const n=t.getValue("willChange");if(z4(n))return n.add(e)}function V4({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function kR(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:l,...u}=e;r&&(a=r);const c=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const d in u){const p=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),m=u[d];if(m===void 0||f&&V4(f,d))continue;const g={delay:n,...n0(a||{},d)};let b=!1;if(window.MotionHandoffAnimation){const y=AR(t);if(y){const v=window.MotionHandoffAnimation(y,d,Ct);v!==null&&(g.startTime=v,b=!0)}}Z_(t,d),p.start(g0(d,p,m,t.shouldReduceMotion&&Io.has(d)?{type:!1}:g,t,b));const w=p.animation;w&&c.push(w)}return l&&Promise.all(c).then(()=>{Ct.update(()=>{l&&F4(t,l)})}),c}function W_(t,e,n={}){var r;const i=Nm(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const a=i?()=>Promise.all(kR(t,i,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:p}=s;return q4(t,e,f+c,d,p,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[c,f]=u==="beforeChildren"?[a,l]:[l,a];return c().then(()=>f())}else return Promise.all([a(),l(n.delay)])}function q4(t,e,n=0,r=0,i=1,s){const a=[],l=(t.variantChildren.size-1)*r,u=i===1?(c=0)=>c*r:(c=0)=>l-c*r;return Array.from(t.variantChildren).sort(H4).forEach((c,f)=>{c.notify("AnimationStart",e),a.push(W_(c,e,{...s,delay:n+u(f)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function H4(t,e){return t.sortNodePosition(e)}function Z4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>W_(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=W_(t,e,n);else{const i=typeof e=="function"?Nm(t,e,n.custom):e;r=Promise.all(kR(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const W4=t0.length;function CR(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?CR(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<W4;n++){const r=t0[n],i=t.props[r];(Sf(i)||i===!1)&&(e[r]=i)}return e}const G4=[...e0].reverse(),K4=e0.length;function J4(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Z4(t,n,r)))}function X4(t){let e=J4(t),n=SS(),r=!0;const i=u=>(c,f)=>{var d;const p=Nm(t,f,u==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(p){const{transition:m,transitionEnd:g,...b}=p;c={...c,...b,...g}}return c};function s(u){e=u(t)}function a(u){const{props:c}=t,f=CR(t.parent)||{},d=[],p=new Set;let m={},g=1/0;for(let w=0;w<K4;w++){const y=G4[w],v=n[y],x=c[y]!==void 0?c[y]:f[y],E=Sf(x),T=y===u?v.isActive:null;T===!1&&(g=w);let O=x===f[y]&&x!==c[y]&&E;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),v.protectedKeys={...m},!v.isActive&&T===null||!x&&!v.prevProp||Lm(x)||typeof x=="boolean")continue;const A=Y4(v.prevProp,x);let C=A||y===u&&v.isActive&&!O&&E||w>g&&E,M=!1;const R=Array.isArray(x)?x:[x];let P=R.reduce(i(y),{});T===!1&&(P={});const{prevResolvedValues:N={}}=v,$={...N,...P},D=W=>{C=!0,p.has(W)&&(M=!0,p.delete(W)),v.needsAnimating[W]=!0;const Z=t.getValue(W);Z&&(Z.liveStyle=!1)};for(const W in $){const Z=P[W],q=N[W];if(m.hasOwnProperty(W))continue;let B=!1;D_(Z)&&D_(q)?B=!zC(Z,q):B=Z!==q,B?Z!=null?D(W):p.add(W):Z!==void 0&&p.has(W)?D(W):v.protectedKeys[W]=!0}v.prevProp=x,v.prevResolvedValues=P,v.isActive&&(m={...m,...P}),r&&t.blockInitialAnimation&&(C=!1),C&&(!(O&&A)||M)&&d.push(...R.map(W=>({animation:W,options:{type:y}})))}if(p.size){const w={};p.forEach(y=>{const v=t.getBaseTarget(y),x=t.getValue(y);x&&(x.liveStyle=!0),w[y]=v??null}),d.push({animation:w})}let b=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(d):Promise.resolve()}function l(u,c){var f;if(n[u].isActive===c)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(u,c)}),n[u].isActive=c;const d=a(u);for(const p in n)n[p].protectedKeys={};return d}return{animateChanges:a,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=SS(),r=!0}}}function Y4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!zC(e,t):!1}function Ka(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function SS(){return{animate:Ka(!0),whileInView:Ka(),whileHover:Ka(),whileTap:Ka(),whileDrag:Ka(),whileFocus:Ka(),exit:Ka()}}class Ba{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Q4 extends Ba{constructor(e){super(e),e.animationState||(e.animationState=X4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Lm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let eU=0;class tU extends Ba{constructor(){super(...arguments),this.id=eU++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const nU={animation:{Feature:Q4},exit:{Feature:tU}},hi={x:!1,y:!1};function RR(){return hi.x||hi.y}function rU(t){return t==="x"||t==="y"?hi[t]?null:(hi[t]=!0,()=>{hi[t]=!1}):hi.x||hi.y?null:(hi.x=hi.y=!0,()=>{hi.x=hi.y=!1})}const LR=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function ad(t){return{point:{x:t.pageX,y:t.pageY}}}const iU=t=>e=>LR(e)&&t(e,ad(e));function Os(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ta(t,e,n,r){return Os(t,e,iU(n),r)}const TS=(t,e)=>Math.abs(t-e);function sU(t,e){const n=TS(t.x,e.x),r=TS(t.y,e.y);return Math.sqrt(n**2+r**2)}class NR{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Cy(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=sU(d.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:g}=d,{timestamp:b}=In;this.history.push({...g,timestamp:b});const{onStart:w,onMove:y}=this.handlers;p||(w&&w(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=ky(p,this.transformPagePoint),Ct.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Cy(d.type==="pointercancel"?this.lastMoveEventInfo:ky(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,w),g&&g(d,w)},!LR(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=ad(e),l=ky(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=In;this.history=[{...u,timestamp:c}];const{onSessionStart:f}=n;f&&f(e,Cy(l,this.history)),this.removeListeners=Sa(Ta(this.contextWindow,"pointermove",this.handlePointerMove),Ta(this.contextWindow,"pointerup",this.handlePointerUp),Ta(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Aa(this.updatePoint)}}function ky(t,e){return e?{point:e(t.point)}:t}function PS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Cy({point:t},e){return{point:t,delta:PS(t,IR(e)),offset:PS(t,aU(e)),velocity:oU(e,.1)}}function aU(t){return t[0]}function IR(t){return t[t.length-1]}function oU(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=IR(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Rs(e)));)n--;if(!r)return{x:0,y:0};const s=Ls(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function bl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const jR=1e-4,lU=1-jR,uU=1+jR,MR=.01,cU=0-MR,fU=0+MR;function Cr(t){return t.max-t.min}function dU(t,e,n){return Math.abs(t-e)<=n}function OS(t,e,n,r=.5){t.origin=r,t.originPoint=Kt(e.min,e.max,t.origin),t.scale=Cr(n)/Cr(e),t.translate=Kt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=lU&&t.scale<=uU||isNaN(t.scale))&&(t.scale=1),(t.translate>=cU&&t.translate<=fU||isNaN(t.translate))&&(t.translate=0)}function Hc(t,e,n,r){OS(t.x,e.x,n.x,r?r.originX:void 0),OS(t.y,e.y,n.y,r?r.originY:void 0)}function AS(t,e,n){t.min=n.min+e.min,t.max=t.min+Cr(e)}function hU(t,e,n){AS(t.x,e.x,n.x),AS(t.y,e.y,n.y)}function kS(t,e,n){t.min=e.min-n.min,t.max=t.min+Cr(e)}function Zc(t,e,n){kS(t.x,e.x,n.x),kS(t.y,e.y,n.y)}function pU(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Kt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Kt(n,t,r.max):Math.min(t,n)),t}function CS(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function mU(t,{top:e,left:n,bottom:r,right:i}){return{x:CS(t.x,n,i),y:CS(t.y,e,r)}}function RS(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function gU(t,e){return{x:RS(t.x,e.x),y:RS(t.y,e.y)}}function yU(t,e){let n=.5;const r=Cr(t),i=Cr(e);return i>r?n=Ql(e.min,e.max-r,t.min):r>i&&(n=Ql(t.min,t.max-i,e.min)),Us(0,1,n)}function vU(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const G_=.35;function _U(t=G_){return t===!1?t=0:t===!0&&(t=G_),{x:LS(t,"left","right"),y:LS(t,"top","bottom")}}function LS(t,e,n){return{min:NS(t,e),max:NS(t,n)}}function NS(t,e){return typeof t=="number"?t:t[e]||0}const IS=()=>({translate:0,scale:1,origin:0,originPoint:0}),wl=()=>({x:IS(),y:IS()}),jS=()=>({min:0,max:0}),ln=()=>({x:jS(),y:jS()});function zr(t){return[t("x"),t("y")]}function DR({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function bU({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function wU(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ry(t){return t===void 0||t===1}function K_({scale:t,scaleX:e,scaleY:n}){return!Ry(t)||!Ry(e)||!Ry(n)}function eo(t){return K_(t)||$R(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function $R(t){return MS(t.x)||MS(t.y)}function MS(t){return t&&t!=="0%"}function jp(t,e,n){const r=t-n,i=e*r;return n+i}function DS(t,e,n,r,i){return i!==void 0&&(t=jp(t,i,r)),jp(t,n,r)+e}function J_(t,e=0,n=1,r,i){t.min=DS(t.min,e,n,r,i),t.max=DS(t.max,e,n,r,i)}function BR(t,{x:e,y:n}){J_(t.x,e.translate,e.scale,e.originPoint),J_(t.y,n.translate,n.scale,n.originPoint)}const $S=.999999999999,BS=1.0000000000001;function xU(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let l=0;l<i;l++){s=n[l],a=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&El(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,BR(t,a)),r&&eo(s.latestValues)&&El(t,s.latestValues))}e.x<BS&&e.x>$S&&(e.x=1),e.y<BS&&e.y>$S&&(e.y=1)}function xl(t,e){t.min=t.min+e,t.max=t.max+e}function FS(t,e,n,r,i=.5){const s=Kt(t.min,t.max,i);J_(t,e,n,s,r)}function El(t,e){FS(t.x,e.x,e.scaleX,e.scale,e.originX),FS(t.y,e.y,e.scaleY,e.scale,e.originY)}function FR(t,e){return DR(wU(t.getBoundingClientRect(),e))}function EU(t,e,n){const r=FR(t,n),{scroll:i}=e;return i&&(xl(r.x,i.offset.x),xl(r.y,i.offset.y)),r}const UR=({current:t})=>t?t.ownerDocument.defaultView:null,SU=new WeakMap;class TU{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ln(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ad(f).point)},s=(f,d)=>{const{drag:p,dragPropagation:m,onDragStart:g}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=rU(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zr(w=>{let y=this.getAxisMotionValue(w).get()||0;if(is.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[w];x&&(y=Cr(x)*(parseFloat(y)/100))}}this.originPoint[w]=y}),g&&Ct.postRender(()=>g(f,d)),Z_(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(f,d)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:g,onDrag:b}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:w}=d;if(m&&this.currentDirection===null){this.currentDirection=PU(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,w),this.updateAxis("y",d.point,w),this.visualElement.render(),b&&b(f,d)},l=(f,d)=>this.stop(f,d),u=()=>zr(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new NR(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:UR(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ct.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!sh(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=pU(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&bl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=mU(i.layoutBox,n):this.constraints=!1,this.elastic=_U(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&zr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=vU(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!bl(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=EU(r,i.root,this.visualElement.getTransformPagePoint());let a=gU(i.layout.layoutBox,s);if(n){const l=n(bU(a));this.hasMutatedConstraints=!!l,l&&(a=DR(l))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},c=zr(f=>{if(!sh(f,n,this.currentDirection))return;let d=u&&u[f]||{};a&&(d={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,g={type:"inertia",velocity:r?e[f]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(f,g)});return Promise.all(c).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Z_(this.visualElement,e),r.start(g0(e,r,0,n,this.visualElement,!1))}stopAnimation(){zr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){zr(n=>{const{drag:r}=this.getProps();if(!sh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:l}=i.layout.layoutBox[n];s.set(e[n]-Kt(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!bl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};zr(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const u=l.get();i[a]=yU({min:u,max:u},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),zr(a=>{if(!sh(a,e,null))return;const l=this.getAxisMotionValue(a),{min:u,max:c}=this.constraints[a];l.set(Kt(u,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;SU.set(this.visualElement,this);const e=this.visualElement.current,n=Ta(e,"pointerdown",u=>{const{drag:c,dragListener:f=!0}=this.getProps();c&&f&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();bl(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ct.read(r);const a=Os(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(zr(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=u[f].translate,d.set(d.get()+u[f].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=G_,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:l}}}function sh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function PU(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class OU extends Ba{constructor(e){super(e),this.removeGroupControls=Wn,this.removeListeners=Wn,this.controls=new TU(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Wn}unmount(){this.removeGroupControls(),this.removeListeners()}}const US=t=>(e,n)=>{t&&Ct.postRender(()=>t(e,n))};class AU extends Ba{constructor(){super(...arguments),this.removePointerDownListener=Wn}onPointerDown(e){this.session=new NR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:UR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:US(e),onStart:US(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&Ct.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Ta(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const jm=K.createContext(null);function kU(){const t=K.useContext(jm);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=K.useId();K.useEffect(()=>r(i),[]);const s=K.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,s]:[!0]}const w0=K.createContext({}),zR=K.createContext({}),qh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zS(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const oc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ue.test(t))t=parseFloat(t);else return t;const n=zS(t,e.target.x),r=zS(t,e.target.y);return`${n}% ${r}%`}},CU={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ka.parse(t);if(i.length>5)return r;const s=ka.createTransformer(t),a=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,u=n.y.scale*e.y;i[0+a]/=l,i[1+a]/=u;const c=Kt(l,u,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),s(i)}},Mp={};function RU(t){Object.assign(Mp,t)}const{schedule:x0,cancel:Ese}=qC(queueMicrotask,!1);class LU extends K.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;RU(NU),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),qh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Ct.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),x0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function VR(t){const[e,n]=kU(),r=K.useContext(w0);return I.jsx(LU,{...t,layoutGroup:r,switchLayoutGroup:K.useContext(zR),isPresent:e,safeToRemove:n})}const NU={borderRadius:{...oc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:oc,borderTopRightRadius:oc,borderBottomLeftRadius:oc,borderBottomRightRadius:oc,boxShadow:CU},qR=["TopLeft","TopRight","BottomLeft","BottomRight"],IU=qR.length,VS=t=>typeof t=="string"?parseFloat(t):t,qS=t=>typeof t=="number"||Ue.test(t);function jU(t,e,n,r,i,s){i?(t.opacity=Kt(0,n.opacity!==void 0?n.opacity:1,MU(r)),t.opacityExit=Kt(e.opacity!==void 0?e.opacity:1,0,DU(r))):s&&(t.opacity=Kt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<IU;a++){const l=`border${qR[a]}Radius`;let u=HS(e,l),c=HS(n,l);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||qS(u)===qS(c)?(t[l]=Math.max(Kt(VS(u),VS(c),r),0),(is.test(c)||is.test(u))&&(t[l]+="%")):t[l]=c}(e.rotate||n.rotate)&&(t.rotate=Kt(e.rotate||0,n.rotate||0,r))}function HS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const MU=HR(0,.5,XC),DU=HR(.5,.95,Wn);function HR(t,e,n){return r=>r<t?0:r>e?1:n(Ql(t,e,r))}function ZS(t,e){t.min=e.min,t.max=e.max}function Br(t,e){ZS(t.x,e.x),ZS(t.y,e.y)}function WS(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function GS(t,e,n,r,i){return t-=e,t=jp(t,1/n,r),i!==void 0&&(t=jp(t,1/i,r)),t}function $U(t,e=0,n=1,r=.5,i,s=t,a=t){if(is.test(e)&&(e=parseFloat(e),e=Kt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=Kt(s.min,s.max,r);t===s&&(l-=e),t.min=GS(t.min,e,n,l,i),t.max=GS(t.max,e,n,l,i)}function KS(t,e,[n,r,i],s,a){$U(t,e[n],e[r],e[i],e.scale,s,a)}const BU=["x","scaleX","originX"],FU=["y","scaleY","originY"];function JS(t,e,n,r){KS(t.x,e,BU,n?n.x:void 0,r?r.x:void 0),KS(t.y,e,FU,n?n.y:void 0,r?r.y:void 0)}function XS(t){return t.translate===0&&t.scale===1}function ZR(t){return XS(t.x)&&XS(t.y)}function YS(t,e){return t.min===e.min&&t.max===e.max}function UU(t,e){return YS(t.x,e.x)&&YS(t.y,e.y)}function QS(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function WR(t,e){return QS(t.x,e.x)&&QS(t.y,e.y)}function eT(t){return Cr(t.x)/Cr(t.y)}function tT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class zU{constructor(){this.members=[]}add(e){y0(this.members,e),e.scheduleRender()}remove(e){if(v0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function VU(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:f,rotateX:d,rotateY:p,skewX:m,skewY:g}=n;c&&(r=`perspective(${c}px) ${r}`),f&&(r+=`rotate(${f}deg) `),d&&(r+=`rotateX(${d}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),g&&(r+=`skewY(${g}deg) `)}const l=t.x.scale*e.x,u=t.y.scale*e.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const qU=(t,e)=>t.depth-e.depth;class HU{constructor(){this.children=[],this.isDirty=!1}add(e){y0(this.children,e),this.isDirty=!0}remove(e){v0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(qU),this.isDirty=!1,this.children.forEach(e)}}function Hh(t){const e=Zn(t)?t.get():t;return j4(e)?e.toValue():e}function ZU(t,e){const n=ss.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Aa(r),t(s-e))};return Ct.read(r,!0),()=>Aa(r)}function WU(t){return t instanceof SVGElement&&t.tagName!=="svg"}function GU(t,e,n){const r=Zn(t)?t:Of(t);return r.start(g0("",r,e,n)),r.animation}const to={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ec=typeof window<"u"&&window.MotionDebug!==void 0,Ly=["","X","Y","Z"],KU={visibility:"hidden"},nT=1e3;let JU=0;function Ny(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function GR(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=AR(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ct,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&GR(r)}function KR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},l=e==null?void 0:e()){this.id=JU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ec&&(to.totalNodes=to.resolvedTargetDeltas=to.recalculatedProjection=0),this.nodes.forEach(QU),this.nodes.forEach(iz),this.nodes.forEach(sz),this.nodes.forEach(ez),Ec&&window.MotionDebug.record(to)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new HU)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new _0),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const u=this.eventHandlers.get(a);u&&u.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=WU(a),this.instance=a;const{layoutId:u,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||u)&&(this.isLayoutDirty=!0),t){let d;const p=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=ZU(p,250),qh.hasAnimatedSinceResize&&(qh.hasAnimatedSinceResize=!1,this.nodes.forEach(iT))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||f.getDefaultTransition()||cz,{onLayoutAnimationStart:w,onLayoutAnimationComplete:y}=f.getProps(),v=!this.targetLayout||!WR(this.targetLayout,g)||m,x=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const E={...n0(b,"layout"),onPlay:w,onComplete:y};(f.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else p||iT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Aa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(az),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&GR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rT);return}this.isUpdating||this.nodes.forEach(nz),this.isUpdating=!1,this.nodes.forEach(rz),this.nodes.forEach(XU),this.nodes.forEach(YU),this.clearAllSnapshots();const l=ss.now();In.delta=Us(0,1e3/60,l-In.timestamp),In.timestamp=l,In.isProcessing=!0,Sy.update.process(In),Sy.preRender.process(In),Sy.render.process(In),In.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,x0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tz),this.sharedNodes.forEach(oz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ct.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ct.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!ZR(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,f=c!==this.prevTransformTemplateValue;a&&(l||eo(this.latestValues)||f)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return a&&(u=this.removeTransform(u)),fz(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:l}=this.options;if(!l)return ln();const u=l.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(dz))){const{scroll:f}=this.root;f&&(xl(u.x,f.offset.x),xl(u.y,f.offset.y))}return u}removeElementScroll(a){var l;const u=ln();if(Br(u,a),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return u;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:d,options:p}=f;f!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&Br(u,a),xl(u.x,d.offset.x),xl(u.y,d.offset.y))}return u}applyTransform(a,l=!1){const u=ln();Br(u,a);for(let c=0;c<this.path.length;c++){const f=this.path[c];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&El(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),eo(f.latestValues)&&El(u,f.latestValues)}return eo(this.latestValues)&&El(u,this.latestValues),u}removeTransform(a){const l=ln();Br(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!eo(c.latestValues))continue;K_(c.latestValues)&&c.updateSnapshot();const f=ln(),d=c.measurePageBox();Br(f,d),JS(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,f)}return eo(this.latestValues)&&JS(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==In.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=In.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),Zc(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ln(),this.targetWithTransforms=ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Br(this.target,this.layout.layoutBox),BR(this.target,this.targetDelta)):Br(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),Zc(this.relativeTargetOrigin,this.target,m.target),Br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ec&&to.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||K_(this.parent.latestValues)||$R(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===In.timestamp&&(c=!1),c)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;Br(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;xU(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ln());const{target:g}=l;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(WS(this.prevProjectionDelta.x,this.projectionDelta.x),WS(this.prevProjectionDelta.y,this.projectionDelta.y)),Hc(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!tT(this.projectionDelta.x,this.prevProjectionDelta.x)||!tT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Ec&&to.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wl(),this.projectionDelta=wl(),this.projectionDeltaWithTransform=wl()}setAnimationOrigin(a,l=!1){const u=this.snapshot,c=u?u.latestValues:{},f={...this.latestValues},d=wl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=ln(),m=u?u.source:void 0,g=this.layout?this.layout.source:void 0,b=m!==g,w=this.getStack(),y=!w||w.members.length<=1,v=!!(b&&!y&&this.options.crossfade===!0&&!this.path.some(uz));this.animationProgress=0;let x;this.mixTargetDelta=E=>{const T=E/1e3;sT(d.x,a.x,T),sT(d.y,a.y,T),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zc(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lz(this.relativeTarget,this.relativeTargetOrigin,p,T),x&&UU(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=ln()),Br(x,this.relativeTarget)),b&&(this.animationValues=f,jU(f,c,this.latestValues,T,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Aa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ct.update(()=>{qh.hasAnimatedSinceResize=!0,this.currentAnimation=GU(0,nT,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:u,layout:c,latestValues:f}=a;if(!(!l||!u||!c)){if(this!==a&&this.layout&&c&&JR(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||ln();const d=Cr(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+d;const p=Cr(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+p}Br(l,u),El(l,f),Hc(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new zU),this.sharedNodes.get(a).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const c={};u.z&&Ny("z",a,c,this.animationValues);for(let f=0;f<Ly.length;f++)Ny(`rotate${Ly[f]}`,a,c,this.animationValues),Ny(`skew${Ly[f]}`,a,c,this.animationValues);a.render();for(const f in c)a.setStaticValue(f,c[f]),this.animationValues&&(this.animationValues[f]=c[f]);a.scheduleRender()}getProjectionStyles(a){var l,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return KU;const c={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Hh(a==null?void 0:a.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Hh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!eo(this.latestValues)&&(b.transform=f?f({},""):"none",this.hasProjected=!1),b}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=VU(this.projectionDeltaWithTransform,this.treeScale,p),f&&(c.transform=f(p,c.transform));const{x:m,y:g}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,d.animationValues?c.opacity=d===this?(u=(l=p.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const b in Mp){if(p[b]===void 0)continue;const{correct:w,applyTo:y}=Mp[b],v=c.transform==="none"?p[b]:w(p[b],d);if(y){const x=y.length;for(let E=0;E<x;E++)c[y[E]]=v}else c[b]=v}return this.options.layoutId&&(c.pointerEvents=d===this?Hh(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(rT),this.root.sharedNodes.clear()}}}function XU(t){t.updateLayout()}function YU(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?zr(d=>{const p=a?n.measuredBox[d]:n.layoutBox[d],m=Cr(p);p.min=r[d].min,p.max=p.min+m}):JR(s,n.layoutBox,r)&&zr(d=>{const p=a?n.measuredBox[d]:n.layoutBox[d],m=Cr(r[d]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const l=wl();Hc(l,r,n.layoutBox);const u=wl();a?Hc(u,t.applyTransform(i,!0),n.measuredBox):Hc(u,r,n.layoutBox);const c=!ZR(l);let f=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:m}=d;if(p&&m){const g=ln();Zc(g,n.layoutBox,p.layoutBox);const b=ln();Zc(b,r,m.layoutBox),WR(g,b)||(f=!0),d.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=g,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function QU(t){Ec&&to.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ez(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function tz(t){t.clearSnapshot()}function rT(t){t.clearMeasurements()}function nz(t){t.isLayoutDirty=!1}function rz(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function iT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function iz(t){t.resolveTargetDelta()}function sz(t){t.calcProjection()}function az(t){t.resetSkewAndRotation()}function oz(t){t.removeLeadSnapshot()}function sT(t,e,n){t.translate=Kt(e.translate,0,n),t.scale=Kt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function aT(t,e,n,r){t.min=Kt(e.min,n.min,r),t.max=Kt(e.max,n.max,r)}function lz(t,e,n,r){aT(t.x,e.x,n.x,r),aT(t.y,e.y,n.y,r)}function uz(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const cz={duration:.45,ease:[.4,0,.1,1]},oT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),lT=oT("applewebkit/")&&!oT("chrome/")?Math.round:Wn;function uT(t){t.min=lT(t.min),t.max=lT(t.max)}function fz(t){uT(t.x),uT(t.y)}function JR(t,e,n){return t==="position"||t==="preserve-aspect"&&!dU(eT(e),eT(n),.2)}function dz(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const hz=KR({attachResizeListener:(t,e)=>Os(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Iy={current:void 0},XR=KR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Iy.current){const t=new hz({});t.mount(window),t.setOptions({layoutScroll:!0}),Iy.current=t}return Iy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),pz={pan:{Feature:AU},drag:{Feature:OU,ProjectionNode:XR,MeasureLayout:VR}};function mz(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;e&&(i=e.current);const s=(r=n==null?void 0:n[t])!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function cT(t){return e=>{e.pointerType==="touch"||RR()||t(e)}}function gz(t,e,n={}){const r=new AbortController,i={passive:!0,...n,signal:r.signal},s=cT(a=>{const{target:l}=a,u=e(a);if(!u||!l)return;const c=cT(f=>{u(f),l.removeEventListener("pointerleave",c)});l.addEventListener("pointerleave",c,i)});return mz(t).forEach(a=>{a.addEventListener("pointerenter",s,i)}),()=>r.abort()}function fT(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n);const i=r[n?"onHoverStart":"onHoverEnd"];i&&Ct.postRender(()=>i(e,ad(e)))}class yz extends Ba{mount(){const{current:e,props:n}=this.node;e&&(this.unmount=gz(e,r=>(fT(this.node,r,!0),i=>fT(this.node,i,!1)),{passive:!n.onHoverStart&&!n.onHoverEnd}))}unmount(){}}class vz extends Ba{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Sa(Os(this.node.current,"focus",()=>this.onFocus()),Os(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const YR=(t,e)=>e?t===e?!0:YR(t,e.parentElement):!1;function jy(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,ad(n))}class _z extends Ba{constructor(){super(...arguments),this.removeStartListeners=Wn,this.removeEndListeners=Wn,this.removeAccessibleListeners=Wn,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Ta(window,"pointerup",(l,u)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:f,globalTapTarget:d}=this.node.getProps(),p=!d&&!YR(this.node.current,l.target)?f:c;p&&Ct.update(()=>p(l,u))},{passive:!(r.onTap||r.onPointerUp)}),a=Ta(window,"pointercancel",(l,u)=>this.cancelPress(l,u),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Sa(s,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||jy("up",(u,c)=>{const{onTap:f}=this.node.getProps();f&&Ct.postRender(()=>f(u,c))})};this.removeEndListeners(),this.removeEndListeners=Os(this.node.current,"keyup",a),jy("down",(l,u)=>{this.startPress(l,u)})},n=Os(this.node.current,"keydown",e),r=()=>{this.isPressing&&jy("cancel",(s,a)=>this.cancelPress(s,a))},i=Os(this.node.current,"blur",r);this.removeAccessibleListeners=Sa(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ct.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!RR()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ct.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Ta(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Os(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Sa(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const X_=new WeakMap,My=new WeakMap,bz=t=>{const e=X_.get(t.target);e&&e(t)},wz=t=>{t.forEach(bz)};function xz({root:t,...e}){const n=t||document;My.has(n)||My.set(n,{});const r=My.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(wz,{root:t,...e})),r[i]}function Ez(t,e,n){const r=xz(e);return X_.set(t,n),r.observe(t),()=>{X_.delete(t),r.unobserve(t)}}const Sz={some:0,all:1};class Tz extends Ba{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Sz[i]},l=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),p=c?f:d;p&&p(u)};return Ez(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Pz(e,n))&&this.startObserver()}unmount(){}}function Pz({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Oz={inView:{Feature:Tz},tap:{Feature:_z},focus:{Feature:vz},hover:{Feature:yz}},Az={layout:{ProjectionNode:XR,MeasureLayout:VR}},E0=K.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Mm=K.createContext({}),S0=typeof window<"u",QR=S0?K.useLayoutEffect:K.useEffect,eL=K.createContext({strict:!1});function kz(t,e,n,r,i){var s,a;const{visualElement:l}=K.useContext(Mm),u=K.useContext(eL),c=K.useContext(jm),f=K.useContext(E0).reducedMotion,d=K.useRef();r=r||u.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:l,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const p=d.current,m=K.useContext(zR);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&Cz(d.current,n,i,m);const g=K.useRef(!1);K.useInsertionEffect(()=>{p&&g.current&&p.update(n,c)});const b=n[OR],w=K.useRef(!!b&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,b))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,b)));return QR(()=>{p&&(g.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),x0.render(p.render),w.current&&p.animationState&&p.animationState.animateChanges())}),K.useEffect(()=>{p&&(!w.current&&p.animationState&&p.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,b)}),w.current=!1))}),p}function Cz(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:l,layoutScroll:u,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:tL(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||l&&bl(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:u,layoutRoot:c})}function tL(t){if(t)return t.options.allowProjection!==!1?t.projection:tL(t.parent)}function Rz(t,e,n){return K.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):bl(n)&&(n.current=r))},[e])}function Dm(t){return Lm(t.animate)||t0.some(e=>Sf(t[e]))}function nL(t){return!!(Dm(t)||t.variants)}function Lz(t,e){if(Dm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Sf(n)?n:void 0,animate:Sf(r)?r:void 0}}return t.inherit!==!1?e:{}}function Nz(t){const{initial:e,animate:n}=Lz(t,K.useContext(Mm));return K.useMemo(()=>({initial:e,animate:n}),[dT(e),dT(n)])}function dT(t){return Array.isArray(t)?t.join(" "):t}const hT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},eu={};for(const t in hT)eu[t]={isEnabled:e=>hT[t].some(n=>!!e[n])};function Iz(t){for(const e in t)eu[e]={...eu[e],...t[e]}}const jz=Symbol.for("motionComponentSymbol");function Mz({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&Iz(t);function s(l,u){let c;const f={...K.useContext(E0),...l,layoutId:Dz(l)},{isStatic:d}=f,p=Nz(l),m=r(l,d);if(!d&&S0){$z();const g=Bz(f);c=g.MeasureLayout,p.visualElement=kz(i,m,f,e,g.ProjectionNode)}return I.jsxs(Mm.Provider,{value:p,children:[c&&p.visualElement?I.jsx(c,{visualElement:p.visualElement,...f}):null,n(i,l,Rz(m,p.visualElement,u),m,d,p.visualElement)]})}const a=K.forwardRef(s);return a[jz]=i,a}function Dz({layoutId:t}){const e=K.useContext(w0).id;return e&&t!==void 0?e+"-"+t:t}function $z(t,e){K.useContext(eL).strict}function Bz(t){const{drag:e,layout:n}=eu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Fz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function T0(t){return typeof t!="string"||t.includes("-")?!1:!!(Fz.indexOf(t)>-1||/[A-Z]/u.test(t))}function rL(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const iL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sL(t,e,n,r){rL(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(iL.has(i)?i:b0(i),e.attrs[i])}function aL(t,{layout:e,layoutId:n}){return Io.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Mp[t]||t==="opacity")}function P0(t,e,n){var r;const{style:i}=t,s={};for(const a in i)(Zn(i[a])||e.style&&Zn(e.style[a])||aL(a,t)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function oL(t,e,n){const r=P0(t,e,n);for(const i in t)if(Zn(t[i])||Zn(e[i])){const s=rd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function O0(t){const e=K.useRef(null);return e.current===null&&(e.current=t()),e.current}function Uz({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const a={latestValues:zz(r,i,s,t),renderState:e()};return n&&(a.mount=l=>n(r,l,a)),a}const lL=t=>(e,n)=>{const r=K.useContext(Mm),i=K.useContext(jm),s=()=>Uz(t,e,r,i);return n?s():O0(s)};function zz(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=Hh(s[p]);let{initial:a,animate:l}=t;const u=Dm(t),c=nL(t);e&&c&&!u&&t.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let f=n?n.initial===!1:!1;f=f||a===!1;const d=f?l:a;if(d&&typeof d!="boolean"&&!Lm(d)){const p=Array.isArray(d)?d:[d];for(let m=0;m<p.length;m++){const g=Qw(t,p[m]);if(g){const{transitionEnd:b,transition:w,...y}=g;for(const v in y){let x=y[v];if(Array.isArray(x)){const E=f?x.length-1:0;x=x[E]}x!==null&&(i[v]=x)}for(const v in b)i[v]=b[v]}}}return i}const A0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),uL=()=>({...A0(),attrs:{}}),cL=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Vz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},qz=rd.length;function Hz(t,e,n){let r="",i=!0;for(let s=0;s<qz;s++){const a=rd[s],l=t[a];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(a.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const c=cL(l,u0[a]);if(!u){i=!1;const f=Vz[a]||a;r+=`${f}(${c}) `}n&&(e[a]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function k0(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,l=!1;for(const u in e){const c=e[u];if(Io.has(u)){a=!0;continue}else if(nR(u)){i[u]=c;continue}else{const f=cL(c,u0[u]);u.startsWith("origin")?(l=!0,s[u]=f):r[u]=f}}if(e.transform||(a||n?r.transform=Hz(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:c="50%",originZ:f=0}=s;r.transformOrigin=`${u} ${c} ${f}`}}function pT(t,e,n){return typeof t=="string"?t:Ue.transform(e+n*t)}function Zz(t,e,n){const r=pT(e,t.x,t.width),i=pT(n,t.y,t.height);return`${r} ${i}`}const Wz={offset:"stroke-dashoffset",array:"stroke-dasharray"},Gz={offset:"strokeDashoffset",array:"strokeDasharray"};function Kz(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Wz:Gz;t[s.offset]=Ue.transform(-r);const a=Ue.transform(e),l=Ue.transform(n);t[s.array]=`${a} ${l}`}function C0(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:l=1,pathOffset:u=0,...c},f,d){if(k0(t,c,d),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:g}=t;p.transform&&(g&&(m.transform=p.transform),delete p.transform),g&&(i!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=Zz(g,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),a!==void 0&&Kz(p,a,l,u,!1)}const R0=t=>typeof t=="string"&&t.toLowerCase()==="svg",Jz={useVisualState:lL({scrapeMotionValuesFromProps:oL,createRenderState:uL,onMount:(t,e,{renderState:n,latestValues:r})=>{Ct.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ct.render(()=>{C0(n,r,R0(e.tagName),t.transformTemplate),sL(e,n)})}})},Xz={useVisualState:lL({scrapeMotionValuesFromProps:P0,createRenderState:A0})};function fL(t,e,n){for(const r in e)!Zn(e[r])&&!aL(r,n)&&(t[r]=e[r])}function Yz({transformTemplate:t},e){return K.useMemo(()=>{const n=A0();return k0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Qz(t,e){const n=t.style||{},r={};return fL(r,n,t),Object.assign(r,Yz(t,e)),r}function e5(t,e){const n={},r=Qz(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const t5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||t5.has(t)}let dL=t=>!Dp(t);function n5(t){t&&(dL=e=>e.startsWith("on")?!Dp(e):t(e))}try{n5(require("@emotion/is-prop-valid").default)}catch{}function r5(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(dL(i)||n===!0&&Dp(i)||!e&&!Dp(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function i5(t,e,n,r){const i=K.useMemo(()=>{const s=uL();return C0(s,e,R0(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};fL(s,t.style,t),i.style={...s,...i.style}}return i}function s5(t=!1){return(n,r,i,{latestValues:s},a)=>{const u=(T0(n)?i5:e5)(r,s,a,n),c=r5(r,typeof n=="string",t),f=n!==K.Fragment?{...c,...u,ref:i}:{},{children:d}=r,p=K.useMemo(()=>Zn(d)?d.get():d,[d]);return K.createElement(n,{...f,children:p})}}function a5(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...T0(r)?Jz:Xz,preloadedFeatures:t,useRender:s5(i),createVisualElement:e,Component:r};return Mz(a)}}const Y_={current:null},hL={current:!1};function o5(){if(hL.current=!0,!!S0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Y_.current=t.matches;t.addListener(e),e()}else Y_.current=!1}function l5(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Zn(i))t.addValue(r,i);else if(Zn(s))t.addValue(r,Of(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,Of(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const mT=new WeakMap,u5=[...sR,zn,ka],c5=t=>u5.find(iR(t)),gT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class f5{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=a0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=ss.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ct.render(this.render,!1,!0))};const{latestValues:u,renderState:c}=a;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=Dm(n),this.isVariantNode=nL(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in d){const m=d[p];u[p]!==void 0&&Zn(m)&&m.set(u[p],!1)}}mount(e){this.current=e,mT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),hL.current||o5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Y_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){mT.delete(this.current),this.projection&&this.projection.unmount(),Aa(this.notifyUpdate),Aa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Io.has(e),i=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Ct.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in eu){const n=eu[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ln()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<gT.length;r++){const i=gT[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=l5(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Of(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(eR(i)||QC(i))?i=parseFloat(i):!c5(i)&&ka.test(n)&&(i=hR(e,n)),this.setBaseTarget(e,Zn(i)?i.get():i)),Zn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=Qw(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Zn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new _0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class pL extends f5{constructor(){super(...arguments),this.KeyframeResolver=pR}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function d5(t){return window.getComputedStyle(t)}class h5 extends pL{constructor(){super(...arguments),this.type="html",this.renderInstance=rL}readValueFromInstance(e,n){if(Io.has(n)){const r=c0(n);return r&&r.default||0}else{const r=d5(e),i=(nR(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return FR(e,n)}build(e,n,r){k0(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return P0(e,n,r)}}class p5 extends pL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ln}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Io.has(n)){const r=c0(n);return r&&r.default||0}return n=iL.has(n)?n:b0(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return oL(e,n,r)}build(e,n,r){C0(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){sL(e,n,r,i)}mount(e){this.isSVGTag=R0(e.tagName),super.mount(e)}}const m5=(t,e)=>T0(t)?new p5(e):new h5(e,{allowProjection:t!==K.Fragment}),g5=a5({...nU,...Oz,...pz,...Az},m5),y5=QF(g5);class v5 extends K.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function _5({children:t,isPresent:e}){const n=K.useId(),r=K.useRef(null),i=K.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=K.useContext(E0);return K.useInsertionEffect(()=>{const{width:a,height:l,top:u,left:c}=i.current;if(e||!r.current||!a||!l)return;r.current.dataset.motionPopId=n;const f=document.createElement("style");return s&&(f.nonce=s),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            top: ${u}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),I.jsx(v5,{isPresent:e,childRef:r,sizeRef:i,children:K.cloneElement(t,{ref:r})})}const b5=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const l=O0(w5),u=K.useId(),c=K.useCallback(d=>{l.set(d,!0);for(const p of l.values())if(!p)return;r&&r()},[l,r]),f=K.useMemo(()=>({id:u,initial:e,isPresent:n,custom:i,onExitComplete:c,register:d=>(l.set(d,!1),()=>l.delete(d))}),s?[Math.random(),c]:[n,c]);return K.useMemo(()=>{l.forEach((d,p)=>l.set(p,!1))},[n]),K.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),a==="popLayout"&&(t=I.jsx(_5,{isPresent:n,children:t})),I.jsx(jm.Provider,{value:f,children:t})};function w5(){return new Map}const ah=t=>t.key||"";function yT(t){const e=[];return K.Children.forEach(t,n=>{K.isValidElement(n)&&e.push(n)}),e}const x5=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:a="sync"})=>{const l=K.useMemo(()=>yT(t),[t]),u=l.map(ah),c=K.useRef(!0),f=K.useRef(l),d=O0(()=>new Map),[p,m]=K.useState(l),[g,b]=K.useState(l);QR(()=>{c.current=!1,f.current=l;for(let v=0;v<g.length;v++){const x=ah(g[v]);u.includes(x)?d.delete(x):d.get(x)!==!0&&d.set(x,!1)}},[g,u.length,u.join("-")]);const w=[];if(l!==p){let v=[...l];for(let x=0;x<g.length;x++){const E=g[x],T=ah(E);u.includes(T)||(v.splice(x,0,E),w.push(E))}a==="wait"&&w.length&&(v=w),b(yT(v)),m(l);return}const{forceRender:y}=K.useContext(w0);return I.jsx(I.Fragment,{children:g.map(v=>{const x=ah(v),E=l===g||u.includes(x),T=()=>{if(d.has(x))d.set(x,!0);else return;let O=!0;d.forEach(A=>{A||(O=!1)}),O&&(y==null||y(),b(f.current),i&&i())};return I.jsx(b5,{isPresent:E,initial:!c.current||r?void 0:!1,custom:E?void 0:n,presenceAffectsLayout:s,mode:a,onExitComplete:E?void 0:T,children:v},x)})})};var Fa={},Mt={},Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.anumber=Af;Ii.number=Af;Ii.abytes=$m;Ii.bytes=$m;Ii.ahash=mL;Ii.aexists=gL;Ii.aoutput=yL;function Af(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function E5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function $m(t,...e){if(!E5(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function mL(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Af(t.outputLen),Af(t.blockLen)}function gL(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function yL(t,e){$m(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const S5={number:Af,bytes:$m,hash:mL,exists:gL,output:yL};Ii.default=S5;var Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.add5L=Ge.add5H=Ge.add4H=Ge.add4L=Ge.add3H=Ge.add3L=Ge.rotlBL=Ge.rotlBH=Ge.rotlSL=Ge.rotlSH=Ge.rotr32L=Ge.rotr32H=Ge.rotrBL=Ge.rotrBH=Ge.rotrSL=Ge.rotrSH=Ge.shrSL=Ge.shrSH=Ge.toBig=void 0;Ge.fromBig=L0;Ge.split=vL;Ge.add=LL;const oh=BigInt(2**32-1),Q_=BigInt(32);function L0(t,e=!1){return e?{h:Number(t&oh),l:Number(t>>Q_&oh)}:{h:Number(t>>Q_&oh)|0,l:Number(t&oh)|0}}function vL(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:a}=L0(t[i],e);[n[i],r[i]]=[s,a]}return[n,r]}const _L=(t,e)=>BigInt(t>>>0)<<Q_|BigInt(e>>>0);Ge.toBig=_L;const bL=(t,e,n)=>t>>>n;Ge.shrSH=bL;const wL=(t,e,n)=>t<<32-n|e>>>n;Ge.shrSL=wL;const xL=(t,e,n)=>t>>>n|e<<32-n;Ge.rotrSH=xL;const EL=(t,e,n)=>t<<32-n|e>>>n;Ge.rotrSL=EL;const SL=(t,e,n)=>t<<64-n|e>>>n-32;Ge.rotrBH=SL;const TL=(t,e,n)=>t>>>n-32|e<<64-n;Ge.rotrBL=TL;const PL=(t,e)=>e;Ge.rotr32H=PL;const OL=(t,e)=>t;Ge.rotr32L=OL;const AL=(t,e,n)=>t<<n|e>>>32-n;Ge.rotlSH=AL;const kL=(t,e,n)=>e<<n|t>>>32-n;Ge.rotlSL=kL;const CL=(t,e,n)=>e<<n-32|t>>>64-n;Ge.rotlBH=CL;const RL=(t,e,n)=>t<<n-32|e>>>64-n;Ge.rotlBL=RL;function LL(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const NL=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);Ge.add3L=NL;const IL=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;Ge.add3H=IL;const jL=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);Ge.add4L=jL;const ML=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0;Ge.add4H=ML;const DL=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0);Ge.add5L=DL;const $L=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0;Ge.add5H=$L;const T5={fromBig:L0,split:vL,toBig:_L,shrSH:bL,shrSL:wL,rotrSH:xL,rotrSL:EL,rotrBH:SL,rotrBL:TL,rotr32H:PL,rotr32L:OL,rotlSH:AL,rotlSL:kL,rotlBH:CL,rotlBL:RL,add:LL,add3L:NL,add3H:IL,add4L:jL,add4H:ML,add5H:$L,add5L:DL};Ge.default=T5;var BL={},Bm={};Object.defineProperty(Bm,"__esModule",{value:!0});Bm.crypto=void 0;Bm.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=void 0,t.isBytes=r,t.byteSwap32=f,t.bytesToHex=p,t.hexToBytes=b,t.asyncLoop=y,t.utf8ToBytes=v,t.toBytes=x,t.concatBytes=E,t.checkOpts=O,t.wrapConstructor=A,t.wrapConstructorWithOpts=C,t.wrapXOFConstructorWithOpts=M,t.randomBytes=R;const e=Bm,n=Ii;function r(P){return P instanceof Uint8Array||ArrayBuffer.isView(P)&&P.constructor.name==="Uint8Array"}const i=P=>new Uint8Array(P.buffer,P.byteOffset,P.byteLength);t.u8=i;const s=P=>new Uint32Array(P.buffer,P.byteOffset,Math.floor(P.byteLength/4));t.u32=s;const a=P=>new DataView(P.buffer,P.byteOffset,P.byteLength);t.createView=a;const l=(P,N)=>P<<32-N|P>>>N;t.rotr=l;const u=(P,N)=>P<<N|P>>>32-N>>>0;t.rotl=u,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;const c=P=>P<<24&4278190080|P<<8&16711680|P>>>8&65280|P>>>24&255;t.byteSwap=c,t.byteSwapIfBE=t.isLE?P=>P:P=>(0,t.byteSwap)(P);function f(P){for(let N=0;N<P.length;N++)P[N]=(0,t.byteSwap)(P[N])}const d=Array.from({length:256},(P,N)=>N.toString(16).padStart(2,"0"));function p(P){(0,n.abytes)(P);let N="";for(let $=0;$<P.length;$++)N+=d[P[$]];return N}const m={_0:48,_9:57,A:65,F:70,a:97,f:102};function g(P){if(P>=m._0&&P<=m._9)return P-m._0;if(P>=m.A&&P<=m.F)return P-(m.A-10);if(P>=m.a&&P<=m.f)return P-(m.a-10)}function b(P){if(typeof P!="string")throw new Error("hex string expected, got "+typeof P);const N=P.length,$=N/2;if(N%2)throw new Error("hex string expected, got unpadded hex of length "+N);const D=new Uint8Array($);for(let z=0,G=0;z<$;z++,G+=2){const W=g(P.charCodeAt(G)),Z=g(P.charCodeAt(G+1));if(W===void 0||Z===void 0){const q=P[G]+P[G+1];throw new Error('hex string expected, got non-hex character "'+q+'" at index '+G)}D[z]=W*16+Z}return D}const w=async()=>{};t.nextTick=w;async function y(P,N,$){let D=Date.now();for(let z=0;z<P;z++){$(z);const G=Date.now()-D;G>=0&&G<N||(await(0,t.nextTick)(),D+=G)}}function v(P){if(typeof P!="string")throw new Error("utf8ToBytes expected string, got "+typeof P);return new Uint8Array(new TextEncoder().encode(P))}function x(P){return typeof P=="string"&&(P=v(P)),(0,n.abytes)(P),P}function E(...P){let N=0;for(let D=0;D<P.length;D++){const z=P[D];(0,n.abytes)(z),N+=z.length}const $=new Uint8Array(N);for(let D=0,z=0;D<P.length;D++){const G=P[D];$.set(G,z),z+=G.length}return $}class T{clone(){return this._cloneInto()}}t.Hash=T;function O(P,N){if(N!==void 0&&{}.toString.call(N)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(P,N)}function A(P){const N=D=>P().update(x(D)).digest(),$=P();return N.outputLen=$.outputLen,N.blockLen=$.blockLen,N.create=()=>P(),N}function C(P){const N=(D,z)=>P(z).update(x(D)).digest(),$=P({});return N.outputLen=$.outputLen,N.blockLen=$.blockLen,N.create=D=>P(D),N}function M(P){const N=(D,z)=>P(z).update(x(D)).digest(),$=P({});return N.outputLen=$.outputLen,N.blockLen=$.blockLen,N.create=D=>P(D),N}function R(P=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(P));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(P);throw new Error("crypto.getRandomValues must be defined")}})(BL);Object.defineProperty(Mt,"__esModule",{value:!0});Mt.shake256=Mt.shake128=Mt.keccak_512=Mt.keccak_384=Mt.keccak_256=Mt.keccak_224=Mt.sha3_512=Mt.sha3_384=Mt.sha3_256=Mt.sha3_224=Mt.Keccak=void 0;Mt.keccakP=VL;const Go=Ii,kf=Ge,Es=BL,FL=[],UL=[],zL=[],P5=BigInt(0),lc=BigInt(1),O5=BigInt(2),A5=BigInt(7),k5=BigInt(256),C5=BigInt(113);for(let t=0,e=lc,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],FL.push(2*(5*r+n)),UL.push((t+1)*(t+2)/2%64);let i=P5;for(let s=0;s<7;s++)e=(e<<lc^(e>>A5)*C5)%k5,e&O5&&(i^=lc<<(lc<<BigInt(s))-lc);zL.push(i)}const[R5,L5]=(0,kf.split)(zL,!0),vT=(t,e,n)=>n>32?(0,kf.rotlBH)(t,e,n):(0,kf.rotlSH)(t,e,n),_T=(t,e,n)=>n>32?(0,kf.rotlBL)(t,e,n):(0,kf.rotlSL)(t,e,n);function VL(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let a=0;a<10;a++)n[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const l=(a+8)%10,u=(a+2)%10,c=n[u],f=n[u+1],d=vT(c,f,1)^n[l],p=_T(c,f,1)^n[l+1];for(let m=0;m<50;m+=10)t[a+m]^=d,t[a+m+1]^=p}let i=t[2],s=t[3];for(let a=0;a<24;a++){const l=UL[a],u=vT(i,s,l),c=_T(i,s,l),f=FL[a];i=t[f],s=t[f+1],t[f]=u,t[f+1]=c}for(let a=0;a<50;a+=10){for(let l=0;l<10;l++)n[l]=t[a+l];for(let l=0;l<10;l++)t[a+l]^=~n[(l+2)%10]&n[(l+4)%10]}t[0]^=R5[r],t[1]^=L5[r]}n.fill(0)}class od extends Es.Hash{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,Go.anumber)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Es.u32)(this.state)}keccak(){Es.isLE||(0,Es.byteSwap32)(this.state32),VL(this.state32,this.rounds),Es.isLE||(0,Es.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(e){(0,Go.aexists)(this);const{blockLen:n,state:r}=this;e=(0,Es.toBytes)(e);const i=e.length;for(let s=0;s<i;){const a=Math.min(n-this.pos,i-s);for(let l=0;l<a;l++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,n&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){(0,Go.aexists)(this,!1),(0,Go.abytes)(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+a),i),this.posOut+=a,i+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,Go.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,Go.aoutput)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:a}=this;return e||(e=new od(n,r,i,a,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=a,e.destroyed=this.destroyed,e}}Mt.Keccak=od;const Ua=(t,e,n)=>(0,Es.wrapConstructor)(()=>new od(e,t,n));Mt.sha3_224=Ua(6,144,224/8);Mt.sha3_256=Ua(6,136,256/8);Mt.sha3_384=Ua(6,104,384/8);Mt.sha3_512=Ua(6,72,512/8);Mt.keccak_224=Ua(1,144,224/8);Mt.keccak_256=Ua(1,136,256/8);Mt.keccak_384=Ua(1,104,384/8);Mt.keccak_512=Ua(1,72,512/8);const qL=(t,e,n)=>(0,Es.wrapXOFConstructorWithOpts)((r={})=>new od(e,t,r.dkLen===void 0?n:r.dkLen,!0));Mt.shake128=qL(31,168,128/8);Mt.shake256=qL(31,136,256/8);const{sha3_512:N5}=Mt,HL=24,Wc=32,eb=(t=4,e=Math.random)=>{let n="";for(;n.length<t;)n=n+Math.floor(e()*36).toString(36);return n};function ZL(t){let e=8n,n=0n;for(const r of t.values()){const i=BigInt(r);n=(n<<e)+i}return n}const WL=(t="")=>ZL(N5(t)).toString(36).slice(1),bT=Array.from({length:26},(t,e)=>String.fromCharCode(e+97)),I5=t=>bT[Math.floor(t()*bT.length)],GL=({globalObj:t=typeof Hn<"u"?Hn:typeof window<"u"?window:{},random:e=Math.random}={})=>{const n=Object.keys(t).toString(),r=n.length?n+eb(Wc,e):eb(Wc,e);return WL(r).substring(0,Wc)},KL=t=>()=>t++,j5=476782367,JL=({random:t=Math.random,counter:e=KL(Math.floor(t()*j5)),length:n=HL,fingerprint:r=GL({random:t})}={})=>function(){const s=I5(t),a=Date.now().toString(36),l=e().toString(36),u=eb(n,t),c=`${a+u+l+r}`;return`${s+WL(c).substring(1,n)}`},M5=JL(),D5=(t,{minLength:e=2,maxLength:n=Wc}={})=>{const r=t.length,i=/^[0-9a-z]+$/;try{if(typeof t=="string"&&r>=e&&r<=n&&i.test(t))return!0}finally{}return!1};Fa.getConstants=()=>({defaultLength:HL,bigLength:Wc});Fa.init=JL;Fa.createId=M5;Fa.bufToBigInt=ZL;Fa.createCounter=KL;Fa.createFingerprint=GL;Fa.isCuid=D5;const{createId:$5,init:Tse,getConstants:Pse,isCuid:Ose}=Fa;var Dy=$5;const Zh={block:{shape:"block",width:"2px",height:"16px",color:"black",blinkSpeed:530},line:{shape:"line",width:"1px",height:"16px",color:"black",blinkSpeed:530},underscore:{shape:"underscore",width:"8px",height:"1px",color:"black",blinkSpeed:530}},B5=[{pattern:/^(#{1,6})\s(.+)$/gm,replacement:(t,e,n)=>{const r=e.length,i={1:"32px",2:"24px",3:"20px",4:"16px",5:"14px",6:"12px"}[r]||"12px";return`<h${r} style="font-weight:bold;font-size:${i};margin-bottom:1rem;">${n}</h${r}>`}},{pattern:/\*\*(.*?)\*\*/g,replacement:"<strong>$1</strong>"},{pattern:/\*(.*?)\*/g,replacement:"<em>$1</em>"},{pattern:/```([\s\S]*?)```/g,replacement:(t,e)=>`<pre style="background-color:#f3f4f6;padding:1rem;border-radius:0.5rem;margin:1rem 0;font-family:monospace;font-size:0.875rem;overflow-x:auto;">${e.trim()}</pre>`},{pattern:/`([^`]+)`/g,replacement:'<code style="background-color:#f3f4f6;padding:0 0.25rem;border-radius:0.25rem;font-family:monospace;font-size:0.875rem;">$1</code>'},{pattern:/^>\s(.+)$/gm,replacement:'<blockquote style="border-left:4px solid #d1d5db;padding-left:1rem;padding-top:0.5rem;padding-bottom:0.5rem;margin:1rem 0;font-style:italic;">$1</blockquote>'},{pattern:/^[-*]\s(.+)$/gm,replacement:'<li style="margin-left:1rem;">$1</li>'},{pattern:/\[(.*?)\]\((.*?)\)/g,replacement:'<a href="$2" style="color:#2563eb;text-decoration:underline;">$1</a>'},{pattern:/\n/g,replacement:"<br>"}],F5=({style:t,visible:e})=>t.shape==="custom"&&t.customContent?I.jsx("span",{style:{marginLeft:"4px",opacity:e?"1":"0",transition:`opacity ${t.blinkSpeed||530}ms`,color:t.color||"black"},children:t.customContent}):I.jsx("span",{style:{marginLeft:"4px",display:"inline-block",width:t.width||"2px",height:t.height||"16px",backgroundColor:t.color||"black",opacity:e?"1":"0"},"aria-hidden":"true"}),wT=t=>({...Zh[t.shape||"block"],...t}),U5=t=>{let e=t;return B5.forEach(n=>{e=e.replace(n.pattern,n.replacement)}),e},z5=({content:t,typeSpeed:e=50,initialDelay:n=500,onComplete:r,className:i="",cursor:s=Zh.block})=>{const[a,l]=K.useState({segments:[],currentSegmentIndex:0,currentCharIndex:0,isStarted:!1,showCursor:!0}),u=K.useCallback(d=>{const p=U5(d),m=[],g=/<[^>]+>/g;let b,w=0;for(;(b=g.exec(p))!==null;){if(b.index>w){const y=p.slice(w,b.index);y&&m.push({type:"text",content:y,length:y.length})}m.push({type:"html",content:b[0],length:1}),w=b.index+b[0].length}return w<p.length&&m.push({type:"text",content:p.slice(w),length:p.length-w}),m},[]);K.useEffect(()=>{const d=u(t);l(p=>({...p,segments:d}))},[t,u]),K.useEffect(()=>{if(a.segments.length===0)return;const d=setTimeout(()=>{l(p=>({...p,isStarted:!0}))},n);return()=>clearTimeout(d)},[a.segments,n]),K.useEffect(()=>{if(!a.isStarted||a.segments.length===0)return;const d=a.segments[a.currentSegmentIndex];if(!d)return;const p=a.currentSegmentIndex===a.segments.length-1;if(a.currentCharIndex>=d.length){if(p){r==null||r();return}const b=setTimeout(()=>{l(w=>({...w,currentSegmentIndex:w.currentSegmentIndex+1,currentCharIndex:0}))},e);return()=>clearTimeout(b)}const g=setTimeout(()=>{l(b=>({...b,currentCharIndex:b.currentCharIndex+1}))},e);return()=>clearTimeout(g)},[a,e,r]),K.useEffect(()=>{if(!s)return;const p=(typeof s=="object"?wT(s):Zh.block).blinkSpeed||530,m=setInterval(()=>{l(g=>({...g,showCursor:!g.showCursor}))},p);return()=>clearInterval(m)},[s]);const c=K.useMemo(()=>a.segments.map((d,p)=>p>a.currentSegmentIndex?null:p===a.currentSegmentIndex?d.type==="html"?d.content:d.content.slice(0,a.currentCharIndex):d.content).join(""),[a.segments,a.currentSegmentIndex,a.currentCharIndex]),f=K.useMemo(()=>{var d;return a.currentSegmentIndex===a.segments.length-1&&a.currentCharIndex>=(((d=a.segments[a.currentSegmentIndex])==null?void 0:d.length)||0)},[a]);return I.jsxs("div",{style:{maxWidth:"768px",margin:"auto",padding:"1rem"},children:[I.jsx("div",{dangerouslySetInnerHTML:{__html:c},style:{display:"inline"}}),s&&!f&&I.jsx(F5,{style:typeof s=="object"?wT(s):Zh.block,visible:a.showCursor})]})},tb="RFC3986",nb={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},V5="RFC1738",q5=Array.isArray,Hi=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),$y=1024,H5=(t,e,n,r,i)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});let a="";for(let l=0;l<s.length;l+=$y){const u=s.length>=$y?s.slice(l,l+$y):s,c=[];for(let f=0;f<u.length;++f){let d=u.charCodeAt(f);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===V5&&(d===40||d===41)){c[c.length]=u.charAt(f);continue}if(d<128){c[c.length]=Hi[d];continue}if(d<2048){c[c.length]=Hi[192|d>>6]+Hi[128|d&63];continue}if(d<55296||d>=57344){c[c.length]=Hi[224|d>>12]+Hi[128|d>>6&63]+Hi[128|d&63];continue}f+=1,d=65536+((d&1023)<<10|u.charCodeAt(f)&1023),c[c.length]=Hi[240|d>>18]+Hi[128|d>>12&63]+Hi[128|d>>6&63]+Hi[128|d&63]}a+=c.join("")}return a};function Z5(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function xT(t,e){if(q5(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const W5=Object.prototype.hasOwnProperty,XL={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},Ki=Array.isArray,G5=Array.prototype.push,YL=function(t,e){G5.apply(t,Ki(e)?e:[e])},K5=Date.prototype.toISOString,bn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:H5,encodeValuesOnly:!1,format:tb,formatter:nb[tb],indices:!1,serializeDate(t){return K5.call(t)},skipNulls:!1,strictNullHandling:!1};function J5(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const By={};function QL(t,e,n,r,i,s,a,l,u,c,f,d,p,m,g,b,w,y){let v=t,x=y,E=0,T=!1;for(;(x=x.get(By))!==void 0&&!T;){const R=x.get(t);if(E+=1,typeof R<"u"){if(R===E)throw new RangeError("Cyclic object value");T=!0}typeof x.get(By)>"u"&&(E=0)}if(typeof c=="function"?v=c(e,v):v instanceof Date?v=p==null?void 0:p(v):n==="comma"&&Ki(v)&&(v=xT(v,function(R){return R instanceof Date?p==null?void 0:p(R):R})),v===null){if(s)return u&&!b?u(e,bn.encoder,w,"key",m):e;v=""}if(J5(v)||Z5(v)){if(u){const R=b?e:u(e,bn.encoder,w,"key",m);return[(g==null?void 0:g(R))+"="+(g==null?void 0:g(u(v,bn.encoder,w,"value",m)))]}return[(g==null?void 0:g(e))+"="+(g==null?void 0:g(String(v)))]}const O=[];if(typeof v>"u")return O;let A;if(n==="comma"&&Ki(v))b&&u&&(v=xT(v,u)),A=[{value:v.length>0?v.join(",")||null:void 0}];else if(Ki(c))A=c;else{const R=Object.keys(v);A=f?R.sort(f):R}const C=l?String(e).replace(/\./g,"%2E"):String(e),M=r&&Ki(v)&&v.length===1?C+"[]":C;if(i&&Ki(v)&&v.length===0)return M+"[]";for(let R=0;R<A.length;++R){const P=A[R],N=typeof P=="object"&&typeof P.value<"u"?P.value:v[P];if(a&&N===null)continue;const $=d&&l?P.replace(/\./g,"%2E"):P,D=Ki(v)?typeof n=="function"?n(M,$):M:M+(d?"."+$:"["+$+"]");y.set(t,E);const z=new WeakMap;z.set(By,y),YL(O,QL(N,D,n,r,i,s,a,l,n==="comma"&&b&&Ki(v)?null:u,c,f,d,p,m,g,b,w,z))}return O}function X5(t=bn){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||bn.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=tb;if(typeof t.format<"u"){if(!W5.call(nb,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=nb[n];let i=bn.filter;(typeof t.filter=="function"||Ki(t.filter))&&(i=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in XL?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=bn.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:bn.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:bn.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:bn.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:bn.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?bn.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:bn.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:bn.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:bn.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:bn.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:bn.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:bn.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:bn.strictNullHandling}}function Y5(t,e={}){let n=t;const r=X5(e);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):Ki(r.filter)&&(s=r.filter,i=s);const a=[];if(typeof n!="object"||n===null)return"";const l=XL[r.arrayFormat],u=l==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const c=new WeakMap;for(let p=0;p<i.length;++p){const m=i[p];r.skipNulls&&n[m]===null||YL(a,QL(n[m],m,l,u,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}const f=a.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),f.length>0?d+f:""}const el="4.75.0";let ET=!1,Gc,eN,tN,rb,nN,rN,iN,sN,aN;function Q5(t,e={auto:!1}){if(ET)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(Gc)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${Gc}'\``);ET=e.auto,Gc=t.kind,eN=t.fetch,t.Request,t.Response,t.Headers,tN=t.FormData,t.Blob,rb=t.File,nN=t.ReadableStream,rN=t.getMultipartRequestOptions,iN=t.getDefaultAgent,sN=t.fileFromPath,aN=t.isFsReadStream}class eV{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function tV({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,i,s;try{n=fetch,r=Request,i=Response,s=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(a,l)=>({...l,body:new eV(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}Gc||Q5(tV(),{auto:!0});class ut extends Error{}class $n extends ut{constructor(e,n,r,i){super(`${$n.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.request_id=i==null?void 0:i["x-request-id"];const s=n;this.error=s,this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e)return new Fm({message:r,cause:sb(n)});const s=n==null?void 0:n.error;return e===400?new oN(e,s,r,i):e===401?new lN(e,s,r,i):e===403?new uN(e,s,r,i):e===404?new cN(e,s,r,i):e===409?new fN(e,s,r,i):e===422?new dN(e,s,r,i):e===429?new hN(e,s,r,i):e>=500?new pN(e,s,r,i):new $n(e,s,r,i)}}class Kr extends $n{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class Fm extends $n{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class Um extends Fm{constructor({message:e}={}){super({message:e??"Request timed out."})}}class oN extends $n{constructor(){super(...arguments),this.status=400}}class lN extends $n{constructor(){super(...arguments),this.status=401}}class uN extends $n{constructor(){super(...arguments),this.status=403}}class cN extends $n{constructor(){super(...arguments),this.status=404}}class fN extends $n{constructor(){super(...arguments),this.status=409}}class dN extends $n{constructor(){super(...arguments),this.status=422}}class hN extends $n{constructor(){super(...arguments),this.status=429}}class pN extends $n{}class mN extends ut{constructor(){super("Could not parse response content as the length limit was reached")}}class gN extends ut{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Po{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let n=this.decodeText(e);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=Po.NEWLINE_CHARS.has(n[n.length-1]||"");let i=n.split(Po.NEWLINE_REGEXP);return r&&i.pop(),i.length===1&&!r?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),r||(this.buffer=[i.pop()||""]),i)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new ut(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new ut(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new ut("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}Po.NEWLINE_CHARS=new Set([`
`,"\r"]);Po.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class Qi{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(const a of nV(e,n))if(!s){if(a.data.startsWith("[DONE]")){s=!0;continue}if(a.event===null){let l;try{l=JSON.parse(a.data)}catch(u){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),u}if(l&&l.error)throw new $n(void 0,l.error,void 0,void 0);yield l}else{let l;try{l=JSON.parse(a.data)}catch(u){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),u}if(a.event=="error")throw new $n(void 0,l.error,l.message,void 0);yield{event:a.event,data:l}}}s=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{s||n.abort()}}return new Qi(i,n)}static fromReadableStream(e,n){let r=!1;async function*i(){const a=new Po,l=yN(e);for await(const u of l)for(const c of a.decode(u))yield c;for(const u of a.flush())yield u}async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const l of i())a||l&&(yield JSON.parse(l));a=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{a||n.abort()}}return new Qi(s,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const a=r.next();e.push(a),n.push(a)}return s.shift()}});return[new Qi(()=>i(e),this.controller),new Qi(()=>i(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new nN({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:a}=await n.next();if(a)return i.close();const l=r.encode(JSON.stringify(s)+`
`);i.enqueue(l)}catch(s){i.error(s)}},async cancel(){var i;await((i=n.return)==null?void 0:i.call(n))}})}}async function*nV(t,e){if(!t.body)throw e.abort(),new ut("Attempted to iterate over a response with no body");const n=new sV,r=new Po,i=yN(t.body);for await(const s of rV(i))for(const a of r.decode(s)){const l=n.decode(a);l&&(yield l)}for(const s of r.flush()){const a=n.decode(s);a&&(yield a)}}async function*rV(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let i=new Uint8Array(e.length+r.length);i.set(e),i.set(r,e.length),e=i;let s;for(;(s=iV(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}function iV(t){for(let r=0;r<t.length-2;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}class sV{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=aV(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function aV(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}function yN(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const vN=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",_N=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&zm(t),zm=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",oV=t=>_N(t)||vN(t)||aN(t);async function bN(t,e,n){var i;if(t=await t,_N(t))return t;if(vN(t)){const s=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const a=zm(s)?[await s.arrayBuffer()]:[s];return new rb(a,e,n)}const r=await lV(t);if(e||(e=cV(t)??"unknown_file"),!(n!=null&&n.type)){const s=(i=r[0])==null?void 0:i.type;typeof s=="string"&&(n={...n,type:s})}return new rb(r,e,n)}async function lV(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(zm(t))e.push(await t.arrayBuffer());else if(fV(t))for await(const r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(n=t==null?void 0:t.constructor)==null?void 0:n.name}; props: ${uV(t)}`);return e}function uV(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function cV(t){var e;return Fy(t.name)||Fy(t.filename)||((e=Fy(t.path))==null?void 0:e.split(/[\\/]/).pop())}const Fy=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},fV=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",ST=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",tu=async t=>{const e=await dV(t.body);return rN(e,t)},dV=async t=>{const e=new tN;return await Promise.all(Object.entries(t||{}).map(([n,r])=>ib(e,n,r))),e},ib=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(oV(n)){const r=await bN(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>ib(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>ib(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Ml={},hV=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},pV=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},lh;async function wN(t){const{response:e}=t;if(t.options.stream)return Dl("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):Qi.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const n=e.headers.get("content-type");if((n==null?void 0:n.includes("application/json"))||(n==null?void 0:n.includes("application/vnd.api+json"))){const s=await e.json();return Dl("response",e.status,e.url,e.headers,s),xN(s,e)}const i=await e.text();return Dl("response",e.status,e.url,e.headers,i),i}function xN(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class Vm extends Promise{constructor(e,n=wN){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new Vm(this.responsePromise,async n=>xN(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class mV{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:i,fetch:s}){this.baseURL=e,this.maxRetries=Uy("maxRetries",n),this.timeout=Uy("timeout",r),this.httpAgent=i,this.fetch=s??eN}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...wV(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${TV()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async i=>{const s=i&&zm(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:e,path:n,...i,body:s}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){var b;const{method:r,path:i,query:s,headers:a={}}=e,l=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:ST(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,u=this.calculateContentLength(l),c=this.buildURL(i,s);"timeout"in e&&Uy("timeout",e.timeout);const f=e.timeout??this.timeout,d=e.httpAgent??this.httpAgent??iN(c),p=f+1e3;typeof((b=d==null?void 0:d.options)==null?void 0:b.timeout)=="number"&&p>(d.options.timeout??0)&&(d.options.timeout=p),this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const m=this.buildHeaders({options:e,headers:a,contentLength:u,retryCount:n});return{req:{method:r,...l&&{body:l},headers:m,...d&&{agent:d},signal:e.signal??null},url:c,timeout:f}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:i}){const s={};r&&(s["content-length"]=r);const a=this.defaultHeaders(e);return AT(s,a),AT(s,n),ST(e.body)&&Gc!=="node"&&delete s["content-type"],kT(a,"x-stainless-retry-count")===void 0&&kT(n,"x-stainless-retry-count")===void 0&&(s["x-stainless-retry-count"]=String(i)),this.validateHeaders(s,n),s}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,i){return $n.generate(e,n,r,i)}request(e,n=null){return new Vm(this.makeRequest(e,n))}async makeRequest(e,n){var d,p;const r=await e,i=r.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(r);const{req:s,url:a,timeout:l}=this.buildRequest(r,{retryCount:i-n});if(await this.prepareRequest(s,{url:a,options:r}),Dl("request",a,r,s.headers),(d=r.signal)!=null&&d.aborted)throw new Kr;const u=new AbortController,c=await this.fetchWithTimeout(a,s,l,u).catch(sb);if(c instanceof Error){if((p=r.signal)!=null&&p.aborted)throw new Kr;if(n)return this.retryRequest(r,n);throw c.name==="AbortError"?new Um:new Fm({cause:c})}const f=yV(c.headers);if(!c.ok){if(n&&this.shouldRetry(c)){const v=`retrying, ${n} attempts remaining`;return Dl(`response (error; ${v})`,c.status,a,f),this.retryRequest(r,n,f)}const m=await c.text().catch(v=>sb(v).message),g=xV(m),b=g?void 0:m;throw Dl(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,c.status,a,f,b),this.makeStatusError(c.status,g,b,f)}return{response:c,options:r,controller:u}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new gV(this,r,e)}buildURL(e,n){const r=SV(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return SN(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new ut(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,i){const{signal:s,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const l=setTimeout(()=>i.abort(),r);return this.getRequestClient().fetch.call(void 0,e,{signal:i.signal,...a}).finally(()=>{clearTimeout(l)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let i;const s=r==null?void 0:r["retry-after-ms"];if(s){const l=parseFloat(s);Number.isNaN(l)||(i=l)}const a=r==null?void 0:r["retry-after"];if(a&&!i){const l=parseFloat(a);Number.isNaN(l)?i=Date.parse(a)-Date.now():i=l*1e3}if(!(i&&0<=i&&i<60*1e3)){const l=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,l)}return await ld(i),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,a=Math.min(.5*Math.pow(2,s),8),l=1-Math.random()*.25;return a*l*1e3}getUserAgent(){return`${this.constructor.name}/JS ${el}`}}class EN{constructor(e,n,r,i){lh.set(this,void 0),hV(this,lh,e,"f"),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new ut("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[i,s]of r)e.url.searchParams.set(i,s);n.query=void 0,n.path=e.url.toString()}return await pV(this,lh,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(lh=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class gV extends Vm{constructor(e,n,r){super(n,async i=>new r(e,i.response,await wN(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const yV=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),vV={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},yr=t=>typeof t=="object"&&t!==null&&!SN(t)&&Object.keys(t).every(e=>TN(vV,e)),_V=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":el,"X-Stainless-OS":PT(Deno.build.os),"X-Stainless-Arch":TT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":el,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":el,"X-Stainless-OS":PT(process.platform),"X-Stainless-Arch":TT(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=bV();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":el,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":el,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function bV(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,a=r[3]||0;return{browser:e,version:`${i}.${s}.${a}`}}}return null}const TT=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",PT=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let OT;const wV=()=>OT??(OT=_V()),xV=t=>{try{return JSON.parse(t)}catch{return}},EV=new RegExp("^(?:[a-z]+:)?//","i"),SV=t=>EV.test(t),ld=t=>new Promise(e=>setTimeout(e,t)),Uy=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ut(`${t} must be an integer`);if(e<0)throw new ut(`${t} must be a positive integer`);return e},sb=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},uh=t=>{var e,n,r,i;if(typeof process<"u")return((e=Ml==null?void 0:Ml[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(i=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};function SN(t){if(!t)return!0;for(const e in t)return!1;return!0}function TN(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function AT(t,e){for(const n in e){if(!TN(e,n))continue;const r=n.toLowerCase();if(!r)continue;const i=e[n];i===null?delete t[r]:i!==void 0&&(t[r]=i)}}function Dl(t,...e){typeof process<"u"&&(Ml==null?void 0:Ml.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${t}`,...e)}const TV=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),PV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",OV=t=>typeof(t==null?void 0:t.get)=="function",kT=(t,e)=>{var r;const n=e.toLowerCase();if(OV(t)){const i=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(s,a,l)=>a+l.toUpperCase());for(const s of[e,n,e.toUpperCase(),i]){const a=t.get(s);if(a)return a}}for(const[i,s]of Object.entries(t))if(i.toLowerCase()===n)return Array.isArray(s)?(s.length<=1||console.warn(`Received ${s.length} entries for the ${e} header, using the first entry.`),s[0]):s};function zy(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class AV extends EN{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class ji extends EN{constructor(e,n,r,i){super(e,n,r,i),this.data=r.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const n=(r=e[e.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class Ot{constructor(e){this._client=e}}let PN=class extends Ot{create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}},N0=class extends Ot{constructor(){super(...arguments),this.completions=new PN(this._client)}};N0.Completions=PN;class ON extends Ot{create(e,n){return this._client.post("/audio/speech",{body:e,...n,__binaryResponse:!0})}}class AN extends Ot{create(e,n){return this._client.post("/audio/transcriptions",tu({body:e,...n}))}}class kN extends Ot{create(e,n){return this._client.post("/audio/translations",tu({body:e,...n}))}}class ud extends Ot{constructor(){super(...arguments),this.transcriptions=new AN(this._client),this.translations=new kN(this._client),this.speech=new ON(this._client)}}ud.Transcriptions=AN;ud.Translations=kN;ud.Speech=ON;class I0 extends Ot{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return yr(e)?this.list({},e):this._client.getAPIList("/batches",j0,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}}class j0 extends ji{}I0.BatchesPage=j0;class M0 extends Ot{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return yr(e)?this.list({},e):this._client.getAPIList("/assistants",D0,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class D0 extends ji{}M0.AssistantsPage=D0;function CT(t){return typeof t.parse=="function"}const $l=t=>(t==null?void 0:t.role)==="assistant",CN=t=>(t==null?void 0:t.role)==="function",RN=t=>(t==null?void 0:t.role)==="tool";var pi=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},Zt=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ab,Wh,Gh,Sc,Tc,Kh,Pc,bs,Oc,$p,Bp,tl,LN;class NN{constructor(){ab.add(this),this.controller=new AbortController,Wh.set(this,void 0),Gh.set(this,()=>{}),Sc.set(this,()=>{}),Tc.set(this,void 0),Kh.set(this,()=>{}),Pc.set(this,()=>{}),bs.set(this,{}),Oc.set(this,!1),$p.set(this,!1),Bp.set(this,!1),tl.set(this,!1),pi(this,Wh,new Promise((e,n)=>{pi(this,Gh,e,"f"),pi(this,Sc,n,"f")}),"f"),pi(this,Tc,new Promise((e,n)=>{pi(this,Kh,e,"f"),pi(this,Pc,n,"f")}),"f"),Zt(this,Wh,"f").catch(()=>{}),Zt(this,Tc,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Zt(this,ab,"m",LN).bind(this))},0)}_connected(){this.ended||(Zt(this,Gh,"f").call(this),this._emit("connect"))}get ended(){return Zt(this,Oc,"f")}get errored(){return Zt(this,$p,"f")}get aborted(){return Zt(this,Bp,"f")}abort(){this.controller.abort()}on(e,n){return(Zt(this,bs,"f")[e]||(Zt(this,bs,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=Zt(this,bs,"f")[e];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(e,n){return(Zt(this,bs,"f")[e]||(Zt(this,bs,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{pi(this,tl,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){pi(this,tl,!0,"f"),await Zt(this,Tc,"f")}_emit(e,...n){if(Zt(this,Oc,"f"))return;e==="end"&&(pi(this,Oc,!0,"f"),Zt(this,Kh,"f").call(this));const r=Zt(this,bs,"f")[e];if(r&&(Zt(this,bs,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),e==="abort"){const i=n[0];!Zt(this,tl,"f")&&!(r!=null&&r.length)&&Promise.reject(i),Zt(this,Sc,"f").call(this,i),Zt(this,Pc,"f").call(this,i),this._emit("end");return}if(e==="error"){const i=n[0];!Zt(this,tl,"f")&&!(r!=null&&r.length)&&Promise.reject(i),Zt(this,Sc,"f").call(this,i),Zt(this,Pc,"f").call(this,i),this._emit("end")}}_emitFinal(){}}Wh=new WeakMap,Gh=new WeakMap,Sc=new WeakMap,Tc=new WeakMap,Kh=new WeakMap,Pc=new WeakMap,bs=new WeakMap,Oc=new WeakMap,$p=new WeakMap,Bp=new WeakMap,tl=new WeakMap,ab=new WeakSet,LN=function(e){if(pi(this,$p,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Kr),e instanceof Kr)return pi(this,Bp,!0,"f"),this._emit("abort",e);if(e instanceof ut)return this._emit("error",e);if(e instanceof Error){const n=new ut(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new ut(String(e)))};function kV(t,e){const n={...t};return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),n}function IN(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function CV(t,{parser:e,callback:n}){const r={...t};return Object.defineProperties(r,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:e,enumerable:!1},$callback:{value:n,enumerable:!1}}),r}function cd(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function RV(t,e){return!e||!jN(e)?{...t,choices:t.choices.map(n=>({...n,message:{...n.message,parsed:null,tool_calls:n.message.tool_calls??[]}}))}:$0(t,e)}function $0(t,e){const n=t.choices.map(r=>{var i;if(r.finish_reason==="length")throw new mN;if(r.finish_reason==="content_filter")throw new gN;return{...r,message:{...r.message,tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(s=>NV(e,s)))??[],parsed:r.message.content&&!r.message.refusal?LV(e,r.message.content):null}}});return{...t,choices:n}}function LV(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function NV(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return((s=i.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:cd(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function IV(t,e){var r;if(!t)return!1;const n=(r=t.tools)==null?void 0:r.find(i=>{var s;return((s=i.function)==null?void 0:s.name)===e.function.name});return cd(n)||(n==null?void 0:n.function.strict)||!1}function jN(t){var e;return IN(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>cd(n)||n.type==="function"&&n.function.strict===!0))??!1}function jV(t){for(const e of t??[]){if(e.type!=="function")throw new ut(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new ut(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var cr=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Un,ob,Fp,lb,ub,cb,MN,fb;const RT=10;class DN extends NN{constructor(){super(...arguments),Un.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),(CN(e)||RN(e))&&e.content)this._emit("functionCallResult",e.content);else if($l(e)&&e.function_call)this._emit("functionCall",e.function_call);else if($l(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new ut("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),cr(this,Un,"m",ob).call(this)}async finalMessage(){return await this.done(),cr(this,Un,"m",Fp).call(this)}async finalFunctionCall(){return await this.done(),cr(this,Un,"m",lb).call(this)}async finalFunctionCallResult(){return await this.done(),cr(this,Un,"m",ub).call(this)}async totalUsage(){return await this.done(),cr(this,Un,"m",cb).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=cr(this,Un,"m",Fp).call(this);n&&this._emit("finalMessage",n);const r=cr(this,Un,"m",ob).call(this);r&&this._emit("finalContent",r);const i=cr(this,Un,"m",lb).call(this);i&&this._emit("finalFunctionCall",i);const s=cr(this,Un,"m",ub).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",cr(this,Un,"m",cb).call(this))}async _createChatCompletion(e,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),cr(this,Un,"m",MN).call(this,n);const s=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion($0(s,n))}async _runChatCompletion(e,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){var p;const i="function",{function_call:s="auto",stream:a,...l}=n,u=typeof s!="string"&&(s==null?void 0:s.name),{maxChatCompletions:c=RT}=r||{},f={};for(const m of n.functions)f[m.name||m.function.name]=m;const d=n.functions.map(m=>({name:m.name||m.function.name,parameters:m.parameters,description:m.description}));for(const m of n.messages)this._addMessage(m,!1);for(let m=0;m<c;++m){const b=(p=(await this._createChatCompletion(e,{...l,function_call:s,functions:d,messages:[...this.messages]},r)).choices[0])==null?void 0:p.message;if(!b)throw new ut("missing message in ChatCompletion response");if(!b.function_call)return;const{name:w,arguments:y}=b.function_call,v=f[w];if(v){if(u&&u!==w){const O=`Invalid function_call: ${JSON.stringify(w)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:i,name:w,content:O});continue}}else{const O=`Invalid function_call: ${JSON.stringify(w)}. Available options are: ${d.map(A=>JSON.stringify(A.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:w,content:O});continue}let x;try{x=CT(v)?await v.parse(y):y}catch(O){this._addMessage({role:i,name:w,content:O instanceof Error?O.message:String(O)});continue}const E=await v.function(x,this),T=cr(this,Un,"m",fb).call(this,E);if(this._addMessage({role:i,name:w,content:T}),u)return}}async _runTools(e,n,r){var m,g,b;const i="tool",{tool_choice:s="auto",stream:a,...l}=n,u=typeof s!="string"&&((m=s==null?void 0:s.function)==null?void 0:m.name),{maxChatCompletions:c=RT}=r||{},f=n.tools.map(w=>{if(cd(w)){if(!w.$callback)throw new ut("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:w.$callback,name:w.function.name,description:w.function.description||"",parameters:w.function.parameters,parse:w.$parseRaw,strict:!0}}}return w}),d={};for(const w of f)w.type==="function"&&(d[w.function.name||w.function.function.name]=w.function);const p="tools"in n?f.map(w=>w.type==="function"?{type:"function",function:{name:w.function.name||w.function.function.name,parameters:w.function.parameters,description:w.function.description,strict:w.function.strict}}:w):void 0;for(const w of n.messages)this._addMessage(w,!1);for(let w=0;w<c;++w){const v=(g=(await this._createChatCompletion(e,{...l,tool_choice:s,tools:p,messages:[...this.messages]},r)).choices[0])==null?void 0:g.message;if(!v)throw new ut("missing message in ChatCompletion response");if(!((b=v.tool_calls)!=null&&b.length))return;for(const x of v.tool_calls){if(x.type!=="function")continue;const E=x.id,{name:T,arguments:O}=x.function,A=d[T];if(A){if(u&&u!==T){const P=`Invalid tool_call: ${JSON.stringify(T)}. ${JSON.stringify(u)} requested. Please try again`;this._addMessage({role:i,tool_call_id:E,content:P});continue}}else{const P=`Invalid tool_call: ${JSON.stringify(T)}. Available options are: ${Object.keys(d).map(N=>JSON.stringify(N)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:E,content:P});continue}let C;try{C=CT(A)?await A.parse(O):O}catch(P){const N=P instanceof Error?P.message:String(P);this._addMessage({role:i,tool_call_id:E,content:N});continue}const M=await A.function(C,this),R=cr(this,Un,"m",fb).call(this,M);if(this._addMessage({role:i,tool_call_id:E,content:R}),u)return}}}}Un=new WeakSet,ob=function(){return cr(this,Un,"m",Fp).call(this).content??null},Fp=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if($l(n)){const{function_call:r,...i}=n,s={...i,content:n.content??null,refusal:n.refusal??null};return r&&(s.function_call=r),s}}throw new ut("stream ended without producing a ChatCompletionMessage with role=assistant")},lb=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if($l(i)&&(i!=null&&i.function_call))return i.function_call;if($l(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(n=i.tool_calls.at(-1))==null?void 0:n.function}},ub=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(CN(n)&&n.content!=null||RN(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(s=>s.type==="function"&&s.id===n.tool_call_id))}))return n.content}},cb=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},MN=function(e){if(e.n!=null&&e.n>1)throw new ut("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},fb=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Cf extends DN{static runFunctions(e,n,r){const i=new Cf,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,s)),i}static runTools(e,n,r){const i=new Cf,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}_addMessage(e,n=!0){super._addMessage(e,n),$l(e)&&e.content&&this._emit("content",e.content)}}const $N=1,BN=2,FN=4,UN=8,zN=16,VN=32,qN=64,HN=128,ZN=256,WN=HN|ZN,GN=zN|VN|WN|qN,KN=$N|BN|GN,JN=FN|UN,MV=KN|JN,Pn={STR:$N,NUM:BN,ARR:FN,OBJ:UN,NULL:zN,BOOL:VN,NAN:qN,INFINITY:HN,MINUS_INFINITY:ZN,INF:WN,SPECIAL:GN,ATOM:KN,COLLECTION:JN,ALL:MV};class DV extends Error{}class $V extends Error{}function BV(t,e=Pn.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return FV(t.trim(),e)}const FV=(t,e)=>{const n=t.length;let r=0;const i=p=>{throw new DV(`${p} at position ${r}`)},s=p=>{throw new $V(`${p} at position ${r}`)},a=()=>(d(),r>=n&&i("Unexpected end of input"),t[r]==='"'?l():t[r]==="{"?u():t[r]==="["?c():t.substring(r,r+4)==="null"||Pn.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Pn.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Pn.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Pn.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Pn.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Pn.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):f()),l=()=>{const p=r;let m=!1;for(r++;r<n&&(t[r]!=='"'||m&&t[r-1]==="\\");)m=t[r]==="\\"?!m:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(p,++r-Number(m)))}catch(g){s(String(g))}else if(Pn.STR&e)try{return JSON.parse(t.substring(p,r-Number(m))+'"')}catch{return JSON.parse(t.substring(p,t.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},u=()=>{r++,d();const p={};try{for(;t[r]!=="}";){if(d(),r>=n&&Pn.OBJ&e)return p;const m=l();d(),r++;try{const g=a();Object.defineProperty(p,m,{value:g,writable:!0,enumerable:!0,configurable:!0})}catch(g){if(Pn.OBJ&e)return p;throw g}d(),t[r]===","&&r++}}catch{if(Pn.OBJ&e)return p;i("Expected '}' at end of object")}return r++,p},c=()=>{r++;const p=[];try{for(;t[r]!=="]";)p.push(a()),d(),t[r]===","&&r++}catch{if(Pn.ARR&e)return p;i("Expected ']' at end of array")}return r++,p},f=()=>{if(r===0){t==="-"&&Pn.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t)}catch(m){if(Pn.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(m))}}const p=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Pn.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(t.substring(p,r))}catch{t.substring(p,r)==="-"&&Pn.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(t.substring(p,t.lastIndexOf("e")))}catch(g){s(String(g))}}},d=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return a()},LT=t=>BV(t,Pn.ALL^Pn.NUM);var Ko=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},kt=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},_n,vs,Jo,Qs,Vy,ch,qy,Hy,Zy,fh,Wy,NT;class Rf extends DN{constructor(e){super(),_n.add(this),vs.set(this,void 0),Jo.set(this,void 0),Qs.set(this,void 0),Ko(this,vs,e,"f"),Ko(this,Jo,[],"f")}get currentChatCompletionSnapshot(){return kt(this,Qs,"f")}static fromReadableStream(e){const n=new Rf(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const i=new Rf(n);return i._run(()=>i._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,n,r){var a;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),kt(this,_n,"m",Vy).call(this);const s=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of s)kt(this,_n,"m",qy).call(this,l);if((a=s.controller.signal)!=null&&a.aborted)throw new Kr;return this._addChatCompletion(kt(this,_n,"m",fh).call(this))}async _fromReadableStream(e,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),kt(this,_n,"m",Vy).call(this),this._connected();const i=Qi.fromReadableStream(e,this.controller);let s;for await(const l of i)s&&s!==l.id&&this._addChatCompletion(kt(this,_n,"m",fh).call(this)),kt(this,_n,"m",qy).call(this,l),s=l.id;if((a=i.controller.signal)!=null&&a.aborted)throw new Kr;return this._addChatCompletion(kt(this,_n,"m",fh).call(this))}[(vs=new WeakMap,Jo=new WeakMap,Qs=new WeakMap,_n=new WeakSet,Vy=function(){this.ended||Ko(this,Qs,void 0,"f")},ch=function(n){let r=kt(this,Jo,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},kt(this,Jo,"f")[n.index]=r,r)},qy=function(n){var i,s,a,l,u,c,f,d,p,m,g,b,w,y,v;if(this.ended)return;const r=kt(this,_n,"m",NT).call(this,n);this._emit("chunk",n,r);for(const x of n.choices){const E=r.choices[x.index];x.delta.content!=null&&((i=E.message)==null?void 0:i.role)==="assistant"&&((s=E.message)!=null&&s.content)&&(this._emit("content",x.delta.content,E.message.content),this._emit("content.delta",{delta:x.delta.content,snapshot:E.message.content,parsed:E.message.parsed})),x.delta.refusal!=null&&((a=E.message)==null?void 0:a.role)==="assistant"&&((l=E.message)!=null&&l.refusal)&&this._emit("refusal.delta",{delta:x.delta.refusal,snapshot:E.message.refusal}),((u=x.logprobs)==null?void 0:u.content)!=null&&((c=E.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(f=x.logprobs)==null?void 0:f.content,snapshot:((d=E.logprobs)==null?void 0:d.content)??[]}),((p=x.logprobs)==null?void 0:p.refusal)!=null&&((m=E.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(g=x.logprobs)==null?void 0:g.refusal,snapshot:((b=E.logprobs)==null?void 0:b.refusal)??[]});const T=kt(this,_n,"m",ch).call(this,E);E.finish_reason&&(kt(this,_n,"m",Zy).call(this,E),T.current_tool_call_index!=null&&kt(this,_n,"m",Hy).call(this,E,T.current_tool_call_index));for(const O of x.delta.tool_calls??[])T.current_tool_call_index!==O.index&&(kt(this,_n,"m",Zy).call(this,E),T.current_tool_call_index!=null&&kt(this,_n,"m",Hy).call(this,E,T.current_tool_call_index)),T.current_tool_call_index=O.index;for(const O of x.delta.tool_calls??[]){const A=(w=E.message.tool_calls)==null?void 0:w[O.index];A!=null&&A.type&&((A==null?void 0:A.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(y=A.function)==null?void 0:y.name,index:O.index,arguments:A.function.arguments,parsed_arguments:A.function.parsed_arguments,arguments_delta:((v=O.function)==null?void 0:v.arguments)??""}):(A==null||A.type,void 0))}}},Hy=function(n,r){var a,l,u;if(kt(this,_n,"m",ch).call(this,n).done_tool_calls.has(r))return;const s=(a=n.message.tool_calls)==null?void 0:a[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const c=(u=(l=kt(this,vs,"f"))==null?void 0:l.tools)==null?void 0:u.find(f=>f.type==="function"&&f.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:cd(c)?c.$parseRaw(s.function.arguments):c!=null&&c.function.strict?JSON.parse(s.function.arguments):null})}else s.type},Zy=function(n){var i,s;const r=kt(this,_n,"m",ch).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const a=kt(this,_n,"m",Wy).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(s=n.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},fh=function(){if(this.ended)throw new ut("stream has ended, this shouldn't happen");const n=kt(this,Qs,"f");if(!n)throw new ut("request ended without sending any chunks");return Ko(this,Qs,void 0,"f"),Ko(this,Jo,[],"f"),UV(n,kt(this,vs,"f"))},Wy=function(){var r;const n=(r=kt(this,vs,"f"))==null?void 0:r.response_format;return IN(n)?n:null},NT=function(n){var r,i,s,a;let l=kt(this,Qs,"f");const{choices:u,...c}=n;l?Object.assign(l,c):l=Ko(this,Qs,{...c,choices:[]},"f");for(const{delta:f,finish_reason:d,index:p,logprobs:m=null,...g}of n.choices){let b=l.choices[p];if(b||(b=l.choices[p]={finish_reason:d,index:p,message:{},logprobs:m,...g}),m)if(!b.logprobs)b.logprobs=Object.assign({},m);else{const{content:O,refusal:A,...C}=m;Object.assign(b.logprobs,C),O&&((r=b.logprobs).content??(r.content=[]),b.logprobs.content.push(...O)),A&&((i=b.logprobs).refusal??(i.refusal=[]),b.logprobs.refusal.push(...A))}if(d&&(b.finish_reason=d,kt(this,vs,"f")&&jN(kt(this,vs,"f")))){if(d==="length")throw new mN;if(d==="content_filter")throw new gN}if(Object.assign(b,g),!f)continue;const{content:w,refusal:y,function_call:v,role:x,tool_calls:E,...T}=f;if(Object.assign(b.message,T),y&&(b.message.refusal=(b.message.refusal||"")+y),x&&(b.message.role=x),v&&(b.message.function_call?(v.name&&(b.message.function_call.name=v.name),v.arguments&&((s=b.message.function_call).arguments??(s.arguments=""),b.message.function_call.arguments+=v.arguments)):b.message.function_call=v),w&&(b.message.content=(b.message.content||"")+w,!b.message.refusal&&kt(this,_n,"m",Wy).call(this)&&(b.message.parsed=LT(b.message.content))),E){b.message.tool_calls||(b.message.tool_calls=[]);for(const{index:O,id:A,type:C,function:M,...R}of E){const P=(a=b.message.tool_calls)[O]??(a[O]={});Object.assign(P,R),A&&(P.id=A),C&&(P.type=C),M&&(P.function??(P.function={name:M.name??"",arguments:""})),M!=null&&M.name&&(P.function.name=M.name),M!=null&&M.arguments&&(P.function.arguments+=M.arguments,IV(kt(this,vs,"f"),P)&&(P.function.parsed_arguments=LT(P.function.arguments)))}}}return l},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>n.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Qi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function UV(t,e){const{id:n,choices:r,created:i,model:s,system_fingerprint:a,...l}=t,u={...l,id:n,choices:r.map(({message:c,finish_reason:f,index:d,logprobs:p,...m})=>{if(!f)throw new ut(`missing finish_reason for choice ${d}`);const{content:g=null,function_call:b,tool_calls:w,...y}=c,v=c.role;if(!v)throw new ut(`missing role for choice ${d}`);if(b){const{arguments:x,name:E}=b;if(x==null)throw new ut(`missing function_call.arguments for choice ${d}`);if(!E)throw new ut(`missing function_call.name for choice ${d}`);return{...m,message:{content:g,function_call:{arguments:x,name:E},role:v,refusal:c.refusal??null},finish_reason:f,index:d,logprobs:p}}return w?{...m,index:d,finish_reason:f,logprobs:p,message:{...y,role:v,content:g,refusal:c.refusal??null,tool_calls:w.map((x,E)=>{const{function:T,type:O,id:A,...C}=x,{arguments:M,name:R,...P}=T||{};if(A==null)throw new ut(`missing choices[${d}].tool_calls[${E}].id
${dh(t)}`);if(O==null)throw new ut(`missing choices[${d}].tool_calls[${E}].type
${dh(t)}`);if(R==null)throw new ut(`missing choices[${d}].tool_calls[${E}].function.name
${dh(t)}`);if(M==null)throw new ut(`missing choices[${d}].tool_calls[${E}].function.arguments
${dh(t)}`);return{...C,id:A,type:O,function:{...P,name:R,arguments:M}}})}}:{...m,message:{...y,content:g,role:v,refusal:c.refusal??null},finish_reason:f,index:d,logprobs:p}}),created:i,model:s,object:"chat.completion",...a?{system_fingerprint:a}:{}};return RV(u,e)}function dh(t){return JSON.stringify(t)}class Bl extends Rf{static fromReadableStream(e){const n=new Bl(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const i=new Bl(null),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,n,s)),i}static runTools(e,n,r){const i=new Bl(n),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,n,s)),i}}let XN=class extends Ot{parse(e,n){return jV(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>$0(r,e))}runFunctions(e,n){return e.stream?Bl.runFunctions(this._client,e,n):Cf.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?Bl.runTools(this._client,e,n):Cf.runTools(this._client,e,n)}stream(e,n){return Rf.createChatCompletion(this._client,e,n)}},db=class extends Ot{constructor(){super(...arguments),this.completions=new XN(this._client)}};(function(t){t.Completions=XN})(db||(db={}));var Ie=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},_r=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},jn,hb,Ji,Jh,yi,ho,Sl,io,Up,wr,Xh,Yh,Kc,Ac,kc,IT,jT,MT,DT,$T,BT,FT;class xi extends NN{constructor(){super(...arguments),jn.add(this),hb.set(this,[]),Ji.set(this,{}),Jh.set(this,{}),yi.set(this,void 0),ho.set(this,void 0),Sl.set(this,void 0),io.set(this,void 0),Up.set(this,void 0),wr.set(this,void 0),Xh.set(this,void 0),Yh.set(this,void 0),Kc.set(this,void 0)}[(hb=new WeakMap,Ji=new WeakMap,Jh=new WeakMap,yi=new WeakMap,ho=new WeakMap,Sl=new WeakMap,io=new WeakMap,Up=new WeakMap,wr=new WeakMap,Xh=new WeakMap,Yh=new WeakMap,Kc=new WeakMap,jn=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>n.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new xi;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=Qi.fromReadableStream(e,this.controller);for await(const a of i)Ie(this,jn,"m",Ac).call(this,a);if((s=i.controller.signal)!=null&&s.aborted)throw new Kr;return this._addRun(Ie(this,jn,"m",kc).call(this))}toReadableStream(){return new Qi(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,i,s){const a=new xi;return a._run(()=>a._runToolAssistantStream(e,n,r,i,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(e,n,r,i,s){var c;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const l={...i,stream:!0},u=await e.submitToolOutputs(n,r,l,{...s,signal:this.controller.signal});this._connected();for await(const f of u)Ie(this,jn,"m",Ac).call(this,f);if((c=u.controller.signal)!=null&&c.aborted)throw new Kr;return this._addRun(Ie(this,jn,"m",kc).call(this))}static createThreadAssistantStream(e,n,r){const i=new xi;return i._run(()=>i._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,n,r,i){const s=new xi;return s._run(()=>s._runAssistantStream(e,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return Ie(this,Xh,"f")}currentRun(){return Ie(this,Yh,"f")}currentMessageSnapshot(){return Ie(this,yi,"f")}currentRunStepSnapshot(){return Ie(this,Kc,"f")}async finalRunSteps(){return await this.done(),Object.values(Ie(this,Ji,"f"))}async finalMessages(){return await this.done(),Object.values(Ie(this,Jh,"f"))}async finalRun(){if(await this.done(),!Ie(this,ho,"f"))throw Error("Final run was not received.");return Ie(this,ho,"f")}async _createThreadAssistantStream(e,n,r){var l;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},a=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const u of a)Ie(this,jn,"m",Ac).call(this,u);if((l=a.controller.signal)!=null&&l.aborted)throw new Kr;return this._addRun(Ie(this,jn,"m",kc).call(this))}async _createAssistantStream(e,n,r,i){var u;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},l=await e.create(n,a,{...i,signal:this.controller.signal});this._connected();for await(const c of l)Ie(this,jn,"m",Ac).call(this,c);if((u=l.controller.signal)!=null&&u.aborted)throw new Kr;return this._addRun(Ie(this,jn,"m",kc).call(this))}static accumulateDelta(e,n){for(const[r,i]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let s=e[r];if(s==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(zy(s)&&zy(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(a=>typeof a=="string"||typeof a=="number")){s.push(...i);continue}for(const a of i){if(!zy(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const l=a.index;if(l==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof l!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${l}`);const u=s[l];u==null?s.push(a):s[l]=this.accumulateDelta(u,a)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,i){return await this._createAssistantStream(n,e,r,i)}async _runToolAssistantStream(e,n,r,i,s){return await this._createToolAssistantStream(r,e,n,i,s)}}Ac=function(e){if(!this.ended)switch(_r(this,Xh,e,"f"),Ie(this,jn,"m",MT).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Ie(this,jn,"m",FT).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ie(this,jn,"m",jT).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Ie(this,jn,"m",IT).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},kc=function(){if(this.ended)throw new ut("stream has ended, this shouldn't happen");if(!Ie(this,ho,"f"))throw Error("Final run has not been received");return Ie(this,ho,"f")},IT=function(e){const[n,r]=Ie(this,jn,"m",$T).call(this,e,Ie(this,yi,"f"));_r(this,yi,n,"f"),Ie(this,Jh,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const i of e.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,a=n.content[i.index];if(a&&a.type=="text")this._emit("textDelta",s,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=Ie(this,Sl,"f")){if(Ie(this,io,"f"))switch(Ie(this,io,"f").type){case"text":this._emit("textDone",Ie(this,io,"f").text,Ie(this,yi,"f"));break;case"image_file":this._emit("imageFileDone",Ie(this,io,"f").image_file,Ie(this,yi,"f"));break}_r(this,Sl,i.index,"f")}_r(this,io,n.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(Ie(this,Sl,"f")!==void 0){const i=e.data.content[Ie(this,Sl,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,Ie(this,yi,"f"));break;case"text":this._emit("textDone",i.text,Ie(this,yi,"f"));break}}Ie(this,yi,"f")&&this._emit("messageDone",e.data),_r(this,yi,void 0,"f")}},jT=function(e){const n=Ie(this,jn,"m",DT).call(this,e);switch(_r(this,Kc,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==Ie(this,Up,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(Ie(this,wr,"f")&&this._emit("toolCallDone",Ie(this,wr,"f")),_r(this,Up,s.index,"f"),_r(this,wr,n.step_details.tool_calls[s.index],"f"),Ie(this,wr,"f")&&this._emit("toolCallCreated",Ie(this,wr,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":_r(this,Kc,void 0,"f"),e.data.step_details.type=="tool_calls"&&Ie(this,wr,"f")&&(this._emit("toolCallDone",Ie(this,wr,"f")),_r(this,wr,void 0,"f")),this._emit("runStepDone",e.data,n);break}},MT=function(e){Ie(this,hb,"f").push(e),this._emit("event",e)},DT=function(e){switch(e.event){case"thread.run.step.created":return Ie(this,Ji,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=Ie(this,Ji,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const i=xi.accumulateDelta(n,r.delta);Ie(this,Ji,"f")[e.data.id]=i}return Ie(this,Ji,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Ie(this,Ji,"f")[e.data.id]=e.data;break}if(Ie(this,Ji,"f")[e.data.id])return Ie(this,Ji,"f")[e.data.id];throw new Error("No snapshot available")},$T=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let a=n.content[s.index];n.content[s.index]=Ie(this,jn,"m",BT).call(this,s,a)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},BT=function(e,n){return xi.accumulateDelta(n,e)},FT=function(e){switch(_r(this,Yh,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":_r(this,ho,e.data,"f"),Ie(this,wr,"f")&&(this._emit("toolCallDone",Ie(this,wr,"f")),_r(this,wr,void 0,"f"));break}};class B0 extends Ot{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n={},r){return yr(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,F0,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class F0 extends ji{}B0.MessagesPage=F0;class U0 extends Ot{retrieve(e,n,r,i={},s){return yr(i)?this.retrieve(e,n,r,{},i):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,n,r={},i){return yr(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,z0,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class z0 extends ji{}U0.RunStepsPage=z0;class fd extends Ot{constructor(){super(...arguments),this.steps=new U0(this._client)}create(e,n,r){const{include:i,...s}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n={},r){return yr(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,V0,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}createAndStream(e,n,r){return xi.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:a}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await ld(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,n,r){return xi.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,i){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,i){const s=await this.submitToolOutputs(e,n,r,i);return await this.poll(e,s.id,i)}submitToolOutputsStream(e,n,r,i){return xi.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,i)}}class V0 extends ji{}fd.RunsPage=V0;fd.Steps=U0;fd.RunStepsPage=z0;class yu extends Ot{constructor(){super(...arguments),this.runs=new fd(this._client),this.messages=new B0(this._client)}create(e={},n){return yr(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return xi.createThreadAssistantStream(e,this._client.beta.threads,n)}}yu.Runs=fd;yu.RunsPage=V0;yu.Messages=B0;yu.MessagesPage=F0;const zV=async t=>{const e=await Promise.allSettled(t),n=e.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of e)i.status==="fulfilled"&&r.push(i.value);return r};let q0=class extends Ot{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,n={},r){return yr(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,qm,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n,r);return await this.poll(e,i.id,r)}async poll(e,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const s=await this.retrieve(e,n,{...r,headers:i}).withResponse(),a=s.data;switch(a.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=s.response.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await ld(l);break;case"failed":case"completed":return a}}}async upload(e,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)}async uploadAndPoll(e,n,r){const i=await this.upload(e,n,r);return await this.poll(e,i.id,r)}};class qm extends ji{}q0.VectorStoreFilesPage=qm;class YN extends Ot{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const i=await this.create(e,n);return await this.poll(e,i.id,r)}listFiles(e,n,r={},i){return yr(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,qm,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async poll(e,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:a}=await this.retrieve(e,n,{...r,headers:i}).withResponse();switch(s.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const u=a.headers.get("openai-poll-after-ms");if(u){const c=parseInt(u);isNaN(c)||(l=c)}}await ld(l);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(i==null?void 0:i.maxConcurrency)??5,a=Math.min(s,n.length),l=this._client,u=n.values(),c=[...r];async function f(p){for(let m of p){const g=await l.files.create({file:m,purpose:"assistants"},i);c.push(g.id)}}const d=Array(a).fill(u).map(f);return await zV(d),await this.createAndPoll(e,{file_ids:c})}}class vu extends Ot{constructor(){super(...arguments),this.files=new q0(this._client),this.fileBatches=new YN(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return yr(e)?this.list({},e):this._client.getAPIList("/vector_stores",H0,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class H0 extends ji{}vu.VectorStoresPage=H0;vu.Files=q0;vu.VectorStoreFilesPage=qm;vu.FileBatches=YN;class jo extends Ot{constructor(){super(...arguments),this.vectorStores=new vu(this._client),this.chat=new db(this._client),this.assistants=new M0(this._client),this.threads=new yu(this._client)}}jo.VectorStores=vu;jo.VectorStoresPage=H0;jo.Assistants=M0;jo.AssistantsPage=D0;jo.Threads=yu;class QN extends Ot{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class eI extends Ot{create(e,n){return this._client.post("/embeddings",{body:e,...n})}}class Z0 extends Ot{create(e,n){return this._client.post("/files",tu({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return yr(e)?this.list({},e):this._client.getAPIList("/files",W0,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/json",...n==null?void 0:n.headers}})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let a=await this.retrieve(e);for(;!a.status||!i.has(a.status);)if(await ld(n),a=await this.retrieve(e),Date.now()-s>r)throw new Um({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a}}class W0 extends ji{}Z0.FileObjectsPage=W0;class G0 extends Ot{list(e,n={},r){return yr(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,K0,{query:n,...r})}}class K0 extends ji{}G0.FineTuningJobCheckpointsPage=K0;class _u extends Ot{constructor(){super(...arguments),this.checkpoints=new G0(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return yr(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",J0,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return yr(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,X0,{query:n,...r})}}class J0 extends ji{}class X0 extends ji{}_u.FineTuningJobsPage=J0;_u.FineTuningJobEventsPage=X0;_u.Checkpoints=G0;_u.FineTuningJobCheckpointsPage=K0;class dd extends Ot{constructor(){super(...arguments),this.jobs=new _u(this._client)}}dd.Jobs=_u;dd.FineTuningJobsPage=J0;dd.FineTuningJobEventsPage=X0;class tI extends Ot{createVariation(e,n){return this._client.post("/images/variations",tu({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",tu({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class Y0 extends Ot{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Q0,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class Q0 extends AV{}Y0.ModelsPage=Q0;class nI extends Ot{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class rI extends Ot{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,tu({body:n,...r}))}}class e1 extends Ot{constructor(){super(...arguments),this.parts=new rI(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}e1.Parts=rI;var iI;let pt=class extends mV{constructor({baseURL:e=uh("OPENAI_BASE_URL"),apiKey:n=uh("OPENAI_API_KEY"),organization:r=uh("OPENAI_ORG_ID")??null,project:i=uh("OPENAI_PROJECT_ID")??null,...s}={}){if(n===void 0)throw new ut("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const a={apiKey:n,organization:r,project:i,...s,baseURL:e||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&PV())throw new ut(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:a.timeout??6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new QN(this),this.chat=new N0(this),this.embeddings=new eI(this),this.files=new Z0(this),this.images=new tI(this),this.audio=new ud(this),this.moderations=new nI(this),this.models=new Y0(this),this.fineTuning=new dd(this),this.beta=new jo(this),this.batches=new I0(this),this.uploads=new e1(this),this._options=a,this.apiKey=n,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return Y5(e,{arrayFormat:"brackets"})}};iI=pt;pt.OpenAI=iI;pt.DEFAULT_TIMEOUT=6e5;pt.OpenAIError=ut;pt.APIError=$n;pt.APIConnectionError=Fm;pt.APIConnectionTimeoutError=Um;pt.APIUserAbortError=Kr;pt.NotFoundError=cN;pt.ConflictError=fN;pt.RateLimitError=hN;pt.BadRequestError=oN;pt.AuthenticationError=lN;pt.InternalServerError=pN;pt.PermissionDeniedError=uN;pt.UnprocessableEntityError=dN;pt.toFile=bN;pt.fileFromPath=sN;pt.Completions=QN;pt.Chat=N0;pt.Embeddings=eI;pt.Files=Z0;pt.FileObjectsPage=W0;pt.Images=tI;pt.Audio=ud;pt.Moderations=nI;pt.Models=Y0;pt.ModelsPage=Q0;pt.FineTuning=dd;pt.Beta=jo;pt.Batches=I0;pt.BatchesPage=j0;pt.Uploads=e1;function UT(t,e=t1){t=t.trim();const n=/```(json)?(.*)```/s.exec(t);return e(n?n[2]:t)}function t1(t){if(typeof t>"u")return null;try{return JSON.parse(t)}catch{}let e="";const n=[];let r=!1,i=!1;for(let s of t){if(r)s==='"'&&!i?r=!1:s===`
`&&!i?s="\\n":s==="\\"?i=!i:i=!1;else if(s==='"')r=!0,i=!1;else if(s==="{")n.push("}");else if(s==="[")n.push("]");else if(s==="}"||s==="]")if(n&&n[n.length-1]===s)n.pop();else return null;e+=s}r&&(e+='"');for(let s=n.length-1;s>=0;s-=1)e+=n[s];try{return JSON.parse(e)}catch{return null}}var VV=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const qV=Ro(VV);var sI={exports:{}};const HV=/[\p{Lu}]/u,ZV=/[\p{Ll}]/u,zT=/^[\p{Lu}](?![\p{Lu}])/gu,aI=/([\p{Alpha}\p{N}_]|$)/u,oI=/[_.\- ]+/,WV=new RegExp("^"+oI.source),VT=new RegExp(oI.source+aI.source,"gu"),qT=new RegExp("\\d+"+aI.source,"gu"),GV=(t,e,n)=>{let r=!1,i=!1,s=!1;for(let a=0;a<t.length;a++){const l=t[a];r&&HV.test(l)?(t=t.slice(0,a)+"-"+t.slice(a),r=!1,s=i,i=!0,a++):i&&s&&ZV.test(l)?(t=t.slice(0,a-1)+"-"+t.slice(a-1),s=i,i=!1,r=!0):(r=e(l)===l&&n(l)!==l,s=i,i=n(l)===l&&e(l)!==l)}return t},KV=(t,e)=>(zT.lastIndex=0,t.replace(zT,n=>e(n))),JV=(t,e)=>(VT.lastIndex=0,qT.lastIndex=0,t.replace(VT,(n,r)=>e(r)).replace(qT,n=>e(n))),lI=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(s=>s.trim()).filter(s=>s.length).join("-"):t=t.trim(),t.length===0)return"";const n=e.locale===!1?s=>s.toLowerCase():s=>s.toLocaleLowerCase(e.locale),r=e.locale===!1?s=>s.toUpperCase():s=>s.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?r(t):n(t):(t!==n(t)&&(t=GV(t,n,r)),t=t.replace(WV,""),e.preserveConsecutiveUppercase?t=KV(t,n):t=n(t),e.pascalCase&&(t=r(t.charAt(0))+t.slice(1)),JV(t,r))};sI.exports=lI;sI.exports.default=lI;function XV(t,e){return(e==null?void 0:e[t])||qV(t)}function YV(t,e,n){const r={};for(const i in t)Object.hasOwn(t,i)&&(r[e(i,n)]=t[i]);return r}function HT(t){return Array.isArray(t)?[...t]:{...t}}function QV(t,e){const n=HT(t);for(const[r,i]of Object.entries(e)){const[s,...a]=r.split(".").reverse();let l=n;for(const u of a.reverse()){if(l[u]===void 0)break;l[u]=HT(l[u]),l=l[u]}l[s]!==void 0&&(l[s]={lc:1,type:"secret",id:[i]})}return n}function uI(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}class Oo{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,uI(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...n){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Oo||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},r=Object.keys(this.lc_kwargs).reduce((i,s)=>(i[s]=s in this?this[s]:this.lc_kwargs[s],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(n,Reflect.get(i,"lc_secrets",this)),Object.assign(r,Reflect.get(i,"lc_attributes",this));return Object.keys(n).forEach(i=>{let s=this,a=r;const[l,...u]=i.split(".").reverse();for(const c of u.reverse()){if(!(c in s)||s[c]===void 0)return;(!(c in a)||a[c]===void 0)&&(typeof s[c]=="object"&&s[c]!=null?a[c]={}:Array.isArray(s[c])&&(a[c]=[])),s=s[c],a=a[c]}l in s&&s[l]!==void 0&&(a[l]=a[l]||s[l])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:YV(Object.keys(n).length?QV(r,n):r,XV,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function bu(t,e){return typeof t=="string"?typeof e=="string"?t+e:[{type:"text",text:t},...e]:Array.isArray(e)?Hm(t,e)??[...t,...e]:[...t,{type:"text",text:e}]}function e8(t,e){return t==="error"||e==="error"?"error":"success"}function t8(t,e){function n(r,i){if(typeof r!="object"||r===null||r===void 0)return r;if(i>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(a=>n(a,i+1));const s={};for(const a of Object.keys(r))s[a]=n(r[a],i+1);return s}return JSON.stringify(n(t,0),null,2)}class Ns extends Oo{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:""}getType(){return this._getType()}constructor(e,n){typeof e=="string"&&(e={content:e,additional_kwargs:n,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const n=t8(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${n}`}}function tr(t,e){const n={...t};for(const[r,i]of Object.entries(e))if(n[r]==null)n[r]=i;else{if(i==null)continue;if(typeof n[r]!=typeof i||Array.isArray(n[r])!==Array.isArray(i))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof n[r]=="string"){if(r==="type")continue;n[r]+=i}else if(typeof n[r]=="object"&&!Array.isArray(n[r]))n[r]=tr(n[r],i);else if(Array.isArray(n[r]))n[r]=Hm(n[r],i);else{if(n[r]===i)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return n}function Hm(t,e){if(!(t===void 0&&e===void 0)){if(t===void 0||e===void 0)return t||e;{const n=[...t];for(const r of e)if(typeof r=="object"&&"index"in r&&typeof r.index=="number"){const i=n.findIndex(s=>s.index===r.index);i!==-1?n[i]=tr(n[i],r):n.push(r)}else{if(typeof r=="object"&&"text"in r&&r.text==="")continue;n.push(r)}return n}}}function n8(t,e){if(!t&&!e)throw new Error("Cannot merge two undefined objects.");if(!t||!e)return t||e;if(typeof t!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof t}
Right ${typeof e}`);if(typeof t=="string"&&typeof e=="string")return t+e;if(Array.isArray(t)&&Array.isArray(e))return Hm(t,e);if(typeof t=="object"&&typeof e=="object")return tr(t,e);if(t===e)return t;throw new Error(`Can not merge objects of different types.
Left ${t}
Right ${e}`)}class wu extends Ns{}function r8(t){return typeof t.role=="string"}function Zm(t){return typeof(t==null?void 0:t._getType)=="function"}function i8(t){return Zm(t)&&typeof t.concat=="function"}class s8 extends Ns{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,n,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:n}),super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}class n1 extends wu{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new n1({content:bu(this.content,e.content),additional_kwargs:tr(this.additional_kwargs,e.additional_kwargs),response_metadata:tr(this.response_metadata,e.response_metadata),artifact:n8(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:e8(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function a8(t){const e=[],n=[];for(const r of t)if(r.function){const i=r.function.name;try{const s=JSON.parse(r.function.arguments),a={name:i||"",args:s||{},id:r.id};e.push(a)}catch{n.push({name:i,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,n]}class Lf extends Ns{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,n){var i;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:n??{}};else{r=e;const s=(i=r.additional_kwargs)==null?void 0:i.tool_calls,a=r.tool_calls;s!=null&&s.length>0&&(a===void 0||a.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(s!=null&&a===void 0){const[l,u]=a8(s);r.tool_calls=l??[],r.invalid_tool_calls=u??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}function r1(t){return t._getType()==="ai"}function ZT(t){return t._getType()==="ai"}class Mo extends wu{constructor(e){let n;if(typeof e=="string")n={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)n={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const r=[],i=[];for(const s of e.tool_call_chunks){let a={};try{if(a=t1(s.args||"{}"),a===null||typeof a!="object"||Array.isArray(a))throw new Error("Malformed tool call chunk args.");r.push({name:s.name??"",args:a,id:s.id,type:"tool_call"})}catch{i.push({name:s.name,args:s.args,id:s.id,error:"Malformed args.",type:"invalid_tool_call"})}}n={...e,tool_calls:r,invalid_tool_calls:i,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=n.tool_call_chunks??this.tool_call_chunks,this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var r,i,s,a,l,u,c,f,d,p,m,g,b,w,y,v,x,E,T,O,A,C,M,R,P,N,$,D,z,G,W,Z,q,B,j,U,H,Y,J,V;const n={content:bu(this.content,e.content),additional_kwargs:tr(this.additional_kwargs,e.additional_kwargs),response_metadata:tr(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const Q=Hm(this.tool_call_chunks,e.tool_call_chunks);Q!==void 0&&Q.length>0&&(n.tool_call_chunks=Q)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const Q={...(((i=(r=this.usage_metadata)==null?void 0:r.input_token_details)==null?void 0:i.audio)!==void 0||((a=(s=e.usage_metadata)==null?void 0:s.input_token_details)==null?void 0:a.audio)!==void 0)&&{audio:(((u=(l=this.usage_metadata)==null?void 0:l.input_token_details)==null?void 0:u.audio)??0)+(((f=(c=e.usage_metadata)==null?void 0:c.input_token_details)==null?void 0:f.audio)??0)},...(((p=(d=this.usage_metadata)==null?void 0:d.input_token_details)==null?void 0:p.cache_read)!==void 0||((g=(m=e.usage_metadata)==null?void 0:m.input_token_details)==null?void 0:g.cache_read)!==void 0)&&{cache_read:(((w=(b=this.usage_metadata)==null?void 0:b.input_token_details)==null?void 0:w.cache_read)??0)+(((v=(y=e.usage_metadata)==null?void 0:y.input_token_details)==null?void 0:v.cache_read)??0)},...(((E=(x=this.usage_metadata)==null?void 0:x.input_token_details)==null?void 0:E.cache_creation)!==void 0||((O=(T=e.usage_metadata)==null?void 0:T.input_token_details)==null?void 0:O.cache_creation)!==void 0)&&{cache_creation:(((C=(A=this.usage_metadata)==null?void 0:A.input_token_details)==null?void 0:C.cache_creation)??0)+(((R=(M=e.usage_metadata)==null?void 0:M.input_token_details)==null?void 0:R.cache_creation)??0)}},re={...(((N=(P=this.usage_metadata)==null?void 0:P.output_token_details)==null?void 0:N.audio)!==void 0||((D=($=e.usage_metadata)==null?void 0:$.output_token_details)==null?void 0:D.audio)!==void 0)&&{audio:(((G=(z=this.usage_metadata)==null?void 0:z.output_token_details)==null?void 0:G.audio)??0)+(((Z=(W=e.usage_metadata)==null?void 0:W.output_token_details)==null?void 0:Z.audio)??0)},...(((B=(q=this.usage_metadata)==null?void 0:q.output_token_details)==null?void 0:B.reasoning)!==void 0||((U=(j=e.usage_metadata)==null?void 0:j.output_token_details)==null?void 0:U.reasoning)!==void 0)&&{reasoning:(((Y=(H=this.usage_metadata)==null?void 0:H.output_token_details)==null?void 0:Y.reasoning)??0)+(((V=(J=e.usage_metadata)==null?void 0:J.output_token_details)==null?void 0:V.reasoning)??0)}},ie=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},ce=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},me={input_tokens:ie.input_tokens+ce.input_tokens,output_tokens:ie.output_tokens+ce.output_tokens,total_tokens:ie.total_tokens+ce.total_tokens,...Object.keys(Q).length>0&&{input_token_details:Q},...Object.keys(re).length>0&&{output_token_details:re}};n.usage_metadata=me}return new Mo(n)}}class Do extends Ns{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return Do}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}}class Wm extends wu{static lc_name(){return"ChatMessageChunk"}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new Wm({content:bu(this.content,e.content),additional_kwargs:tr(this.additional_kwargs,e.additional_kwargs),response_metadata:tr(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class Gm extends wu{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new Gm({content:bu(this.content,e.content),additional_kwargs:tr(this.additional_kwargs,e.additional_kwargs),response_metadata:tr(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}class xu extends Ns{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class Km extends wu{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(e){return new Km({content:bu(this.content,e.content),additional_kwargs:tr(this.additional_kwargs,e.additional_kwargs),response_metadata:tr(this.response_metadata,e.response_metadata),id:this.id??e.id})}}class cI extends Ns{static lc_name(){return"SystemMessage"}_getType(){return"system"}}class Jm extends wu{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(e){return new Jm({content:bu(this.content,e.content),additional_kwargs:tr(this.additional_kwargs,e.additional_kwargs),response_metadata:tr(this.response_metadata,e.response_metadata),id:this.id??e.id})}}function Xm(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function fI(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}class o8 extends Error{constructor(e,n){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=n}}function l8(t){return fI(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function u8(t){return typeof t=="object"&&t!=null&&t.lc===1&&Array.isArray(t.id)&&t.kwargs!=null&&typeof t.kwargs=="object"}function Gy(t){let e,n;if(u8(t)){const r=t.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":e="unknown",n=t.kwargs}else{const{type:r,...i}=t;e=r,n=i}if(e==="human"||e==="user")return new xu(n);if(e==="ai"||e==="assistant"){const{tool_calls:r,...i}=n;if(!Array.isArray(r))return new Lf(n);const s=r.map(l8);return new Lf({...i,tool_calls:s})}else{if(e==="system")return new cI(n);if(e==="tool"&&"tool_call_id"in n)return new s8({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});throw Xm(new Error(`Unable to coerce message from array: only human, AI, system, or tool message coercion is currently supported.

Received: ${JSON.stringify(t,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function pa(t){if(typeof t=="string")return new xu(t);if(Zm(t))return t;if(Array.isArray(t)){const[e,n]=t;return Gy({type:e,content:n})}else if(r8(t)){const{role:e,...n}=t;return Gy({...n,type:e})}else return Gy(t)}function dI(t,e="Human",n="AI"){const r=[];for(const i of t){let s;if(i._getType()==="human")s=e;else if(i._getType()==="ai")s=n;else if(i._getType()==="system")s="System";else if(i._getType()==="function")s="Function";else if(i._getType()==="tool")s="Tool";else if(i._getType()==="generic")s=i.role;else throw new Error(`Got unsupported message type: ${i._getType()}`);const a=i.name?`${i.name}, `:"",l=typeof i.content=="string"?i.content:JSON.stringify(i.content,null,2);r.push(`${s}: ${a}${l}`)}return r.join(`
`)}function c8(t){var n;const e=t._getType();if(e==="human")return new Km({...t});if(e==="ai"){let r={...t};return"tool_calls"in r&&(r={...r,tool_call_chunks:(n=r.tool_calls)==null?void 0:n.map(i=>({...i,type:"tool_call_chunk",index:void 0,args:JSON.stringify(i.args)}))}),new Mo({...r})}else{if(e==="system")return new Jm({...t});if(e==="function")return new Gm({...t});if(Do.isInstance(t))return new Wm({...t});throw new Error("Unknown message type.")}}var ht;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(const l of s)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},t.find=(i,s)=>{for(const a of i)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(ht||(ht={}));var pb;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(pb||(pb={}));const Pe=ht.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),fa=t=>{switch(typeof t){case"undefined":return Pe.undefined;case"string":return Pe.string;case"number":return isNaN(t)?Pe.nan:Pe.number;case"boolean":return Pe.boolean;case"function":return Pe.function;case"bigint":return Pe.bigint;case"symbol":return Pe.symbol;case"object":return Array.isArray(t)?Pe.array:t===null?Pe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Pe.promise:typeof Map<"u"&&t instanceof Map?Pe.map:typeof Set<"u"&&t instanceof Set?Pe.set:typeof Date<"u"&&t instanceof Date?Pe.date:Pe.object;default:return Pe.unknown}},ve=ht.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),f8=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Or extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let l=r,u=0;for(;u<a.path.length;){const c=a.path[u];u===a.path.length-1?(l[c]=l[c]||{_errors:[]},l[c]._errors.push(n(a))):l[c]=l[c]||{_errors:[]},l=l[c],u++}}};return i(this),r}static assert(e){if(!(e instanceof Or))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ht.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Or.create=t=>new Or(t);const nu=(t,e)=>{let n;switch(t.code){case ve.invalid_type:t.received===Pe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ve.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ht.jsonStringifyReplacer)}`;break;case ve.unrecognized_keys:n=`Unrecognized key(s) in object: ${ht.joinValues(t.keys,", ")}`;break;case ve.invalid_union:n="Invalid input";break;case ve.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ht.joinValues(t.options)}`;break;case ve.invalid_enum_value:n=`Invalid enum value. Expected ${ht.joinValues(t.options)}, received '${t.received}'`;break;case ve.invalid_arguments:n="Invalid function arguments";break;case ve.invalid_return_type:n="Invalid function return type";break;case ve.invalid_date:n="Invalid date";break;case ve.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ht.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ve.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ve.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ve.custom:n="Invalid input";break;case ve.invalid_intersection_types:n="Intersection results could not be merged";break;case ve.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ve.not_finite:n="Number must be finite";break;default:n=e.defaultError,ht.assertNever(t)}return{message:n}};let hI=nu;function d8(t){hI=t}function zp(){return hI}const Vp=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let l="";const u=r.filter(c=>!!c).slice().reverse();for(const c of u)l=c(a,{data:e,defaultError:l}).message;return{...i,path:s,message:l}},h8=[];function Se(t,e){const n=zp(),r=Vp({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===nu?void 0:nu].filter(i=>!!i)});t.common.issues.push(r)}class Kn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return He;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,a=await i.value;r.push({key:s,value:a})}return Kn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return He;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(r[s.value]=a.value)}return{status:e.value,value:r}}}const He=Object.freeze({status:"aborted"}),Tl=t=>({status:"dirty",value:t}),nr=t=>({status:"valid",value:t}),mb=t=>t.status==="aborted",gb=t=>t.status==="dirty",Nf=t=>t.status==="valid",If=t=>typeof Promise<"u"&&t instanceof Promise;function qp(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function pI(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}var Ne;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ne||(Ne={}));var Cc,Rc;class ls{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const WT=(t,e)=>{if(Nf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Or(t.common.issues);return this._error=n,this._error}}};function Xe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,l)=>{var u,c;const{message:f}=t;return a.code==="invalid_enum_value"?{message:f??l.defaultError}:typeof l.data>"u"?{message:(u=f??r)!==null&&u!==void 0?u:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(c=f??n)!==null&&c!==void 0?c:l.defaultError}},description:i}}class rt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return fa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:fa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Kn,ctx:{common:e.parent.common,data:e.data,parsedType:fa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(If(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fa(e)},s=this._parseSync({data:e,path:i.path,parent:i});return WT(i,s)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:fa(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(If(i)?i:Promise.resolve(i));return WT(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const a=e(i),l=()=>s.addIssue({code:ve.custom,...r(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Ri({schema:this,typeName:le.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return as.create(this,this._def)}nullable(){return Na.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Oi.create(this,this._def)}promise(){return iu.create(this,this._def)}or(e){return $f.create([this,e],this._def)}and(e){return Bf.create(this,e,this._def)}transform(e){return new Ri({...Xe(this._def),schema:this,typeName:le.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new qf({...Xe(this._def),innerType:this,defaultValue:n,typeName:le.ZodDefault})}brand(){return new i1({typeName:le.ZodBranded,type:this,...Xe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Hf({...Xe(this._def),innerType:this,catchValue:n,typeName:le.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return hd.create(this,e)}readonly(){return Zf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const p8=/^c[^\s-]{8,}$/i,m8=/^[0-9a-z]+$/,g8=/^[0-9A-HJKMNP-TV-Z]{26}$/,y8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,v8=/^[a-z0-9_-]{21}$/i,_8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,b8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,w8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ky;const x8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,E8=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,S8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,mI="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",T8=new RegExp(`^${mI}$`);function gI(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function P8(t){return new RegExp(`^${gI(t)}$`)}function yI(t){let e=`${mI}T${gI(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function O8(t,e){return!!((e==="v4"||!e)&&x8.test(t)||(e==="v6"||!e)&&E8.test(t))}class Ei extends rt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Pe.string){const s=this._getOrReturnCtx(e);return Se(s,{code:ve.invalid_type,expected:Pe.string,received:s.parsedType}),He}const r=new Kn;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ve.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ve.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,l=e.data.length<s.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?Se(i,{code:ve.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&Se(i,{code:ve.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")b8.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"email",code:ve.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")Ky||(Ky=new RegExp(w8,"u")),Ky.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"emoji",code:ve.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")y8.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"uuid",code:ve.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")v8.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"nanoid",code:ve.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")p8.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"cuid",code:ve.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")m8.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"cuid2",code:ve.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")g8.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"ulid",code:ve.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Se(i,{validation:"url",code:ve.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"regex",code:ve.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ve.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ve.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ve.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?yI(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ve.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?T8.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ve.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?P8(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ve.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?_8.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"duration",code:ve.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?O8(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"ip",code:ve.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?S8.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"base64",code:ve.invalid_string,message:s.message}),r.dirty()):ht.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:ve.invalid_string,...Ne.errToObj(r)})}_addCheck(e){return new Ei({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ne.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ne.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ne.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ne.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ne.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ne.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ne.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ne.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ne.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ne.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Ne.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ne.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ne.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ne.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ne.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ne.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ne.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ne.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ne.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ne.errToObj(n)})}nonempty(e){return this.min(1,Ne.errToObj(e))}trim(){return new Ei({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ei({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ei({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ei.create=t=>{var e;return new Ei({checks:[],typeName:le.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Xe(t)})};function A8(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}class Ca extends rt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Pe.number){const s=this._getOrReturnCtx(e);return Se(s,{code:ve.invalid_type,expected:Pe.number,received:s.parsedType}),He}let r;const i=new Kn;for(const s of this._def.checks)s.kind==="int"?ht.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ve.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ve.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ve.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?A8(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ve.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ve.not_finite,message:s.message}),i.dirty()):ht.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ne.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ne.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ne.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ne.toString(n))}setLimit(e,n,r,i){return new Ca({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ne.toString(i)}]})}_addCheck(e){return new Ca({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ne.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ne.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ne.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ne.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ne.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ne.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ht.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ca.create=t=>new Ca({checks:[],typeName:le.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Xe(t)});class Ra extends rt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Pe.bigint){const s=this._getOrReturnCtx(e);return Se(s,{code:ve.invalid_type,expected:Pe.bigint,received:s.parsedType}),He}let r;const i=new Kn;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ve.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ve.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ve.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):ht.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ne.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ne.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ne.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ne.toString(n))}setLimit(e,n,r,i){return new Ra({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ne.toString(i)}]})}_addCheck(e){return new Ra({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ne.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ne.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ra.create=t=>{var e;return new Ra({checks:[],typeName:le.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Xe(t)})};class jf extends rt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Pe.boolean){const r=this._getOrReturnCtx(e);return Se(r,{code:ve.invalid_type,expected:Pe.boolean,received:r.parsedType}),He}return nr(e.data)}}jf.create=t=>new jf({typeName:le.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Xe(t)});class Ao extends rt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Pe.date){const s=this._getOrReturnCtx(e);return Se(s,{code:ve.invalid_type,expected:Pe.date,received:s.parsedType}),He}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Se(s,{code:ve.invalid_date}),He}const r=new Kn;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ve.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ve.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):ht.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ao({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ne.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ne.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Ao.create=t=>new Ao({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:le.ZodDate,...Xe(t)});class Hp extends rt{_parse(e){if(this._getType(e)!==Pe.symbol){const r=this._getOrReturnCtx(e);return Se(r,{code:ve.invalid_type,expected:Pe.symbol,received:r.parsedType}),He}return nr(e.data)}}Hp.create=t=>new Hp({typeName:le.ZodSymbol,...Xe(t)});class Mf extends rt{_parse(e){if(this._getType(e)!==Pe.undefined){const r=this._getOrReturnCtx(e);return Se(r,{code:ve.invalid_type,expected:Pe.undefined,received:r.parsedType}),He}return nr(e.data)}}Mf.create=t=>new Mf({typeName:le.ZodUndefined,...Xe(t)});class Df extends rt{_parse(e){if(this._getType(e)!==Pe.null){const r=this._getOrReturnCtx(e);return Se(r,{code:ve.invalid_type,expected:Pe.null,received:r.parsedType}),He}return nr(e.data)}}Df.create=t=>new Df({typeName:le.ZodNull,...Xe(t)});class ru extends rt{constructor(){super(...arguments),this._any=!0}_parse(e){return nr(e.data)}}ru.create=t=>new ru({typeName:le.ZodAny,...Xe(t)});class vo extends rt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return nr(e.data)}}vo.create=t=>new vo({typeName:le.ZodUnknown,...Xe(t)});class zs extends rt{_parse(e){const n=this._getOrReturnCtx(e);return Se(n,{code:ve.invalid_type,expected:Pe.never,received:n.parsedType}),He}}zs.create=t=>new zs({typeName:le.ZodNever,...Xe(t)});class Zp extends rt{_parse(e){if(this._getType(e)!==Pe.undefined){const r=this._getOrReturnCtx(e);return Se(r,{code:ve.invalid_type,expected:Pe.void,received:r.parsedType}),He}return nr(e.data)}}Zp.create=t=>new Zp({typeName:le.ZodVoid,...Xe(t)});class Oi extends rt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Pe.array)return Se(n,{code:ve.invalid_type,expected:Pe.array,received:n.parsedType}),He;if(i.exactLength!==null){const a=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(a||l)&&(Se(n,{code:a?ve.too_big:ve.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Se(n,{code:ve.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Se(n,{code:ve.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,l)=>i.type._parseAsync(new ls(n,a,n.path,l)))).then(a=>Kn.mergeArray(r,a));const s=[...n.data].map((a,l)=>i.type._parseSync(new ls(n,a,n.path,l)));return Kn.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Oi({...this._def,minLength:{value:e,message:Ne.toString(n)}})}max(e,n){return new Oi({...this._def,maxLength:{value:e,message:Ne.toString(n)}})}length(e,n){return new Oi({...this._def,exactLength:{value:e,message:Ne.toString(n)}})}nonempty(e){return this.min(1,e)}}Oi.create=(t,e)=>new Oi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:le.ZodArray,...Xe(e)});function nl(t){if(t instanceof Wt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=as.create(nl(r))}return new Wt({...t._def,shape:()=>e})}else return t instanceof Oi?new Oi({...t._def,type:nl(t.element)}):t instanceof as?as.create(nl(t.unwrap())):t instanceof Na?Na.create(nl(t.unwrap())):t instanceof us?us.create(t.items.map(e=>nl(e))):t}class Wt extends rt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ht.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Pe.object){const c=this._getOrReturnCtx(e);return Se(c,{code:ve.invalid_type,expected:Pe.object,received:c.parsedType}),He}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof zs&&this._def.unknownKeys==="strip"))for(const c in i.data)a.includes(c)||l.push(c);const u=[];for(const c of a){const f=s[c],d=i.data[c];u.push({key:{status:"valid",value:c},value:f._parse(new ls(i,d,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof zs){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of l)u.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(c==="strict")l.length>0&&(Se(i,{code:ve.unrecognized_keys,keys:l}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of l){const d=i.data[f];u.push({key:{status:"valid",value:f},value:c._parse(new ls(i,d,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of u){const d=await f.key,p=await f.value;c.push({key:d,value:p,alwaysSet:f.alwaysSet})}return c}).then(c=>Kn.mergeObjectSync(r,c)):Kn.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(e){return Ne.errToObj,new Wt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,a,l;const u=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Ne.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}})}strip(){return new Wt({...this._def,unknownKeys:"strip"})}passthrough(){return new Wt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Wt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Wt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:le.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Wt({...this._def,catchall:e})}pick(e){const n={};return ht.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Wt({...this._def,shape:()=>n})}omit(e){const n={};return ht.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Wt({...this._def,shape:()=>n})}deepPartial(){return nl(this)}partial(e){const n={};return ht.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new Wt({...this._def,shape:()=>n})}required(e){const n={};return ht.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof as;)s=s._def.innerType;n[r]=s}}),new Wt({...this._def,shape:()=>n})}keyof(){return vI(ht.objectKeys(this.shape))}}Wt.create=(t,e)=>new Wt({shape:()=>t,unknownKeys:"strip",catchall:zs.create(),typeName:le.ZodObject,...Xe(e)});Wt.strictCreate=(t,e)=>new Wt({shape:()=>t,unknownKeys:"strict",catchall:zs.create(),typeName:le.ZodObject,...Xe(e)});Wt.lazycreate=(t,e)=>new Wt({shape:t,unknownKeys:"strip",catchall:zs.create(),typeName:le.ZodObject,...Xe(e)});class $f extends rt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const a=s.map(l=>new Or(l.ctx.common.issues));return Se(n,{code:ve.invalid_union,unionErrors:a}),He}if(n.common.async)return Promise.all(r.map(async s=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const u of r){const c={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!s&&(s={result:f,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const l=a.map(u=>new Or(u));return Se(n,{code:ve.invalid_union,unionErrors:l}),He}}get options(){return this._def.options}}$f.create=(t,e)=>new $f({options:t,typeName:le.ZodUnion,...Xe(e)});const ws=t=>t instanceof Uf?ws(t.schema):t instanceof Ri?ws(t.innerType()):t instanceof zf?[t.value]:t instanceof La?t.options:t instanceof Vf?ht.objectValues(t.enum):t instanceof qf?ws(t._def.innerType):t instanceof Mf?[void 0]:t instanceof Df?[null]:t instanceof as?[void 0,...ws(t.unwrap())]:t instanceof Na?[null,...ws(t.unwrap())]:t instanceof i1||t instanceof Zf?ws(t.unwrap()):t instanceof Hf?ws(t._def.innerType):[];class Ym extends rt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Pe.object)return Se(n,{code:ve.invalid_type,expected:Pe.object,received:n.parsedType}),He;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(Se(n,{code:ve.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),He)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const a=ws(s.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,s)}}return new Ym({typeName:le.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...Xe(r)})}}function yb(t,e){const n=fa(t),r=fa(e);if(t===e)return{valid:!0,data:t};if(n===Pe.object&&r===Pe.object){const i=ht.objectKeys(e),s=ht.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(const l of s){const u=yb(t[l],e[l]);if(!u.valid)return{valid:!1};a[l]=u.data}return{valid:!0,data:a}}else if(n===Pe.array&&r===Pe.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const a=t[s],l=e[s],u=yb(a,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===Pe.date&&r===Pe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Bf extends rt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,a)=>{if(mb(s)||mb(a))return He;const l=yb(s.value,a.value);return l.valid?((gb(s)||gb(a))&&n.dirty(),{status:n.value,value:l.data}):(Se(r,{code:ve.invalid_intersection_types}),He)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Bf.create=(t,e,n)=>new Bf({left:t,right:e,typeName:le.ZodIntersection,...Xe(n)});class us extends rt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.array)return Se(r,{code:ve.invalid_type,expected:Pe.array,received:r.parsedType}),He;if(r.data.length<this._def.items.length)return Se(r,{code:ve.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),He;!this._def.rest&&r.data.length>this._def.items.length&&(Se(r,{code:ve.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((a,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new ls(r,a,r.path,l)):null}).filter(a=>!!a);return r.common.async?Promise.all(s).then(a=>Kn.mergeArray(n,a)):Kn.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new us({...this._def,rest:e})}}us.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new us({items:t,typeName:le.ZodTuple,rest:null,...Xe(e)})};class Ff extends rt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.object)return Se(r,{code:ve.invalid_type,expected:Pe.object,received:r.parsedType}),He;const i=[],s=this._def.keyType,a=this._def.valueType;for(const l in r.data)i.push({key:s._parse(new ls(r,l,r.path,l)),value:a._parse(new ls(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?Kn.mergeObjectAsync(n,i):Kn.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof rt?new Ff({keyType:e,valueType:n,typeName:le.ZodRecord,...Xe(r)}):new Ff({keyType:Ei.create(),valueType:e,typeName:le.ZodRecord,...Xe(n)})}}class Wp extends rt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.map)return Se(r,{code:ve.invalid_type,expected:Pe.map,received:r.parsedType}),He;const i=this._def.keyType,s=this._def.valueType,a=[...r.data.entries()].map(([l,u],c)=>({key:i._parse(new ls(r,l,r.path,[c,"key"])),value:s._parse(new ls(r,u,r.path,[c,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of a){const c=await u.key,f=await u.value;if(c.status==="aborted"||f.status==="aborted")return He;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),l.set(c.value,f.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const u of a){const c=u.key,f=u.value;if(c.status==="aborted"||f.status==="aborted")return He;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),l.set(c.value,f.value)}return{status:n.value,value:l}}}}Wp.create=(t,e,n)=>new Wp({valueType:e,keyType:t,typeName:le.ZodMap,...Xe(n)});class ko extends rt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Pe.set)return Se(r,{code:ve.invalid_type,expected:Pe.set,received:r.parsedType}),He;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Se(r,{code:ve.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Se(r,{code:ve.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function a(u){const c=new Set;for(const f of u){if(f.status==="aborted")return He;f.status==="dirty"&&n.dirty(),c.add(f.value)}return{status:n.value,value:c}}const l=[...r.data.values()].map((u,c)=>s._parse(new ls(r,u,r.path,c)));return r.common.async?Promise.all(l).then(u=>a(u)):a(l)}min(e,n){return new ko({...this._def,minSize:{value:e,message:Ne.toString(n)}})}max(e,n){return new ko({...this._def,maxSize:{value:e,message:Ne.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ko.create=(t,e)=>new ko({valueType:t,minSize:null,maxSize:null,typeName:le.ZodSet,...Xe(e)});class Fl extends rt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Pe.function)return Se(n,{code:ve.invalid_type,expected:Pe.function,received:n.parsedType}),He;function r(l,u){return Vp({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,zp(),nu].filter(c=>!!c),issueData:{code:ve.invalid_arguments,argumentsError:u}})}function i(l,u){return Vp({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,zp(),nu].filter(c=>!!c),issueData:{code:ve.invalid_return_type,returnTypeError:u}})}const s={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof iu){const l=this;return nr(async function(...u){const c=new Or([]),f=await l._def.args.parseAsync(u,s).catch(m=>{throw c.addIssue(r(u,m)),c}),d=await Reflect.apply(a,this,f);return await l._def.returns._def.type.parseAsync(d,s).catch(m=>{throw c.addIssue(i(d,m)),c})})}else{const l=this;return nr(function(...u){const c=l._def.args.safeParse(u,s);if(!c.success)throw new Or([r(u,c.error)]);const f=Reflect.apply(a,this,c.data),d=l._def.returns.safeParse(f,s);if(!d.success)throw new Or([i(f,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Fl({...this._def,args:us.create(e).rest(vo.create())})}returns(e){return new Fl({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Fl({args:e||us.create([]).rest(vo.create()),returns:n||vo.create(),typeName:le.ZodFunction,...Xe(r)})}}class Uf extends rt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Uf.create=(t,e)=>new Uf({getter:t,typeName:le.ZodLazy,...Xe(e)});class zf extends rt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Se(n,{received:n.data,code:ve.invalid_literal,expected:this._def.value}),He}return{status:"valid",value:e.data}}get value(){return this._def.value}}zf.create=(t,e)=>new zf({value:t,typeName:le.ZodLiteral,...Xe(e)});function vI(t,e){return new La({values:t,typeName:le.ZodEnum,...Xe(e)})}class La extends rt{constructor(){super(...arguments),Cc.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Se(n,{expected:ht.joinValues(r),received:n.parsedType,code:ve.invalid_type}),He}if(qp(this,Cc,"f")||pI(this,Cc,new Set(this._def.values),"f"),!qp(this,Cc,"f").has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Se(n,{received:n.data,code:ve.invalid_enum_value,options:r}),He}return nr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return La.create(e,{...this._def,...n})}exclude(e,n=this._def){return La.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Cc=new WeakMap;La.create=vI;class Vf extends rt{constructor(){super(...arguments),Rc.set(this,void 0)}_parse(e){const n=ht.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Pe.string&&r.parsedType!==Pe.number){const i=ht.objectValues(n);return Se(r,{expected:ht.joinValues(i),received:r.parsedType,code:ve.invalid_type}),He}if(qp(this,Rc,"f")||pI(this,Rc,new Set(ht.getValidEnumValues(this._def.values)),"f"),!qp(this,Rc,"f").has(e.data)){const i=ht.objectValues(n);return Se(r,{received:r.data,code:ve.invalid_enum_value,options:i}),He}return nr(e.data)}get enum(){return this._def.values}}Rc=new WeakMap;Vf.create=(t,e)=>new Vf({values:t,typeName:le.ZodNativeEnum,...Xe(e)});class iu extends rt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Pe.promise&&n.common.async===!1)return Se(n,{code:ve.invalid_type,expected:Pe.promise,received:n.parsedType}),He;const r=n.parsedType===Pe.promise?n.data:Promise.resolve(n.data);return nr(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}iu.create=(t,e)=>new iu({type:t,typeName:le.ZodPromise,...Xe(e)});class Ri extends rt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===le.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:a=>{Se(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const a=i.transform(r.data,s);if(r.common.async)return Promise.resolve(a).then(async l=>{if(n.value==="aborted")return He;const u=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return u.status==="aborted"?He:u.status==="dirty"||n.value==="dirty"?Tl(u.value):u});{if(n.value==="aborted")return He;const l=this._def.schema._parseSync({data:a,path:r.path,parent:r});return l.status==="aborted"?He:l.status==="dirty"||n.value==="dirty"?Tl(l.value):l}}if(i.type==="refinement"){const a=l=>{const u=i.refinement(l,s);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?He:(l.status==="dirty"&&n.dirty(),a(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?He:(l.status==="dirty"&&n.dirty(),a(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Nf(a))return a;const l=i.transform(a.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Nf(a)?Promise.resolve(i.transform(a.value,s)).then(l=>({status:n.value,value:l})):a);ht.assertNever(i)}}Ri.create=(t,e,n)=>new Ri({schema:t,typeName:le.ZodEffects,effect:e,...Xe(n)});Ri.createWithPreprocess=(t,e,n)=>new Ri({schema:e,effect:{type:"preprocess",transform:t},typeName:le.ZodEffects,...Xe(n)});class as extends rt{_parse(e){return this._getType(e)===Pe.undefined?nr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}as.create=(t,e)=>new as({innerType:t,typeName:le.ZodOptional,...Xe(e)});class Na extends rt{_parse(e){return this._getType(e)===Pe.null?nr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Na.create=(t,e)=>new Na({innerType:t,typeName:le.ZodNullable,...Xe(e)});class qf extends rt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Pe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}qf.create=(t,e)=>new qf({innerType:t,typeName:le.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Xe(e)});class Hf extends rt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return If(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Or(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Or(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Hf.create=(t,e)=>new Hf({innerType:t,typeName:le.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Xe(e)});class Gp extends rt{_parse(e){if(this._getType(e)!==Pe.nan){const r=this._getOrReturnCtx(e);return Se(r,{code:ve.invalid_type,expected:Pe.nan,received:r.parsedType}),He}return{status:"valid",value:e.data}}}Gp.create=t=>new Gp({typeName:le.ZodNaN,...Xe(t)});const k8=Symbol("zod_brand");class i1 extends rt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class hd extends rt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?He:s.status==="dirty"?(n.dirty(),Tl(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?He:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new hd({in:e,out:n,typeName:le.ZodPipeline})}}class Zf extends rt{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Nf(i)&&(i.value=Object.freeze(i.value)),i);return If(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Zf.create=(t,e)=>new Zf({innerType:t,typeName:le.ZodReadonly,...Xe(e)});function _I(t,e={},n){return t?ru.create().superRefine((r,i)=>{var s,a;if(!t(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,u=(a=(s=l.fatal)!==null&&s!==void 0?s:n)!==null&&a!==void 0?a:!0,c=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...c,fatal:u})}}):ru.create()}const C8={object:Wt.lazycreate};var le;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(le||(le={}));const R8=(t,e={message:`Input not instance of ${t.name}`})=>_I(n=>n instanceof t,e),bI=Ei.create,wI=Ca.create,L8=Gp.create,N8=Ra.create,xI=jf.create,I8=Ao.create,j8=Hp.create,M8=Mf.create,D8=Df.create,$8=ru.create,B8=vo.create,F8=zs.create,U8=Zp.create,z8=Oi.create,V8=Wt.create,q8=Wt.strictCreate,H8=$f.create,Z8=Ym.create,W8=Bf.create,G8=us.create,K8=Ff.create,J8=Wp.create,X8=ko.create,Y8=Fl.create,Q8=Uf.create,e9=zf.create,t9=La.create,n9=Vf.create,r9=iu.create,GT=Ri.create,i9=as.create,s9=Na.create,a9=Ri.createWithPreprocess,o9=hd.create,l9=()=>bI().optional(),u9=()=>wI().optional(),c9=()=>xI().optional(),f9={string:t=>Ei.create({...t,coerce:!0}),number:t=>Ca.create({...t,coerce:!0}),boolean:t=>jf.create({...t,coerce:!0}),bigint:t=>Ra.create({...t,coerce:!0}),date:t=>Ao.create({...t,coerce:!0})},d9=He;var os=Object.freeze({__proto__:null,defaultErrorMap:nu,setErrorMap:d8,getErrorMap:zp,makeIssue:Vp,EMPTY_PATH:h8,addIssueToContext:Se,ParseStatus:Kn,INVALID:He,DIRTY:Tl,OK:nr,isAborted:mb,isDirty:gb,isValid:Nf,isAsync:If,get util(){return ht},get objectUtil(){return pb},ZodParsedType:Pe,getParsedType:fa,ZodType:rt,datetimeRegex:yI,ZodString:Ei,ZodNumber:Ca,ZodBigInt:Ra,ZodBoolean:jf,ZodDate:Ao,ZodSymbol:Hp,ZodUndefined:Mf,ZodNull:Df,ZodAny:ru,ZodUnknown:vo,ZodNever:zs,ZodVoid:Zp,ZodArray:Oi,ZodObject:Wt,ZodUnion:$f,ZodDiscriminatedUnion:Ym,ZodIntersection:Bf,ZodTuple:us,ZodRecord:Ff,ZodMap:Wp,ZodSet:ko,ZodFunction:Fl,ZodLazy:Uf,ZodLiteral:zf,ZodEnum:La,ZodNativeEnum:Vf,ZodPromise:iu,ZodEffects:Ri,ZodTransformer:Ri,ZodOptional:as,ZodNullable:Na,ZodDefault:qf,ZodCatch:Hf,ZodNaN:Gp,BRAND:k8,ZodBranded:i1,ZodPipeline:hd,ZodReadonly:Zf,custom:_I,Schema:rt,ZodSchema:rt,late:C8,get ZodFirstPartyTypeKind(){return le},coerce:f9,any:$8,array:z8,bigint:N8,boolean:xI,date:I8,discriminatedUnion:Z8,effect:GT,enum:t9,function:Y8,instanceof:R8,intersection:W8,lazy:Q8,literal:e9,map:J8,nan:L8,nativeEnum:n9,never:F8,null:D8,nullable:s9,number:wI,object:V8,oboolean:c9,onumber:u9,optional:i9,ostring:l9,pipeline:o9,preprocess:a9,promise:r9,record:K8,set:X8,strictObject:q8,string:bI,symbol:j8,transformer:GT,tuple:G8,undefined:M8,union:H8,unknown:B8,void:U8,NEVER:d9,ZodIssueCode:ve,quotelessJson:f8,ZodError:Or}),Qm={exports:{}},EI={};function ei(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var h9=ei;ei.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};ei.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};ei.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},n),this._options.unref&&this._timer.unref(),!0};ei.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};ei.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};ei.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};ei.prototype.start=ei.prototype.try;ei.prototype.errors=function(){return this._errors};ei.prototype.attempts=function(){return this._attempts};ei.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],s=i.message,a=(t[s]||0)+1;t[s]=a,a>=n&&(e=i,n=a)}return e};(function(t){var e=h9;t.operation=function(n){var r=t.timeouts(n);return new e(r,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},t.timeouts=function(n){if(n instanceof Array)return[].concat(n);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in n)r[i]=n[i];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],a=0;a<r.retries;a++)s.push(this.createTimeout(a,r));return n&&n.forever&&!s.length&&s.push(this.createTimeout(a,r)),s.sort(function(l,u){return l-u}),s},t.createTimeout=function(n,r){var i=r.randomize?Math.random()+1:1,s=Math.round(i*Math.max(r.minTimeout,1)*Math.pow(r.factor,n));return s=Math.min(s,r.maxTimeout),s},t.wrap=function(n,r,i){if(r instanceof Array&&(i=r,r=null),!i){i=[];for(var s in n)typeof n[s]=="function"&&i.push(s)}for(var a=0;a<i.length;a++){var l=i[a],u=n[l];n[l]=(function(f){var d=t.operation(r),p=Array.prototype.slice.call(arguments,1),m=p.pop();p.push(function(g){d.retry(g)||(g&&(arguments[0]=d.mainError()),m.apply(this,arguments))}),d.attempt(function(){f.apply(n,p)})}).bind(n,u),n[l].options=r}}})(EI);var p9=EI;const m9=p9,g9=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class SI extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const y9=(t,e,n)=>{const r=n.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=r,t},v9=t=>g9.includes(t),TI=(t,e)=>new Promise((n,r)=>{e={onFailedAttempt:()=>{},retries:10,...e};const i=m9.operation(e);i.attempt(async s=>{try{n(await t(s))}catch(a){if(!(a instanceof Error)){r(new TypeError(`Non-error was thrown: "${a}". You should only throw errors.`));return}if(a instanceof SI)i.stop(),r(a.originalError);else if(a instanceof TypeError&&!v9(a.message))i.stop(),r(a);else{y9(a,s,e);try{await e.onFailedAttempt(a)}catch(l){r(l);return}i.retry(a)||r(i.mainError())}}})});Qm.exports=TI;Qm.exports.default=TI;Qm.exports.AbortError=SI;var _9=Qm.exports;const Kp=Ro(_9),b9=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Jc(t){return typeof t=="string"&&b9.test(t)}var Ln=[];for(var Jy=0;Jy<256;++Jy)Ln.push((Jy+256).toString(16).slice(1));function w9(t,e=0){return(Ln[t[e+0]]+Ln[t[e+1]]+Ln[t[e+2]]+Ln[t[e+3]]+"-"+Ln[t[e+4]]+Ln[t[e+5]]+"-"+Ln[t[e+6]]+Ln[t[e+7]]+"-"+Ln[t[e+8]]+Ln[t[e+9]]+"-"+Ln[t[e+10]]+Ln[t[e+11]]+Ln[t[e+12]]+Ln[t[e+13]]+Ln[t[e+14]]+Ln[t[e+15]]).toLowerCase()}var hh,x9=new Uint8Array(16);function E9(){if(!hh&&(hh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hh(x9)}var S9=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const KT={randomUUID:S9};function Sr(t,e,n){if(KT.randomUUID&&!e&&!t)return KT.randomUUID();t=t||{};var r=t.random||(t.rng||E9)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return w9(r)}var PI={},OI={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,c,f){this.fn=u,this.context=c,this.once=f||!1}function s(u,c,f,d,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new i(f,d||u,p),g=n?n+c:c;return u._events[g]?u._events[g].fn?u._events[g]=[u._events[g],m]:u._events[g].push(m):(u._events[g]=m,u._eventsCount++),u}function a(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],f,d;if(this._eventsCount===0)return c;for(d in f=this._events)e.call(f,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},l.prototype.listeners=function(c){var f=n?n+c:c,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,m=d.length,g=new Array(m);p<m;p++)g[p]=d[p].fn;return g},l.prototype.listenerCount=function(c){var f=n?n+c:c,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(c,f,d,p,m,g){var b=n?n+c:c;if(!this._events[b])return!1;var w=this._events[b],y=arguments.length,v,x;if(w.fn){switch(w.once&&this.removeListener(c,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,d),!0;case 4:return w.fn.call(w.context,f,d,p),!0;case 5:return w.fn.call(w.context,f,d,p,m),!0;case 6:return w.fn.call(w.context,f,d,p,m,g),!0}for(x=1,v=new Array(y-1);x<y;x++)v[x-1]=arguments[x];w.fn.apply(w.context,v)}else{var E=w.length,T;for(x=0;x<E;x++)switch(w[x].once&&this.removeListener(c,w[x].fn,void 0,!0),y){case 1:w[x].fn.call(w[x].context);break;case 2:w[x].fn.call(w[x].context,f);break;case 3:w[x].fn.call(w[x].context,f,d);break;case 4:w[x].fn.call(w[x].context,f,d,p);break;default:if(!v)for(T=1,v=new Array(y-1);T<y;T++)v[T-1]=arguments[T];w[x].fn.apply(w[x].context,v)}}return!0},l.prototype.on=function(c,f,d){return s(this,c,f,d,!1)},l.prototype.once=function(c,f,d){return s(this,c,f,d,!0)},l.prototype.removeListener=function(c,f,d,p){var m=n?n+c:c;if(!this._events[m])return this;if(!f)return a(this,m),this;var g=this._events[m];if(g.fn)g.fn===f&&(!p||g.once)&&(!d||g.context===d)&&a(this,m);else{for(var b=0,w=[],y=g.length;b<y;b++)(g[b].fn!==f||p&&!g[b].once||d&&g[b].context!==d)&&w.push(g[b]);w.length?this._events[m]=w.length===1?w[0]:w:a(this,m)}return this},l.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&a(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(OI);var T9=OI.exports,eg={exports:{}},P9=(t,e)=>(e=e||(()=>{}),t.then(n=>new Promise(r=>{r(e())}).then(()=>n),n=>new Promise(r=>{r(e())}).then(()=>{throw n})));const O9=P9;class AI extends Error{constructor(e){super(e),this.name="TimeoutError"}}const kI=(t,e,n)=>new Promise((r,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){r(t);return}const s=setTimeout(()=>{if(typeof n=="function"){try{r(n())}catch(u){i(u)}return}const a=typeof n=="string"?n:`Promise timed out after ${e} milliseconds`,l=n instanceof Error?n:new AI(a);typeof t.cancel=="function"&&t.cancel(),i(l)},e);O9(t.then(r,i),()=>{clearTimeout(s)})});eg.exports=kI;eg.exports.default=kI;eg.exports.TimeoutError=AI;var A9=eg.exports,s1={},a1={};Object.defineProperty(a1,"__esModule",{value:!0});function k9(t,e,n){let r=0,i=t.length;for(;i>0;){const s=i/2|0;let a=r+s;n(t[a],e)<=0?(r=++a,i-=s+1):i=s}return r}a1.default=k9;Object.defineProperty(s1,"__esModule",{value:!0});const C9=a1;class R9{constructor(){this._queue=[]}enqueue(e,n){n=Object.assign({priority:0},n);const r={priority:n.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=n.priority){this._queue.push(r);return}const i=C9.default(this._queue,r,(s,a)=>a.priority-s.priority);this._queue.splice(i,0,r)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(n=>n.priority===e.priority).map(n=>n.run)}get size(){return this._queue.length}}s1.default=R9;Object.defineProperty(PI,"__esModule",{value:!0});const L9=T9,CI=A9,N9=s1,ph=()=>{},I9=new CI.TimeoutError;class j9 extends L9{constructor(e){var n,r,i,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=ph,this._resolveIdle=ph,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:N9.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(n=e.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=ph,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=ph,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const n=this._intervalEnd-e;if(n<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},n)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const n=this._queue.dequeue();return n?(this.emit("active"),n(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,n={}){return new Promise((r,i)=>{const s=async()=>{this._pendingCount++,this._intervalCount++;try{const a=this._timeout===void 0&&n.timeout===void 0?e():CI.default(Promise.resolve(e()),n.timeout===void 0?this._timeout:n.timeout,()=>{(n.throwOnTimeout===void 0?this._throwOnTimeout:n.throwOnTimeout)&&i(I9)});r(await a)}catch(a){i(a)}this._next()};this._queue.enqueue(s,n),this._tryToStartAnother(),this.emit("add")})}async addAll(e,n){return Promise.all(e.map(async r=>this.add(r,n)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const n=this._resolveEmpty;this._resolveEmpty=()=>{n(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const n=this._resolveIdle;this._resolveIdle=()=>{n(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var Is=PI.default=j9;const M9=(...t)=>fetch(...t),D9=Symbol.for("ls:fetch_implementation"),De=()=>globalThis[D9]??M9,$9=[400,401,403,404,405,406,407,408],B9=[409];let JT=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,"default"in Is?this.queue=new Is.default({concurrency:this.maxConcurrency}):this.queue=new Is({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...n){const r=this.onFailedResponseHook;return this.queue.add(()=>Kp(()=>e(...n).catch(i=>{throw i instanceof Error?i:new Error(i)}),{async onFailedAttempt(i){if(i.message.startsWith("Cancel")||i.message.startsWith("TimeoutError")||i.message.startsWith("AbortError")||(i==null?void 0:i.code)==="ECONNABORTED")throw i;const s=i==null?void 0:i.response,a=s==null?void 0:s.status;if(a){if($9.includes(+a))throw i;if(B9.includes(+a))return;r&&await r(s)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((i,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>De()(...e).then(n=>n.ok?n:Promise.reject(n)))}};function XT(t){return typeof(t==null?void 0:t._getType)=="function"}function YT(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}function lt(t,e){if(!Jc(t)){const n=e!==void 0?`Invalid UUID for ${e}: ${t}`:`Invalid UUID: ${t}`;throw new Error(n)}return t}const QT={};function RI(t){QT[t]||(console.warn(t),QT[t]=!0)}var vb={exports:{}};const F9="2.0.0",LI=256,U9=Number.MAX_SAFE_INTEGER||9007199254740991,z9=16,V9=LI-6,q9=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var tg={MAX_LENGTH:LI,MAX_SAFE_COMPONENT_LENGTH:z9,MAX_SAFE_BUILD_LENGTH:V9,MAX_SAFE_INTEGER:U9,RELEASE_TYPES:q9,SEMVER_SPEC_VERSION:F9,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Xy={};const H9=typeof process=="object"&&Xy&&Xy.NODE_DEBUG&&/\bsemver\b/i.test(Xy.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var ng=H9;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=tg,s=ng;e=t.exports={};const a=e.re=[],l=e.safeRe=[],u=e.src=[],c=e.t={};let f=0;const d="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",i],[d,r]],m=b=>{for(const[w,y]of p)b=b.split(`${w}*`).join(`${w}{0,${y}}`).split(`${w}+`).join(`${w}{1,${y}}`);return b},g=(b,w,y)=>{const v=m(w),x=f++;s(b,x,w),c[b]=x,u[x]=w,a[x]=new RegExp(w,y?"g":void 0),l[x]=new RegExp(v,y?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),g("MAINVERSION",`(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${u[c.NUMERICIDENTIFIER]}|${u[c.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${u[c.NUMERICIDENTIFIERLOOSE]}|${u[c.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${u[c.PRERELEASEIDENTIFIER]}(?:\\.${u[c.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${u[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[c.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${d}+`),g("BUILD",`(?:\\+(${u[c.BUILDIDENTIFIER]}(?:\\.${u[c.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${u[c.MAINVERSION]}${u[c.PRERELEASE]}?${u[c.BUILD]}?`),g("FULL",`^${u[c.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${u[c.MAINVERSIONLOOSE]}${u[c.PRERELEASELOOSE]}?${u[c.BUILD]}?`),g("LOOSE",`^${u[c.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${u[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${u[c.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:${u[c.PRERELEASE]})?${u[c.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:${u[c.PRERELEASELOOSE]})?${u[c.BUILD]}?)?)?`),g("XRANGE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),g("COERCE",`${u[c.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",u[c.COERCEPLAIN]+`(?:${u[c.PRERELEASE]})?(?:${u[c.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",u[c.COERCE],!0),g("COERCERTLFULL",u[c.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${u[c.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",g("TILDE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${u[c.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",g("CARET",`^${u[c.LONECARET]}${u[c.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${u[c.LONECARET]}${u[c.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${u[c.GTLT]}\\s*(${u[c.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]}|${u[c.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${u[c.XRANGEPLAIN]})\\s+-\\s+(${u[c.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${u[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[c.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(vb,vb.exports);var pd=vb.exports;const Z9=Object.freeze({loose:!0}),W9=Object.freeze({}),G9=t=>t?typeof t!="object"?Z9:t:W9;var o1=G9;const eP=/^[0-9]+$/,NI=(t,e)=>{const n=eP.test(t),r=eP.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},K9=(t,e)=>NI(e,t);var II={compareIdentifiers:NI,rcompareIdentifiers:K9};const mh=ng,{MAX_LENGTH:tP,MAX_SAFE_INTEGER:gh}=tg,{safeRe:nP,t:rP}=pd,J9=o1,{compareIdentifiers:Xo}=II;let X9=class Wi{constructor(e,n){if(n=J9(n),e instanceof Wi){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>tP)throw new TypeError(`version is longer than ${tP} characters`);mh("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=e.trim().match(n.loose?nP[rP.LOOSE]:nP[rP.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>gh||this.major<0)throw new TypeError("Invalid major version");if(this.minor>gh||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>gh||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<gh)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(mh("SemVer.compare",this.version,this.options,e),!(e instanceof Wi)){if(typeof e=="string"&&e===this.version)return 0;e=new Wi(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Wi||(e=new Wi(e,this.options)),Xo(this.major,e.major)||Xo(this.minor,e.minor)||Xo(this.patch,e.patch)}comparePre(e){if(e instanceof Wi||(e=new Wi(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=e.prerelease[n];if(mh("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Xo(r,i)}while(++n)}compareBuild(e){e instanceof Wi||(e=new Wi(e,this.options));let n=0;do{const r=this.build[n],i=e.build[n];if(mh("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Xo(r,i)}while(++n)}inc(e,n,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),Xo(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var ar=X9;const iP=ar,Y9=(t,e,n=!1)=>{if(t instanceof iP)return t;try{return new iP(t,e)}catch(r){if(!n)return null;throw r}};var Eu=Y9;const Q9=Eu,e6=(t,e)=>{const n=Q9(t,e);return n?n.version:null};var t6=e6;const n6=Eu,r6=(t,e)=>{const n=n6(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};var i6=r6;const sP=ar,s6=(t,e,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new sP(t instanceof sP?t.version:t,n).inc(e,r,i).version}catch{return null}};var a6=s6;const aP=Eu,o6=(t,e)=>{const n=aP(t,null,!0),r=aP(e,null,!0),i=n.compare(r);if(i===0)return null;const s=i>0,a=s?n:r,l=s?r:n,u=!!a.prerelease.length;if(!!l.prerelease.length&&!u)return!l.patch&&!l.minor?"major":a.patch?"patch":a.minor?"minor":"major";const f=u?"pre":"";return n.major!==r.major?f+"major":n.minor!==r.minor?f+"minor":n.patch!==r.patch?f+"patch":"prerelease"};var l6=o6;const u6=ar,c6=(t,e)=>new u6(t,e).major;var f6=c6;const d6=ar,h6=(t,e)=>new d6(t,e).minor;var p6=h6;const m6=ar,g6=(t,e)=>new m6(t,e).patch;var y6=g6;const v6=Eu,_6=(t,e)=>{const n=v6(t,e);return n&&n.prerelease.length?n.prerelease:null};var b6=_6;const oP=ar,w6=(t,e,n)=>new oP(t,n).compare(new oP(e,n));var Mi=w6;const x6=Mi,E6=(t,e,n)=>x6(e,t,n);var S6=E6;const T6=Mi,P6=(t,e)=>T6(t,e,!0);var O6=P6;const lP=ar,A6=(t,e,n)=>{const r=new lP(t,n),i=new lP(e,n);return r.compare(i)||r.compareBuild(i)};var l1=A6;const k6=l1,C6=(t,e)=>t.sort((n,r)=>k6(n,r,e));var R6=C6;const L6=l1,N6=(t,e)=>t.sort((n,r)=>L6(r,n,e));var I6=N6;const j6=Mi,M6=(t,e,n)=>j6(t,e,n)>0;var rg=M6;const D6=Mi,$6=(t,e,n)=>D6(t,e,n)<0;var u1=$6;const B6=Mi,F6=(t,e,n)=>B6(t,e,n)===0;var jI=F6;const U6=Mi,z6=(t,e,n)=>U6(t,e,n)!==0;var MI=z6;const V6=Mi,q6=(t,e,n)=>V6(t,e,n)>=0;var c1=q6;const H6=Mi,Z6=(t,e,n)=>H6(t,e,n)<=0;var f1=Z6;const W6=jI,G6=MI,K6=rg,J6=c1,X6=u1,Y6=f1,Q6=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return W6(t,n,r);case"!=":return G6(t,n,r);case">":return K6(t,n,r);case">=":return J6(t,n,r);case"<":return X6(t,n,r);case"<=":return Y6(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var DI=Q6;const eq=ar,tq=Eu,{safeRe:yh,t:vh}=pd,nq=(t,e)=>{if(t instanceof eq)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?yh[vh.COERCEFULL]:yh[vh.COERCE]);else{const u=e.includePrerelease?yh[vh.COERCERTLFULL]:yh[vh.COERCERTL];let c;for(;(c=u.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||c.index+c[0].length!==n.index+n[0].length)&&(n=c),u.lastIndex=c.index+c[1].length+c[2].length;u.lastIndex=-1}if(n===null)return null;const r=n[2],i=n[3]||"0",s=n[4]||"0",a=e.includePrerelease&&n[5]?`-${n[5]}`:"",l=e.includePrerelease&&n[6]?`+${n[6]}`:"";return tq(`${r}.${i}.${s}${a}${l}`,e)};var rq=nq;class iq{constructor(){this.max=1e3,this.map=new Map}get(e){const n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(e,n)}return this}}var sq=iq,Yy,uP;function Di(){if(uP)return Yy;uP=1;const t=/\s+/g;class e{constructor(z,G){if(G=i(G),z instanceof e)return z.loose===!!G.loose&&z.includePrerelease===!!G.includePrerelease?z:new e(z.raw,G);if(z instanceof s)return this.raw=z.value,this.set=[[z]],this.formatted=void 0,this;if(this.options=G,this.loose=!!G.loose,this.includePrerelease=!!G.includePrerelease,this.raw=z.trim().replace(t," "),this.set=this.raw.split("||").map(W=>this.parseRange(W.trim())).filter(W=>W.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const W=this.set[0];if(this.set=this.set.filter(Z=>!b(Z[0])),this.set.length===0)this.set=[W];else if(this.set.length>1){for(const Z of this.set)if(Z.length===1&&w(Z[0])){this.set=[Z];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let z=0;z<this.set.length;z++){z>0&&(this.formatted+="||");const G=this.set[z];for(let W=0;W<G.length;W++)W>0&&(this.formatted+=" "),this.formatted+=G[W].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(z){const W=((this.options.includePrerelease&&m)|(this.options.loose&&g))+":"+z,Z=r.get(W);if(Z)return Z;const q=this.options.loose,B=q?u[c.HYPHENRANGELOOSE]:u[c.HYPHENRANGE];z=z.replace(B,N(this.options.includePrerelease)),a("hyphen replace",z),z=z.replace(u[c.COMPARATORTRIM],f),a("comparator trim",z),z=z.replace(u[c.TILDETRIM],d),a("tilde trim",z),z=z.replace(u[c.CARETTRIM],p),a("caret trim",z);let j=z.split(" ").map(J=>v(J,this.options)).join(" ").split(/\s+/).map(J=>P(J,this.options));q&&(j=j.filter(J=>(a("loose invalid filter",J,this.options),!!J.match(u[c.COMPARATORLOOSE])))),a("range list",j);const U=new Map,H=j.map(J=>new s(J,this.options));for(const J of H){if(b(J))return[J];U.set(J.value,J)}U.size>1&&U.has("")&&U.delete("");const Y=[...U.values()];return r.set(W,Y),Y}intersects(z,G){if(!(z instanceof e))throw new TypeError("a Range is required");return this.set.some(W=>y(W,G)&&z.set.some(Z=>y(Z,G)&&W.every(q=>Z.every(B=>q.intersects(B,G)))))}test(z){if(!z)return!1;if(typeof z=="string")try{z=new l(z,this.options)}catch{return!1}for(let G=0;G<this.set.length;G++)if($(this.set[G],z,this.options))return!0;return!1}}Yy=e;const n=sq,r=new n,i=o1,s=ig(),a=ng,l=ar,{safeRe:u,t:c,comparatorTrimReplace:f,tildeTrimReplace:d,caretTrimReplace:p}=pd,{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:g}=tg,b=D=>D.value==="<0.0.0-0",w=D=>D.value==="",y=(D,z)=>{let G=!0;const W=D.slice();let Z=W.pop();for(;G&&W.length;)G=W.every(q=>Z.intersects(q,z)),Z=W.pop();return G},v=(D,z)=>(a("comp",D,z),D=O(D,z),a("caret",D),D=E(D,z),a("tildes",D),D=C(D,z),a("xrange",D),D=R(D,z),a("stars",D),D),x=D=>!D||D.toLowerCase()==="x"||D==="*",E=(D,z)=>D.trim().split(/\s+/).map(G=>T(G,z)).join(" "),T=(D,z)=>{const G=z.loose?u[c.TILDELOOSE]:u[c.TILDE];return D.replace(G,(W,Z,q,B,j)=>{a("tilde",D,W,Z,q,B,j);let U;return x(Z)?U="":x(q)?U=`>=${Z}.0.0 <${+Z+1}.0.0-0`:x(B)?U=`>=${Z}.${q}.0 <${Z}.${+q+1}.0-0`:j?(a("replaceTilde pr",j),U=`>=${Z}.${q}.${B}-${j} <${Z}.${+q+1}.0-0`):U=`>=${Z}.${q}.${B} <${Z}.${+q+1}.0-0`,a("tilde return",U),U})},O=(D,z)=>D.trim().split(/\s+/).map(G=>A(G,z)).join(" "),A=(D,z)=>{a("caret",D,z);const G=z.loose?u[c.CARETLOOSE]:u[c.CARET],W=z.includePrerelease?"-0":"";return D.replace(G,(Z,q,B,j,U)=>{a("caret",D,Z,q,B,j,U);let H;return x(q)?H="":x(B)?H=`>=${q}.0.0${W} <${+q+1}.0.0-0`:x(j)?q==="0"?H=`>=${q}.${B}.0${W} <${q}.${+B+1}.0-0`:H=`>=${q}.${B}.0${W} <${+q+1}.0.0-0`:U?(a("replaceCaret pr",U),q==="0"?B==="0"?H=`>=${q}.${B}.${j}-${U} <${q}.${B}.${+j+1}-0`:H=`>=${q}.${B}.${j}-${U} <${q}.${+B+1}.0-0`:H=`>=${q}.${B}.${j}-${U} <${+q+1}.0.0-0`):(a("no pr"),q==="0"?B==="0"?H=`>=${q}.${B}.${j}${W} <${q}.${B}.${+j+1}-0`:H=`>=${q}.${B}.${j}${W} <${q}.${+B+1}.0-0`:H=`>=${q}.${B}.${j} <${+q+1}.0.0-0`),a("caret return",H),H})},C=(D,z)=>(a("replaceXRanges",D,z),D.split(/\s+/).map(G=>M(G,z)).join(" ")),M=(D,z)=>{D=D.trim();const G=z.loose?u[c.XRANGELOOSE]:u[c.XRANGE];return D.replace(G,(W,Z,q,B,j,U)=>{a("xRange",D,W,Z,q,B,j,U);const H=x(q),Y=H||x(B),J=Y||x(j),V=J;return Z==="="&&V&&(Z=""),U=z.includePrerelease?"-0":"",H?Z===">"||Z==="<"?W="<0.0.0-0":W="*":Z&&V?(Y&&(B=0),j=0,Z===">"?(Z=">=",Y?(q=+q+1,B=0,j=0):(B=+B+1,j=0)):Z==="<="&&(Z="<",Y?q=+q+1:B=+B+1),Z==="<"&&(U="-0"),W=`${Z+q}.${B}.${j}${U}`):Y?W=`>=${q}.0.0${U} <${+q+1}.0.0-0`:J&&(W=`>=${q}.${B}.0${U} <${q}.${+B+1}.0-0`),a("xRange return",W),W})},R=(D,z)=>(a("replaceStars",D,z),D.trim().replace(u[c.STAR],"")),P=(D,z)=>(a("replaceGTE0",D,z),D.trim().replace(u[z.includePrerelease?c.GTE0PRE:c.GTE0],"")),N=D=>(z,G,W,Z,q,B,j,U,H,Y,J,V)=>(x(W)?G="":x(Z)?G=`>=${W}.0.0${D?"-0":""}`:x(q)?G=`>=${W}.${Z}.0${D?"-0":""}`:B?G=`>=${G}`:G=`>=${G}${D?"-0":""}`,x(H)?U="":x(Y)?U=`<${+H+1}.0.0-0`:x(J)?U=`<${H}.${+Y+1}.0-0`:V?U=`<=${H}.${Y}.${J}-${V}`:D?U=`<${H}.${Y}.${+J+1}-0`:U=`<=${U}`,`${G} ${U}`.trim()),$=(D,z,G)=>{for(let W=0;W<D.length;W++)if(!D[W].test(z))return!1;if(z.prerelease.length&&!G.includePrerelease){for(let W=0;W<D.length;W++)if(a(D[W].semver),D[W].semver!==s.ANY&&D[W].semver.prerelease.length>0){const Z=D[W].semver;if(Z.major===z.major&&Z.minor===z.minor&&Z.patch===z.patch)return!0}return!1}return!0};return Yy}var Qy,cP;function ig(){if(cP)return Qy;cP=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(f,d){if(d=n(d),f instanceof e){if(f.loose===!!d.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),a("comparator",f,d),this.options=d,this.loose=!!d.loose,this.parse(f),this.semver===t?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(f){const d=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],p=f.match(d);if(!p)throw new TypeError(`Invalid comparator: ${f}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new l(p[2],this.options.loose):this.semver=t}toString(){return this.value}test(f){if(a("Comparator.test",f,this.options.loose),this.semver===t||f===t)return!0;if(typeof f=="string")try{f=new l(f,this.options)}catch{return!1}return s(f,this.operator,this.semver,this.options)}intersects(f,d){if(!(f instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(f.value,d).test(this.value):f.operator===""?f.value===""?!0:new u(this.value,d).test(f.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||s(this.semver,"<",f.semver,d)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||s(this.semver,">",f.semver,d)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}Qy=e;const n=o1,{safeRe:r,t:i}=pd,s=DI,a=ng,l=ar,u=Di();return Qy}const aq=Di(),oq=(t,e,n)=>{try{e=new aq(e,n)}catch{return!1}return e.test(t)};var sg=oq;const lq=Di(),uq=(t,e)=>new lq(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));var cq=uq;const fq=ar,dq=Di(),hq=(t,e,n)=>{let r=null,i=null,s=null;try{s=new dq(e,n)}catch{return null}return t.forEach(a=>{s.test(a)&&(!r||i.compare(a)===-1)&&(r=a,i=new fq(r,n))}),r};var pq=hq;const mq=ar,gq=Di(),yq=(t,e,n)=>{let r=null,i=null,s=null;try{s=new gq(e,n)}catch{return null}return t.forEach(a=>{s.test(a)&&(!r||i.compare(a)===1)&&(r=a,i=new mq(r,n))}),r};var vq=yq;const ev=ar,_q=Di(),fP=rg,bq=(t,e)=>{t=new _q(t,e);let n=new ev("0.0.0");if(t.test(n)||(n=new ev("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){const i=t.set[r];let s=null;i.forEach(a=>{const l=new ev(a.semver.version);switch(a.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!s||fP(l,s))&&(s=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!n||fP(n,s))&&(n=s)}return n&&t.test(n)?n:null};var wq=bq;const xq=Di(),Eq=(t,e)=>{try{return new xq(t,e).range||"*"}catch{return null}};var Sq=Eq;const Tq=ar,$I=ig(),{ANY:Pq}=$I,Oq=Di(),Aq=sg,dP=rg,hP=u1,kq=f1,Cq=c1,Rq=(t,e,n,r)=>{t=new Tq(t,r),e=new Oq(e,r);let i,s,a,l,u;switch(n){case">":i=dP,s=kq,a=hP,l=">",u=">=";break;case"<":i=hP,s=Cq,a=dP,l="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Aq(t,e,r))return!1;for(let c=0;c<e.set.length;++c){const f=e.set[c];let d=null,p=null;if(f.forEach(m=>{m.semver===Pq&&(m=new $I(">=0.0.0")),d=d||m,p=p||m,i(m.semver,d.semver,r)?d=m:a(m.semver,p.semver,r)&&(p=m)}),d.operator===l||d.operator===u||(!p.operator||p.operator===l)&&s(t,p.semver))return!1;if(p.operator===u&&a(t,p.semver))return!1}return!0};var d1=Rq;const Lq=d1,Nq=(t,e,n)=>Lq(t,e,">",n);var Iq=Nq;const jq=d1,Mq=(t,e,n)=>jq(t,e,"<",n);var Dq=Mq;const pP=Di(),$q=(t,e,n)=>(t=new pP(t,n),e=new pP(e,n),t.intersects(e,n));var Bq=$q;const Fq=sg,Uq=Mi;var zq=(t,e,n)=>{const r=[];let i=null,s=null;const a=t.sort((f,d)=>Uq(f,d,n));for(const f of a)Fq(f,e,n)?(s=f,i||(i=f)):(s&&r.push([i,s]),s=null,i=null);i&&r.push([i,null]);const l=[];for(const[f,d]of r)f===d?l.push(f):!d&&f===a[0]?l.push("*"):d?f===a[0]?l.push(`<=${d}`):l.push(`${f} - ${d}`):l.push(`>=${f}`);const u=l.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return u.length<c.length?u:e};const mP=Di(),h1=ig(),{ANY:tv}=h1,uc=sg,p1=Mi,Vq=(t,e,n={})=>{if(t===e)return!0;t=new mP(t,n),e=new mP(e,n);let r=!1;e:for(const i of t.set){for(const s of e.set){const a=Hq(i,s,n);if(r=r||a!==null,a)continue e}if(r)return!1}return!0},qq=[new h1(">=0.0.0-0")],gP=[new h1(">=0.0.0")],Hq=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===tv){if(e.length===1&&e[0].semver===tv)return!0;n.includePrerelease?t=qq:t=gP}if(e.length===1&&e[0].semver===tv){if(n.includePrerelease)return!0;e=gP}const r=new Set;let i,s;for(const m of t)m.operator===">"||m.operator===">="?i=yP(i,m,n):m.operator==="<"||m.operator==="<="?s=vP(s,m,n):r.add(m.semver);if(r.size>1)return null;let a;if(i&&s){if(a=p1(i.semver,s.semver,n),a>0)return null;if(a===0&&(i.operator!==">="||s.operator!=="<="))return null}for(const m of r){if(i&&!uc(m,String(i),n)||s&&!uc(m,String(s),n))return null;for(const g of e)if(!uc(m,String(g),n))return!1;return!0}let l,u,c,f,d=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(const m of e){if(f=f||m.operator===">"||m.operator===">=",c=c||m.operator==="<"||m.operator==="<=",i){if(p&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===p.major&&m.semver.minor===p.minor&&m.semver.patch===p.patch&&(p=!1),m.operator===">"||m.operator===">="){if(l=yP(i,m,n),l===m&&l!==i)return!1}else if(i.operator===">="&&!uc(i.semver,String(m),n))return!1}if(s){if(d&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===d.major&&m.semver.minor===d.minor&&m.semver.patch===d.patch&&(d=!1),m.operator==="<"||m.operator==="<="){if(u=vP(s,m,n),u===m&&u!==s)return!1}else if(s.operator==="<="&&!uc(s.semver,String(m),n))return!1}if(!m.operator&&(s||i)&&a!==0)return!1}return!(i&&c&&!s&&a!==0||s&&f&&!i&&a!==0||p||d)},yP=(t,e,n)=>{if(!t)return e;const r=p1(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},vP=(t,e,n)=>{if(!t)return e;const r=p1(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};var Zq=Vq;const nv=pd,_P=tg,Wq=ar,bP=II,Gq=Eu,Kq=t6,Jq=i6,Xq=a6,Yq=l6,Qq=f6,eH=p6,tH=y6,nH=b6,rH=Mi,iH=S6,sH=O6,aH=l1,oH=R6,lH=I6,uH=rg,cH=u1,fH=jI,dH=MI,hH=c1,pH=f1,mH=DI,gH=rq,yH=ig(),vH=Di(),_H=sg,bH=cq,wH=pq,xH=vq,EH=wq,SH=Sq,TH=d1,PH=Iq,OH=Dq,AH=Bq,kH=zq,CH=Zq;var wP={parse:Gq,valid:Kq,clean:Jq,inc:Xq,diff:Yq,major:Qq,minor:eH,patch:tH,prerelease:nH,compare:rH,rcompare:iH,compareLoose:sH,compareBuild:aH,sort:oH,rsort:lH,gt:uH,lt:cH,eq:fH,neq:dH,gte:hH,lte:pH,cmp:mH,coerce:gH,Comparator:yH,Range:vH,satisfies:_H,toComparators:bH,maxSatisfying:wH,minSatisfying:xH,minVersion:EH,validRange:SH,outside:TH,gtr:PH,ltr:OH,intersects:AH,simplifyRange:kH,subset:CH,SemVer:Wq,re:nv.re,src:nv.src,tokens:nv.t,SEMVER_SPEC_VERSION:_P.SEMVER_SPEC_VERSION,RELEASE_TYPES:_P.RELEASE_TYPES,compareIdentifiers:bP.compareIdentifiers,rcompareIdentifiers:bP.rcompareIdentifiers};function RH(t,e){const n=wP.parse(t),r=wP.parse(e);if(!n||!r)throw new Error("Invalid version format.");return n.compare(r)>=0}function ea(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);const[e,n]=t.split(":"),r=n||"latest";if(e.includes("/")){const[i,s]=e.split("/",2);if(!i||!s)throw new Error(`Invalid identifier format: ${t}`);return[i,s,r]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,r]}}class LH extends Error{constructor(e){super(e),this.name="LangSmithConflictError"}}async function st(t,e,n){let r;if(t.ok){n&&(r=await t.text());return}r=await t.text();const i=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Server response: ${r}`;throw t.status===409?new LH(i):new Error(i)}var xP="[...]",NH={result:"[Circular]"},Jp=[],Pl=[];function IH(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function rl(t,e,n,r){var a;try{return JSON.stringify(t,e,n)}catch(l){if(!((a=l.message)!=null&&a.includes("Converting circular structure to JSON")))return console.warn("[WARNING]: LangSmith received unserializable value."),"[Unserializable]";console.warn("[WARNING]: LangSmith received circular JSON. This will decrease tracer performance."),typeof r>"u"&&(r=IH()),_b(t,"",0,[],void 0,0,r);var i;try{Pl.length===0?i=JSON.stringify(t,e,n):i=JSON.stringify(t,jH(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Jp.length!==0;){var s=Jp.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}}function rv(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),Jp.push([r,n,e,i])):Pl.push([e,n,t]):(r[n]=t,Jp.push([r,n,e]))}function _b(t,e,n,r,i,s,a){s+=1;var l;if(typeof t=="object"&&t!==null){for(l=0;l<r.length;l++)if(r[l]===t){rv(NH,t,e,i);return}if(typeof a.depthLimit<"u"&&s>a.depthLimit){rv(xP,t,e,i);return}if(typeof a.edgesLimit<"u"&&n+1>a.edgesLimit){rv(xP,t,e,i);return}if(r.push(t),Array.isArray(t))for(l=0;l<t.length;l++)_b(t[l],l,l,r,t,s,a);else{var u=Object.keys(t);for(l=0;l<u.length;l++){var c=u[l];_b(t[c],c,l,r,t,s,a)}}r.pop()}}function jH(t){return t=typeof t<"u"?t:function(e,n){return n},function(e,n){if(Pl.length>0)for(var r=0;r<Pl.length;r++){var i=Pl[r];if(i[1]===e&&i[0]===n){n=i[2],Pl.splice(r,1);break}}return t.call(this,e,n)}}function EP(t){const e=UI(),n=GH(),r=t.extra??{},i=r.metadata;return t.extra={...r,runtime:{...e,...r==null?void 0:r.runtime},metadata:{...n,...n.revision_id||t.revision_id?{revision_id:t.revision_id??n.revision_id}:{},...i}},t}const MH=()=>{const t=so("TRACING_SAMPLING_RATE");if(t===void 0)return;const e=parseFloat(t);if(e<0||e>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${e}`);return e},DH=t=>{const n=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function $H(t){const e=[];for await(const n of t)e.push(n);return e}function iv(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const BH=async t=>{if((t==null?void 0:t.status)===429){const e=parseInt(t.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(n=>setTimeout(n,e)),!0}return!1};class FH{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let n;const r=new Promise(s=>{n=s}),i=rl(e.item).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:n,itemPromise:r,size:i}),this.sizeBytes+=i,r}pop(e){var i;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const n=[];let r=0;for(;r+(((i=this.peek())==null?void 0:i.size)??0)<e&&this.items.length>0;){const s=this.items.shift();s&&(n.push(s),r+=s.size,this.sizeBytes-=s.size)}if(n.length===0&&this.items.length>0){const s=this.items.shift();n.push(s),r+=s.size,this.sizeBytes-=s.size}return[n.map(s=>({action:s.action,item:s.payload})),()=>n.forEach(s=>s.itemPromiseResolve())]}}const UH=20971520,zH=1e3;class Wf{constructor(e={}){var r;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new FH}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:ma("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const n=Wf.getDefaultClientConfig();if(this.tracingSampleRate=MH(),this.apiUrl=iv(e.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=iv(e.apiKey??n.apiKey),this.webUrl=iv(e.webUrl??n.webUrl),(r=this.webUrl)!=null&&r.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new JT(e.callerOptions??{}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.batchIngestCaller=new JT({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:BH}),this.hideInputs=e.hideInputs??e.anonymizer??n.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??n.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{}}static getDefaultClientConfig(){const e=so("API_KEY"),n=so("ENDPOINT")??"https://api.smith.langchain.com",r=so("HIDE_INPUTS")==="true",i=so("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:DH(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${BI}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}prepareRunCreateOrUpdateInputs(e){const n={...e};return n.inputs!==void 0&&(n.inputs=this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=this.processOutputs(n.outputs)),n}async _getResponse(e,n){const r=(n==null?void 0:n.toString())??"",i=`${this.apiUrl}${e}?${r}`,s=await this.caller.call(De(),i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(s,`Failed to fetch ${e}`),s}async _get(e,n){return(await this._getResponse(e,n)).json()}async*_getPaginated(e,n=new URLSearchParams,r){let i=Number(n.get("offset"))||0;const s=Number(n.get("limit"))||100;for(;;){n.set("offset",String(i)),n.set("limit",String(s));const a=`${this.apiUrl}${e}?${n}`,l=await this.caller.call(De(),a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(l,`Failed to fetch ${e}`);const u=r?r(await l.json()):await l.json();if(u.length===0||(yield u,u.length<s))break;i+=u.length}}async*_getCursorPaginatedList(e,n=null,r="POST",i="runs"){const s=n?{...n}:{};for(;;){const l=await(await this.caller.call(De(),`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(s)})).json();if(!l||!l[i])break;yield l[i];const u=l.cursors;if(!u||!u.next)break;s.cursor=u.next}}_filterForSampling(e,n=!1){if(this.tracingSampleRate===void 0)return e;if(n){const r=[];for(const i of e)this.filteredPostUuids.has(i.id)?this.filteredPostUuids.delete(i.id):r.push(i);return r}else{const r=[];for(const i of e)i.id!==i.trace_id&&!this.filteredPostUuids.has(i.trace_id)||Math.random()<this.tracingSampleRate?r.push(i):this.filteredPostUuids.add(i.id);return r}}async _getBatchSizeLimitBytes(){var n;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((n=e.batch_ingest_config)==null?void 0:n.size_limit_bytes)??UH}drainAutoBatchQueue(e){for(;this.autoBatchQueue.items.length>0;){const[n,r]=this.autoBatchQueue.pop(e);if(!n.length){r();break}this._processBatch(n,r).catch(console.error)}}async _processBatch(e,n){var r;if(!e.length){n();return}try{const i={runCreates:e.filter(a=>a.action==="create").map(a=>a.item),runUpdates:e.filter(a=>a.action==="update").map(a=>a.item)},s=await this._ensureServerInfo();(r=s==null?void 0:s.batch_ingest_config)!=null&&r.use_multipart_endpoint?await this.multipartIngestRuns(i):await this.batchIngestRuns(i)}finally{n()}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.action==="create"&&(e.item=EP(e.item));const n=this.autoBatchQueue.push(e),r=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>r&&this.drainAutoBatchQueue(r),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(r)},this.autoBatchAggregationDelayMs)),n}async _getServerInfo(){const e=await De()(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(zH),...this.fetchOptions});return await st(e,"get server info"),e.json()}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch{console.warn("[WARNING]: LangSmith failed to fetch info on supported operations. Falling back to batch operations and default limits.")}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async createRun(e){if(!this._filterForSampling([e]).length)return;const n={...this.headers,"Content-Type":"application/json"},r=e.project_name;delete e.project_name;const i=this.prepareRunCreateOrUpdateInputs({session_name:r,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){this.processRunOperation({action:"create",item:i}).catch(console.error);return}const s=EP(i),a=await this.caller.call(De(),`${this.apiUrl}/runs`,{method:"POST",headers:n,body:rl(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(a,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:n}){if(e===void 0&&n===void 0)return;let r=(e==null?void 0:e.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[],i=(n==null?void 0:n.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[];if(r.length>0&&i.length>0){const l=r.reduce((c,f)=>(f.id&&(c[f.id]=f),c),{}),u=[];for(const c of i)c.id!==void 0&&l[c.id]?l[c.id]={...l[c.id],...c}:u.push(c);r=Object.values(l),i=u}const s={post:this._filterForSampling(r),patch:this._filterForSampling(i,!0)};if(!s.post.length&&!s.patch.length)return;const a={post:[],patch:[]};for(const l of["post","patch"]){const u=l,c=s[u].reverse();let f=c.pop();for(;f!==void 0;)a[u].push(f),f=c.pop()}(a.post.length>0||a.patch.length>0)&&await this._postBatchIngestRuns(rl(a))}async _postBatchIngestRuns(e){const n={...this.headers,"Content-Type":"application/json",Accept:"application/json"},r=await this.batchIngestCaller.call(De(),`${this.apiUrl}/runs/batch`,{method:"POST",headers:n,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(r,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:n}){if(e===void 0&&n===void 0)return;const r={};let i=[];for(const f of e??[]){const d=this.prepareRunCreateOrUpdateInputs(f);d.id!==void 0&&d.attachments!==void 0&&(r[d.id]=d.attachments),delete d.attachments,i.push(d)}let s=[];for(const f of n??[])s.push(this.prepareRunCreateOrUpdateInputs(f));if(i.find(f=>f.trace_id===void 0||f.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(s.find(f=>f.trace_id===void 0||f.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(i.length>0&&s.length>0){const f=i.reduce((p,m)=>(m.id&&(p[m.id]=m),p),{}),d=[];for(const p of s)p.id!==void 0&&f[p.id]?f[p.id]={...f[p.id],...p}:d.push(p);i=Object.values(f),s=d}if(i.length===0&&s.length===0)return;const u=[],c=[];for(const[f,d]of[["post",i],["patch",s]])for(const p of d){const{inputs:m,outputs:g,events:b,attachments:w,...y}=p,v={inputs:m,outputs:g,events:b},x=rl(y);c.push({name:`${f}.${y.id}`,payload:new Blob([x],{type:`application/json; length=${x.length}`})});for(const[E,T]of Object.entries(v)){if(T===void 0)continue;const O=rl(T);c.push({name:`${f}.${y.id}.${E}`,payload:new Blob([O],{type:`application/json; length=${O.length}`})})}if(y.id!==void 0){const E=r[y.id];if(E){delete r[y.id];for(const[T,[O,A]]of Object.entries(E)){if(T.includes(".")){console.warn(`Skipping attachment '${T}' for run ${y.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}c.push({name:`attachment.${y.id}.${T}`,payload:new Blob([A],{type:`${O}; length=${A.byteLength}`})})}}}u.push(`trace=${y.trace_id},id=${y.id}`)}await this._sendMultipartRequest(c,u.join("; "))}async _sendMultipartRequest(e,n){try{const r="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),i=[];for(const u of e)i.push(new Blob([`--${r}\r
`])),i.push(new Blob([`Content-Disposition: form-data; name="${u.name}"\r
`,`Content-Type: ${u.payload.type}\r
\r
`])),i.push(u.payload),i.push(new Blob([`\r
`]));i.push(new Blob([`--${r}--\r
`]));const a=await new Blob(i).arrayBuffer(),l=await this.batchIngestCaller.call(De(),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${r}`},body:a,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(l,"ingest multipart runs",!0)}catch(r){console.warn(`${r.message.trim()}

Context: ${n}`)}}async updateRun(e,n){lt(e),n.inputs&&(n.inputs=this.processInputs(n.inputs)),n.outputs&&(n.outputs=this.processOutputs(n.outputs));const r={...n,id:e};if(!this._filterForSampling([r],!0).length)return;if(this.autoBatchTracing&&r.trace_id!==void 0&&r.dotted_order!==void 0){if(n.end_time!==void 0&&r.parent_run_id===void 0&&this.blockOnRootRunFinalization){await this.processRunOperation({action:"update",item:r}).catch(console.error);return}else this.processRunOperation({action:"update",item:r}).catch(console.error);return}const i={...this.headers,"Content-Type":"application/json"},s=await this.caller.call(De(),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:i,body:rl(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(s,"update run",!0)}async readRun(e,{loadChildRuns:n}={loadChildRuns:!1}){lt(e);let r=await this._get(`/runs/${e}`);return n&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:n,projectOpts:r}){if(n!==void 0){let i;n.session_id?i=n.session_id:r!=null&&r.projectName?i=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?i=r==null?void 0:r.projectId:i=(await this.readProject({projectName:so("PROJECT")||"default"})).id;const s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${i}/r/${n.id}?poll=true`}else if(e!==void 0){const i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const n=await $H(this.listRuns({id:e.child_run_ids})),r={},i={};n.sort((s,a)=>((s==null?void 0:s.dotted_order)??"").localeCompare((a==null?void 0:a.dotted_order)??""));for(const s of n){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);s.parent_run_id in r||(r[s.parent_run_id]=[]),r[s.parent_run_id].push(s),i[s.id]=s}e.child_runs=r[e.id]||[];for(const s in r)s!==e.id&&(i[s].child_runs=r[s]);return e}async*listRuns(e){const{projectId:n,projectName:r,parentRunId:i,traceId:s,referenceExampleId:a,startTime:l,executionOrder:u,isRoot:c,runType:f,error:d,id:p,query:m,filter:g,traceFilter:b,treeFilter:w,limit:y,select:v}=e;let x=[];if(n&&(x=Array.isArray(n)?n:[n]),r){const A=Array.isArray(r)?r:[r],C=await Promise.all(A.map(M=>this.readProject({projectName:M}).then(R=>R.id)));x.push(...C)}const E=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],T={session:x.length?x:null,run_type:f,reference_example:a,query:m,filter:g,trace_filter:b,tree_filter:w,execution_order:u,parent_run:i,start_time:l?l.toISOString():null,error:d,id:p,limit:y,trace:s,select:v||E,is_root:c};let O=0;for await(const A of this._getCursorPaginatedList("/runs/query",T))if(y){if(O>=y)break;if(A.length+O>y){yield*A.slice(0,y-O);break}O+=A.length,yield*A}else yield*A}async getRunStats({id:e,trace:n,parentRun:r,runType:i,projectNames:s,projectIds:a,referenceExampleIds:l,startTime:u,endTime:c,error:f,query:d,filter:p,traceFilter:m,treeFilter:g,isRoot:b,dataSourceType:w}){let y=a||[];s&&(y=[...a||[],...await Promise.all(s.map(O=>this.readProject({projectName:O}).then(A=>A.id)))]);const x=Object.fromEntries(Object.entries({id:e,trace:n,parent_run:r,run_type:i,session:y,reference_example:l,start_time:u,end_time:c,error:f,query:d,filter:p,trace_filter:m,tree_filter:g,is_root:b,data_source_type:w}).filter(([O,A])=>A!==void 0));return await(await this.caller.call(De(),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(x),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:n}={}){const r={run_id:e,share_token:n||Sr()};lt(e);const s=await(await this.caller.call(De(),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(s===null||!("share_token"in s))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${s.share_token}/r`}async unshareRun(e){lt(e);const n=await this.caller.call(De(),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(n,"unshare run",!0)}async readRunSharedLink(e){lt(e);const r=await(await this.caller.call(De(),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:n}={}){const r=new URLSearchParams({share_token:e});if(n!==void 0)for(const a of n)r.append("id",a);return lt(e),await(await this.caller.call(De(),`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id),lt(e);const i=await(await this.caller.call(De(),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id);const r={dataset_id:e};lt(e);const s=await(await this.caller.call(De(),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async unshareDataset(e){lt(e);const n=await this.caller.call(De(),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(n,"unshare dataset",!0)}async readSharedDataset(e){return lt(e),await(await this.caller.call(De(),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,n){const r={};n!=null&&n.exampleIds&&(r.id=n.exampleIds);const i=new URLSearchParams;Object.entries(r).forEach(([l,u])=>{Array.isArray(u)?u.forEach(c=>i.append(l,c)):i.append(l,u)});const s=await this.caller.call(De(),`${this.apiUrl}/public/${e}/examples?${i.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),a=await s.json();if(!s.ok)throw"detail"in a?new Error(`Failed to list shared examples.
Status: ${s.status}
Message: ${a.detail.join(`
`)}`):new Error(`Failed to list shared examples: ${s.status} ${s.statusText}`);return a.map(l=>({...l,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:n=null,metadata:r=null,upsert:i=!1,projectExtra:s=null,referenceDatasetId:a=null}){const l=i?"?upsert=true":"",u=`${this.apiUrl}/sessions${l}`,c=s||{};r&&(c.metadata=r);const f={name:e,extra:c,description:n};a!==null&&(f.reference_dataset_id=a);const d=await this.caller.call(De(),u,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(f),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(d,"create project"),await d.json()}async updateProject(e,{name:n=null,description:r=null,metadata:i=null,projectExtra:s=null,endTime:a=null}){const l=`${this.apiUrl}/sessions/${e}`;let u=s;i&&(u={...u||{},metadata:i});const c={name:n,extra:u,description:r,end_time:a?new Date(a).toISOString():null},f=await this.caller.call(De(),l,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(f,"update project"),await f.json()}async hasProject({projectId:e,projectName:n}){let r="/sessions";const i=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)lt(e),r+=`/${e}`;else if(n!==void 0)i.append("name",n);else throw new Error("Must provide projectName or projectId");const s=await this.caller.call(De(),`${this.apiUrl}${r}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const a=await s.json();return s.ok?Array.isArray(a)?a.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:n,includeStats:r}){let i="/sessions";const s=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)lt(e),i+=`/${e}`;else if(n!==void 0)s.append("name",n);else throw new Error("Must provide projectName or projectId");r!==void 0&&s.append("include_stats",r.toString());const a=await this._get(i,s);let l;if(Array.isArray(a)){if(a.length===0)throw new Error(`Project[id=${e}, name=${n}] not found`);l=a[0]}else l=a;return l}async getProjectUrl({projectId:e,projectName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:n}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:n}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",e))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:n,nameContains:r,referenceDatasetId:i,referenceDatasetName:s,referenceFree:a,metadata:l}={}){const u=new URLSearchParams;if(e!==void 0)for(const c of e)u.append("id",c);if(n!==void 0&&u.append("name",n),r!==void 0&&u.append("name_contains",r),i!==void 0)u.append("reference_dataset",i);else if(s!==void 0){const c=await this.readDataset({datasetName:s});u.append("reference_dataset",c.id)}a!==void 0&&u.append("reference_free",a.toString()),l!==void 0&&u.append("metadata",JSON.stringify(l));for await(const c of this._getPaginated("/sessions",u))yield*c}async deleteProject({projectId:e,projectName:n}){let r;if(e===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:n})).id:r=e,lt(r);const i=await this.caller.call(De(),`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(i,`delete session ${r} (${n})`,!0)}async uploadCsv({csvFile:e,fileName:n,inputKeys:r,outputKeys:i,description:s,dataType:a,name:l}){const u=`${this.apiUrl}/datasets/upload`,c=new FormData;c.append("file",e,n),r.forEach(p=>{c.append("input_keys",p)}),i.forEach(p=>{c.append("output_keys",p)}),s&&c.append("description",s),a&&c.append("data_type",a),l&&c.append("name",l);const f=await this.caller.call(De(),u,{method:"POST",headers:this.headers,body:c,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(f,"upload CSV"),await f.json()}async createDataset(e,{description:n,dataType:r,inputsSchema:i,outputsSchema:s,metadata:a}={}){const l={name:e,description:n,extra:a?{metadata:a}:void 0};r&&(l.data_type=r),i&&(l.inputs_schema_definition=i),s&&(l.outputs_schema_definition=s);const u=await this.caller.call(De(),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(u,"create dataset"),await u.json()}async readDataset({datasetId:e,datasetName:n}){let r="/datasets";const i=new URLSearchParams({limit:"1"});if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)lt(e),r+=`/${e}`;else if(n!==void 0)i.append("name",n);else throw new Error("Must provide datasetName or datasetId");const s=await this._get(r,i);let a;if(Array.isArray(s)){if(s.length===0)throw new Error(`Dataset[id=${e}, name=${n}] not found`);a=s[0]}else a=s;return a}async hasDataset({datasetId:e,datasetName:n}){try{return await this.readDataset({datasetId:e,datasetName:n}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:n,fromVersion:r,toVersion:i}){let s=e;if(s===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:n})).id);const a=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return await this._get(`/datasets/${s}/versions/diff`,a)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:n}){const r="/datasets";if(e===void 0)if(n!==void 0)e=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(l=>JSON.parse(l))}async*listDatasets({limit:e=100,offset:n=0,datasetIds:r,datasetName:i,datasetNameContains:s,metadata:a}={}){const l="/datasets",u=new URLSearchParams({limit:e.toString(),offset:n.toString()});if(r!==void 0)for(const c of r)u.append("id",c);i!==void 0&&u.append("name",i),s!==void 0&&u.append("name_contains",s),a!==void 0&&u.append("metadata",JSON.stringify(a));for await(const c of this._getPaginated(l,u))yield*c}async updateDataset(e){const{datasetId:n,datasetName:r,...i}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const s=n??(await this.readDataset({datasetName:r})).id;lt(s);const a=await this.caller.call(De(),`${this.apiUrl}/datasets/${s}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(a,"update dataset"),await a.json()}async deleteDataset({datasetId:e,datasetName:n}){let r="/datasets",i=e;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(i=(await this.readDataset({datasetName:n})).id),i!==void 0)lt(i),r+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");const s=await this.caller.call(De(),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(s,`delete ${r}`),await s.json()}async indexDataset({datasetId:e,datasetName:n,tag:r}){let i=e;if(!i&&!n)throw new Error("Must provide either datasetName or datasetId");if(i&&n)throw new Error("Must provide either datasetName or datasetId, not both");i||(i=(await this.readDataset({datasetName:n})).id),lt(i);const s={tag:r},a=await this.caller.call(De(),`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(a,"index dataset"),await a.json()}async similarExamples(e,n,r,{filter:i}={}){const s={limit:r,inputs:e};i!==void 0&&(s.filter=i),lt(n);const a=await this.caller.call(De(),`${this.apiUrl}/datasets/${n}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(a,"fetch similar examples"),(await a.json()).examples}async createExample(e,n,{datasetId:r,datasetName:i,createdAt:s,exampleId:a,metadata:l,split:u,sourceRunId:c}){let f=r;if(f===void 0&&i===void 0)throw new Error("Must provide either datasetName or datasetId");if(f!==void 0&&i!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");f===void 0&&(f=(await this.readDataset({datasetName:i})).id);const d=s||new Date,p={dataset_id:f,inputs:e,outputs:n,created_at:d==null?void 0:d.toISOString(),id:a,metadata:l,split:u,source_run_id:c},m=await this.caller.call(De(),`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(m,"create example"),await m.json()}async createExamples(e){const{inputs:n,outputs:r,metadata:i,sourceRunIds:s,exampleIds:a,datasetId:l,datasetName:u}=e;let c=l;if(c===void 0&&u===void 0)throw new Error("Must provide either datasetName or datasetId");if(c!==void 0&&u!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");c===void 0&&(c=(await this.readDataset({datasetName:u})).id);const f=n.map((m,g)=>({dataset_id:c,inputs:m,outputs:r?r[g]:void 0,metadata:i?i[g]:void 0,split:e.splits?e.splits[g]:void 0,id:a?a[g]:void 0,source_run_id:s?s[g]:void 0})),d=await this.caller.call(De(),`${this.apiUrl}/examples/bulk`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(f),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(d,"create examples"),await d.json()}async createLLMExample(e,n,r){return this.createExample({input:e},{output:n},r)}async createChatExample(e,n,r){const i=e.map(a=>XT(a)?YT(a):a),s=XT(n)?YT(n):n;return this.createExample({input:i},{output:s},r)}async readExample(e){lt(e);const n=`/examples/${e}`;return await this._get(n)}async*listExamples({datasetId:e,datasetName:n,exampleIds:r,asOf:i,splits:s,inlineS3Urls:a,metadata:l,limit:u,offset:c,filter:f}={}){let d;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)d=e;else if(n!==void 0)d=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const p=new URLSearchParams({dataset:d}),m=i?typeof i=="string"?i:i==null?void 0:i.toISOString():void 0;m&&p.append("as_of",m);const g=a??!0;if(p.append("inline_s3_urls",g.toString()),r!==void 0)for(const w of r)p.append("id",w);if(s!==void 0)for(const w of s)p.append("splits",w);if(l!==void 0){const w=JSON.stringify(l);p.append("metadata",w)}u!==void 0&&p.append("limit",u.toString()),c!==void 0&&p.append("offset",c.toString()),f!==void 0&&p.append("filter",f);let b=0;for await(const w of this._getPaginated("/examples",p)){for(const y of w)yield y,b++;if(u!==void 0&&b>=u)break}}async deleteExample(e){lt(e);const n=`/examples/${e}`,r=await this.caller.call(De(),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(r,`delete ${n}`),await r.json()}async updateExample(e,n){lt(e);const r=await this.caller.call(De(),`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(r,"update example"),await r.json()}async updateExamples(e){const n=await this.caller.call(De(),`${this.apiUrl}/examples/bulk`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(n,"update examples"),await n.json()}async listDatasetSplits({datasetId:e,datasetName:n,asOf:r}){let i;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?i=(await this.readDataset({datasetName:n})).id:i=e,lt(i);const s=new URLSearchParams,a=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return a&&s.append("as_of",a),await this._get(`/datasets/${i}/splits`,s)}async updateDatasetSplits({datasetId:e,datasetName:n,splitName:r,exampleIds:i,remove:s=!1}){let a;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?a=(await this.readDataset({datasetName:n})).id:a=e,lt(a);const l={split_name:r,examples:i.map(c=>(lt(c),c)),remove:s},u=await this.caller.call(De(),`${this.apiUrl}/datasets/${a}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(u,"update dataset splits",!0)}async evaluateRun(e,n,{sourceInfo:r,loadChildRuns:i,referenceExample:s}={loadChildRuns:!1}){RI("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let a;if(typeof e=="string")a=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)a=e;else throw new Error(`Invalid run type: ${typeof e}`);a.reference_example_id!==null&&a.reference_example_id!==void 0&&(s=await this.readExample(a.reference_example_id));const l=await n.evaluateRun(a,s),[u,c]=await this._logEvaluationFeedback(l,a,r);return c[0]}async createFeedback(e,n,{score:r,value:i,correction:s,comment:a,sourceInfo:l,feedbackSourceType:u="api",sourceRunId:c,feedbackId:f,feedbackConfig:d,projectId:p,comparativeExperimentId:m}){var v;if(!e&&!p)throw new Error("One of runId or projectId must be provided");if(e&&p)throw new Error("Only one of runId or projectId can be provided");const g={type:u??"api",metadata:l??{}};c!==void 0&&(g==null?void 0:g.metadata)!==void 0&&!g.metadata.__run&&(g.metadata.__run={run_id:c}),(g==null?void 0:g.metadata)!==void 0&&((v=g.metadata.__run)==null?void 0:v.run_id)!==void 0&&lt(g.metadata.__run.run_id);const b={id:f??Sr(),run_id:e,key:n,score:r,value:i,correction:s,comment:a,feedback_source:g,comparative_experiment_id:m,feedbackConfig:d,session_id:p},w=`${this.apiUrl}/feedback`,y=await this.caller.call(De(),w,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(b),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(y,"create feedback",!0),b}async updateFeedback(e,{score:n,value:r,correction:i,comment:s}){const a={};n!=null&&(a.score=n),r!=null&&(a.value=r),i!=null&&(a.correction=i),s!=null&&(a.comment=s),lt(e);const l=await this.caller.call(De(),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(l,"update feedback",!0)}async readFeedback(e){lt(e);const n=`/feedback/${e}`;return await this._get(n)}async deleteFeedback(e){lt(e);const n=`/feedback/${e}`,r=await this.caller.call(De(),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(r,`delete ${n}`),await r.json()}async*listFeedback({runIds:e,feedbackKeys:n,feedbackSourceTypes:r}={}){const i=new URLSearchParams;if(e&&i.append("run",e.join(",")),n)for(const s of n)i.append("key",s);if(r)for(const s of r)i.append("source",s);for await(const s of this._getPaginated("/feedback",i))yield*s}async createPresignedFeedbackToken(e,n,{expiration:r,feedbackConfig:i}={}){const s={run_id:e,feedback_key:n,feedback_config:i};return r?typeof r=="string"?s.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(s.expires_in=r):s.expires_in={hours:3},await(await this.caller.call(De(),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:n,referenceDatasetId:r,createdAt:i,description:s,metadata:a,id:l}){var f;if(n.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:n[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const u={id:l,name:e,experiment_ids:n,reference_dataset_id:r,description:s,created_at:(f=i??new Date)==null?void 0:f.toISOString(),extra:{}};return a&&(u.extra.metadata=a),await(await this.caller.call(De(),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){lt(e);const n=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",n))yield*r}_selectEvalResults(e){let n;return"results"in e?n=e.results:n=[e],n}async _logEvaluationFeedback(e,n,r){const i=this._selectEvalResults(e),s=[];for(const a of i){let l=r||{};a.evaluatorInfo&&(l={...a.evaluatorInfo,...l});let u=null;a.targetRunId?u=a.targetRunId:n&&(u=n.id),s.push(await this.createFeedback(u,a.key,{score:a.score,value:a.value,comment:a.comment,correction:a.correction,sourceInfo:l,sourceRunId:a.sourceRunId,feedbackConfig:a.feedbackConfig,feedbackSourceType:"model"}))}return[i,s]}async logEvaluationFeedback(e,n,r){const[i]=await this._logEvaluationFeedback(e,n,r);return i}async*listAnnotationQueues(e={}){const{queueIds:n,name:r,nameContains:i,limit:s}=e,a=new URLSearchParams;n&&n.forEach((u,c)=>{lt(u,`queueIds[${c}]`),a.append("ids",u)}),r&&a.append("name",r),i&&a.append("name_contains",i),a.append("limit",(s!==void 0?Math.min(s,100):100).toString());let l=0;for await(const u of this._getPaginated("/annotation-queues",a))if(yield*u,l++,s!==void 0&&l>=s)break}async createAnnotationQueue(e){const{name:n,description:r,queueId:i}=e,s={name:n,description:r,id:i||Sr()},a=await this.caller.call(De(),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(s).filter(([u,c])=>c!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(a,"create annotation queue"),await a.json()}async readAnnotationQueue(e){const n=await this.listAnnotationQueues({queueIds:[e]}).next();if(n.done)throw new Error(`Annotation queue with ID ${e} not found`);return n.value}async updateAnnotationQueue(e,n){const{name:r,description:i}=n,s=await this.caller.call(De(),`${this.apiUrl}/annotation-queues/${lt(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:i}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(s,"update annotation queue")}async deleteAnnotationQueue(e){const n=await this.caller.call(De(),`${this.apiUrl}/annotation-queues/${lt(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(n,"delete annotation queue")}async addRunsToAnnotationQueue(e,n){const r=await this.caller.call(De(),`${this.apiUrl}/annotation-queues/${lt(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n.map((i,s)=>lt(i,`runIds[${s}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(r,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,n){const r=`/annotation-queues/${lt(e,"queueId")}/run`,i=await this.caller.call(De(),`${this.apiUrl}${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(i,"get run from annotation queue"),await i.json()}async _currentTenantIsOwner(e){const n=await this._getSettings();return e=="-"||n.tenant_handle===e}async _ownerConflictError(e,n){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(e){const n=await this.caller.call(De(),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await n.json();if(!n.ok){const i=typeof r.detail=="string"?r.detail:JSON.stringify(r.detail),s=new Error(`Error ${n.status}: ${n.statusText}
${i}`);throw s.statusCode=n.status,s}if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,n){const[r,i,s]=ea(e),a=await this.caller.call(De(),`${this.apiUrl}/likes/${r}/${i}`,{method:"POST",body:JSON.stringify({like:n}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(a,`${n?"like":"unlike"} prompt`),await a.json()}async _getPromptUrl(e){const[n,r,i]=ea(e);if(await this._currentTenantIsOwner(n)){const s=await this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${r}/${i.substring(0,8)}?organizationId=${s.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${s.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${n}/${r}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const n of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*n}async*listPrompts(e){const n=new URLSearchParams;n.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&n.append("is_public",e.isPublic.toString()),e!=null&&e.query&&n.append("query",e.query);for await(const r of this._getPaginated("/repos",n,i=>i.repos))yield*r}async getPrompt(e){const[n,r,i]=ea(e),s=await this.caller.call(De(),`${this.apiUrl}/repos/${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(s.status===404)return null;await st(s,"get prompt");const a=await s.json();return a.repo?a.repo:null}async createPrompt(e,n){const r=await this._getSettings();if(n!=null&&n.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[i,s,a]=ea(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("create a prompt",i);const l={repo_handle:s,...(n==null?void 0:n.description)&&{description:n.description},...(n==null?void 0:n.readme)&&{readme:n.readme},...(n==null?void 0:n.tags)&&{tags:n.tags},is_public:!!(n!=null&&n.isPublic)},u=await this.caller.call(De(),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(u,"create prompt");const{repo:c}=await u.json();return c}async createCommit(e,n,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[i,s,a]=ea(e),l=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${i}/${s}`):r==null?void 0:r.parentCommitHash,u={manifest:JSON.parse(JSON.stringify(n)),parent_commit:l},c=await this.caller.call(De(),`${this.apiUrl}/commits/${i}/${s}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(c,"create commit");const f=await c.json();return this._getPromptUrl(`${i}/${s}${f.commit_hash?`:${f.commit_hash}`:""}`)}async updatePrompt(e,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,i]=ea(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const s={};if((n==null?void 0:n.description)!==void 0&&(s.description=n.description),(n==null?void 0:n.readme)!==void 0&&(s.readme=n.readme),(n==null?void 0:n.tags)!==void 0&&(s.tags=n.tags),(n==null?void 0:n.isPublic)!==void 0&&(s.is_public=n.isPublic),(n==null?void 0:n.isArchived)!==void 0&&(s.is_archived=n.isArchived),Object.keys(s).length===0)throw new Error("No valid update options provided");const a=await this.caller.call(De(),`${this.apiUrl}/repos/${r}/${i}`,{method:"PATCH",body:JSON.stringify(s),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await st(a,"update prompt"),a.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,r,i]=ea(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return await(await this.caller.call(De(),`${this.apiUrl}/repos/${n}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,n){const[r,i,s]=ea(e),a=await this._getServerInfo(),l=RH(a.version,"0.5.23");let u=s;if(!l&&s==="latest"){const d=await this._getLatestCommitHash(`${r}/${i}`);if(d)u=d;else throw new Error("No commits found")}const c=await this.caller.call(De(),`${this.apiUrl}/commits/${r}/${i}/${u}${n!=null&&n.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await st(c,"pull prompt commit");const f=await c.json();return{owner:r,repo:i,commit_hash:f.commit_hash,manifest:f.manifest,examples:f.examples}}async _pullPrompt(e,n){const r=await this.pullPromptCommit(e,{includeModel:n==null?void 0:n.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,n){return await this.promptExists(e)?n&&Object.keys(n).some(i=>i!=="object")&&await this.updatePrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}):await this.createPrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}),n!=null&&n.object?await this.createCommit(e,n==null?void 0:n.object,{parentCommitHash:n==null?void 0:n.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,n={}){const{sourceApiUrl:r=this.apiUrl,datasetName:i}=n,[s,a]=this.parseTokenOrUrl(e,r),l=new Wf({apiUrl:s,apiKey:"placeholder"}),u=await l.readSharedDataset(a),c=i||u.name;try{if(await this.hasDataset({datasetId:c})){console.log(`Dataset ${c} already exists in your tenant. Skipping.`);return}}catch{}const f=await l.listSharedExamples(a),d=await this.createDataset(c,{description:u.description,dataType:u.data_type||"kv",inputsSchema:u.inputs_schema_definition??void 0,outputsSchema:u.outputs_schema_definition??void 0});try{await this.createExamples({inputs:f.map(p=>p.inputs),outputs:f.flatMap(p=>p.outputs?[p.outputs]:[]),datasetId:d.id})}catch(p){throw console.error(`An error occurred while creating dataset ${c}. You should delete it manually.`),p}}parseTokenOrUrl(e,n,r=2,i="dataset"){try{return lt(e),[n,e]}catch{}try{const a=new URL(e).pathname.split("/").filter(l=>l!=="");if(a.length>=r){const l=a[a.length-r];return[n,l]}else throw new Error(`Invalid public ${i} URL: ${e}`)}catch{throw new Error(`Invalid public ${i} URL or token: ${e}`)}}awaitPendingTraceBatches(){return Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()])}}const BI="0.2.8";var Xc={};let _s;const VH=()=>typeof window<"u"&&typeof window.document<"u",qH=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",HH=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),FI=()=>typeof Deno<"u",ZH=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!FI(),WH=()=>_s||(VH()?_s="browser":ZH()?_s="node":qH()?_s="webworker":HH()?_s="jsdom":FI()?_s="deno":_s="other",_s);let sv;function UI(){if(sv===void 0){const t=WH(),e=JH();sv={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:BI,...e}}return sv}function GH(){const t=KH()||{},e={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,i]of Object.entries(t))(r.startsWith("LANGCHAIN_")||r.startsWith("LANGSMITH_"))&&typeof i=="string"&&!n.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=i:e[r]=i);return e}function KH(){try{return typeof process<"u"&&Xc?Object.entries(Xc).reduce((t,[e,n])=>(t[e]=String(n),t),{}):void 0}catch{return}}function ma(t){try{return typeof process<"u"?Xc==null?void 0:Xc[t]:void 0}catch{return}}function so(t){return ma(`LANGSMITH_${t}`)||ma(`LANGCHAIN_${t}`)}let av;function JH(){if(av!==void 0)return av;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const n of t){const r=ma(n);r!==void 0&&(e[n]=r)}return av=e,e}const XH=t=>t!==void 0?t:!!["TRACING_V2","TRACING"].find(n=>so(n)==="true"),ov=Symbol.for("lc:context_variables");function YH(t){return t.replace(/[-:.]/g,"")}function QH(t,e,n=1){const r=n.toFixed(0).slice(0,3).padStart(3,"0");return YH(`${new Date(t).toISOString().slice(0,-1)}${r}Z`)+e}class Xp{constructor(e,n){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=n}static fromHeader(e){const n=e.split(",");let r={},i=[];for(const s of n){const[a,l]=s.split("="),u=decodeURIComponent(l);a==="langsmith-metadata"?r=JSON.parse(u):a==="langsmith-tags"&&(i=u.split(","))}return new Xp(r,i)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),e.join(",")}}class xr{constructor(e){var l;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),zI(e)){Object.assign(this,{...e});return}const n=xr.getDefaultConfig(),{metadata:r,...i}=e,s=i.client??xr.getSharedClient(),a={...r,...(l=i==null?void 0:i.extra)==null?void 0:l.metadata};if(i.extra={...i.extra,metadata:a},Object.assign(this,{...n,...i,client:s}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const u=QH(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+u:this.dotted_order=u}}static getDefaultConfig(){return{id:Sr(),run_type:"chain",project_name:ma("LANGCHAIN_PROJECT")??ma("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:ma("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:ma("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return xr.sharedClient||(xr.sharedClient=new Wf),xr.sharedClient}createChild(e){var u,c,f,d,p,m;const n=this.child_execution_order+1,r=new xr({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n});ov in this&&(r[ov]=this[ov]);const i=Symbol.for("lc:child_config"),s=((u=e.extra)==null?void 0:u[i])??this.extra[i];if(tZ(s)){const g={...s},b=eZ(g.callbacks)?(f=(c=g.callbacks).copy)==null?void 0:f.call(c):void 0;b&&(Object.assign(b,{_parentRunId:r.id}),(m=(p=(d=b.handlers)==null?void 0:d.find(VI))==null?void 0:p.updateFromRunTree)==null||m.call(p,r),g.callbacks=b),r.extra[i]=g}const a=new Set;let l=this;for(;l!=null&&!a.has(l.id);)a.add(l.id),l.child_execution_order=Math.max(l.child_execution_order,n),l=l.parent_run;return this.child_runs.push(r),r}async end(e,n,r=Date.now(),i){this.outputs=this.outputs??e,this.error=this.error??n,this.end_time=this.end_time??r,i&&Object.keys(i).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...i}}:{metadata:i})}_convertToCreate(e,n,r=!0){var u;const i=e.extra??{};if(i.runtime||(i.runtime={}),n)for(const[c,f]of Object.entries(n))i.runtime[c]||(i.runtime[c]=f);let s,a;return r?(a=(u=e.parent_run)==null?void 0:u.id,s=[]):(s=e.child_runs.map(c=>this._convertToCreate(c,n,r)),a=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:i,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:s,parent_run_id:a,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments}}async postRun(e=!0){try{const n=UI(),r=await this._convertToCreate(this,n,!0);if(await this.client.createRun(r),!e){RI("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const i of this.child_runs)await i.postRun(!1)}}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(){var e;try{const n={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(e=this.parent_run)==null?void 0:e.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments};await this.client.updateRun(this.id,n)}catch(n){console.error(`Error in patchRun for run ${this.id}`,n)}}toJSON(){return this._convertToCreate(this,void 0,!1)}static fromRunnableConfig(e,n){var c,f,d,p;const r=e==null?void 0:e.callbacks;let i,s,a,l=XH();if(r){const m=((c=r==null?void 0:r.getParentRunId)==null?void 0:c.call(r))??"",g=(f=r==null?void 0:r.handlers)==null?void 0:f.find(b=>(b==null?void 0:b.name)=="langchain_tracer");i=(d=g==null?void 0:g.getRun)==null?void 0:d.call(g,m),s=g==null?void 0:g.projectName,a=g==null?void 0:g.client,l=l||!!g}return i?new xr({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:a,tracingEnabled:l,project_name:s,tags:[...new Set(((i==null?void 0:i.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(p=i==null?void 0:i.extra)==null?void 0:p.metadata,...e==null?void 0:e.metadata}}}).createChild(n):new xr({...n,client:a,tracingEnabled:l,project_name:s})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,n){var c;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,i=r["langsmith-trace"];if(!i||typeof i!="string")return;const s=i.trim(),a=s.split(".").map(f=>{const[d,p]=f.split("Z");return{strTime:d,time:Date.parse(d+"Z"),uuid:p}}),l=a[0].uuid,u={...n,name:(n==null?void 0:n.name)??"parent",run_type:(n==null?void 0:n.run_type)??"chain",start_time:(n==null?void 0:n.start_time)??Date.now(),id:(c=a.at(-1))==null?void 0:c.uuid,trace_id:l,dotted_order:s};if(r.baggage&&typeof r.baggage=="string"){const f=Xp.fromHeader(r.baggage);u.metadata=f.metadata,u.tags=f.tags}return new xr(u)}toHeaders(e){var r;const n={"langsmith-trace":this.dotted_order,baggage:new Xp((r=this.extra)==null?void 0:r.metadata,this.tags).toHeader()};if(e)for(const[i,s]of Object.entries(n))e.set(i,s);return n}}Object.defineProperty(xr,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function zI(t){return t!==void 0&&typeof t.createChild=="function"&&typeof t.postRun=="function"}function VI(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function SP(t){return Array.isArray(t)&&t.some(e=>VI(e))}function eZ(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function tZ(t){var e;return t!==void 0&&typeof t.callbacks=="object"&&(SP((e=t.callbacks)==null?void 0:e.handlers)||SP(t.callbacks))}let nZ=class{getStore(){}run(e,n){return n()}};const lv=Symbol.for("ls:tracing_async_local_storage"),rZ=new nZ;let iZ=class{getInstance(){return globalThis[lv]??rZ}initializeGlobalInstance(e){globalThis[lv]===void 0&&(globalThis[lv]=e)}};const sZ=new iZ,aZ=()=>{const t=sZ.getInstance().getStore();if(!zI(t))throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function or the tracing is enabled."].join(`
`));return t};function m1(t){return typeof t=="function"&&"langsmith:traceable"in t}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const oZ=Object.prototype.hasOwnProperty;function bb(t,e){return oZ.call(t,e)}function wb(t){if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=""+r;return n}if(Object.keys)return Object.keys(t);let e=[];for(let n in t)bb(t,n)&&e.push(n);return e}function es(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function xb(t){let e=0;const n=t.length;let r;for(;e<n;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function Yo(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function lZ(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function Eb(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Eb(t[n]))return!0}else if(typeof t=="object"){const n=wb(t),r=n.length;for(var e=0;e<r;e++)if(Eb(t[n[e]]))return!0}}return!1}function TP(t,e){const n=[t];for(const r in e){const i=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof i<"u"&&n.push(`${r}: ${i}`)}return n.join(`
`)}class uZ extends Error{constructor(e,n,r,i,s){super(TP(e,{name:n,index:r,operation:i,tree:s})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.setPrototypeOf(this,new.target.prototype),this.message=TP(e,{name:n,index:r,operation:i,tree:s})}}const hn=uZ,Ol={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){let r=Sb(n,this.path);r&&(r=es(r));const i=Yc(n,{op:"remove",path:this.from}).removed;return Yc(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(t,e,n){const r=Sb(n,this.from);return Yc(n,{op:"add",path:this.path,value:es(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:Qp(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}};var cZ={add:function(t,e,n){return xb(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var r=t.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:Ol.move,copy:Ol.copy,test:Ol.test,_get:Ol._get};function Sb(t,e){if(e=="")return t;var n={op:"_get",path:e};return Yc(t,n),n.value}function Yc(t,e,n=!1,r=!0,i=!0,s=0){if(n&&(typeof n=="function"?n(e,0,t,e.path):Tb(e,0)),e.path===""){let a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=Sb(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=Qp(t,e.value),a.test===!1)throw new hn("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(n)throw new hn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return a}}else{r||(t=es(t));const l=(e.path||"").split("/");let u=t,c=1,f=l.length,d,p,m;for(typeof n=="function"?m=n:m=Tb;;){if(p=l[c],p&&p.indexOf("~")!=-1&&(p=lZ(p)),i&&(p=="__proto__"||p=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[p]===void 0?d=l.slice(0,c).join("/"):c==f-1&&(d=e.path),d!==void 0&&m(e,0,t,d)),c++,Array.isArray(u)){if(p==="-")p=u.length;else{if(n&&!xb(p))throw new hn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);xb(p)&&(p=~~p)}if(c>=f){if(n&&e.op==="add"&&p>u.length)throw new hn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);const g=cZ[e.op].call(e,u,p,t);if(g.test===!1)throw new hn("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return g}}else if(c>=f){const g=Ol[e.op].call(e,u,p,t);if(g.test===!1)throw new hn("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return g}if(u=u[p],n&&c<f&&(!u||typeof u!="object"))throw new hn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function Yp(t,e,n,r=!0,i=!0){if(n&&!Array.isArray(e))throw new hn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=es(t));const s=new Array(e.length);for(let a=0,l=e.length;a<l;a++)s[a]=Yc(t,e[a],n,!0,i,a),t=s[a].newDocument;return s.newDocument=t,s}function Tb(t,e,n,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new hn("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(Ol[t.op]){if(typeof t.path!="string")throw new hn("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new hn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new hn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new hn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&Eb(t.value))throw new hn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var i=t.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new hn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new hn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},l=fZ([a],n);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new hn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new hn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function fZ(t,e,n){try{if(!Array.isArray(t))throw new hn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Yp(es(e),es(t),n||!0);else{n=n||Tb;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(i){if(i instanceof hn)return i;throw i}}function Qp(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),r=Array.isArray(e),i,s,a;if(n&&r){if(s=t.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!Qp(t[i],e[i]))return!1;return!0}if(n!=r)return!1;var l=Object.keys(t);if(s=l.length,s!==Object.keys(e).length)return!1;for(i=s;i--!==0;)if(!e.hasOwnProperty(l[i]))return!1;for(i=s;i--!==0;)if(a=l[i],!Qp(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */function qI(t,e,n,r,i){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var s=wb(e),a=wb(t),l=!1,u=a.length-1;u>=0;u--){var c=a[u],f=t[c];if(bb(e,c)&&!(e[c]===void 0&&f!==void 0&&Array.isArray(e)===!1)){var d=e[c];typeof f=="object"&&f!=null&&typeof d=="object"&&d!=null&&Array.isArray(f)===Array.isArray(d)?qI(f,d,n,r+"/"+Yo(c),i):f!==d&&(i&&n.push({op:"test",path:r+"/"+Yo(c),value:es(f)}),n.push({op:"replace",path:r+"/"+Yo(c),value:es(d)}))}else Array.isArray(t)===Array.isArray(e)?(i&&n.push({op:"test",path:r+"/"+Yo(c),value:es(f)}),n.push({op:"remove",path:r+"/"+Yo(c)}),l=!0):(i&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}))}if(!(!l&&s.length==a.length))for(var u=0;u<s.length;u++){var c=s[u];!bb(t,c)&&e[c]!==void 0&&n.push({op:"add",path:r+"/"+Yo(c),value:es(e[c])})}}}function dZ(t,e,n=!1){var r=[];return qI(t,e,r,"",n),r}var uv={};const hZ=()=>typeof window<"u"&&typeof window.document<"u",pZ=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",mZ=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),HI=()=>typeof Deno<"u",gZ=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!HI(),yZ=()=>{let t;return hZ()?t="browser":gZ()?t="node":pZ()?t="webworker":mZ()?t="jsdom":HI()?t="deno":t="other",t};let cv;async function vZ(){return cv===void 0&&(cv={library:"langchain-js",runtime:yZ()}),cv}function Qn(t){try{return typeof process<"u"?uv==null?void 0:uv[t]:void 0}catch{return}}class _Z{}class md extends _Z{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,uI(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:Qn("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return Oo.prototype.toJSON.call(this)}toJSONNotImplemented(){return Oo.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class n extends md{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Sr()}),Object.assign(this,e)}}return new n}}function fv(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function bZ(t){return t.replace(/[-:.]/g,"")}function wZ(t,e,n){const r=n.toFixed(0).slice(0,3).padStart(3,"0");return bZ(`${new Date(t).toISOString().slice(0,-1)}${r}Z`)+e}function cc(t){return typeof t._addRunToRunMap=="function"}class gd extends md{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,n){e.child_runs.push(n)}_addRunToRunMap(e){const n=wZ(e.start_time,e.id,e.execution_order),r={...e};if(r.parent_run_id!==void 0){const i=this.runMap.get(r.parent_run_id);i&&(this._addChildRun(i,r),i.child_execution_order=Math.max(i.child_execution_order,r.child_execution_order),r.trace_id=i.trace_id,i.dotted_order!==void 0&&(r.dotted_order=[i.dotted_order,n].join(".")))}else r.trace_id=r.id,r.dotted_order=n;return this.runMap.set(r.id,r),r}async _endTrace(e){var r;const n=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((r=this.onRunUpdate)==null?void 0:r.call(this,e))}_getExecutionOrder(e){const n=e!==void 0&&this.runMap.get(e);return n?n.child_execution_order+1:1}_createRunForLLMStart(e,n,r,i,s,a,l,u){const c=this._getExecutionOrder(i),f=Date.now(),d=l?{...s,metadata:l}:s,p={id:r,name:u??e.id[e.id.length-1],parent_run_id:i,start_time:f,serialized:e,events:[{name:"start",time:new Date(f).toISOString()}],inputs:{prompts:n},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:d??{},tags:a||[]};return this._addRunToRunMap(p)}async handleLLMStart(e,n,r,i,s,a,l,u){var f,d;const c=this.runMap.get(r)??this._createRunForLLMStart(e,n,r,i,s,a,l,u);return await((f=this.onRunCreate)==null?void 0:f.call(this,c)),await((d=this.onLLMStart)==null?void 0:d.call(this,c)),c}_createRunForChatModelStart(e,n,r,i,s,a,l,u){const c=this._getExecutionOrder(i),f=Date.now(),d=l?{...s,metadata:l}:s,p={id:r,name:u??e.id[e.id.length-1],parent_run_id:i,start_time:f,serialized:e,events:[{name:"start",time:new Date(f).toISOString()}],inputs:{messages:n},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:d??{},tags:a||[]};return this._addRunToRunMap(p)}async handleChatModelStart(e,n,r,i,s,a,l,u){var f,d;const c=this.runMap.get(r)??this._createRunForChatModelStart(e,n,r,i,s,a,l,u);return await((f=this.onRunCreate)==null?void 0:f.call(this,c)),await((d=this.onLLMStart)==null?void 0:d.call(this,c)),c}async handleLLMEnd(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="llm")throw new Error("No LLM run to end.");return r.end_time=Date.now(),r.outputs=e,r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onLLMEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleLLMError(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="llm")throw new Error("No LLM run to end.");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onLLMError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}_createRunForChainStart(e,n,r,i,s,a,l,u){const c=this._getExecutionOrder(i),f=Date.now(),d={id:r,name:u??e.id[e.id.length-1],parent_run_id:i,start_time:f,serialized:e,events:[{name:"start",time:new Date(f).toISOString()}],inputs:n,execution_order:c,child_execution_order:c,run_type:l??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(d)}async handleChainStart(e,n,r,i,s,a,l,u){var f,d;const c=this.runMap.get(r)??this._createRunForChainStart(e,n,r,i,s,a,l,u);return await((f=this.onRunCreate)==null?void 0:f.call(this,c)),await((d=this.onChainStart)==null?void 0:d.call(this,c)),c}async handleChainEnd(e,n,r,i,s){var l;const a=this.runMap.get(n);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=fv(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=fv(s.inputs,"input")),await((l=this.onChainEnd)==null?void 0:l.call(this,a)),await this._endTrace(a),a}async handleChainError(e,n,r,i,s){var l;const a=this.runMap.get(n);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=fv(s.inputs,"input")),await((l=this.onChainError)==null?void 0:l.call(this,a)),await this._endTrace(a),a}_createRunForToolStart(e,n,r,i,s,a,l){const u=this._getExecutionOrder(i),c=Date.now(),f={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{input:n},execution_order:u,child_execution_order:u,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(f)}async handleToolStart(e,n,r,i,s,a,l){var c,f;const u=this.runMap.get(r)??this._createRunForToolStart(e,n,r,i,s,a,l);return await((c=this.onRunCreate)==null?void 0:c.call(this,u)),await((f=this.onToolStart)==null?void 0:f.call(this,u)),u}async handleToolEnd(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleToolError(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,n){var s;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const i=r;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((s=this.onAgentAction)==null?void 0:s.call(this,r))}async handleAgentEnd(e,n){var i;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,r)))}_createRunForRetrieverStart(e,n,r,i,s,a,l){const u=this._getExecutionOrder(i),c=Date.now(),f={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{query:n},execution_order:u,child_execution_order:u,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(f)}async handleRetrieverStart(e,n,r,i,s,a,l){var c,f;const u=this.runMap.get(r)??this._createRunForRetrieverStart(e,n,r,i,s,a,l);return await((c=this.onRunCreate)==null?void 0:c.call(this,u)),await((f=this.onRetrieverStart)==null?void 0:f.call(this,u)),u}async handleRetrieverEnd(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleText(e,n){var i;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,r)))}async handleLLMNewToken(e,n,r,i,s,a){var u;const l=this.runMap.get(r);if(!l||(l==null?void 0:l.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return l.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:n,chunk:a==null?void 0:a.chunk}}),await((u=this.onLLMNewToken)==null?void 0:u.call(this,l,e,{chunk:a==null?void 0:a.chunk})),l}}const ZI=Symbol.for("ls:tracing_async_local_storage"),xZ=t=>{globalThis[ZI]=t},Al=()=>globalThis[ZI];var g1={exports:{}};g1.exports;(function(t){const n=(s=0)=>a=>`\x1B[${38+s};5;${a}m`,r=(s=0)=>(a,l,u)=>`\x1B[${38+s};2;${a};${l};${u}m`;function i(){const s=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[l,u]of Object.entries(a)){for(const[c,f]of Object.entries(u))a[c]={open:`\x1B[${f[0]}m`,close:`\x1B[${f[1]}m`},u[c]=a[c],s.set(f[0],f[1]);Object.defineProperty(a,l,{value:u,enumerable:!1})}return Object.defineProperty(a,"codes",{value:s,enumerable:!1}),a.color.close="\x1B[39m",a.bgColor.close="\x1B[49m",a.color.ansi256=n(),a.color.ansi16m=r(),a.bgColor.ansi256=n(10),a.bgColor.ansi16m=r(10),Object.defineProperties(a,{rgbToAnsi256:{value:(l,u,c)=>l===u&&u===c?l<8?16:l>248?231:Math.round((l-8)/247*24)+232:16+36*Math.round(l/255*5)+6*Math.round(u/255*5)+Math.round(c/255*5),enumerable:!1},hexToRgb:{value:l=>{const u=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(l.toString(16));if(!u)return[0,0,0];let{colorString:c}=u.groups;c.length===3&&(c=c.split("").map(d=>d+d).join(""));const f=Number.parseInt(c,16);return[f>>16&255,f>>8&255,f&255]},enumerable:!1},hexToAnsi256:{value:l=>a.rgbToAnsi256(...a.hexToRgb(l)),enumerable:!1}}),a}Object.defineProperty(t,"exports",{enumerable:!0,get:i})})(g1);var EZ=g1.exports;const WI=Ro(EZ);function Xn(t,e){return`${t.open}${e}${t.close}`}function Ur(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function PP(t){return typeof t=="string"?t.trim():t==null?t:Ur(t,t.toString())}function ta(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:ur}=WI;class OP extends gd{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const n=[];let r=e;for(;r.parent_run_id;){const i=this.runMap.get(r.parent_run_id);if(i)n.push(i),r=i;else break}return n}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((i,s,a)=>{const l=`${i.execution_order}:${i.run_type}:${i.name}`;return s===a.length-1?Xn(WI.bold,l):l}).join(" > ");return Xn(ur.grey,r)}onChainStart(e){const n=this.getBreadcrumbs(e);console.log(`${Xn(ur.green,"[chain/start]")} [${n}] Entering Chain run with input: ${Ur(e.inputs,"[inputs]")}`)}onChainEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Xn(ur.cyan,"[chain/end]")} [${n}] [${ta(e)}] Exiting Chain run with output: ${Ur(e.outputs,"[outputs]")}`)}onChainError(e){const n=this.getBreadcrumbs(e);console.log(`${Xn(ur.red,"[chain/error]")} [${n}] [${ta(e)}] Chain run errored with error: ${Ur(e.error,"[error]")}`)}onLLMStart(e){const n=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${Xn(ur.green,"[llm/start]")} [${n}] Entering LLM run with input: ${Ur(r,"[inputs]")}`)}onLLMEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Xn(ur.cyan,"[llm/end]")} [${n}] [${ta(e)}] Exiting LLM run with output: ${Ur(e.outputs,"[response]")}`)}onLLMError(e){const n=this.getBreadcrumbs(e);console.log(`${Xn(ur.red,"[llm/error]")} [${n}] [${ta(e)}] LLM run errored with error: ${Ur(e.error,"[error]")}`)}onToolStart(e){const n=this.getBreadcrumbs(e);console.log(`${Xn(ur.green,"[tool/start]")} [${n}] Entering Tool run with input: "${PP(e.inputs.input)}"`)}onToolEnd(e){var r;const n=this.getBreadcrumbs(e);console.log(`${Xn(ur.cyan,"[tool/end]")} [${n}] [${ta(e)}] Exiting Tool run with output: "${PP((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const n=this.getBreadcrumbs(e);console.log(`${Xn(ur.red,"[tool/error]")} [${n}] [${ta(e)}] Tool run errored with error: ${Ur(e.error,"[error]")}`)}onRetrieverStart(e){const n=this.getBreadcrumbs(e);console.log(`${Xn(ur.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${Ur(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Xn(ur.cyan,"[retriever/end]")} [${n}] [${ta(e)}] Exiting Retriever run with output: ${Ur(e.outputs,"[outputs]")}`)}onRetrieverError(e){const n=this.getBreadcrumbs(e);console.log(`${Xn(ur.red,"[retriever/error]")} [${n}] [${ta(e)}] Retriever run errored with error: ${Ur(e.error,"[error]")}`)}onAgentAction(e){const n=e,r=this.getBreadcrumbs(e);console.log(`${Xn(ur.blue,"[agent/action]")} [${r}] Agent selected action: ${Ur(n.actions[n.actions.length-1],"[action]")}`)}}let dv;const SZ=()=>{if(dv===void 0){const t=Qn("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};dv=new Wf(t)}return dv};class Qc extends gd{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:n,projectName:r,client:i}=e;this.projectName=r??Qn("LANGCHAIN_PROJECT")??Qn("LANGCHAIN_SESSION"),this.exampleId=n,this.client=i??SZ();const s=Qc.getTraceableRunTree();s&&this.updateFromRunTree(s)}async _convertToCreate(e,n=void 0){return{...e,extra:{...e.extra,runtime:await vZ()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:n}}async persistRun(e){}async onRunCreate(e){const n=await this._convertToCreate(e,this.exampleId);await this.client.createRun(n)}async onRunUpdate(e){const n={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id};await this.client.updateRun(e.id,n)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let n=e;const r=new Set;for(;n.parent_run&&!(r.has(n.id)||(r.add(n.id),!n.parent_run));)n=n.parent_run;r.clear();const i=[n];for(;i.length>0;){const s=i.shift();!s||r.has(s.id)||(r.add(s.id),this.runMap.set(s.id,s),s.child_runs&&i.push(...s.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){const n={},r=[];for(const[i,s]of this.runMap){const a=new xr({...s,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});n[i]=a,r.push([i,s.dotted_order])}r.sort((i,s)=>!i[1]||!s[1]?0:i[1].localeCompare(s[1]));for(const[i]of r){const s=this.runMap.get(i),a=n[i];if(!(!s||!a)&&s.parent_run_id){const l=n[s.parent_run_id];l&&(l.child_runs.push(a),a.parent_run=l)}}return n[e]}static getTraceableRunTree(){try{return aZ()}catch{return}}}let ef;function TZ(){const t="default"in Is?Is.default:Is;return new t({autoStart:!0,concurrency:1})}function PZ(){return typeof ef>"u"&&(ef=TZ()),ef}async function xn(t,e){e===!0?Al()!==void 0?await Al().run(void 0,async()=>t()):await t():(ef=PZ(),ef.add(async()=>{Al()!==void 0?await Al().run(void 0,async()=>t()):await t()}))}const OZ=t=>t!==void 0?t:!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(n=>Qn(n)==="true");class AZ{setHandler(e){return this.setHandlers([e])}}class ag{constructor(e,n,r,i,s,a,l,u){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:u})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(n=>xn(async()=>{var r;try{await((r=n.handleText)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleText: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}async handleCustomEvent(e,n,r,i,s){await Promise.all(this.handlers.map(a=>xn(async()=>{var l;try{await((l=a.handleCustomEvent)==null?void 0:l.call(a,e,n,this.runId,this.tags,this.metadata))}catch(u){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${u}`),a.raiseError)throw u}},a.awaitHandlers)))}}class kZ extends ag{getChild(e){const n=new Ar(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(n=>xn(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetriever`),n.raiseError)throw i}},n.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(n=>xn(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetrieverError: ${i}`),n.raiseError)throw e}},n.awaitHandlers)))}}class AP extends ag{async handleLLMNewToken(e,n,r,i,s,a){await Promise.all(this.handlers.map(l=>xn(async()=>{var u;if(!l.ignoreLLM)try{await((u=l.handleLLMNewToken)==null?void 0:u.call(l,e,n??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a))}catch(c){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleLLMNewToken: ${c}`),l.raiseError)throw c}},l.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(n=>xn(async()=>{var r;if(!n.ignoreLLM)try{await((r=n.handleLLMError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleLLMError: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(n=>xn(async()=>{var r;if(!n.ignoreLLM)try{await((r=n.handleLLMEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleLLMEnd: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}}class CZ extends ag{getChild(e){const n=new Ar(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleChainError(e,n,r,i,s){await Promise.all(this.handlers.map(a=>xn(async()=>{var l;if(!a.ignoreChain)try{await((l=a.handleChainError)==null?void 0:l.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(u){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainError: ${u}`),a.raiseError)throw u}},a.awaitHandlers)))}async handleChainEnd(e,n,r,i,s){await Promise.all(this.handlers.map(a=>xn(async()=>{var l;if(!a.ignoreChain)try{await((l=a.handleChainEnd)==null?void 0:l.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(u){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainEnd: ${u}`),a.raiseError)throw u}},a.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(n=>xn(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentAction)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentAction: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(n=>xn(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentEnd: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}}class RZ extends ag{getChild(e){const n=new Ar(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleToolError(e){await Promise.all(this.handlers.map(n=>xn(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolError: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(n=>xn(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolEnd: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}}class Ar extends AZ{constructor(e,n){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(n==null?void 0:n.handlers)??this.handlers,this.inheritableHandlers=(n==null?void 0:n.inheritableHandlers)??this.inheritableHandlers,this.tags=(n==null?void 0:n.tags)??this.tags,this.inheritableTags=(n==null?void 0:n.inheritableTags)??this.inheritableTags,this.metadata=(n==null?void 0:n.metadata)??this.metadata,this.inheritableMetadata=(n==null?void 0:n.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,n,r=void 0,i=void 0,s=void 0,a=void 0,l=void 0,u=void 0){return Promise.all(n.map(async(c,f)=>{const d=f===0&&r?r:Sr();return await Promise.all(this.handlers.map(p=>{if(!p.ignoreLLM)return cc(p)&&p._createRunForLLMStart(e,[c],d,this._parentRunId,s,this.tags,this.metadata,u),xn(async()=>{var m;try{await((m=p.handleLLMStart)==null?void 0:m.call(p,e,[c],d,this._parentRunId,s,this.tags,this.metadata,u))}catch(g){if((p.raiseError?console.error:console.warn)(`Error in handler ${p.constructor.name}, handleLLMStart: ${g}`),p.raiseError)throw g}},p.awaitHandlers)})),new AP(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,n,r=void 0,i=void 0,s=void 0,a=void 0,l=void 0,u=void 0){return Promise.all(n.map(async(c,f)=>{const d=f===0&&r?r:Sr();return await Promise.all(this.handlers.map(p=>{if(!p.ignoreLLM)return cc(p)&&p._createRunForChatModelStart(e,[c],d,this._parentRunId,s,this.tags,this.metadata,u),xn(async()=>{var m,g;try{if(p.handleChatModelStart)await((m=p.handleChatModelStart)==null?void 0:m.call(p,e,[c],d,this._parentRunId,s,this.tags,this.metadata,u));else if(p.handleLLMStart){const b=dI(c);await((g=p.handleLLMStart)==null?void 0:g.call(p,e,[b],d,this._parentRunId,s,this.tags,this.metadata,u))}}catch(b){if((p.raiseError?console.error:console.warn)(`Error in handler ${p.constructor.name}, handleLLMStart: ${b}`),p.raiseError)throw b}},p.awaitHandlers)})),new AP(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,n,r=Sr(),i=void 0,s=void 0,a=void 0,l=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreChain)return cc(u)&&u._createRunForChainStart(e,n,r,this._parentRunId,this.tags,this.metadata,i,l),xn(async()=>{var c;try{await((c=u.handleChainStart)==null?void 0:c.call(u,e,n,r,this._parentRunId,this.tags,this.metadata,i,l))}catch(f){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleChainStart: ${f}`),u.raiseError)throw f}},u.awaitHandlers)})),new CZ(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,n,r=Sr(),i=void 0,s=void 0,a=void 0,l=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreAgent)return cc(u)&&u._createRunForToolStart(e,n,r,this._parentRunId,this.tags,this.metadata,l),xn(async()=>{var c;try{await((c=u.handleToolStart)==null?void 0:c.call(u,e,n,r,this._parentRunId,this.tags,this.metadata,l))}catch(f){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleToolStart: ${f}`),u.raiseError)throw f}},u.awaitHandlers)})),new RZ(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,n,r=Sr(),i=void 0,s=void 0,a=void 0,l=void 0){return await Promise.all(this.handlers.map(u=>{if(!u.ignoreRetriever)return cc(u)&&u._createRunForRetrieverStart(e,n,r,this._parentRunId,this.tags,this.metadata,l),xn(async()=>{var c;try{await((c=u.handleRetrieverStart)==null?void 0:c.call(u,e,n,r,this._parentRunId,this.tags,this.metadata,l))}catch(f){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleRetrieverStart: ${f}`),u.raiseError)throw f}},u.awaitHandlers)})),new kZ(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,n,r,i,s){await Promise.all(this.handlers.map(a=>xn(async()=>{var l;if(!a.ignoreCustomEvent)try{await((l=a.handleCustomEvent)==null?void 0:l.call(a,e,n,r,this.tags,this.metadata))}catch(u){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${u}`),a.raiseError)throw u}},a.awaitHandlers)))}addHandler(e,n=!0){this.handlers.push(e),n&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(n=>n!==e),this.inheritableHandlers=this.inheritableHandlers.filter(n=>n!==e)}setHandlers(e,n=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,n)}addTags(e,n=!0){this.removeTags(e),this.tags.push(...e),n&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(n=>!e.includes(n)),this.inheritableTags=this.inheritableTags.filter(n=>!e.includes(n))}addMetadata(e,n=!0){this.metadata={...this.metadata,...e},n&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const n of Object.keys(e))delete this.metadata[n],delete this.inheritableMetadata[n]}copy(e=[],n=!0){const r=new Ar(this._parentRunId);for(const i of this.handlers){const s=this.inheritableHandlers.includes(i);r.addHandler(i,s)}for(const i of this.tags){const s=this.inheritableTags.includes(i);r.addTags([i],s)}for(const i of Object.keys(this.metadata)){const s=Object.keys(this.inheritableMetadata).includes(i);r.addMetadata({[i]:this.metadata[i]},s)}for(const i of e)r.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===i.name)||r.addHandler(i,n);return r}static fromHandlers(e){class n extends md{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Sr()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new n),r}static configure(e,n,r,i,s,a,l){return this._configureSync(e,n,r,i,s,a,l)}static _configureSync(e,n,r,i,s,a,l){var p,m;let u;(e||n)&&(Array.isArray(e)||!e?(u=new Ar,u.setHandlers((e==null?void 0:e.map(em))??[],!0)):u=e,u=u.copy(Array.isArray(n)?n.map(em):n==null?void 0:n.handlers,!1));const c=Qn("LANGCHAIN_VERBOSE")==="true"||(l==null?void 0:l.verbose),f=((p=Qc.getTraceableRunTree())==null?void 0:p.tracingEnabled)||OZ(),d=f||(Qn("LANGCHAIN_TRACING")??!1);if(c||d){if(u||(u=new Ar),c&&!u.handlers.some(g=>g.name===OP.prototype.name)){const g=new OP;u.addHandler(g,!0)}if(d&&!u.handlers.some(g=>g.name==="langchain_tracer")&&f){const g=new Qc;u.addHandler(g,!0),u._parentRunId=((m=Qc.getTraceableRunTree())==null?void 0:m.id)??u._parentRunId}}return(r||i)&&u&&(u.addTags(r??[]),u.addTags(i??[],!1)),(s||a)&&u&&(u.addMetadata(s??{}),u.addMetadata(a??{},!1)),u}}function em(t){return"name"in t?t:md.fromMethods(t)}class LZ{getStore(){}run(e,n){return n()}enterWith(e){}}const NZ=new LZ,kP=Symbol.for("lc:child_config"),hv=Symbol.for("lc:context_variables");class IZ{getInstance(){return Al()??NZ}getRunnableConfig(){var n,r;return(r=(n=this.getInstance().getStore())==null?void 0:n.extra)==null?void 0:r[kP]}runWithConfig(e,n,r){var f;const i=Ar._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),s=this.getInstance(),a=s.getStore(),l=i==null?void 0:i.getParentRunId(),u=(f=i==null?void 0:i.handlers)==null?void 0:f.find(d=>(d==null?void 0:d.name)==="langchain_tracer");let c;return u&&l?c=u.convertToRunTree(l):r||(c=new xr({name:"<runnable_lambda>",tracingEnabled:!1})),c&&(c.extra={...c.extra,[kP]:e}),a!==void 0&&a[hv]!==void 0&&(c[hv]=a[hv]),s.run(c,n)}initializeGlobalInstance(e){Al()===void 0&&xZ(e)}}const Co=new IZ;async function Ia(t,e){if(e===void 0)return t;let n;return Promise.race([t.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,i)=>{n=()=>{i(new Error("Aborted"))},e.addEventListener("abort",n),e.aborted&&i(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",n))}class Rr extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const n=e.getReader();return new Rr({start(r){return i();function i(){return n.read().then(({done:s,value:a})=>{if(s){r.close();return}return r.enqueue(a),i()})}},cancel(){n.releaseLock()}})}static fromAsyncGenerator(e){return new Rr({async pull(n){const{value:r,done:i}=await e.next();i&&n.close(),n.enqueue(r)},async cancel(n){await e.return(n)}})}}function GI(t,e=2){const n=Array.from({length:e},()=>[]);return n.map(async function*(i){for(;;)if(i.length===0){const s=await t.next();for(const a of n)a.push(s)}else{if(i[0].done)return;yield i.shift().value}})}function Ai(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){const n={...t};for(const[r,i]of Object.entries(e))r in n&&!Array.isArray(n[r])?n[r]=Ai(n[r],i):n[r]=i;return n}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}class Su{constructor(e){var n;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((n=this.config)==null?void 0:n.signal),this.setup=new Promise((r,i)=>{Co.runWithConfig(e.config,async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,i):this.firstResult.then(s=>r(void 0),i)},!0)})}async next(...e){var n;return(n=this.signal)==null||n.throwIfAborted(),this.firstResultUsed?Co.runWithConfig(this.config,this.signal?async()=>Ia(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function jZ(t,e,n,r,...i){const s=new Su({generator:e,startSetup:n,signal:r}),a=await s.setup;return{output:t(s,a,...i),setup:a}}class oa{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const n=this.ops.concat(e.ops),r=Yp({},n);return new Gf({ops:n,state:r[r.length-1].newDocument})}}class Gf extends oa{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const n=this.ops.concat(e.ops),r=Yp(this.state,e.ops);return new Gf({ops:n,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const n=Yp({},e.ops);return new Gf({ops:e.ops,state:n[n.length-1].newDocument})}}const KI=t=>t.name==="log_stream_tracer";async function CP(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=t;if(["retriever","llm","prompt"].includes(t.run_type))return n;if(!(Object.keys(n).length===1&&(n==null?void 0:n.input)===""))return n.input}async function RP(t,e){const{outputs:n}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?n:n!==void 0&&Object.keys(n).length===1&&(n==null?void 0:n.output)!==void 0?n.output:n}function MZ(t){return t!==void 0&&t.message!==void 0}class LP extends gd{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Rr.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||n.find(i=>{var s;return(s=this.includeTags)==null?void 0:s.includes(i)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&n.every(i=>{var s;return!((s=this.excludeTags)!=null&&s.includes(i))})),r}async*tapOutputIterable(e,n){for await(const r of n){if(e!==this.rootId){const i=this.keyMapByRunId[e];i&&await this.writer.write(new oa({ops:[{op:"add",path:`/logs/${i}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var i;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new oa({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const n=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=n===1?e.name:`${e.name}:${n}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await CP(e,this._schemaFormat)),await this.writer.write(new oa({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const n=this.keyMapByRunId[e.id];if(n===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${n}/inputs`,value:await CP(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${n}/final_output`,value:await RP(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(e.end_time).toISOString()});const i=new oa({ops:r});await this.writer.write(i)}finally{if(e.id===this.rootId){const n=new oa({ops:[{op:"replace",path:"/final_output",value:await RP(e,this._schemaFormat)}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,n,r){const i=this.keyMapByRunId[e.id];if(i===void 0)return;const s=e.inputs.messages!==void 0;let a;s?MZ(r==null?void 0:r.chunk)?a=r==null?void 0:r.chunk:a=new Mo({id:`run-${e.id}`,content:n}):a=n;const l=new oa({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:n},{op:"add",path:`/logs/${i}/streamed_output/-`,value:a}]});await this.writer.write(l)}}const NP="__run";class su{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new su({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class au extends su{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new au({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}function _h({name:t,serialized:e}){return t!==void 0?t:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const JI=t=>t.name==="event_stream_tracer";class DZ extends gd{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Rr.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||n.find(i=>{var s;return(s=this.includeTags)==null?void 0:s.includes(i)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&n.every(i=>{var s;return!((s=this.excludeTags)!=null&&s.includes(i))})),r}async*tapOutputIterable(e,n){const r=await n.next();if(r.done)return;const i=this.runInfoMap.get(e);if(i===void 0){yield r.value;return}function s(l,u){return l==="llm"&&typeof u=="string"?new su({text:u}):u}let a=this.tappedPromises.get(e);if(a===void 0){let l;a=new Promise(u=>{l=u}),this.tappedPromises.set(e,a);try{const u={event:`on_${i.runType}_stream`,run_id:e,name:i.name,tags:i.tags,metadata:i.metadata,data:{}};await this.send({...u,data:{chunk:s(i.runType,r.value)}},i),yield r.value;for await(const c of n)i.runType!=="tool"&&i.runType!=="retriever"&&await this.send({...u,data:{chunk:s(i.runType,c)}},i),yield c}finally{l()}}else{yield r.value;for await(const l of n)yield l}}async send(e,n){this._includeRun(n)&&await this.writer.write(e)}async sendEndEvent(e,n){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,n)}):await this.send(e,n)}async onLLMStart(e){var a,l;const n=_h(e),r=e.inputs.messages!==void 0?"chat_model":"llm",i={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:n,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,i);const s=`on_${r}_start`;await this.send({event:s,data:{input:e.inputs},name:n,tags:e.tags??[],run_id:e.id,metadata:((l=e.extra)==null?void 0:l.metadata)??{}},i)}async onLLMNewToken(e,n,r){const i=this.runInfoMap.get(e.id);let s,a;if(i===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(i.runType==="chat_model")a="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?s=new Mo({content:n,id:`run-${e.id}`}):s=r.chunk.message;else if(i.runType==="llm")a="on_llm_stream",(r==null?void 0:r.chunk)===void 0?s=new su({text:n}):s=r.chunk;else throw new Error(`Unexpected run type ${i.runType}`);await this.send({event:a,data:{chunk:s},run_id:e.id,name:i.name,tags:i.tags,metadata:i.metadata},i)}}async onLLMEnd(e){var a,l,u;const n=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(n===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const i=(a=e.outputs)==null?void 0:a.generations;let s;if(n.runType==="chat_model"){for(const c of i??[]){if(s!==void 0)break;s=(l=c[0])==null?void 0:l.message}r="on_chat_model_end"}else if(n.runType==="llm")s={generations:i==null?void 0:i.map(c=>c.map(f=>({text:f.text,generationInfo:f.generationInfo}))),llmOutput:((u=e.outputs)==null?void 0:u.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:r,data:{output:s,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(e){var a,l;const n=_h(e),r=e.run_type??"chain",i={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:n,runType:e.run_type};let s={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(s={},i.inputs={}):e.inputs.input!==void 0?(s.input=e.inputs.input,i.inputs=e.inputs.input):(s.input=e.inputs,i.inputs=e.inputs),this.runInfoMap.set(e.id,i),await this.send({event:`on_${r}_start`,data:s,name:n,tags:e.tags??[],run_id:e.id,metadata:((l=e.extra)==null?void 0:l.metadata)??{}},i)}async onChainEnd(e){var l;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,i=e.inputs??n.inputs??{},a={output:((l=e.outputs)==null?void 0:l.output)??e.outputs,input:i};i.input&&Object.keys(i).length===1&&(a.input=i.input,n.inputs=i.input),await this.sendEndEvent({event:r,data:a,run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata??{}},n)}async onToolStart(e){var i,s;const n=_h(e),r={tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},name:n,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:n,run_id:e.id,tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{}},r)}async onToolEnd(e){var i;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((i=e.outputs)==null?void 0:i.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onRetrieverStart(e){var s,a;const n=_h(e),i={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:n,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,i),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:n,tags:e.tags??[],run_id:e.id,metadata:((a=e.extra)==null?void 0:a.metadata)??{}},i)}async onRetrieverEnd(e){var r;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async handleCustomEvent(e,n,r){const i=this.runInfoMap.get(r);if(i===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:i.tags,metadata:i.metadata,data:n},i)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const pv=25;async function ki(t){return Ar._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function IP(...t){const e={};for(const n of t.filter(r=>!!r))for(const r of Object.keys(n))if(r==="metadata")e[r]={...e[r],...n[r]};else if(r==="tags"){const i=e[r]??[];e[r]=[...new Set(i.concat(n[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...n[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=n.timeout:n.timeout!==void 0&&(e.timeout=Math.min(e.timeout,n.timeout));else if(r==="signal")e.signal===void 0?e.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,n.signal]):e.signal=n.signal);else if(r==="callbacks"){const i=e.callbacks,s=n.callbacks;if(Array.isArray(s))if(!i)e.callbacks=s;else if(Array.isArray(i))e.callbacks=i.concat(s);else{const a=i.copy();for(const l of s)a.addHandler(em(l),!0);e.callbacks=a}else if(s)if(!i)e.callbacks=s;else if(Array.isArray(i)){const a=s.copy();for(const l of i)a.addHandler(em(l),!0);e.callbacks=a}else e.callbacks=new Ar(s._parentRunId,{handlers:i.handlers.concat(s.handlers),inheritableHandlers:i.inheritableHandlers.concat(s.inheritableHandlers),tags:Array.from(new Set(i.tags.concat(s.tags))),inheritableTags:Array.from(new Set(i.inheritableTags.concat(s.inheritableTags))),metadata:{...i.metadata,...s.metadata}})}else{const i=r;e[i]=n[i]??e[i]}return e}const $Z=new Set(["string","number","boolean"]);function Et(t){var r;const e=Co.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:i,runName:s,...a}=e;n=Object.entries(a).reduce((l,[u,c])=>(c!==void 0&&(l[u]=c),l),n)}if(t&&(n=Object.entries(t).reduce((i,[s,a])=>(a!==void 0&&(i[s]=a),i),n)),n!=null&&n.configurable)for(const i of Object.keys(n.configurable))$Z.has(typeof n.configurable[i])&&!((r=n.metadata)!=null&&r[i])&&(n.metadata||(n.metadata={}),n.metadata[i]=n.configurable[i]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const i=AbortSignal.timeout(n.timeout);n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,i])):n.signal=i,delete n.timeout}return n}function qn(t={},{callbacks:e,maxConcurrency:n,recursionLimit:r,runName:i,configurable:s,runId:a}={}){const l=Et(t);return e!==void 0&&(delete l.runName,l.callbacks=e),r!==void 0&&(l.recursionLimit=r),n!==void 0&&(l.maxConcurrency=n),i!==void 0&&(l.runName=i),s!==void 0&&(l.configurable={...l.configurable,...s}),a!==void 0&&delete l.runId,l}const BZ=[400,401,402,403,404,405,406,407,409],FZ=t=>{var n,r;if(t.message.startsWith("Cancel")||t.message.startsWith("AbortError")||t.name==="AbortError"||(t==null?void 0:t.code)==="ECONNABORTED")throw t;const e=((n=t==null?void 0:t.response)==null?void 0:n.status)??(t==null?void 0:t.status);if(e&&BZ.includes(+e))throw t;if(((r=t==null?void 0:t.error)==null?void 0:r.code)==="insufficient_quota"){const i=new Error(t==null?void 0:t.message);throw i.name="InsufficientQuotaError",i}};class y1{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??FZ;const n="default"in Is?Is.default:Is;this.queue=new n({concurrency:this.maxConcurrency})}call(e,...n){return this.queue.add(()=>Kp(()=>e(...n).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((i,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>fetch(...e).then(n=>n.ok?n:Promise.reject(n)))}}class XI extends gd{constructor({config:e,onStart:n,onEnd:r,onError:i}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=n,this.argOnEnd=r,this.argOnError=i}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function v1(t){return t?t.lc_runnable:!1}class UZ{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,n){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const i=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(n)),this.includeTags!==void 0&&(r=r||i.some(s=>{var a;return(a=this.includeTags)==null?void 0:a.includes(s)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(n)),this.excludeTags!==void 0&&(r=r&&i.every(s=>{var a;return!((a=this.excludeTags)!=null&&a.includes(s))})),r}}const zZ=Symbol("Let zodToJsonSchema decide on which parser to use"),jP={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},VZ=t=>typeof t=="string"?{...jP,name:t}:{...jP,...t},qZ=t=>{const e=VZ(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function YI(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function St(t,e,n,r,i){t[e]=n,YI(t,e,r,i)}function HZ(){return{}}function ZZ(t,e){var r,i,s;const n={type:"array"};return(r=t.type)!=null&&r._def&&((s=(i=t.type)==null?void 0:i._def)==null?void 0:s.typeName)!==le.ZodAny&&(n.items=vt(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&St(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&St(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(St(n,"minItems",t.exactLength.value,t.exactLength.message,e),St(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function WZ(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?St(n,"minimum",r.value,r.message,e):St(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),St(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?St(n,"maximum",r.value,r.message,e):St(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),St(n,"maximum",r.value,r.message,e));break;case"multipleOf":St(n,"multipleOf",r.value,r.message,e);break}return n}function GZ(){return{type:"boolean"}}function QI(t,e){return vt(t.type._def,e)}const KZ=(t,e)=>vt(t.innerType._def,e);function ej(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,s)=>ej(t,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return JZ(t,e)}}const JZ=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":St(n,"minimum",r.value,r.message,e);break;case"max":St(n,"maximum",r.value,r.message,e);break}return n};function XZ(t,e){return{...vt(t.innerType._def,e),default:t.defaultValue()}}function YZ(t,e){return e.effectStrategy==="input"?vt(t.schema._def,e):{}}function QZ(t){return{type:"string",enum:t.values}}const e7=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function t7(t,e){const n=[vt(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),vt(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(s=>{if(e7(s))i.push(...s.allOf),s.unevaluatedProperties===void 0&&(r=void 0);else{let a=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:l,...u}=s;a=u}else r=void 0;i.push(a)}}),i.length?{allOf:i,...r}:void 0}function n7(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let mv;const Ja={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(mv===void 0&&(mv=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),mv),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function tj(t,e){const n={type:"string"};function r(i){return e.patternStrategy==="escape"?r7(i):i}if(t.checks)for(const i of t.checks)switch(i.kind){case"min":St(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,i.value):i.value,i.message,e);break;case"max":St(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,i.value):i.value,i.message,e);break;case"email":switch(e.emailStrategy){case"format:email":li(n,"email",i.message,e);break;case"format:idn-email":li(n,"idn-email",i.message,e);break;case"pattern:zod":ui(n,Ja.email,i.message,e);break}break;case"url":li(n,"uri",i.message,e);break;case"uuid":li(n,"uuid",i.message,e);break;case"regex":ui(n,i.regex,i.message,e);break;case"cuid":ui(n,Ja.cuid,i.message,e);break;case"cuid2":ui(n,Ja.cuid2,i.message,e);break;case"startsWith":ui(n,RegExp(`^${r(i.value)}`),i.message,e);break;case"endsWith":ui(n,RegExp(`${r(i.value)}$`),i.message,e);break;case"datetime":li(n,"date-time",i.message,e);break;case"date":li(n,"date",i.message,e);break;case"time":li(n,"time",i.message,e);break;case"duration":li(n,"duration",i.message,e);break;case"length":St(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,i.value):i.value,i.message,e),St(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,i.value):i.value,i.message,e);break;case"includes":{ui(n,RegExp(r(i.value)),i.message,e);break}case"ip":{i.version!=="v6"&&li(n,"ipv4",i.message,e),i.version!=="v4"&&li(n,"ipv6",i.message,e);break}case"emoji":ui(n,Ja.emoji,i.message,e);break;case"ulid":{ui(n,Ja.ulid,i.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{li(n,"binary",i.message,e);break}case"contentEncoding:base64":{St(n,"contentEncoding","base64",i.message,e);break}case"pattern:zod":{ui(n,Ja.base64,i.message,e);break}}break}case"nanoid":ui(n,Ja.nanoid,i.message,e)}return n}const r7=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),li=(t,e,n,r)=>{var i;t.format||(i=t.anyOf)!=null&&i.some(s=>s.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):St(t,"format",e,n,r)},ui=(t,e,n,r)=>{var i;t.pattern||(i=t.allOf)!=null&&i.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:MP(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):St(t,"pattern",MP(e,r),n,r)},MP=(t,e)=>{var c;const n=typeof t=="function"?t():t;if(!e.applyRegexFlags||!n.flags)return n.source;const r={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},i=r.i?n.source.toLowerCase():n.source;let s="",a=!1,l=!1,u=!1;for(let f=0;f<i.length;f++){if(a){s+=i[f],a=!1;continue}if(r.i){if(l){if(i[f].match(/[a-z]/)){u?(s+=i[f],s+=`${i[f-2]}-${i[f]}`.toUpperCase(),u=!1):i[f+1]==="-"&&((c=i[f+2])!=null&&c.match(/[a-z]/))?(s+=i[f],u=!0):s+=`${i[f]}${i[f].toUpperCase()}`;continue}}else if(i[f].match(/[a-z]/)){s+=`[${i[f]}${i[f].toUpperCase()}]`;continue}}if(r.m){if(i[f]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(i[f]==="$"){s+=`($|(?=[\r
]))`;continue}}if(r.s&&i[f]==="."){s+=l?`${i[f]}\r
`:`[${i[f]}\r
]`;continue}s+=i[f],i[f]==="\\"?a=!0:l&&i[f]==="]"?l=!1:!l&&i[f]==="["&&(l=!0)}try{const f=new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return s};function nj(t,e){var r,i,s,a,l,u;if(e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===le.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((c,f)=>({...c,[f]:vt(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",f]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:vt(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return n;if(((i=t.keyType)==null?void 0:i._def.typeName)===le.ZodString&&((s=t.keyType._def.checks)!=null&&s.length)){const{type:c,...f}=tj(t.keyType._def,e);return{...n,propertyNames:f}}else{if(((a=t.keyType)==null?void 0:a._def.typeName)===le.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(((l=t.keyType)==null?void 0:l._def.typeName)===le.ZodBranded&&t.keyType._def.type._def.typeName===le.ZodString&&((u=t.keyType._def.type._def.checks)!=null&&u.length)){const{type:c,...f}=QI(t.keyType._def,e);return{...n,propertyNames:f}}}return n}function i7(t,e){if(e.mapStrategy==="record")return nj(t,e);const n=vt(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=vt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function s7(t){const e=t.values,r=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),i=Array.from(new Set(r.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function a7(){return{not:{}}}function o7(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const tm={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function l7(t,e){if(e.target==="openApi3")return DP(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in tm&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((i,s)=>{const a=tm[s._def.typeName];return a&&!i.includes(a)?[...i,a]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((i,s)=>{const a=typeof s._def.value;switch(a){case"string":case"number":case"boolean":return[...i,a];case"bigint":return[...i,"integer"];case"object":if(s._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===n.length){const i=r.filter((s,a,l)=>l.indexOf(s)===a);return{type:i.length>1?i:i[0],enum:n.reduce((s,a)=>s.includes(a._def.value)?s:[...s,a._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(s=>!r.includes(s))],[])};return DP(t,e)}const DP=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,i)=>vt(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function u7(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:tm[t.innerType._def.typeName],nullable:!0}:{type:[tm[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=vt(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=vt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function c7(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",YI(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?St(n,"minimum",r.value,r.message,e):St(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),St(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?St(n,"maximum",r.value,r.message,e):St(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),St(n,"maximum",r.value,r.message,e));break;case"multipleOf":St(n,"multipleOf",r.value,r.message,e);break}return n}function f7(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":vt(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":vt(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function d7(t,e){const n={type:"object",...Object.entries(t.shape()).reduce((r,[i,s])=>{if(s===void 0||s._def===void 0)return r;const a=vt(s._def,{...e,currentPath:[...e.currentPath,"properties",i],propertyPath:[...e.currentPath,"properties",i]});return a===void 0?r:{properties:{...r.properties,[i]:a},required:s.isOptional()?r.required:[...r.required,i]}},{properties:{},required:[]}),additionalProperties:f7(t,e)};return n.required.length||delete n.required,n}const h7=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return vt(t.innerType._def,e);const n=vt(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},p7=(t,e)=>{if(e.pipeStrategy==="input")return vt(t.in._def,e);if(e.pipeStrategy==="output")return vt(t.out._def,e);const n=vt(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=vt(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(i=>i!==void 0)}};function m7(t,e){return vt(t.type._def,e)}function g7(t,e){const r={type:"array",uniqueItems:!0,items:vt(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&St(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&St(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function y7(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>vt(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:vt(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>vt(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function v7(){return{not:{}}}function _7(){return{}}const b7=(t,e)=>vt(t.innerType._def,e);function vt(t,e,n=!1){var a;const r=e.seen.get(t);if(e.override){const l=(a=e.override)==null?void 0:a.call(e,t,e,r,n);if(l!==zZ)return l}if(r&&!n){const l=w7(r,e);if(l!==void 0)return l}const i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);const s=E7(t,t.typeName,e);return s&&S7(t,e,s),i.jsonSchema=s,s}const w7=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:x7(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},x7=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")},E7=(t,e,n)=>{switch(e){case le.ZodString:return tj(t,n);case le.ZodNumber:return c7(t,n);case le.ZodObject:return d7(t,n);case le.ZodBigInt:return WZ(t,n);case le.ZodBoolean:return GZ();case le.ZodDate:return ej(t,n);case le.ZodUndefined:return v7();case le.ZodNull:return o7(n);case le.ZodArray:return ZZ(t,n);case le.ZodUnion:case le.ZodDiscriminatedUnion:return l7(t,n);case le.ZodIntersection:return t7(t,n);case le.ZodTuple:return y7(t,n);case le.ZodRecord:return nj(t,n);case le.ZodLiteral:return n7(t,n);case le.ZodEnum:return QZ(t);case le.ZodNativeEnum:return s7(t);case le.ZodNullable:return u7(t,n);case le.ZodOptional:return h7(t,n);case le.ZodMap:return i7(t,n);case le.ZodSet:return g7(t,n);case le.ZodLazy:return vt(t.getter()._def,n);case le.ZodPromise:return m7(t,n);case le.ZodNaN:case le.ZodNever:return a7();case le.ZodEffects:return YZ(t,n);case le.ZodAny:return HZ();case le.ZodUnknown:return _7();case le.ZodDefault:return XZ(t,n);case le.ZodBranded:return QI(t,n);case le.ZodReadonly:return b7(t,n);case le.ZodCatch:return KZ(t,n);case le.ZodPipeline:return p7(t,n);case le.ZodFunction:case le.ZodVoid:case le.ZodSymbol:return;default:return(r=>{})()}},S7=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),yd=(t,e)=>{const n=qZ(e),r=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((u,[c,f])=>({...u,[c]:vt(f._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,i=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,s=vt(t._def,i===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1)??{},a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(s.title=a);const l=i===void 0?r?{...s,[n.definitionPath]:r}:s:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...r,[i]:s}};return n.target==="jsonSchema7"?l.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(l.$schema="https://json-schema.org/draft/2019-09/schema#"),l};function gv(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}const T7=["*","_","`"];function P7(t){let e="";for(const[n,r]of Object.entries(t))e+=`	classDef ${n} ${r};
`;return e}function O7(t,e,n){const{firstNode:r,lastNode:i,nodeColors:s,withStyles:a=!0,curveStyle:l="linear",wrapLabelNWords:u=9}=n??{};let c=a?`%%{init: {'flowchart': {'curve': '${l}'}}}%%
graph TD;
`:`graph TD;
`;if(a){const m="default",g={[m]:"{0}({1})"};r!==void 0&&(g[r]="{0}([{1}]):::first"),i!==void 0&&(g[i]="{0}([{1}]):::last");for(const[b,w]of Object.entries(t)){const y=w.name.split(":").pop()??"";let x=T7.some(T=>y.startsWith(T)&&y.endsWith(T))?`<p>${y}</p>`:y;Object.keys(w.metadata??{}).length&&(x+=`<hr/><small><em>${Object.entries(w.metadata??{}).map(([T,O])=>`${T} = ${O}`).join(`
`)}</em></small>`);const E=(g[b]??g[m]).replace("{0}",gv(b)).replace("{1}",x);c+=`	${E}
`}}const f={};for(const m of e){const g=m.source.split(":"),b=m.target.split(":"),w=g.filter((y,v)=>y===b[v]).join(":");f[w]||(f[w]=[]),f[w].push(m)}const d=new Set;function p(m,g){const b=m.length===1&&m[0].source===m[0].target;if(g&&!b){const w=g.split(":").pop();if(d.has(w))throw new Error(`Found duplicate subgraph '${w}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);d.add(w),c+=`	subgraph ${w}
`}for(const w of m){const{source:y,target:v,data:x,conditional:E}=w;let T="";if(x!==void 0){let O=x;const A=O.split(" ");A.length>u&&(O=Array.from({length:Math.ceil(A.length/u)},(C,M)=>A.slice(M*u,(M+1)*u).join(" ")).join("&nbsp;<br>&nbsp;")),T=E?` -. &nbsp;${O}&nbsp; .-> `:` -- &nbsp;${O}&nbsp; --> `}else T=E?" -.-> ":" --> ";c+=`	${gv(y)}${T}${gv(v)};
`}for(const w in f)w.startsWith(`${g}:`)&&w!==g&&p(f[w],w);g&&!b&&(c+=`	end
`)}p(f[""]??[],"");for(const m in f)!m.includes(":")&&m!==""&&p(f[m],m);return a&&(c+=P7(s??{})),c}async function A7(t,e){let{backgroundColor:n="white"}=e??{};const r=btoa(t);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const i=`https://mermaid.ink/img/${r}?bgColor=${n}`,s=await fetch(i);if(!s.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${s.status}`,`Status text: ${s.statusText}`].join(`
`));return await s.blob()}function k7(t,e){if(t!==void 0&&!Jc(t))return t;if(v1(e))try{let n=e.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return e.getName()}else return e.name??"UnknownSchema"}function C7(t){return v1(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...yd(t.data.schema),title:t.data.name}}}class og{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((n,r)=>{e[n.id]=Jc(n.id)?r:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:e[n.id],...C7(n)})),edges:this.edges.map(n=>{const r={source:e[n.source],target:e[n.target]};return typeof n.data<"u"&&(r.data=n.data),typeof n.conditional<"u"&&(r.conditional=n.conditional),r})}}addNode(e,n,r){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const i=n??Sr(),s={id:i,data:e,name:k7(n,e),metadata:r};return this.nodes[i]=s,s}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(n=>n.source!==e.id&&n.target!==e.id)}addEdge(e,n,r,i){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const s={source:e.id,target:n.id,data:r,conditional:i};return this.edges.push(s),s}firstNode(){return $P(this)}lastNode(){return BP(this)}extend(e,n=""){let r=n;Object.values(e.nodes).map(c=>c.id).every(Jc)&&(r="");const s=c=>r?`${r}:${c}`:c;Object.entries(e.nodes).forEach(([c,f])=>{this.nodes[s(c)]={...f,id:s(c)}});const a=e.edges.map(c=>({...c,source:s(c.source),target:s(c.target)}));this.edges=[...this.edges,...a];const l=e.firstNode(),u=e.lastNode();return[l?{id:s(l.id),data:l.data}:void 0,u?{id:s(u.id),data:u.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&$P(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&BP(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(i=>[i.id,i.name])),n=new Map;Object.values(e).forEach(i=>{n.set(i,(n.get(i)||0)+1)});const r=i=>{const s=e[i];return Jc(i)&&n.get(s)===1?s:i};return new og({nodes:Object.fromEntries(Object.entries(this.nodes).map(([i,s])=>[r(i),{...s,id:r(i)}])),edges:this.edges.map(i=>({...i,source:r(i.source),target:r(i.target)}))})}drawMermaid(e){const{withStyles:n,curveStyle:r,nodeColors:i={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:s}=e??{},a=this.reid(),l=a.firstNode(),u=a.lastNode();return O7(a.nodes,a.edges,{firstNode:l==null?void 0:l.id,lastNode:u==null?void 0:u.id,withStyles:n,curveStyle:r,nodeColors:i,wrapLabelNWords:s})}async drawMermaidPng(e){const n=this.drawMermaid(e);return A7(n,{backgroundColor:e==null?void 0:e.backgroundColor})}}function $P(t,e=[]){const n=new Set(t.edges.filter(i=>!e.includes(i.source)).map(i=>i.target)),r=[];for(const i of Object.values(t.nodes))!e.includes(i.id)&&!n.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function BP(t,e=[]){const n=new Set(t.edges.filter(i=>!e.includes(i.target)).map(i=>i.source)),r=[];for(const i of Object.values(t.nodes))!e.includes(i.id)&&!n.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function R7(t){const e=new TextEncoder,n=new ReadableStream({async start(r){for await(const i of t)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(i)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return Rr.fromReadableStream(n)}function FP(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}const L7=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function";function Pb(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*UP(t,e){for(;;){const{value:n,done:r}=Co.runWithConfig(t,e.next.bind(e),!0);if(r)break;yield n}}async function*zP(t,e){const n=e[Symbol.asyncIterator]();for(;;){const{value:r,done:i}=await Co.runWithConfig(t,n.next.bind(e),!0);if(i)break;yield r}}function An(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}class gn extends Oo{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const n=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${n}${e}`:n}bind(e){return new _o({bound:this,kwargs:e,config:{}})}map(){return new nm({bound:this})}withRetry(e){return new N7({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new _o({bound:this,config:e,kwargs:{}})}withFallbacks(e){const n=Array.isArray(e)?e:e.fallbacks;return new j7({runnable:this,fallbacks:n})}_getOptionsList(e,n=0){if(Array.isArray(e)&&e.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${n} inputs`);if(Array.isArray(e))return e.map(Et);if(n>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([i])=>i!=="runId"));return Array.from({length:n},(i,s)=>Et(s===0?e:r))}return Array.from({length:n},()=>Et(e))}async batch(e,n,r){var u;const i=this._getOptionsList(n??{},e.length),s=((u=i[0])==null?void 0:u.maxConcurrency)??(r==null?void 0:r.maxConcurrency),a=new y1({maxConcurrency:s,onFailedAttempt:c=>{throw c}}),l=e.map((c,f)=>a.call(async()=>{try{return await this.invoke(c,i[f])}catch(d){if(r!=null&&r.returnExceptions)return d;throw d}}));return Promise.all(l)}async*_streamIterator(e,n){yield this.invoke(e,n)}async stream(e,n){const r=Et(n),i=new Su({generator:this._streamIterator(e,r),config:r});return await i.setup,Rr.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(e){let n;e===void 0?n=Et(e):n=Et({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[n,r]}async _callWithConfig(e,n,r){const i=Et(r),s=await ki(i),a=await(s==null?void 0:s.handleChainStart(this.toJSON(),An(n,"input"),i.runId,i==null?void 0:i.runType,void 0,void 0,(i==null?void 0:i.runName)??this.getName()));delete i.runId;let l;try{const u=e.call(this,n,i,a);l=await Ia(u,r==null?void 0:r.signal)}catch(u){throw await(a==null?void 0:a.handleChainError(u)),u}return await(a==null?void 0:a.handleChainEnd(An(l,"output"))),l}async _batchWithConfig(e,n,r,i){var c;const s=this._getOptionsList(r??{},n.length),a=await Promise.all(s.map(ki)),l=await Promise.all(a.map(async(f,d)=>{const p=await(f==null?void 0:f.handleChainStart(this.toJSON(),An(n[d],"input"),s[d].runId,s[d].runType,void 0,void 0,s[d].runName??this.getName()));return delete s[d].runId,p}));let u;try{const f=e.call(this,n,s,l,i);u=await Ia(f,(c=s==null?void 0:s[0])==null?void 0:c.signal)}catch(f){throw await Promise.all(l.map(d=>d==null?void 0:d.handleChainError(f))),f}return await Promise.all(l.map(f=>f==null?void 0:f.handleChainEnd(An(u,"output")))),u}async*_transformStreamWithConfig(e,n,r){let i,s=!0,a,l=!0;const u=Et(r),c=await ki(u);async function*f(){for await(const p of e){if(s)if(i===void 0)i=p;else try{i=Ai(i,p)}catch{i=void 0,s=!1}yield p}}let d;try{const p=await jZ(n.bind(this),f(),async()=>c==null?void 0:c.handleChainStart(this.toJSON(),{input:""},u.runId,u.runType,void 0,void 0,u.runName??this.getName()),r==null?void 0:r.signal,u);delete u.runId,d=p.setup;const m=d==null?void 0:d.handlers.find(JI);let g=p.output;m!==void 0&&d!==void 0&&(g=m.tapOutputIterable(d.runId,g));const b=d==null?void 0:d.handlers.find(KI);b!==void 0&&d!==void 0&&(g=b.tapOutputIterable(d.runId,g));for await(const w of g)if(yield w,l)if(a===void 0)a=w;else try{a=Ai(a,w)}catch{a=void 0,l=!1}}catch(p){throw await(d==null?void 0:d.handleChainError(p,void 0,void 0,void 0,{inputs:An(i,"input")})),p}await(d==null?void 0:d.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:An(i,"input")}))}getGraph(e){const n=new og,r=n.addNode({name:`${this.getName()}Input`,schema:os.any()}),i=n.addNode(this),s=n.addNode({name:`${this.getName()}Output`,schema:os.any()});return n.addEdge(r,i),n.addEdge(i,s),n}pipe(e){return new As({first:this,last:po(e)})}pick(e){return this.pipe(new M7(e))}assign(e){return this.pipe(new rj(new Tu({steps:e})))}async*transform(e,n){let r;for await(const i of e)r===void 0?r=i:r=Ai(r,i);yield*this._streamIterator(r,Et(n))}async*streamLog(e,n,r){const i=new LP({...r,autoClose:!1,_schemaFormat:"original"}),s=Et(n);yield*this._streamLog(e,i,s)}async*_streamLog(e,n,r){const{callbacks:i}=r;if(i===void 0)r.callbacks=[n];else if(Array.isArray(i))r.callbacks=i.concat([n]);else{const u=i.copy();u.addHandler(n,!0),r.callbacks=u}const s=this.stream(e,r);async function a(){try{const u=await s;for await(const c of u){const f=new oa({ops:[{op:"add",path:"/streamed_output/-",value:c}]});await n.writer.write(f)}}finally{await n.writer.close()}}const l=a();try{for await(const u of n)yield u}finally{await l}}streamEvents(e,n,r){let i;if(n.version==="v1")i=this._streamEventsV1(e,n,r);else if(n.version==="v2")i=this._streamEventsV2(e,n,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return n.encoding==="text/event-stream"?R7(i):Rr.fromAsyncGenerator(i)}async*_streamEventsV2(e,n,r){var m;const i=new DZ({...r,autoClose:!1}),s=Et(n),a=s.runId??Sr();s.runId=a;const l=s.callbacks;if(l===void 0)s.callbacks=[i];else if(Array.isArray(l))s.callbacks=l.concat(i);else{const g=l.copy();g.addHandler(i,!0),s.callbacks=g}const u=this;async function c(){try{const g=await u.stream(e,s),b=i.tapOutputIterable(a,g);for await(const w of b);}finally{await i.finish()}}const f=c();let d=!1,p;try{for await(const g of i){if(!d){g.data.input=e,d=!0,p=g.run_id,yield g;continue}g.run_id===p&&g.event.endsWith("_end")&&(m=g.data)!=null&&m.input&&delete g.data.input,yield g}}finally{await f}}async*_streamEventsV1(e,n,r){let i,s=!1;const a=Et(n),l=a.tags??[],u=a.metadata??{},c=a.runName??this.getName(),f=new LP({...r,autoClose:!1,_schemaFormat:"streaming_events"}),d=new UZ({...r}),p=this._streamLog(e,f,a);for await(const g of p){if(i?i=i.concat(g):i=Gf.fromRunLogPatch(g),i.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!s){s=!0;const v={...i.state},x={run_id:v.id,event:`on_${v.type}_start`,name:c,tags:l,metadata:u,data:{input:e}};d.includeEvent(x,v.type)&&(yield x)}const b=g.ops.filter(v=>v.path.startsWith("/logs/")).map(v=>v.path.split("/")[2]),w=[...new Set(b)];for(const v of w){let x,E={};const T=i.state.logs[v];if(T.end_time===void 0?T.streamed_output.length>0?x="stream":x="start":x="end",x==="start")T.inputs!==void 0&&(E.input=T.inputs);else if(x==="end")T.inputs!==void 0&&(E.input=T.inputs),E.output=T.final_output;else if(x==="stream"){const O=T.streamed_output.length;if(O!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${O} instead. Encountered in: "${T.name}"`);E={chunk:T.streamed_output[0]},T.streamed_output=[]}yield{event:`on_${T.type}_${x}`,name:T.name,run_id:T.id,tags:T.tags,metadata:T.metadata,data:E}}const{state:y}=i;if(y.streamed_output.length>0){const v=y.streamed_output.length;if(v!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${v} instead. Encountered in: "${y.name}"`);const x={chunk:y.streamed_output[0]};y.streamed_output=[];const E={event:`on_${y.type}_stream`,run_id:y.id,tags:l,metadata:u,name:c,data:x};d.includeEvent(E,y.type)&&(yield E)}}const m=i==null?void 0:i.state;if(m!==void 0){const g={event:`on_${m.type}_end`,name:c,run_id:m.id,tags:l,metadata:u,data:{output:m.final_output}};d.includeEvent(g,m.type)&&(yield g)}}static isRunnable(e){return v1(e)}withListeners({onStart:e,onEnd:n,onError:r}){return new _o({bound:this,config:{},configFactories:[i=>({callbacks:[new XI({config:i,onStart:e,onEnd:n,onError:r})]})]})}asTool(e){return D7(this,e)}}class _o extends gn{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const n=IP(this.config,...e);return IP(n,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(n))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,n){return this.bound.invoke(e,await this._mergeConfig(Et(n),this.kwargs))}async batch(e,n,r){const i=Array.isArray(n)?await Promise.all(n.map(async s=>this._mergeConfig(Et(s),this.kwargs))):await this._mergeConfig(Et(n),this.kwargs);return this.bound.batch(e,i,r)}async*_streamIterator(e,n){yield*this.bound._streamIterator(e,await this._mergeConfig(Et(n),this.kwargs))}async stream(e,n){return this.bound.stream(e,await this._mergeConfig(Et(n),this.kwargs))}async*transform(e,n){yield*this.bound.transform(e,await this._mergeConfig(Et(n),this.kwargs))}streamEvents(e,n,r){const i=this,s=async function*(){yield*i.bound.streamEvents(e,{...await i._mergeConfig(Et(n),i.kwargs),version:n.version},r)};return Rr.fromAsyncGenerator(s())}static isRunnableBinding(e){return e.bound&&gn.isRunnable(e.bound)}withListeners({onStart:e,onEnd:n,onError:r}){return new _o({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[i=>({callbacks:[new XI({config:i,onStart:e,onEnd:n,onError:r})]})]})}}class nm extends gn{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new nm({bound:this.bound.bind(e)})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _invoke(e,n,r){return this.bound.batch(e,qn(n,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:e,onEnd:n,onError:r}){return new nm({bound:this.bound.withListeners({onStart:e,onEnd:n,onError:r})})}}class N7 extends _o{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,n,r){const i=e>1?`retry:attempt:${e}`:void 0;return qn(n,{callbacks:r==null?void 0:r.getChild(i)})}async _invoke(e,n,r){return Kp(i=>super.invoke(e,this._patchConfigForRetry(i,n,r)),{onFailedAttempt:i=>this.onFailedAttempt(i,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _batch(e,n,r,i){const s={};try{await Kp(async a=>{const l=e.map((p,m)=>m).filter(p=>s[p.toString()]===void 0||s[p.toString()]instanceof Error),u=l.map(p=>e[p]),c=l.map(p=>this._patchConfigForRetry(a,n==null?void 0:n[p],r==null?void 0:r[p])),f=await super.batch(u,c,{...i,returnExceptions:!0});let d;for(let p=0;p<f.length;p+=1){const m=f[p],g=l[p];m instanceof Error&&d===void 0&&(d=m,d.input=u[p]),s[g.toString()]=m}if(d)throw d;return f},{onFailedAttempt:a=>this.onFailedAttempt(a,a.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if((i==null?void 0:i.returnExceptions)!==!0)throw a}return Object.keys(s).sort((a,l)=>parseInt(a,10)-parseInt(l,10)).map(a=>s[parseInt(a,10)])}async batch(e,n,r){return this._batchWithConfig(this._batch.bind(this),e,n,r)}}class As extends gn{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,n){var u;const r=Et(n),i=await ki(r),s=await(i==null?void 0:i.handleChainStart(this.toJSON(),An(e,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let a=e,l;try{const c=[this.first,...this.middle];for(let f=0;f<c.length;f+=1){const p=c[f].invoke(a,qn(r,{callbacks:s==null?void 0:s.getChild(this.omitSequenceTags?void 0:`seq:step:${f+1}`)}));a=await Ia(p,n==null?void 0:n.signal)}if((u=n==null?void 0:n.signal)!=null&&u.aborted)throw new Error("Aborted");l=await this.last.invoke(a,qn(r,{callbacks:s==null?void 0:s.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(c){throw await(s==null?void 0:s.handleChainError(c)),c}return await(s==null?void 0:s.handleChainEnd(An(l,"output"))),l}async batch(e,n,r){var u;const i=this._getOptionsList(n??{},e.length),s=await Promise.all(i.map(ki)),a=await Promise.all(s.map(async(c,f)=>{const d=await(c==null?void 0:c.handleChainStart(this.toJSON(),An(e[f],"input"),i[f].runId,void 0,void 0,void 0,i[f].runName));return delete i[f].runId,d}));let l=e;try{for(let c=0;c<this.steps.length;c+=1){const d=this.steps[c].batch(l,a.map((p,m)=>{const g=p==null?void 0:p.getChild(this.omitSequenceTags?void 0:`seq:step:${c+1}`);return qn(i[m],{callbacks:g})}),r);l=await Ia(d,(u=i[0])==null?void 0:u.signal)}}catch(c){throw await Promise.all(a.map(f=>f==null?void 0:f.handleChainError(c))),c}return await Promise.all(a.map(c=>c==null?void 0:c.handleChainEnd(An(l,"output")))),l}async*_streamIterator(e,n){var d;const r=await ki(n),{runId:i,...s}=n??{},a=await(r==null?void 0:r.handleChainStart(this.toJSON(),An(e,"input"),i,void 0,void 0,void 0,s==null?void 0:s.runName)),l=[this.first,...this.middle,this.last];let u=!0,c;async function*f(){yield e}try{let p=l[0].transform(f(),qn(s,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let m=1;m<l.length;m+=1)p=await l[m].transform(p,qn(s,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${m+1}`)}));for await(const m of p)if((d=n==null?void 0:n.signal)==null||d.throwIfAborted(),yield m,u)if(c===void 0)c=m;else try{c=Ai(c,m)}catch{c=void 0,u=!1}}catch(p){throw await(a==null?void 0:a.handleChainError(p)),p}await(a==null?void 0:a.handleChainEnd(An(c,"output")))}getGraph(e){const n=new og;let r=null;return this.steps.forEach((i,s)=>{const a=i.getGraph(e);s!==0&&a.trimFirstNode(),s!==this.steps.length-1&&a.trimLastNode(),n.extend(a);const l=a.firstNode();if(!l)throw new Error(`Runnable ${i} has no first node`);r&&n.addEdge(r,l),r=a.lastNode()}),n}pipe(e){return As.isRunnableSequence(e)?new As({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new As({first:this.first,middle:[...this.middle,this.last],last:po(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&gn.isRunnable(e)}static from([e,...n],r){let i={};return typeof r=="string"?i.name=r:r!==void 0&&(i=r),new As({...i,first:po(e),middle:n.slice(0,-1).map(po),last:po(n[n.length-1])})}}class Tu extends gn{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[n,r]of Object.entries(e.steps))this.steps[n]=po(r)}static from(e){return new Tu({steps:e})}async invoke(e,n){const r=Et(n),i=await ki(r),s=await(i==null?void 0:i.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const a={};try{const l=Object.entries(this.steps).map(async([u,c])=>{a[u]=await c.invoke(e,qn(r,{callbacks:s==null?void 0:s.getChild(`map:key:${u}`)}))});await Ia(Promise.all(l),n==null?void 0:n.signal)}catch(l){throw await(s==null?void 0:s.handleChainError(l)),l}return await(s==null?void 0:s.handleChainEnd(a)),a}async*_transform(e,n,r){const i={...this.steps},s=GI(e,Object.keys(i).length),a=new Map(Object.entries(i).map(([l,u],c)=>{const f=u.transform(s[c],qn(r,{callbacks:n==null?void 0:n.getChild(`map:key:${l}`)}));return[l,f.next().then(d=>({key:l,gen:f,result:d}))]}));for(;a.size;){const l=Promise.race(a.values()),{key:u,result:c,gen:f}=await Ia(l,r==null?void 0:r.signal);a.delete(u),c.done||(yield{[u]:c.value},a.set(u,f.next().then(d=>({key:u,gen:f,result:d}))))}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=Et(n),s=new Su({generator:this.transform(r(),i),config:i});return await s.setup,Rr.fromAsyncGenerator(s)}}class _1 extends gn{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!m1(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,n){const[r]=this._getOptionsList(n??{},1),i=await ki(r),s=this.func(qn(r,{callbacks:i}),e);return Ia(s,r==null?void 0:r.signal)}async*_streamIterator(e,n){var s,a;const[r]=this._getOptionsList(n??{},1),i=await this.invoke(e,n);if(Pb(i)){for await(const l of i)(s=r==null?void 0:r.signal)==null||s.throwIfAborted(),yield l;return}if(L7(i)){for(;;){(a=r==null?void 0:r.signal)==null||a.throwIfAborted();const l=i.next();if(l.done)break;yield l.value}return}yield i}static from(e){return new _1({func:e})}}function I7(t){if(m1(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class vd extends gn{static lc_name(){return"RunnableLambda"}constructor(e){if(m1(e.func))return _1.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),I7(e.func),this.func=e.func}static from(e){return new vd({func:e})}async _invoke(e,n,r){return new Promise((i,s)=>{const a=qn(n,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((n==null?void 0:n.recursionLimit)??pv)-1});Co.runWithConfig(a,async()=>{var l,u;try{let c=await this.func(e,{...a});if(c&&gn.isRunnable(c)){if((n==null?void 0:n.recursionLimit)===0)throw new Error("Recursion limit reached.");c=await c.invoke(e,{...a,recursionLimit:(a.recursionLimit??pv)-1})}else if(Pb(c)){let f;for await(const d of zP(a,c))if((l=n==null?void 0:n.signal)==null||l.throwIfAborted(),f===void 0)f=d;else try{f=Ai(f,d)}catch{f=d}c=f}else if(FP(c)){let f;for(const d of UP(a,c))if((u=n==null?void 0:n.signal)==null||u.throwIfAborted(),f===void 0)f=d;else try{f=Ai(f,d)}catch{f=d}c=f}i(c)}catch(c){s(c)}})})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async*_transform(e,n,r){var l,u;let i;for await(const c of e)if(i===void 0)i=c;else try{i=Ai(i,c)}catch{i=c}const s=qn(r,{callbacks:n==null?void 0:n.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??pv)-1}),a=await new Promise((c,f)=>{Co.runWithConfig(s,async()=>{try{const d=await this.func(i,{...s,config:s});c(d)}catch(d){f(d)}})});if(a&&gn.isRunnable(a)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const c=await a.stream(i,s);for await(const f of c)yield f}else if(Pb(a))for await(const c of zP(s,a))(l=r==null?void 0:r.signal)==null||l.throwIfAborted(),yield c;else if(FP(a))for(const c of UP(s,a))(u=r==null?void 0:r.signal)==null||u.throwIfAborted(),yield c;else yield a}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=Et(n),s=new Su({generator:this.transform(r(),i),config:i});return await s.setup,Rr.fromAsyncGenerator(s)}}class j7 extends gn{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,n){var c;const r=Et(n),i=await ki(n),{runId:s,...a}=r,l=await(i==null?void 0:i.handleChainStart(this.toJSON(),An(e,"input"),s,void 0,void 0,void 0,a==null?void 0:a.runName));let u;for(const f of this.runnables()){(c=r==null?void 0:r.signal)==null||c.throwIfAborted();try{const d=await f.invoke(e,qn(a,{callbacks:l==null?void 0:l.getChild()}));return await(l==null?void 0:l.handleChainEnd(An(d,"output"))),d}catch(d){u===void 0&&(u=d)}}throw u===void 0?new Error("No error stored at end of fallback."):(await(l==null?void 0:l.handleChainError(u)),u)}async*_streamIterator(e,n){var d;const r=Et(n),i=await ki(n),{runId:s,...a}=r,l=await(i==null?void 0:i.handleChainStart(this.toJSON(),An(e,"input"),s,void 0,void 0,void 0,a==null?void 0:a.runName));let u,c;for(const p of this.runnables()){(d=r==null?void 0:r.signal)==null||d.throwIfAborted();const m=qn(a,{callbacks:l==null?void 0:l.getChild()});try{c=await p.stream(e,m);break}catch(g){u===void 0&&(u=g)}}if(c===void 0){const p=u??new Error("No error stored at end of fallback.");throw await(l==null?void 0:l.handleChainError(p)),p}let f;try{for await(const p of c){yield p;try{f=f===void 0?f:Ai(f,p)}catch{f=void 0}}}catch(p){throw await(l==null?void 0:l.handleChainError(p)),p}await(l==null?void 0:l.handleChainEnd(An(f,"output")))}async batch(e,n,r){var u;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const i=this._getOptionsList(n??{},e.length),s=await Promise.all(i.map(c=>ki(c))),a=await Promise.all(s.map(async(c,f)=>{const d=await(c==null?void 0:c.handleChainStart(this.toJSON(),An(e[f],"input"),i[f].runId,void 0,void 0,void 0,i[f].runName));return delete i[f].runId,d}));let l;for(const c of this.runnables()){(u=i[0].signal)==null||u.throwIfAborted();try{const f=await c.batch(e,a.map((d,p)=>qn(i[p],{callbacks:d==null?void 0:d.getChild()})),r);return await Promise.all(a.map((d,p)=>d==null?void 0:d.handleChainEnd(An(f[p],"output")))),f}catch(f){l===void 0&&(l=f)}}throw l?(await Promise.all(a.map(c=>c==null?void 0:c.handleChainError(l))),l):new Error("No error stored at end of fallbacks.")}}function po(t){if(typeof t=="function")return new vd({func:t});if(gn.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[n,r]of Object.entries(t))e[n]=po(r);return new Tu({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class rj extends gn{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof Tu&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,n){const r=await this.mapper.invoke(e,n);return{...e,...r}}async*_transform(e,n,r){const i=this.mapper.getStepsKeys(),[s,a]=GI(e),l=this.mapper.transform(a,qn(r,{callbacks:n==null?void 0:n.getChild()})),u=l.next();for await(const c of s){if(typeof c!="object"||Array.isArray(c))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof c}`);const f=Object.fromEntries(Object.entries(c).filter(([d])=>!i.includes(d)));Object.keys(f).length>0&&(yield f)}yield(await u).value;for await(const c of l)yield c}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=Et(n),s=new Su({generator:this.transform(r(),i),config:i});return await s.setup,Rr.fromAsyncGenerator(s)}}class M7 extends gn{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const n=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return n.length===0?void 0:Object.fromEntries(n)}}async invoke(e,n){return this._callWithConfig(this._pick.bind(this),e,n)}async*_transform(e){for await(const n of e){const r=await this._pick(n);r!==void 0&&(yield r)}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=Et(n),s=new Su({generator:this.transform(r(),i),config:i});return await s.setup,Rr.fromAsyncGenerator(s)}}class VP extends _o{constructor(e){const n=As.from([vd.from(async r=>{let i;if(fI(r))try{i=await this.schema.parseAsync(r.args)}catch{throw new o8("Received tool input did not match expected schema",JSON.stringify(r.args))}else i=r;return i}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:n,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function D7(t,e){var i;const n=e.name??t.getName(),r=e.description??((i=e.schema)==null?void 0:i.description);return e.schema.constructor===os.ZodString?new VP({name:n,description:r,schema:os.object({input:os.string()}).transform(s=>s.input),bound:t}):new VP({name:n,description:r,schema:e.schema,bound:t})}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var $7=typeof window=="object"?window:{},tt="0123456789abcdef".split(""),B7=[-2147483648,8388608,32768,128],ci=[24,16,8,0],Tn=[];function Li(t){t?(Tn[0]=Tn[16]=Tn[1]=Tn[2]=Tn[3]=Tn[4]=Tn[5]=Tn[6]=Tn[7]=Tn[8]=Tn[9]=Tn[10]=Tn[11]=Tn[12]=Tn[13]=Tn[14]=Tn[15]=0,this.blocks=Tn):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Li.prototype.update=function(t){if(!this.finalized){var e=typeof t!="string";e&&t.constructor===$7.ArrayBuffer&&(t=new Uint8Array(t));for(var n,r=0,i,s=t.length||0,a=this.blocks;r<s;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(i=this.start;r<s&&i<64;++r)a[i>>2]|=t[r]<<ci[i++&3];else for(i=this.start;r<s&&i<64;++r)n=t.charCodeAt(r),n<128?a[i>>2]|=n<<ci[i++&3]:n<2048?(a[i>>2]|=(192|n>>6)<<ci[i++&3],a[i>>2]|=(128|n&63)<<ci[i++&3]):n<55296||n>=57344?(a[i>>2]|=(224|n>>12)<<ci[i++&3],a[i>>2]|=(128|n>>6&63)<<ci[i++&3],a[i>>2]|=(128|n&63)<<ci[i++&3]):(n=65536+((n&1023)<<10|t.charCodeAt(++r)&1023),a[i>>2]|=(240|n>>18)<<ci[i++&3],a[i>>2]|=(128|n>>12&63)<<ci[i++&3],a[i>>2]|=(128|n>>6&63)<<ci[i++&3],a[i>>2]|=(128|n&63)<<ci[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=a[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};Li.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=B7[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};Li.prototype.hash=function(){var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4,s,a,l,u=this.blocks;for(a=16;a<80;++a)l=u[a-3]^u[a-8]^u[a-14]^u[a-16],u[a]=l<<1|l>>>31;for(a=0;a<20;a+=5)s=e&n|~e&r,l=t<<5|t>>>27,i=l+s+i+1518500249+u[a]<<0,e=e<<30|e>>>2,s=t&e|~t&n,l=i<<5|i>>>27,r=l+s+r+1518500249+u[a+1]<<0,t=t<<30|t>>>2,s=i&t|~i&e,l=r<<5|r>>>27,n=l+s+n+1518500249+u[a+2]<<0,i=i<<30|i>>>2,s=r&i|~r&t,l=n<<5|n>>>27,e=l+s+e+1518500249+u[a+3]<<0,r=r<<30|r>>>2,s=n&r|~n&i,l=e<<5|e>>>27,t=l+s+t+1518500249+u[a+4]<<0,n=n<<30|n>>>2;for(;a<40;a+=5)s=e^n^r,l=t<<5|t>>>27,i=l+s+i+1859775393+u[a]<<0,e=e<<30|e>>>2,s=t^e^n,l=i<<5|i>>>27,r=l+s+r+1859775393+u[a+1]<<0,t=t<<30|t>>>2,s=i^t^e,l=r<<5|r>>>27,n=l+s+n+1859775393+u[a+2]<<0,i=i<<30|i>>>2,s=r^i^t,l=n<<5|n>>>27,e=l+s+e+1859775393+u[a+3]<<0,r=r<<30|r>>>2,s=n^r^i,l=e<<5|e>>>27,t=l+s+t+1859775393+u[a+4]<<0,n=n<<30|n>>>2;for(;a<60;a+=5)s=e&n|e&r|n&r,l=t<<5|t>>>27,i=l+s+i-1894007588+u[a]<<0,e=e<<30|e>>>2,s=t&e|t&n|e&n,l=i<<5|i>>>27,r=l+s+r-1894007588+u[a+1]<<0,t=t<<30|t>>>2,s=i&t|i&e|t&e,l=r<<5|r>>>27,n=l+s+n-1894007588+u[a+2]<<0,i=i<<30|i>>>2,s=r&i|r&t|i&t,l=n<<5|n>>>27,e=l+s+e-1894007588+u[a+3]<<0,r=r<<30|r>>>2,s=n&r|n&i|r&i,l=e<<5|e>>>27,t=l+s+t-1894007588+u[a+4]<<0,n=n<<30|n>>>2;for(;a<80;a+=5)s=e^n^r,l=t<<5|t>>>27,i=l+s+i-899497514+u[a]<<0,e=e<<30|e>>>2,s=t^e^n,l=i<<5|i>>>27,r=l+s+r-899497514+u[a+1]<<0,t=t<<30|t>>>2,s=i^t^e,l=r<<5|r>>>27,n=l+s+n-899497514+u[a+2]<<0,i=i<<30|i>>>2,s=r^i^t,l=n<<5|n>>>27,e=l+s+e-899497514+u[a+3]<<0,r=r<<30|r>>>2,s=n^r^i,l=e<<5|e>>>27,t=l+s+t-899497514+u[a+4]<<0,n=n<<30|n>>>2;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+i<<0};Li.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4;return tt[t>>28&15]+tt[t>>24&15]+tt[t>>20&15]+tt[t>>16&15]+tt[t>>12&15]+tt[t>>8&15]+tt[t>>4&15]+tt[t&15]+tt[e>>28&15]+tt[e>>24&15]+tt[e>>20&15]+tt[e>>16&15]+tt[e>>12&15]+tt[e>>8&15]+tt[e>>4&15]+tt[e&15]+tt[n>>28&15]+tt[n>>24&15]+tt[n>>20&15]+tt[n>>16&15]+tt[n>>12&15]+tt[n>>8&15]+tt[n>>4&15]+tt[n&15]+tt[r>>28&15]+tt[r>>24&15]+tt[r>>20&15]+tt[r>>16&15]+tt[r>>12&15]+tt[r>>8&15]+tt[r>>4&15]+tt[r&15]+tt[i>>28&15]+tt[i>>24&15]+tt[i>>20&15]+tt[i>>16&15]+tt[i>>12&15]+tt[i>>8&15]+tt[i>>4&15]+tt[i&15]};Li.prototype.toString=Li.prototype.hex;Li.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4;return[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24&255,n>>16&255,n>>8&255,n&255,r>>24&255,r>>16&255,r>>8&255,r&255,i>>24&255,i>>16&255,i>>8&255,i&255]};Li.prototype.array=Li.prototype.digest;Li.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),t};const F7=t=>new Li(!0).update(t).hex(),qP=(...t)=>F7(t.join("_"));class U7{}const z7=new Map;class b1 extends U7{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,n){return Promise.resolve(this.cache.get(qP(e,n))??null)}async update(e,n,r){this.cache.set(qP(e,n),r)}static global(){return new b1(z7)}}class w1 extends Oo{}class ij extends w1{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new xu(this.value)]}}class sj extends w1{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return dI(this.messages)}toChatMessages(){return this.messages}}class V7 extends w1{static lc_name(){return"ImagePromptValue"}constructor(e){"imageUrl"in e||(e={imageUrl:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"imageUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.imageUrl=e.imageUrl}toString(){return this.imageUrl.url}toChatMessages(){return[new xu({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}}var lg={};lg.byteLength=Z7;lg.toByteArray=G7;lg.fromByteArray=X7;var Yi=[],Vr=[],q7=typeof Uint8Array<"u"?Uint8Array:Array,yv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Qo=0,H7=yv.length;Qo<H7;++Qo)Yi[Qo]=yv[Qo],Vr[yv.charCodeAt(Qo)]=Qo;Vr[45]=62;Vr[95]=63;function aj(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function Z7(t){var e=aj(t),n=e[0],r=e[1];return(n+r)*3/4-r}function W7(t,e,n){return(e+n)*3/4-n}function G7(t){var e,n=aj(t),r=n[0],i=n[1],s=new q7(W7(t,r,i)),a=0,l=i>0?r-4:r,u;for(u=0;u<l;u+=4)e=Vr[t.charCodeAt(u)]<<18|Vr[t.charCodeAt(u+1)]<<12|Vr[t.charCodeAt(u+2)]<<6|Vr[t.charCodeAt(u+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Vr[t.charCodeAt(u)]<<2|Vr[t.charCodeAt(u+1)]>>4,s[a++]=e&255),i===1&&(e=Vr[t.charCodeAt(u)]<<10|Vr[t.charCodeAt(u+1)]<<4|Vr[t.charCodeAt(u+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function K7(t){return Yi[t>>18&63]+Yi[t>>12&63]+Yi[t>>6&63]+Yi[t&63]}function J7(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(K7(r));return i.join("")}function X7(t){for(var e,n=t.length,r=n%3,i=[],s=16383,a=0,l=n-r;a<l;a+=s)i.push(J7(t,a,a+s>l?l:a+s));return r===1?(e=t[n-1],i.push(Yi[e>>2]+Yi[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Yi[e>>10]+Yi[e>>4&63]+Yi[e<<2&63]+"=")),i.join("")}var Y7=Object.defineProperty,Q7=(t,e,n)=>e in t?Y7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eW=(t,e,n)=>(Q7(t,typeof e!="symbol"?e+"":e,n),n);function tW(t,e){let n=Array.from({length:t.length},(r,i)=>({start:i,end:i+1}));for(;n.length>1;){let r=null;for(let i=0;i<n.length-1;i++){const s=t.slice(n[i].start,n[i+1].end),a=e.get(s.join(","));a!=null&&(r==null||a<r[0])&&(r=[a,i])}if(r!=null){const i=r[1];n[i]={start:n[i].start,end:n[i+1].end},n.splice(i+1,1)}else break}return n}function nW(t,e){return t.length===1?[e.get(t.join(","))]:tW(t,e).map(n=>e.get(t.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function rW(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var Ob=class{constructor(t,e){Xs(this,"specialTokens");Xs(this,"inverseSpecialTokens");Xs(this,"patStr");Xs(this,"textEncoder",new TextEncoder);Xs(this,"textDecoder",new TextDecoder("utf-8"));Xs(this,"rankMap",new Map);Xs(this,"textMap",new Map);this.patStr=t.pat_str;const n=t.bpe_ranks.split(`
`).filter(Boolean).reduce((r,i)=>{const[s,a,...l]=i.split(" "),u=Number.parseInt(a,10);return l.forEach((c,f)=>r[c]=u+f),r},{});for(const[r,i]of Object.entries(n)){const s=lg.toByteArray(r);this.rankMap.set(s.join(","),i),this.textMap.set(i,s)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[i,s])=>(r[s]=this.textEncoder.encode(i),r),{})}encode(t,e=[],n="all"){const r=new RegExp(this.patStr,"ug"),i=Ob.specialTokenRegex(Object.keys(this.specialTokens)),s=[],a=new Set(e==="all"?Object.keys(this.specialTokens):e),l=new Set(n==="all"?Object.keys(this.specialTokens).filter(c=>!a.has(c)):n);if(l.size>0){const c=Ob.specialTokenRegex([...l]),f=t.match(c);if(f!=null)throw new Error(`The text contains a special token that is not allowed: ${f[0]}`)}let u=0;for(;;){let c=null,f=u;for(;i.lastIndex=f,c=i.exec(t),!(c==null||a.has(c[0]));)f=c.index+1;const d=(c==null?void 0:c.index)??t.length;for(const m of t.substring(u,d).matchAll(r)){const g=this.textEncoder.encode(m[0]),b=this.rankMap.get(g.join(","));if(b!=null){s.push(b);continue}s.push(...nW(g,this.rankMap))}if(c==null)break;let p=this.specialTokens[c[0]];s.push(p),u=c.index+c[0].length}return s}decode(t){const e=[];let n=0;for(let s=0;s<t.length;++s){const a=t[s],l=this.textMap.get(a)??this.inverseSpecialTokens[a];l!=null&&(e.push(l),n+=l.length)}const r=new Uint8Array(n);let i=0;for(const s of e)r.set(s,i),i+=s.length;return this.textDecoder.decode(r)}},oj=Ob;eW(oj,"specialTokenRegex",t=>new RegExp(t.map(e=>rW(e)).join("|"),"g"));function iW(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"o1-mini":case"o1-preview":case"o1-preview-2024-09-12":case"o1-mini-2024-09-12":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":return"o200k_base";default:throw new Error("Unknown model")}}const bh={},sW=new y1({});async function aW(t){return t in bh||(bh[t]=sW.fetch(`https://tiktoken.pages.dev/js/${t}.json`).then(e=>e.json()).then(e=>new oj(e)).catch(e=>{throw delete bh[t],e})),await bh[t]}async function oW(t){return aW(iW(t))}const lW=t=>t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t.startsWith("gpt-4o")?"gpt-4o":t;function uW(t){return typeof t!="object"||!t?!1:!!("type"in t&&t.type==="function"&&"function"in t&&typeof t.function=="object"&&t.function&&"name"in t.function&&"parameters"in t.function)}const cW=()=>!1;class fW extends gn{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??cW(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class dW extends fW{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:n,...r}){const{cache:i,...s}=r;super({callbacks:e??n,...s}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof i=="object"?this.cache=i:i?this.cache=b1.global():this.cache=void 0,this.caller=new y1(r??{})}async getNumTokens(e){if(typeof e!="string")return 0;let n=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await oW("modelName"in this?lW(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}if(this._encoding)try{n=this._encoding.encode(e).length}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return n}static _convertInputToPromptValue(e){return typeof e=="string"?new ij(e):Array.isArray(e)?new sj(e.map(pa)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...n}){const r={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([a,l])=>l!==void 0).map(([a,l])=>`${a}:${JSON.stringify(l)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class rm extends gn{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,n){const r=Et(n);return this.func&&await this.func(e,r),this._callWithConfig(i=>Promise.resolve(i),e,r)}async*transform(e,n){const r=Et(n);let i,s=!0;for await(const a of this._transformStreamWithConfig(e,l=>l,r))if(yield a,s)if(i===void 0)i=a;else try{i=Ai(i,a)}catch{i=void 0,s=!1}this.func&&i!==void 0&&await this.func(i,r)}static assign(e){return new rj(new Tu({steps:e}))}}function lj(t){return typeof(t==null?void 0:t.parse)=="function"}class la extends dW{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptionsCompat(e){const[n,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=n.signal,[n,r]}async invoke(e,n){const r=la._convertInputToPromptValue(e);return(await this.generatePrompt([r],n,n==null?void 0:n.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,n,r){throw new Error("Not implemented.")}async*_streamIterator(e,n){var r;if(this._streamResponseChunks===la.prototype._streamResponseChunks)yield this.invoke(e,n);else{const s=la._convertInputToPromptValue(e).toChatMessages(),[a,l]=this._separateRunnableConfigFromCallOptionsCompat(n),u={...a.metadata,...this.getLsParams(l)},c=await Ar.configure(a.callbacks,this.callbacks,a.tags,this.tags,u,this.metadata,{verbose:this.verbose}),f={options:l,invocation_params:this==null?void 0:this.invocationParams(l),batch_size:1},d=await(c==null?void 0:c.handleChatModelStart(this.toJSON(),[s],a.runId,void 0,f,void 0,void 0,a.runName));let p,m;try{for await(const g of this._streamResponseChunks(s,l,d==null?void 0:d[0])){if(g.message.id==null){const b=(r=d==null?void 0:d.at(0))==null?void 0:r.runId;b!=null&&g.message._updateId(`run-${b}`)}g.message.response_metadata={...g.generationInfo,...g.message.response_metadata},yield g.message,p?p=p.concat(g):p=g,ZT(g.message)&&g.message.usage_metadata!==void 0&&(m={tokenUsage:{promptTokens:g.message.usage_metadata.input_tokens,completionTokens:g.message.usage_metadata.output_tokens,totalTokens:g.message.usage_metadata.total_tokens}})}}catch(g){throw await Promise.all((d??[]).map(b=>b==null?void 0:b.handleLLMError(g))),g}await Promise.all((d??[]).map(g=>g==null?void 0:g.handleLLMEnd({generations:[[p]],llmOutput:m})))}}getLsParams(e){const n=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:n}}async _generateUncached(e,n,r){var m,g;const i=e.map(b=>b.map(pa)),s={...r.metadata,...this.getLsParams(n)},a=await Ar.configure(r.callbacks,this.callbacks,r.tags,this.tags,s,this.metadata,{verbose:this.verbose}),l={options:n,invocation_params:this==null?void 0:this.invocationParams(n),batch_size:1},u=await(a==null?void 0:a.handleChatModelStart(this.toJSON(),i,r.runId,void 0,l,void 0,void 0,r.runName)),c=[],f=[];if(!!(u!=null&&u[0].handlers.find(b=>JI(b)||KI(b)))&&i.length===1&&this._streamResponseChunks!==la.prototype._streamResponseChunks)try{const b=await this._streamResponseChunks(i[0],n,u==null?void 0:u[0]);let w,y;for await(const v of b){if(v.message.id==null){const x=(m=u==null?void 0:u.at(0))==null?void 0:m.runId;x!=null&&v.message._updateId(`run-${x}`)}w===void 0?w=v:w=Ai(w,v),ZT(v.message)&&v.message.usage_metadata!==void 0&&(y={tokenUsage:{promptTokens:v.message.usage_metadata.input_tokens,completionTokens:v.message.usage_metadata.output_tokens,totalTokens:v.message.usage_metadata.total_tokens}})}if(w===void 0)throw new Error("Received empty response from chat model call.");c.push([w]),await(u==null?void 0:u[0].handleLLMEnd({generations:c,llmOutput:y}))}catch(b){throw await(u==null?void 0:u[0].handleLLMError(b)),b}else{const b=await Promise.allSettled(i.map((w,y)=>this._generate(w,{...n,promptIndex:y},u==null?void 0:u[y])));await Promise.all(b.map(async(w,y)=>{var v,x,E;if(w.status==="fulfilled"){const T=w.value;for(const O of T.generations){if(O.message.id==null){const A=(v=u==null?void 0:u.at(0))==null?void 0:v.runId;A!=null&&O.message._updateId(`run-${A}`)}O.message.response_metadata={...O.generationInfo,...O.message.response_metadata}}return T.generations.length===1&&(T.generations[0].message.response_metadata={...T.llmOutput,...T.generations[0].message.response_metadata}),c[y]=T.generations,f[y]=T.llmOutput,(x=u==null?void 0:u[y])==null?void 0:x.handleLLMEnd({generations:[T.generations],llmOutput:T.llmOutput})}else return await((E=u==null?void 0:u[y])==null?void 0:E.handleLLMError(w.reason)),Promise.reject(w.reason)}))}const p={generations:c,llmOutput:f.length?(g=this._combineLLMOutput)==null?void 0:g.call(this,...f):void 0};return Object.defineProperty(p,NP,{value:u?{runIds:u==null?void 0:u.map(b=>b.runId)}:void 0,configurable:!0}),p}async _generateCached({messages:e,cache:n,llmStringKey:r,parsedOptions:i,handledOptions:s}){const a=e.map(w=>w.map(pa)),l={...s.metadata,...this.getLsParams(i)},u=await Ar.configure(s.callbacks,this.callbacks,s.tags,this.tags,l,this.metadata,{verbose:this.verbose}),c={options:i,invocation_params:this==null?void 0:this.invocationParams(i),batch_size:1,cached:!0},f=await(u==null?void 0:u.handleChatModelStart(this.toJSON(),a,s.runId,void 0,c,void 0,void 0,s.runName)),d=[],m=(await Promise.allSettled(a.map(async(w,y)=>{const v=la._convertInputToPromptValue(w).toString(),x=await n.lookup(v,r);return x==null&&d.push(y),x}))).map((w,y)=>({result:w,runManager:f==null?void 0:f[y]})).filter(({result:w})=>w.status==="fulfilled"&&w.value!=null||w.status==="rejected"),g=[];await Promise.all(m.map(async({result:w,runManager:y},v)=>{if(w.status==="fulfilled"){const x=w.value;return g[v]=x,x.length&&await(y==null?void 0:y.handleLLMNewToken(x[0].text)),y==null?void 0:y.handleLLMEnd({generations:[x]})}else return await(y==null?void 0:y.handleLLMError(w.reason)),Promise.reject(w.reason)}));const b={generations:g,missingPromptIndices:d};return Object.defineProperty(b,NP,{value:f?{runIds:f==null?void 0:f.map(w=>w.runId)}:void 0,configurable:!0}),b}async generate(e,n,r){let i;Array.isArray(n)?i={stop:n}:i=n;const s=e.map(m=>m.map(pa)),[a,l]=this._separateRunnableConfigFromCallOptionsCompat(i);if(a.callbacks=a.callbacks??r,!this.cache)return this._generateUncached(s,l,a);const{cache:u}=this,c=this._getSerializedCacheKeyParametersForCall(l),{generations:f,missingPromptIndices:d}=await this._generateCached({messages:s,cache:u,llmStringKey:c,parsedOptions:l,handledOptions:a});let p={};if(d.length>0){const m=await this._generateUncached(d.map(g=>s[g]),l,a);await Promise.all(m.generations.map(async(g,b)=>{const w=d[b];f[w]=g;const y=la._convertInputToPromptValue(s[w]).toString();return u.update(y,c,g)})),p=m.llmOutput??{}}return{generations:f,llmOutput:p}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,n,r){const i=e.map(s=>s.toChatMessages());return this.generate(i,n,r)}async call(e,n,r){return(await this.generate([e.map(pa)],n,r)).generations[0][0].message}async callPrompt(e,n,r){const i=e.toChatMessages();return this.call(i,n,r)}async predictMessages(e,n,r){return this.call(e,n,r)}async predict(e,n,r){const i=new xu(e),s=await this.call([i],n,r);if(typeof s.content!="string")throw new Error("Cannot use predict when output is not a string.");return s.content}withStructuredOutput(e,n){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(n!=null&&n.strict)throw new Error('"strict" mode is not supported for this model by default.');const r=e,i=n==null?void 0:n.name,s=r.description??"A function available to call.",a=n==null?void 0:n.method,l=n==null?void 0:n.includeRaw;if(a==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let u=i??"extract",c;lj(r)?c=[{type:"function",function:{name:u,description:s,parameters:yd(r)}}]:("name"in r&&(u=r.name),c=[{type:"function",function:{name:u,description:s,parameters:r}}]);const f=this.bindTools(c),d=vd.from(b=>{if(!b.tool_calls||b.tool_calls.length===0)throw new Error("No tool calls found in the response.");const w=b.tool_calls.find(y=>y.name===u);if(!w)throw new Error(`No tool call found with name ${u}.`);return w.args});if(!l)return f.pipe(d).withConfig({runName:"StructuredOutput"});const p=rm.assign({parsed:(b,w)=>d.invoke(b.raw,w)}),m=rm.assign({parsed:()=>null}),g=p.withFallbacks({fallbacks:[m]});return As.from([{raw:f},g]).withConfig({runName:"StructuredOutputRunnable"})}}class hW extends gn{parseResultWithPrompt(e,n,r){return this.parseResult(e,r)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,n){return typeof e=="string"?this._callWithConfig(async(r,i)=>this.parseResult([{text:r}],i==null?void 0:i.callbacks),e,{...n,runType:"parser"}):this._callWithConfig(async(r,i)=>this.parseResult([{message:r,text:this._baseMessageToString(r)}],i==null?void 0:i.callbacks),e,{...n,runType:"parser"})}}class uj extends hW{parseResult(e,n){return this.parse(e[0].text,n)}async parseWithPrompt(e,n,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}}class x1 extends Error{constructor(e,n,r,i=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=n,this.observation=r,this.sendToLLM=i,i&&(r===void 0||n===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");Xm(this,"OUTPUT_PARSING_FAILURE")}}function Ab(t,e){const n=typeof t;if(n!==typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;const r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(!Ab(t[i],e[i]))return!1;return!0}if(n==="object"){if(!t||!e)return t===e;const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const a of r)if(!Ab(t[a],e[a]))return!1;return!0}return t===e}class pW extends uj{async*_transform(e){for await(const n of e)typeof n=="string"?yield this.parseResult([{text:n}]):yield this.parseResult([{message:n,text:this._baseMessageToString(n)}])}async*transform(e,n){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...n,runType:"parser"})}}class cj extends pW{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let n,r;for await(const i of e){if(typeof i!="string"&&typeof i.content!="string")throw new Error("Cannot handle non-string output.");let s;if(i8(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");s=new au({message:i,text:i.content})}else if(Zm(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");s=new au({message:c8(i),text:i.content})}else s=new su({text:i});r===void 0?r=s:r=r.concat(s);const a=await this.parsePartialResult([r]);a!=null&&!Ab(a,n)&&(this.diff?yield this._diff(n,a):yield a,n=a)}}getFormatInstructions(){return""}}class HP extends uj{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const n=os.object(Object.fromEntries(Object.entries(e).map(([r,i])=>[r,os.string().describe(i)])));return new this(n)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(yd(this.schema))}
\`\`\`
`}async parse(e){try{const r=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(i,s)=>`"${s.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await this.schema.parseAsync(JSON.parse(r))}catch(n){throw new x1(`Failed to parse. Text: "${e}". Error: ${n}`,e)}}}class ZP extends cj{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,n){if(n)return e?dZ(e,n):[{op:"replace",path:"",value:n}]}async parsePartialResult(e){return UT(e[0].text)}async parse(e){return UT(e,JSON.parse)}getFormatInstructions(){return""}}function fj(t,e){if(t.function===void 0)return;let n;if(e!=null&&e.partial)try{n=t1(t.function.arguments??"{}")}catch{return}else try{n=JSON.parse(t.function.arguments)}catch(i){throw new x1([`Function "${t.function.name}" arguments:`,"",t.function.arguments,"","are not valid JSON.",`Error: ${i.message}`].join(`
`))}const r={name:t.function.name,args:n,type:"tool_call"};return e!=null&&e.returnId&&(r.id=t.id),r}function mW(t){if(t.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:t.id,type:"function",function:{name:t.name,arguments:JSON.stringify(t.args)}}}function gW(t,e){var n,r;return{name:(n=t.function)==null?void 0:n.name,args:(r=t.function)==null?void 0:r.arguments,id:t.id,error:e,type:"invalid_tool_call"}}class yW extends cj{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=(e==null?void 0:e.returnId)??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,n=!0){var a;const r=e[0].message;let i;if(r1(r)&&((a=r.tool_calls)!=null&&a.length)?i=r.tool_calls.map(l=>{const{id:u,...c}=l;return this.returnId?{id:u,...c}:c}):r.additional_kwargs.tool_calls!==void 0&&(i=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(u=>fj(u,{returnId:this.returnId,partial:n}))),!i)return[];const s=[];for(const l of i)if(l!==void 0){const u={type:l.name,args:l.args,id:l.id};s.push(u)}return s}}class WP extends yW{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;const n=await this.zodSchema.safeParseAsync(e);if(n.success)return n.data;throw new x1(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(n.error.errors)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const r=(await super.parsePartialResult(e)).filter(s=>s.type===this.keyName);let i=r;if(r.length)return this.returnId||(i=r.map(s=>s.args)),this.returnSingle?i[0]:i}async parseResult(e){const r=(await super.parsePartialResult(e,!1)).filter(a=>a.type===this.keyName);let i=r;return r.length?(this.returnId||(i=r.map(a=>a.args)),this.returnSingle?this._validateResult(i[0]):await Promise.all(i.map(a=>this._validateResult(a)))):void 0}}const vW=Symbol("Let zodToJsonSchema decide on which parser to use"),GP={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},_W=t=>typeof t=="string"?{...GP,basePath:["#"],definitions:{},name:t}:{...GP,basePath:["#"],definitions:{},...t},kb=t=>"_def"in t?t._def:t;function bW(t){if(!t)return!0;for(const e in t)return!1;return!0}const wW=t=>{const e=_W(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[kb(i),{def:kb(i),path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function dj(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function Tt(t,e,n,r,i){t[e]=n,dj(t,e,r,i)}function xW(){return{}}function EW(t,e){var r,i;const n={type:"array"};return((i=(r=t.type)==null?void 0:r._def)==null?void 0:i.typeName)!==le.ZodAny&&(n.items=_t(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Tt(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Tt(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Tt(n,"minItems",t.exactLength.value,t.exactLength.message,e),Tt(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function SW(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Tt(n,"minimum",r.value,r.message,e):Tt(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Tt(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Tt(n,"maximum",r.value,r.message,e):Tt(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Tt(n,"maximum",r.value,r.message,e));break;case"multipleOf":Tt(n,"multipleOf",r.value,r.message,e);break}return n}function TW(){return{type:"boolean"}}function PW(t,e){return _t(t.type._def,e)}const OW=(t,e)=>_t(t.innerType._def,e);function hj(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,s)=>hj(t,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return AW(t,e)}}const AW=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":Tt(n,"minimum",r.value,r.message,e);break;case"max":Tt(n,"maximum",r.value,r.message,e);break}return n};function kW(t,e){return{..._t(t.innerType._def,e),default:t.defaultValue()}}function CW(t,e,n){return e.effectStrategy==="input"?_t(t.schema._def,e,n):{}}function RW(t){return{type:"string",enum:[...t.values]}}const LW=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function NW(t,e){const n=[_t(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),_t(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(s=>{if(LW(s))i.push(...s.allOf),s.unevaluatedProperties===void 0&&(r=void 0);else{let a=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:l,...u}=s;a=u}else r=void 0;i.push(a)}}),i.length?{allOf:i,...r}:void 0}function IW(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let vv;const Xa={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(vv===void 0&&(vv=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),vv),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function pj(t,e){const n={type:"string"};function r(i){return e.patternStrategy==="escape"?jW(i):i}if(t.checks)for(const i of t.checks)switch(i.kind){case"min":Tt(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,i.value):i.value,i.message,e);break;case"max":Tt(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,i.value):i.value,i.message,e);break;case"email":switch(e.emailStrategy){case"format:email":fi(n,"email",i.message,e);break;case"format:idn-email":fi(n,"idn-email",i.message,e);break;case"pattern:zod":di(n,Xa.email,i.message,e);break}break;case"url":fi(n,"uri",i.message,e);break;case"uuid":fi(n,"uuid",i.message,e);break;case"regex":di(n,i.regex,i.message,e);break;case"cuid":di(n,Xa.cuid,i.message,e);break;case"cuid2":di(n,Xa.cuid2,i.message,e);break;case"startsWith":di(n,RegExp(`^${r(i.value)}`),i.message,e);break;case"endsWith":di(n,RegExp(`${r(i.value)}$`),i.message,e);break;case"datetime":fi(n,"date-time",i.message,e);break;case"date":fi(n,"date",i.message,e);break;case"time":fi(n,"time",i.message,e);break;case"duration":fi(n,"duration",i.message,e);break;case"length":Tt(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,i.value):i.value,i.message,e),Tt(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,i.value):i.value,i.message,e);break;case"includes":{di(n,RegExp(r(i.value)),i.message,e);break}case"ip":{i.version!=="v6"&&fi(n,"ipv4",i.message,e),i.version!=="v4"&&fi(n,"ipv6",i.message,e);break}case"emoji":di(n,Xa.emoji,i.message,e);break;case"ulid":{di(n,Xa.ulid,i.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{fi(n,"binary",i.message,e);break}case"contentEncoding:base64":{Tt(n,"contentEncoding","base64",i.message,e);break}case"pattern:zod":{di(n,Xa.base64,i.message,e);break}}break}case"nanoid":di(n,Xa.nanoid,i.message,e)}return n}const jW=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),fi=(t,e,n,r)=>{var i;t.format||(i=t.anyOf)!=null&&i.some(s=>s.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Tt(t,"format",e,n,r)},di=(t,e,n,r)=>{var i;t.pattern||(i=t.allOf)!=null&&i.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:KP(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Tt(t,"pattern",KP(e,r),n,r)},KP=(t,e)=>{var c;const n=typeof t=="function"?t():t;if(!e.applyRegexFlags||!n.flags)return n.source;const r={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},i=r.i?n.source.toLowerCase():n.source;let s="",a=!1,l=!1,u=!1;for(let f=0;f<i.length;f++){if(a){s+=i[f],a=!1;continue}if(r.i){if(l){if(i[f].match(/[a-z]/)){u?(s+=i[f],s+=`${i[f-2]}-${i[f]}`.toUpperCase(),u=!1):i[f+1]==="-"&&((c=i[f+2])!=null&&c.match(/[a-z]/))?(s+=i[f],u=!0):s+=`${i[f]}${i[f].toUpperCase()}`;continue}}else if(i[f].match(/[a-z]/)){s+=`[${i[f]}${i[f].toUpperCase()}]`;continue}}if(r.m){if(i[f]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(i[f]==="$"){s+=`($|(?=[\r
]))`;continue}}if(r.s&&i[f]==="."){s+=l?`${i[f]}\r
`:`[${i[f]}\r
]`;continue}s+=i[f],i[f]==="\\"?a=!0:l&&i[f]==="]"?l=!1:!l&&i[f]==="["&&(l=!0)}try{const f=new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return s};function mj(t,e){var r,i,s,a;if(e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===le.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((l,u)=>({...l,[u]:_t(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",u]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:_t(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return n;if(((i=t.keyType)==null?void 0:i._def.typeName)===le.ZodString&&((s=t.keyType._def.checks)!=null&&s.length)){const l=Object.entries(pj(t.keyType._def,e)).reduce((u,[c,f])=>c==="type"?u:{...u,[c]:f},{});return{...n,propertyNames:l}}else if(((a=t.keyType)==null?void 0:a._def.typeName)===le.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};return n}function MW(t,e){if(e.mapStrategy==="record")return mj(t,e);const n=_t(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=_t(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function DW(t){const e=t.values,r=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),i=Array.from(new Set(r.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function $W(){return{not:{}}}function BW(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const im={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function FW(t,e){if(e.target==="openApi3")return JP(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in im&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((i,s)=>{const a=im[s._def.typeName];return a&&!i.includes(a)?[...i,a]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((i,s)=>{const a=typeof s._def.value;switch(a){case"string":case"number":case"boolean":return[...i,a];case"bigint":return[...i,"integer"];case"object":if(s._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===n.length){const i=r.filter((s,a,l)=>l.indexOf(s)===a);return{type:i.length>1?i:i[0],enum:n.reduce((s,a)=>s.includes(a._def.value)?s:[...s,a._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(s=>!r.includes(s))],[])};return JP(t,e)}const JP=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,i)=>_t(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function UW(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:im[t.innerType._def.typeName],nullable:!0}:{type:[im[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=_t(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=_t(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function zW(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",dj(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Tt(n,"minimum",r.value,r.message,e):Tt(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Tt(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Tt(n,"maximum",r.value,r.message,e):Tt(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Tt(n,"maximum",r.value,r.message,e));break;case"multipleOf":Tt(n,"multipleOf",r.value,r.message,e);break}return n}function VW(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":_t(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":_t(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function qW(t,e){const n={type:"object",...Object.entries(t.shape()).reduce((r,[i,s])=>{if(s===void 0||s._def===void 0)return r;const a=_t(s._def,{...e,currentPath:[...e.currentPath,"properties",i],propertyPath:[...e.currentPath,"properties",i]});return a===void 0?r:{properties:{...r.properties,[i]:a},required:s.isOptional()&&!e.openaiStrictMode?r.required:[...r.required,i]}},{properties:{},required:[]}),additionalProperties:VW(t,e)};return n.required.length||delete n.required,n}const HW=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return _t(t.innerType._def,e);const n=_t(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},ZW=(t,e)=>{if(e.pipeStrategy==="input")return _t(t.in._def,e);if(e.pipeStrategy==="output")return _t(t.out._def,e);const n=_t(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=_t(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(i=>i!==void 0)}};function WW(t,e){return _t(t.type._def,e)}function GW(t,e){const r={type:"array",uniqueItems:!0,items:_t(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Tt(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Tt(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function KW(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>_t(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:_t(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>_t(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function JW(){return{not:{}}}function XW(){return{}}const YW=(t,e)=>_t(t.innerType._def,e);function _t(t,e,n=!1){var a;const r=e.seen.get(t);if(e.override){const l=(a=e.override)==null?void 0:a.call(e,t,e,r,n);if(l!==vW)return l}if(r&&!n){const l=QW(r,e);if(l!==void 0)return"$ref"in l&&e.seenRefs.add(l.$ref),l}const i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);const s=tG(t,t.typeName,e,n);return s&&nG(t,e,s),i.jsonSchema=s,s}const QW=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"extract-to-root":const n=t.path.slice(e.basePath.length+1).join("_");return n!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[n]=t.def),{$ref:[...e.basePath,e.definitionPath,n].join("/")};case"relative":return{$ref:eG(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,i)=>e.currentPath[i]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},eG=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")},tG=(t,e,n,r)=>{switch(e){case le.ZodString:return pj(t,n);case le.ZodNumber:return zW(t,n);case le.ZodObject:return qW(t,n);case le.ZodBigInt:return SW(t,n);case le.ZodBoolean:return TW();case le.ZodDate:return hj(t,n);case le.ZodUndefined:return JW();case le.ZodNull:return BW(n);case le.ZodArray:return EW(t,n);case le.ZodUnion:case le.ZodDiscriminatedUnion:return FW(t,n);case le.ZodIntersection:return NW(t,n);case le.ZodTuple:return KW(t,n);case le.ZodRecord:return mj(t,n);case le.ZodLiteral:return IW(t,n);case le.ZodEnum:return RW(t);case le.ZodNativeEnum:return DW(t);case le.ZodNullable:return UW(t,n);case le.ZodOptional:return HW(t,n);case le.ZodMap:return MW(t,n);case le.ZodSet:return GW(t,n);case le.ZodLazy:return _t(t.getter()._def,n);case le.ZodPromise:return WW(t,n);case le.ZodNaN:case le.ZodNever:return $W();case le.ZodEffects:return CW(t,n,r);case le.ZodAny:return xW();case le.ZodUnknown:return XW();case le.ZodDefault:return kW(t,n);case le.ZodBranded:return PW(t,n);case le.ZodReadonly:return YW(t,n);case le.ZodCatch:return OW(t,n);case le.ZodPipeline:return ZW(t,n);case le.ZodFunction:case le.ZodVoid:case le.ZodSymbol:return;default:return(i=>{})()}},nG=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),rG=(t,e)=>{const n=wW(e),r=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,i=_t(t._def,r===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,r]},!1)??{},s=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;s!==void 0&&(i.title=s);const a=(()=>{if(bW(n.definitions))return;const u={},c=new Set;for(let f=0;f<500;f++){const d=Object.entries(n.definitions).filter(([p])=>!c.has(p));if(d.length===0)break;for(const[p,m]of d)u[p]=_t(kb(m),{...n,currentPath:[...n.basePath,n.definitionPath,p]},!0)??{},c.add(p)}return u})(),l=r===void 0?a?{...i,[n.definitionPath]:a}:i:n.nameStrategy==="duplicate-ref"?{...i,...a||n.seenRefs.size?{[n.definitionPath]:{...a,...n.seenRefs.size?{[r]:i}:void 0}}:void 0}:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,r].join("/"),[n.definitionPath]:{...a,[r]:i}};return n.target==="jsonSchema7"?l.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(l.$schema="https://json-schema.org/draft/2019-09/schema#"),l};function gj(t,e){return rG(t,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function iG(t,e,n){return kV({type:"json_schema",json_schema:{...n,name:e,strict:!0,schema:gj(t,{name:e})}},r=>t.parse(JSON.parse(r)))}function sG(t){return CV({type:"function",function:{name:t.name,parameters:gj(t.parameters,{name:t.name}),strict:!0,...t.description?{description:t.description}:void 0}},{callback:t.function,parser:e=>t.parameters.parse(JSON.parse(e))})}function aG(t){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:n,azureOpenAIApiKey:r,azureOpenAIBasePath:i,baseURL:s,azureADTokenProvider:a,azureOpenAIEndpoint:l}=t;if((r||a)&&i&&e)return`${i}/${e}`;if((r||a)&&l&&e)return`${l}/openai/deployments/${e}`;if(r||a){if(!n)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${n}.openai.azure.com/openai/deployments/${e}`}return s}function oG(t,e){const n=typeof e=="number"?void 0:e;return{name:t.name,description:t.description,parameters:yd(t.schema),...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}}function lG(t){return t!==void 0&&Array.isArray(t.lc_namespace)}function uG(t){return t!==void 0&&gn.isRunnable(t)&&"lc_name"in t.constructor&&typeof t.constructor.lc_name=="function"&&t.constructor.lc_name()==="RunnableToolLike"}function cG(t){return!!t&&typeof t=="object"&&"name"in t&&"schema"in t&&lj(t.schema)}function fG(t){return cG(t)||uG(t)||lG(t)}function wh(t,e){return t.lc_error_code=e,t.message=`${t.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,t}function XP(t){let e;return t.constructor.name===Um.name?(e=new Error(t.message),e.name="TimeoutError"):t.constructor.name===Kr.name?(e=new Error(t.message),e.name="AbortError"):t.status===400&&t.message.includes("tool_calls")?e=wh(t,"INVALID_TOOL_RESULTS"):t.status===401?e=wh(t,"MODEL_AUTHENTICATION"):t.status===429?e=wh(t,"MODEL_RATE_LIMIT"):t.status===404?e=wh(t,"MODEL_NOT_FOUND"):e=t,e}function dG(t){if(t)return t==="any"||t==="required"?"required":t==="auto"?"auto":t==="none"?"none":typeof t=="string"?{type:"function",function:{name:t}}:t}function hG(t){return t.anyOf!==void 0&&Array.isArray(t.anyOf)}function pG(t){const e=["namespace functions {",""];for(const n of t)n.description&&e.push(`// ${n.description}`),Object.keys(n.parameters.properties??{}).length>0?(e.push(`type ${n.name} = (_: {`),e.push(yj(n.parameters,0)),e.push("}) => any;")):e.push(`type ${n.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function yj(t,e){var r;const n=[];for(const[i,s]of Object.entries(t.properties??{}))s.description&&e<2&&n.push(`// ${s.description}`),(r=t.required)!=null&&r.includes(i)?n.push(`${i}: ${sm(s,e)},`):n.push(`${i}?: ${sm(s,e)},`);return n.map(i=>" ".repeat(e)+i).join(`
`)}function sm(t,e){if(hG(t))return t.anyOf.map(n=>sm(n,e)).join(" | ");switch(t.type){case"string":return t.enum?t.enum.map(n=>`"${n}"`).join(" | "):"string";case"number":return t.enum?t.enum.map(n=>`${n}`).join(" | "):"number";case"integer":return t.enum?t.enum.map(n=>`${n}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",yj(t,e+2),"}"].join(`
`);case"array":return t.items?`${sm(t.items,e)}[]`:"any[]";default:return""}}function mG(t,e){let n;if(fG(t)){const r=sG({name:t.name,parameters:t.schema,description:t.description});r.function.parameters?n={type:r.type,function:{name:r.function.name,description:r.function.description,parameters:r.function.parameters,...(e==null?void 0:e.strict)!==void 0?{strict:e.strict}:{}}}:n={type:"function",function:oG(t,e)}}else n=t;return(e==null?void 0:e.strict)!==void 0&&(n.function.strict=e.strict),n}function gG(t){return t.role!=="system"&&t.role!=="assistant"&&t.role!=="user"&&t.role!=="function"&&t.role!=="tool"&&console.warn(`Unknown message role: ${t.role}`),t.role}function vj(t){const e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!Do.isInstance(t))throw new Error("Invalid generic chat message");return gG(t)}default:throw new Error(`Unknown message type: ${e}`)}}function yG(t,e,n){const r=t.tool_calls;switch(t.role){case"assistant":{const i=[],s=[];for(const u of r??[])try{i.push(fj(u,{returnId:!0}))}catch(c){s.push(gW(u,c.message))}const a={function_call:t.function_call,tool_calls:r};n!==void 0&&(a.__raw_response=e);let l;return e.system_fingerprint&&(l={usage:{...e.usage},system_fingerprint:e.system_fingerprint}),t.audio&&(a.audio=t.audio),new Lf({content:t.content||"",tool_calls:i,invalid_tool_calls:s,additional_kwargs:a,response_metadata:l,id:e.id})}default:return new Do(t.content||"",t.role??"unknown")}}function vG(t,e,n,r){var u,c;const i=t.role??n,s=t.content??"";let a;t.function_call?a={function_call:t.function_call}:t.tool_calls?a={tool_calls:t.tool_calls}:a={},r&&(a.__raw_response=e),t.audio&&(a.audio={...t.audio,index:e.choices[0].index});const l={usage:{...e.usage}};if(i==="user")return new Km({content:s,response_metadata:l});if(i==="assistant"){const f=[];if(Array.isArray(t.tool_calls))for(const d of t.tool_calls)f.push({name:(u=d.function)==null?void 0:u.name,args:(c=d.function)==null?void 0:c.arguments,id:d.id,index:d.index,type:"tool_call_chunk"});return new Mo({content:s,tool_call_chunks:f,additional_kwargs:a,id:e.id,response_metadata:l})}else return i==="system"?new Jm({content:s,response_metadata:l}):i==="function"?new Gm({content:s,additional_kwargs:a,name:t.name,response_metadata:l}):i==="tool"?new n1({content:s,additional_kwargs:a,tool_call_id:t.tool_call_id,response_metadata:l}):new Wm({content:s,role:i,response_metadata:l})}function YP(t){return t.flatMap(e=>{var r;const n={role:vj(e),content:e.content};if(e.name!=null&&(n.name=e.name),e.additional_kwargs.function_call!=null&&(n.function_call=e.additional_kwargs.function_call,n.content=null),r1(e)&&((r=e.tool_calls)!=null&&r.length)?(n.tool_calls=e.tool_calls.map(mW),n.content=null):(e.additional_kwargs.tool_calls!=null&&(n.tool_calls=e.additional_kwargs.tool_calls),e.tool_call_id!=null&&(n.tool_call_id=e.tool_call_id)),e.additional_kwargs.audio&&typeof e.additional_kwargs.audio=="object"&&"id"in e.additional_kwargs.audio){const i={role:"assistant",audio:{id:e.additional_kwargs.audio.id}};return[n,i]}return n})}function QP(t,e){return uW(t)?(e==null?void 0:e.strict)!==void 0?{...t,function:{...t.function,strict:e.strict}}:t:mG(t,e)}class _G extends la{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,n){var r,i,s,a,l,u,c,f,d;if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureADTokenProvider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIEndpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(e==null?void 0:e.apiKey)??(e==null?void 0:e.openAIApiKey)??((r=e==null?void 0:e.configuration)==null?void 0:r.apiKey)??Qn("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.azureOpenAIApiKey=(e==null?void 0:e.azureOpenAIApiKey)??Qn("AZURE_OPENAI_API_KEY"),this.azureADTokenProvider=(e==null?void 0:e.azureADTokenProvider)??void 0,!this.azureOpenAIApiKey&&!this.apiKey&&!this.azureADTokenProvider)throw new Error("OpenAI or Azure OpenAI API key or Token Provider not found");if(this.azureOpenAIApiInstanceName=(e==null?void 0:e.azureOpenAIApiInstanceName)??Qn("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e==null?void 0:e.azureOpenAIApiDeploymentName)??Qn("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=(e==null?void 0:e.azureOpenAIApiVersion)??Qn("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=(e==null?void 0:e.azureOpenAIBasePath)??Qn("AZURE_OPENAI_BASE_PATH"),this.organization=((i=e==null?void 0:e.configuration)==null?void 0:i.organization)??Qn("OPENAI_ORGANIZATION"),this.azureOpenAIEndpoint=(e==null?void 0:e.azureOpenAIEndpoint)??Qn("AZURE_OPENAI_ENDPOINT"),this.modelName=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.model=this.modelName,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.maxTokens=e==null?void 0:e.maxTokens,this.logprobs=e==null?void 0:e.logprobs,this.topLogprobs=e==null?void 0:e.topLogprobs,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=(e==null?void 0:e.stopSequences)??(e==null?void 0:e.stop),this.stopSequences=this==null?void 0:this.stop,this.user=e==null?void 0:e.user,this.__includeRawResponse=e==null?void 0:e.__includeRawResponse,this.audio=e==null?void 0:e.audio,this.modalities=e==null?void 0:e.modalities,this.azureOpenAIApiKey||this.azureADTokenProvider){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath&&!this.azureOpenAIEndpoint)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName&&this.azureOpenAIBasePath){const p=this.azureOpenAIBasePath.split("/openai/deployments/");if(p.length===2){const[,m]=p;this.azureOpenAIApiDeploymentName=m}}if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found");this.apiKey=this.apiKey??"",this.streamUsage=!1}this.streaming=(e==null?void 0:e.streaming)??!1,this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage,this.clientConfig={apiKey:this.apiKey,organization:this.organization,baseURL:(n==null?void 0:n.basePath)??((s=e==null?void 0:e.configuration)==null?void 0:s.basePath),dangerouslyAllowBrowser:!0,defaultHeaders:((a=n==null?void 0:n.baseOptions)==null?void 0:a.headers)??((u=(l=e==null?void 0:e.configuration)==null?void 0:l.baseOptions)==null?void 0:u.headers),defaultQuery:((c=n==null?void 0:n.baseOptions)==null?void 0:c.params)??((d=(f=e==null?void 0:e.configuration)==null?void 0:f.baseOptions)==null?void 0:d.params),...n,...e==null?void 0:e.configuration},(e==null?void 0:e.supportsStrictToolCalling)!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling)}getLsParams(e){const n=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:n.temperature??void 0,ls_max_tokens:n.max_tokens??void 0,ls_stop:e.stop}}bindTools(e,n){let r;return(n==null?void 0:n.strict)!==void 0?r=n.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling),this.bind({tools:e.map(i=>QP(i,{strict:r})),...n})}createResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&xh(e.json_schema.schema)?iG(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}invocationParams(e,n){var a;let r;(e==null?void 0:e.strict)!==void 0?r=e.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling);let i={};(e==null?void 0:e.stream_options)!==void 0?i={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||n!=null&&n.streaming)&&(i={stream_options:{include_usage:!0}});const s={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(e==null?void 0:e.stop)??this.stopSequences,user:this.user,stream:this.streaming,functions:e==null?void 0:e.functions,function_call:e==null?void 0:e.function_call,tools:(a=e==null?void 0:e.tools)!=null&&a.length?e.tools.map(l=>QP(l,{strict:r})):void 0,tool_choice:dG(e==null?void 0:e.tool_choice),response_format:this.createResponseFormat(e==null?void 0:e.response_format),seed:e==null?void 0:e.seed,...i,parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,...this.audio||e!=null&&e.audio?{audio:this.audio||(e==null?void 0:e.audio)}:{},...this.modalities||e!=null&&e.modalities?{modalities:this.modalities||(e==null?void 0:e.modalities)}:{},...this.modelKwargs};return(e==null?void 0:e.prediction)!==void 0&&(s.prediction=e.prediction),s}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,n,r){var c,f,d,p,m,g,b,w,y,v;const i=YP(e),s={...this.invocationParams(n,{streaming:!0}),messages:i,stream:!0};let a;const l=await this.completionWithRetry(s,n);let u;for await(const x of l){const E=(c=x==null?void 0:x.choices)==null?void 0:c[0];if(x.usage&&(u=x.usage),!E)continue;const{delta:T}=E;if(!T)continue;const O=vG(T,x,a,this.__includeRawResponse);a=T.role??a;const A={prompt:n.promptIndex??0,completion:E.index??0};if(typeof O.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const C={...A};E.finish_reason!=null&&(C.finish_reason=E.finish_reason,C.system_fingerprint=x.system_fingerprint),this.logprobs&&(C.logprobs=E.logprobs);const M=new au({message:O,text:O.content,generationInfo:C});yield M,await(r==null?void 0:r.handleLLMNewToken(M.text??"",A,void 0,void 0,void 0,{chunk:M}))}if(u){const x={...((f=u.prompt_tokens_details)==null?void 0:f.audio_tokens)!==null&&{audio:(d=u.prompt_tokens_details)==null?void 0:d.audio_tokens},...((p=u.prompt_tokens_details)==null?void 0:p.cached_tokens)!==null&&{cache_read:(m=u.prompt_tokens_details)==null?void 0:m.cached_tokens}},E={...((g=u.completion_tokens_details)==null?void 0:g.audio_tokens)!==null&&{audio:(b=u.completion_tokens_details)==null?void 0:b.audio_tokens},...((w=u.completion_tokens_details)==null?void 0:w.reasoning_tokens)!==null&&{reasoning:(y=u.completion_tokens_details)==null?void 0:y.reasoning_tokens}};yield new au({message:new Mo({content:"",response_metadata:{usage:{...u}},usage_metadata:{input_tokens:u.prompt_tokens,output_tokens:u.completion_tokens,total_tokens:u.total_tokens,...Object.keys(x).length>0&&{input_token_details:x},...Object.keys(E).length>0&&{output_token_details:E}}}),text:""})}if((v=n.signal)!=null&&v.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _generate(e,n,r){var l,u;const i={},s=this.invocationParams(n),a=YP(e);if(s.stream){const c=this._streamResponseChunks(e,n,r),f={};for await(const w of c){w.message.response_metadata={...w.generationInfo,...w.message.response_metadata};const y=((l=w.generationInfo)==null?void 0:l.completion)??0;f[y]===void 0?f[y]=w:f[y]=f[y].concat(w)}const d=Object.entries(f).sort(([w],[y])=>parseInt(w,10)-parseInt(y,10)).map(([w,y])=>y),{functions:p,function_call:m}=this.invocationParams(n),g=await this.getEstimatedTokenCountFromPrompt(e,p,m),b=await this.getNumTokensFromGenerations(d);return i.input_tokens=g,i.output_tokens=b,i.total_tokens=g+b,{generations:d,llmOutput:{estimatedTokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}else{let c;n.response_format&&n.response_format.type==="json_schema"?c=await this.betaParsedCompletionWithRetry({...s,stream:!1,messages:a},{signal:n==null?void 0:n.signal,...n==null?void 0:n.options}):c=await this.completionWithRetry({...s,stream:!1,messages:a},{signal:n==null?void 0:n.signal,...n==null?void 0:n.options});const{completion_tokens:f,prompt_tokens:d,total_tokens:p,prompt_tokens_details:m,completion_tokens_details:g}=(c==null?void 0:c.usage)??{};f&&(i.output_tokens=(i.output_tokens??0)+f),d&&(i.input_tokens=(i.input_tokens??0)+d),p&&(i.total_tokens=(i.total_tokens??0)+p),((m==null?void 0:m.audio_tokens)!==null||(m==null?void 0:m.cached_tokens)!==null)&&(i.input_token_details={...(m==null?void 0:m.audio_tokens)!==null&&{audio:m==null?void 0:m.audio_tokens},...(m==null?void 0:m.cached_tokens)!==null&&{cache_read:m==null?void 0:m.cached_tokens}}),((g==null?void 0:g.audio_tokens)!==null||(g==null?void 0:g.reasoning_tokens)!==null)&&(i.output_token_details={...(g==null?void 0:g.audio_tokens)!==null&&{audio:g==null?void 0:g.audio_tokens},...(g==null?void 0:g.reasoning_tokens)!==null&&{reasoning:g==null?void 0:g.reasoning_tokens}});const b=[];for(const w of(c==null?void 0:c.choices)??[]){const v={text:((u=w.message)==null?void 0:u.content)??"",message:yG(w.message??{role:"assistant"},c,this.__includeRawResponse)};v.generationInfo={...w.finish_reason?{finish_reason:w.finish_reason}:{},...w.logprobs?{logprobs:w.logprobs}:{}},r1(v.message)&&(v.message.usage_metadata=i),v.message=new Lf({...v.message}),b.push(v)}return{generations:b,llmOutput:{tokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}}async getEstimatedTokenCountFromPrompt(e,n,r){let i=(await this.getNumTokensFromMessages(e)).totalCount;if(n&&r!=="auto"){const s=pG(n);i+=await this.getNumTokens(s),i+=9}return n&&e.find(s=>s._getType()==="system")&&(i-=4),r==="none"?i+=1:typeof r=="object"&&(i+=await this.getNumTokens(r.name)+4),i}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async r=>{var i;return(i=r.message.additional_kwargs)!=null&&i.function_call?(await this.getNumTokensFromMessages([r.message])).countPerMessage[0]:await this.getNumTokens(r.message.content)}))).reduce((r,i)=>r+i,0)}async getNumTokensFromMessages(e){let n=0,r=0,i=0;this.model==="gpt-3.5-turbo-0301"?(r=4,i=-1):(r=3,i=1);const s=await Promise.all(e.map(async a=>{var p,m,g,b,w,y;const l=await this.getNumTokens(a.content),u=await this.getNumTokens(vj(a)),c=a.name!==void 0?i+await this.getNumTokens(a.name):0;let f=l+r+u+c;const d=a;if(d._getType()==="function"&&(f-=2),(p=d.additional_kwargs)!=null&&p.function_call&&(f+=3),(m=d==null?void 0:d.additional_kwargs.function_call)!=null&&m.name&&(f+=await this.getNumTokens((g=d.additional_kwargs.function_call)==null?void 0:g.name)),(b=d.additional_kwargs.function_call)!=null&&b.arguments)try{f+=await this.getNumTokens(JSON.stringify(JSON.parse((w=d.additional_kwargs.function_call)==null?void 0:w.arguments)))}catch(v){console.error("Error parsing function arguments",v,JSON.stringify(d.additional_kwargs.function_call)),f+=await this.getNumTokens((y=d.additional_kwargs.function_call)==null?void 0:y.arguments)}return n+=f,f}));return n+=3,{totalCount:n,countPerMessage:s}}async completionWithRetry(e,n){const r=this._getClientOptions(n);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,r)}catch(i){throw XP(i)}})}async betaParsedCompletionWithRetry(e,n){const r=this._getClientOptions(n);return this.caller.call(async()=>{try{return await this.client.beta.chat.completions.parse(e,r)}catch(i){throw XP(i)}})}_getClientOptions(e){if(!this.client){const r={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL,azureOpenAIEndpoint:this.azureOpenAIEndpoint},i=aG(r),s={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};s.baseURL||delete s.baseURL,this.client=new pt(s)}const n={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(n.headers={"api-key":this.azureOpenAIApiKey,...n.headers},n.query={"api-version":this.azureOpenAIApiVersion,...n.query}),n}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((n,r)=>(r&&r.tokenUsage&&(n.tokenUsage.completionTokens+=r.tokenUsage.completionTokens??0,n.tokenUsage.promptTokens+=r.tokenUsage.promptTokens??0,n.tokenUsage.totalTokens+=r.tokenUsage.totalTokens??0),n),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(e,n){let r,i,s,a;bG(e)?(r=e.schema,i=e.name,s=e.method,a=e.includeRaw):(r=e,i=n==null?void 0:n.name,s=n==null?void 0:n.method,a=n==null?void 0:n.includeRaw);let l,u;if((n==null?void 0:n.strict)!==void 0&&s==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(s==="jsonMode")l=this.bind({response_format:{type:"json_object"}}),xh(r)?u=HP.fromZodSchema(r):u=new ZP;else if(s==="jsonSchema")l=this.bind({response_format:{type:"json_schema",json_schema:{name:i??"extract",description:r.description,schema:r,strict:n==null?void 0:n.strict}}}),xh(r)?u=HP.fromZodSchema(r):u=new ZP;else{let p=i??"extract";if(xh(r)){const m=yd(r);l=this.bind({tools:[{type:"function",function:{name:p,description:m.description,parameters:m}}],tool_choice:{type:"function",function:{name:p}},...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}),u=new WP({returnSingle:!0,keyName:p,zodSchema:r})}else{let m;typeof r.name=="string"&&typeof r.parameters=="object"&&r.parameters!=null?(m=r,p=r.name):(p=r.title??p,m={name:p,description:r.description??"",parameters:r}),l=this.bind({tools:[{type:"function",function:m}],tool_choice:{type:"function",function:{name:p}},...(n==null?void 0:n.strict)!==void 0?{strict:n.strict}:{}}),u=new WP({returnSingle:!0,keyName:p})}}if(!a)return l.pipe(u);const c=rm.assign({parsed:(p,m)=>u.invoke(p.raw,m)}),f=rm.assign({parsed:()=>null}),d=c.withFallbacks({fallbacks:[f]});return As.from([{raw:l},d])}}function xh(t){return typeof(t==null?void 0:t.parse)=="function"}function bG(t){return t!==void 0&&typeof t.schema=="object"}const wG="modulepreload",xG=function(t){return"/"+t},eO={},_v=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");i=Promise.all(n.map(a=>{if(a=xG(a),a in eO)return;eO[a]=!0;const l=a.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const p=s[d];if(p.href===a&&(!l||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${u}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":wG,l||(f.as="script",f.crossOrigin=""),f.href=a,document.head.appendChild(f),l)return new Promise((d,p)=>{f.addEventListener("load",d),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})};class E1 extends gn{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:n}=e;if(n.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){const n=this.partialVariables??{},r={};for(const[s,a]of Object.entries(n))typeof a=="string"?r[s]=a:r[s]=await a();return{...r,...e}}async invoke(e,n){return this._callWithConfig(r=>this.formatPromptValue(r),e,{...n,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:n}=await _v(()=>Promise.resolve().then(()=>rO),void 0);return n.deserialize(e)}case void 0:{const{PromptTemplate:n}=await _v(()=>Promise.resolve().then(()=>rO),void 0);return n.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:n}=await _v(()=>import("./few_shot-DsiuUICR.js"),__vite__mapDeps([]));return n.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class Cb extends E1{async formatPromptValue(e){const n=await this.format(e);return new ij(n)}}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var EG=Object.prototype.toString,Pu=Array.isArray||function(e){return EG.call(e)==="[object Array]"};function S1(t){return typeof t=="function"}function SG(t){return Pu(t)?"array":typeof t}function bv(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function tO(t,e){return t!=null&&typeof t=="object"&&e in t}function TG(t,e){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(e)}var PG=RegExp.prototype.test;function OG(t,e){return PG.call(t,e)}var AG=/\S/;function kG(t){return!OG(AG,t)}var CG={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function RG(t){return String(t).replace(/[&<>"'`=\/]/g,function(n){return CG[n]})}var LG=/\s*/,NG=/\s+/,nO=/\s*=/,IG=/\s*\}/,jG=/#|\^|\/|>|\{|&|=|!/;function MG(t,e){if(!t)return[];var n=!1,r=[],i=[],s=[],a=!1,l=!1,u="",c=0;function f(){if(a&&!l)for(;s.length;)delete i[s.pop()];else s=[];a=!1,l=!1}var d,p,m;function g(C){if(typeof C=="string"&&(C=C.split(NG,2)),!Pu(C)||C.length!==2)throw new Error("Invalid tags: "+C);d=new RegExp(bv(C[0])+"\\s*"),p=new RegExp("\\s*"+bv(C[1])),m=new RegExp("\\s*"+bv("}"+C[1]))}g(e||vr.tags);for(var b=new _d(t),w,y,v,x,E,T;!b.eos();){if(w=b.pos,v=b.scanUntil(d),v)for(var O=0,A=v.length;O<A;++O)x=v.charAt(O),kG(x)?(s.push(i.length),u+=x):(l=!0,n=!0,u+=" "),i.push(["text",x,w,w+1]),w+=1,x===`
`&&(f(),u="",c=0,n=!1);if(!b.scan(d))break;if(a=!0,y=b.scan(jG)||"name",b.scan(LG),y==="="?(v=b.scanUntil(nO),b.scan(nO),b.scanUntil(p)):y==="{"?(v=b.scanUntil(m),b.scan(IG),b.scanUntil(p),y="&"):v=b.scanUntil(p),!b.scan(p))throw new Error("Unclosed tag at "+b.pos);if(y==">"?E=[y,v,w,b.pos,u,c,n]:E=[y,v,w,b.pos],c++,i.push(E),y==="#"||y==="^")r.push(E);else if(y==="/"){if(T=r.pop(),!T)throw new Error('Unopened section "'+v+'" at '+w);if(T[1]!==v)throw new Error('Unclosed section "'+T[1]+'" at '+w)}else y==="name"||y==="{"||y==="&"?l=!0:y==="="&&g(v)}if(f(),T=r.pop(),T)throw new Error('Unclosed section "'+T[1]+'" at '+b.pos);return $G(DG(i))}function DG(t){for(var e=[],n,r,i=0,s=t.length;i<s;++i)n=t[i],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(e.push(n),r=n));return e}function $G(t){for(var e=[],n=e,r=[],i,s,a=0,l=t.length;a<l;++a)switch(i=t[a],i[0]){case"#":case"^":n.push(i),r.push(i),n=i[4]=[];break;case"/":s=r.pop(),s[5]=i[2],n=r.length>0?r[r.length-1][4]:e;break;default:n.push(i)}return e}function _d(t){this.string=t,this.tail=t,this.pos=0}_d.prototype.eos=function(){return this.tail===""};_d.prototype.scan=function(e){var n=this.tail.match(e);if(!n||n.index!==0)return"";var r=n[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r};_d.prototype.scanUntil=function(e){var n=this.tail.search(e),r;switch(n){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=r.length,r};function ou(t,e){this.view=t,this.cache={".":this.view},this.parent=e}ou.prototype.push=function(e){return new ou(e,this)};ou.prototype.lookup=function(e){var n=this.cache,r;if(n.hasOwnProperty(e))r=n[e];else{for(var i=this,s,a,l,u=!1;i;){if(e.indexOf(".")>0)for(s=i.view,a=e.split("."),l=0;s!=null&&l<a.length;)l===a.length-1&&(u=tO(s,a[l])||TG(s,a[l])),s=s[a[l++]];else s=i.view[e],u=tO(i.view,e);if(u){r=s;break}i=i.parent}n[e]=r}return S1(r)&&(r=r.call(this.view)),r};function or(){this.templateCache={_cache:{},set:function(e,n){this._cache[e]=n},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}or.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};or.prototype.parse=function(e,n){var r=this.templateCache,i=e+":"+(n||vr.tags).join(":"),s=typeof r<"u",a=s?r.get(i):void 0;return a==null&&(a=MG(e,n),s&&r.set(i,a)),a};or.prototype.render=function(e,n,r,i){var s=this.getConfigTags(i),a=this.parse(e,s),l=n instanceof ou?n:new ou(n,void 0);return this.renderTokens(a,l,r,e,i)};or.prototype.renderTokens=function(e,n,r,i,s){for(var a="",l,u,c,f=0,d=e.length;f<d;++f)c=void 0,l=e[f],u=l[0],u==="#"?c=this.renderSection(l,n,r,i,s):u==="^"?c=this.renderInverted(l,n,r,i,s):u===">"?c=this.renderPartial(l,n,r,s):u==="&"?c=this.unescapedValue(l,n):u==="name"?c=this.escapedValue(l,n,s):u==="text"&&(c=this.rawValue(l)),c!==void 0&&(a+=c);return a};or.prototype.renderSection=function(e,n,r,i,s){var a=this,l="",u=n.lookup(e[1]);function c(p){return a.render(p,n,r,s)}if(u){if(Pu(u))for(var f=0,d=u.length;f<d;++f)l+=this.renderTokens(e[4],n.push(u[f]),r,i,s);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")l+=this.renderTokens(e[4],n.push(u),r,i,s);else if(S1(u)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(n.view,i.slice(e[3],e[5]),c),u!=null&&(l+=u)}else l+=this.renderTokens(e[4],n,r,i,s);return l}};or.prototype.renderInverted=function(e,n,r,i,s){var a=n.lookup(e[1]);if(!a||Pu(a)&&a.length===0)return this.renderTokens(e[4],n,r,i,s)};or.prototype.indentPartial=function(e,n,r){for(var i=n.replace(/[^ \t]/g,""),s=e.split(`
`),a=0;a<s.length;a++)s[a].length&&(a>0||!r)&&(s[a]=i+s[a]);return s.join(`
`)};or.prototype.renderPartial=function(e,n,r,i){if(r){var s=this.getConfigTags(i),a=S1(r)?r(e[1]):r[e[1]];if(a!=null){var l=e[6],u=e[5],c=e[4],f=a;u==0&&c&&(f=this.indentPartial(a,c,l));var d=this.parse(f,s);return this.renderTokens(d,n,r,f,i)}}};or.prototype.unescapedValue=function(e,n){var r=n.lookup(e[1]);if(r!=null)return r};or.prototype.escapedValue=function(e,n,r){var i=this.getConfigEscape(r)||vr.escape,s=n.lookup(e[1]);if(s!=null)return typeof s=="number"&&i===vr.escape?String(s):i(s)};or.prototype.rawValue=function(e){return e[1]};or.prototype.getConfigTags=function(e){return Pu(e)?e:e&&typeof e=="object"?e.tags:void 0};or.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!Pu(e))return e.escape};var vr={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){Kf.templateCache=t},get templateCache(){return Kf.templateCache}},Kf=new or;vr.clearCache=function(){return Kf.clearCache()};vr.parse=function(e,n){return Kf.parse(e,n)};vr.render=function(e,n,r,i){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+SG(e)+'" was given as the first argument for mustache#render(template, view, partials)');return Kf.render(e,n,r,i)};vr.escape=RG;vr.Scanner=_d;vr.Context=ou;vr.Writer=or;function _j(){vr.escape=t=>t}const am=t=>{const e=t.split(""),n=[],r=(s,a)=>{for(let l=a;l<e.length;l+=1)if(s.includes(e[l]))return l;return-1};let i=0;for(;i<e.length;)if(e[i]==="{"&&i+1<e.length&&e[i+1]==="{")n.push({type:"literal",text:"{"}),i+=2;else if(e[i]==="}"&&i+1<e.length&&e[i+1]==="}")n.push({type:"literal",text:"}"}),i+=2;else if(e[i]==="{"){const s=r("}",i);if(s<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:e.slice(i+1,s).join("")}),i=s+1}else{if(e[i]==="}")throw new Error("Single '}' in template.");{const s=r("{}",i),a=(s<0?e.slice(i):e.slice(i,s)).join("");n.push({type:"literal",text:a}),i=s<0?e.length:s}}return n},BG=t=>t.map(e=>e[0]==="name"?{type:"variable",name:e[1].includes(".")?e[1].split(".")[0]:e[1]}:["#","&","^",">"].includes(e[0])?{type:"variable",name:e[1]}:{type:"literal",text:e[1]}),Rb=t=>{_j();const e=vr.parse(t);return BG(e)},FG=(t,e)=>am(t).reduce((n,r)=>{if(r.type==="variable"){if(r.name in e){const i=typeof e[r.name]=="string"?e[r.name]:JSON.stringify(e[r.name]);return n+i}throw new Error(`(f-string) Missing value for input ${r.name}`)}return n+r.text},""),UG=(t,e)=>(_j(),vr.render(t,e)),Lb={"f-string":FG,mustache:UG},zG={"f-string":am,mustache:Rb},kl=(t,e,n)=>{try{return Lb[e](t,n)}catch(r){throw Xm(r,"INVALID_PROMPT_INPUT")}},VG=(t,e)=>zG[e](t),bj=(t,e,n)=>{if(!(e in Lb)){const r=Object.keys(Lb);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${r}`)}try{const r=n.reduce((i,s)=>(i[s]="foo",i),{});Array.isArray(t)?t.forEach(i=>{if(i.type==="text")kl(i.text,e,r);else if(i.type==="image_url")if(typeof i.image_url=="string")kl(i.image_url,e,r);else{const s=i.image_url.url;kl(s,e,r)}else throw new Error(`Invalid message template received. ${JSON.stringify(i,null,2)}`)}):kl(t,e,r)}catch(r){throw new Error(`Invalid prompt schema: ${r.message}`)}};class Si extends Cb{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let n=this.inputVariables;this.partialVariables&&(n=n.concat(Object.keys(this.partialVariables))),bj(this.template,this.templateFormat,n)}}_getPromptType(){return"prompt"}async format(e){const n=await this.mergePartialAndUserVariables(e);return kl(this.template,this.templateFormat,n)}static fromExamples(e,n,r,i=`

`,s=""){const a=[s,...e,n].join(i);return new Si({inputVariables:r,template:a})}static fromTemplate(e,n){const{templateFormat:r="f-string",...i}=n??{},s=new Set;return VG(e,r).forEach(a=>{a.type==="variable"&&s.add(a.name)}),new Si({inputVariables:[...s],templateFormat:r,template:e,...i})}async partial(e){const n=this.inputVariables.filter(s=>!(s in e)),r={...this.partialVariables??{},...e},i={...this,inputVariables:n,partialVariables:r};return new Si(i)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new Si({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}const rO=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:Si},Symbol.toStringTag,{value:"Module"}));class tf extends E1{static lc_name(){return"ImagePromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","image"]}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e.template,this.templateFormat=e.templateFormat??this.templateFormat,this.validateTemplate=e.validateTemplate??this.validateTemplate,this.additionalContentFields=e.additionalContentFields,this.validateTemplate){let n=this.inputVariables;this.partialVariables&&(n=n.concat(Object.keys(this.partialVariables))),bj([{type:"image_url",image_url:this.template}],this.templateFormat,n)}}_getPromptType(){return"prompt"}async partial(e){const n=this.inputVariables.filter(s=>!(s in e)),r={...this.partialVariables??{},...e},i={...this,inputVariables:n,partialVariables:r};return new tf(i)}async format(e){const n={};for(const[a,l]of Object.entries(this.template))typeof l=="string"?n[a]=kl(l,this.templateFormat,e):n[a]=l;const r=e.url||n.url,i=e.detail||n.detail;if(!r)throw new Error("Must provide either an image URL.");if(typeof r!="string")throw new Error("url must be a string.");const s={url:r};return i&&(s.detail=i),s}async formatPromptValue(e){const n=await this.format(e);return new V7(n)}}class T1 extends gn{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}async invoke(e,n){return this._callWithConfig(r=>this.formatMessages(r),e,{...n,runType:"prompt"})}}class qG extends T1{static lc_name(){return"MessagesPlaceholder"}constructor(e){typeof e=="string"&&(e={variableName:e}),super(e),Object.defineProperty(this,"variableName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"optional",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.variableName=e.variableName,this.optional=e.optional??!1}get inputVariables(){return[this.variableName]}async formatMessages(e){const n=e[this.variableName];if(this.optional&&!n)return[];if(!n){const i=new Error(`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined`);throw i.name="InputFormatError",i}let r;try{Array.isArray(n)?r=n.map(pa):r=[pa(n)]}catch(i){const s=typeof n=="string"?n:JSON.stringify(n,null,2),a=new Error([`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages or coerceable values as input.`,`Received value: ${s}`,`Additional message: ${i.message}`].join(`

`));throw a.name="InputFormatError",a.lc_error_code=i.lc_error_code,a}return r}}class HG extends T1{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}}class ZG extends E1{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){const n=await this.formatMessages(e);return new sj(n)}}class WG extends HG{static lc_name(){return"ChatMessagePromptTemplate"}constructor(e,n){"prompt"in e||(e={prompt:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}async format(e){return new Do(await this.prompt.format(e),this.role)}static fromTemplate(e,n,r){return new this(Si.fromTemplate(e,{templateFormat:r==null?void 0:r.templateFormat}),n)}}class P1 extends T1{static _messageClass(){throw new Error("Can not invoke _messageClass from inside _StringImageMessagePromptTemplate")}constructor(e,n){if("prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"additionalOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"messageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chatMessageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,Array.isArray(this.prompt)){let r=[];this.prompt.forEach(i=>{"inputVariables"in i&&(r=r.concat(i.inputVariables))}),this.inputVariables=r}else this.inputVariables=this.prompt.inputVariables;this.additionalOptions=n??this.additionalOptions}createMessage(e){const n=this.constructor;if(n._messageClass()){const r=n._messageClass();return new r({content:e})}else if(n.chatMessageClass){const r=n.chatMessageClass();return new r({content:e,role:this.getRoleFromMessageClass(r.lc_name())})}else throw new Error("No message class defined")}getRoleFromMessageClass(e){switch(e){case"HumanMessage":return"human";case"AIMessage":return"ai";case"SystemMessage":return"system";case"ChatMessage":return"chat";default:throw new Error("Invalid message class name")}}static fromTemplate(e,n){if(typeof e=="string")return new this(Si.fromTemplate(e,n));const r=[];for(const i of e)if(typeof i=="string"||typeof i=="object"&&"text"in i){let s="";typeof i=="string"?s=i:typeof i.text=="string"&&(s=i.text??"");const a={...n,...typeof i!="string"?{additionalContentFields:i}:{}};r.push(Si.fromTemplate(s,a))}else if(typeof i=="object"&&"image_url"in i){let s=i.image_url??"",a,l=[];if(typeof s=="string"){let u;(n==null?void 0:n.templateFormat)==="mustache"?u=Rb(s):u=am(s);const c=u.flatMap(f=>f.type==="variable"?[f.name]:[]);if(((c==null?void 0:c.length)??0)>0){if(c.length>1)throw new Error(`Only one format variable allowed per image template.
Got: ${c}
From: ${s}`);l=[c[0]]}else l=[];s={url:s},a=new tf({template:s,inputVariables:l,templateFormat:n==null?void 0:n.templateFormat,additionalContentFields:i})}else if(typeof s=="object"){if("url"in s){let u;(n==null?void 0:n.templateFormat)==="mustache"?u=Rb(s.url):u=am(s.url),l=u.flatMap(c=>c.type==="variable"?[c.name]:[])}else l=[];a=new tf({template:s,inputVariables:l,templateFormat:n==null?void 0:n.templateFormat,additionalContentFields:i})}else throw new Error("Invalid image template");r.push(a)}return new this({prompt:r,additionalOptions:n})}async format(e){if(this.prompt instanceof Cb){const n=await this.prompt.format(e);return this.createMessage(n)}else{const n=[];for(const r of this.prompt){let i={};if(!("inputVariables"in r))throw new Error(`Prompt ${r} does not have inputVariables defined.`);for(const s of r.inputVariables)i||(i={[s]:e[s]}),i={...i,[s]:e[s]};if(r instanceof Cb){const s=await r.format(i);let a;"additionalContentFields"in r&&(a=r.additionalContentFields),n.push({...a,type:"text",text:s})}else if(r instanceof tf){const s=await r.format(i);let a;"additionalContentFields"in r&&(a=r.additionalContentFields),n.push({...a,type:"image_url",image_url:s})}}return this.createMessage(n)}}async formatMessages(e){return[await this.format(e)]}}class wj extends P1{static _messageClass(){return xu}static lc_name(){return"HumanMessagePromptTemplate"}}class GG extends P1{static _messageClass(){return Lf}static lc_name(){return"AIMessagePromptTemplate"}}class KG extends P1{static _messageClass(){return cI}static lc_name(){return"SystemMessagePromptTemplate"}}function JG(t){return typeof t.formatMessages=="function"}function XG(t,e){if(JG(t)||Zm(t))return t;if(Array.isArray(t)&&t[0]==="placeholder"){const i=t[1];if(typeof i!="string"||i[0]!=="{"||i[i.length-1]!=="}")throw new Error(`Invalid placeholder template: "${t[1]}". Expected a variable name surrounded by curly braces.`);const s=i.slice(1,-1);return new qG({variableName:s,optional:!0})}const n=pa(t);let r;if(typeof n.content=="string"?r=n.content:r=n.content.map(i=>"text"in i?{...i,text:i.text}:"image_url"in i?{...i,image_url:i.image_url}:i),n._getType()==="human")return wj.fromTemplate(r,e);if(n._getType()==="ai")return GG.fromTemplate(r,e);if(n._getType()==="system")return KG.fromTemplate(r,e);if(Do.isInstance(n))return WG.fromTemplate(n.content,n.role,e);throw new Error(`Could not coerce message prompt template from input. Received message type: "${n._getType()}".`)}function YG(t){return t.constructor.lc_name()==="MessagesPlaceholder"}class nf extends ZG{static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){const n=new Set;for(const l of this.promptMessages)if(!(l instanceof Ns))for(const u of l.inputVariables)n.add(u);const r=this.inputVariables,i=new Set(this.partialVariables?r.concat(Object.keys(this.partialVariables)):r),s=new Set([...i].filter(l=>!n.has(l)));if(s.size>0)throw new Error(`Input variables \`${[...s]}\` are not used in any of the prompt messages.`);const a=new Set([...n].filter(l=>!i.has(l)));if(a.size>0)throw new Error(`Input variables \`${[...a]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async _parseImagePrompts(e,n){if(typeof e.content=="string")return e;const r=await Promise.all(e.content.map(async i=>{if(i.type!=="image_url")return i;let s="";typeof i.image_url=="string"?s=i.image_url:s=i.image_url.url;const l=await Si.fromTemplate(s,{templateFormat:this.templateFormat}).format(n);return typeof i.image_url!="string"&&"url"in i.image_url?i.image_url.url=l:i.image_url=l,i}));return e.content=r,e}async formatMessages(e){const n=await this.mergePartialAndUserVariables(e);let r=[];for(const i of this.promptMessages)if(i instanceof Ns)r.push(await this._parseImagePrompts(i,n));else{const s=i.inputVariables.reduce((l,u)=>{if(!(u in n)&&!(YG(i)&&i.optional))throw Xm(new Error(`Missing value for input variable \`${u.toString()}\``),"INVALID_PROMPT_INPUT");return l[u]=n[u],l},{}),a=await i.formatMessages(s);r=r.concat(a)}return r}async partial(e){const n=this.inputVariables.filter(s=>!(s in e)),r={...this.partialVariables??{},...e},i={...this,inputVariables:n,partialVariables:r};return new nf(i)}static fromTemplate(e,n){const r=Si.fromTemplate(e,n),i=new wj({prompt:r});return this.fromMessages([i])}static fromMessages(e,n){const r=e.reduce((a,l)=>a.concat(l instanceof nf?l.promptMessages:[XG(l,n)]),[]),i=e.reduce((a,l)=>l instanceof nf?Object.assign(a,l.partialVariables):a,Object.create(null)),s=new Set;for(const a of r)if(!(a instanceof Ns))for(const l of a.inputVariables)l in i||s.add(l);return new this({...n,inputVariables:[...s],promptMessages:r,partialVariables:i,templateFormat:n==null?void 0:n.templateFormat})}static fromPromptMessages(e){return this.fromMessages(e)}}const QG=new _G({model:"gpt-4o",apiKey:"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"}),eK=async t=>{const e=`
    Objective:
    Generate a comprehensive list of questions that potential home buyers may have regarding the location of a property they are interested in purchasing. The questions should be tailored to different types of buyers, including but not limited to single individuals, married couples with children, retirees, and professionals.
    
    Buyer Profiles to Consider:
    
    Single Individuals
    Married Couples without Children
    Married Couples with Children
    Retirees
    Young Families
    Professionals/Commuters
    Investors
    First-Time Home Buyers
    Aspects of Location to Address:
    
    Safety and Security
    
    Crime rates
    Neighborhood watch programs
    Street lighting
    Schools and Education
    
    Quality of local schools
    Availability of preschools and daycare centers
    Proximity to universities or colleges
    Amenities and Services
    
    Nearby grocery stores, pharmacies, and shopping centers
    Access to healthcare facilities and hospitals
    Availability of parks and recreational areas
    Transportation and Commute
    
    Proximity to public transportation (buses, trains, subways)
    Average commute times to major employment centers
    Traffic conditions and ease of access to highways
    Community and Lifestyle
    
    Demographics of the neighborhood
    Community events and activities
    Noise levels and overall ambiance
    Recreational Facilities
    
    Parks, playgrounds, and sports facilities
    Fitness centers and gyms
    Cultural venues (theaters, museums, galleries)
    Future Development and Growth
    
    Planned infrastructure projects
    Zoning laws and potential for property value appreciation
    Upcoming commercial or residential developments
    Environmental Factors
    
    Air and water quality
    Green spaces and sustainability initiatives
    Risk of natural disasters (floods, earthquakes, etc.)
    Financial Considerations
    
    Property taxes in the area
    Cost of living
    Availability of local incentives or grants
    Instructions:
    
    
    Ensure Comprehensive Coverage:
    Make sure that all aspects of location mentioned above are covered. Each question should aim to uncover information that is crucial for the buyer's decision-making process.
    
    Use Clear and Concise Language:
    Frame questions in a straightforward manner to ensure clarity. Avoid ambiguous or overly complex phrasing.
    
    Vary the Depth of Questions:
    Include both general questions (e.g., "Is the neighborhood safe?")
    
    Consider Long-Term Implications:
    Encourage questions that think about future changes and how they might affect the buyer, such as upcoming developments or changes in local policies.
    
    {input}
    your response:
    `,n=`here are the information about the estate keep each question short and straightforward (max 100 characters) ${t}. Now generate 5 questions `,i=nf.fromTemplate(e).pipe(QG.withStructuredOutput(os.object({question:os.array(os.string().describe("Maximum 5 questions"))})));try{const s=await i.invoke({input:n});return console.log(s),s}catch(s){console.log(s)}};function xj({item:t,firstItem:e}){const[n,r]=K.useState([]),[i,s]=K.useState(e),[a,l]=K.useState(""),[u,c]=K.useState(!1),[f,d]=K.useState(null),[p,m]=K.useState("..."),[g,b]=K.useState(Dy()),[w,y]=K.useState([]),[v,x]=K.useState(["loading..."]),E=K.useRef(null);K.useRef(null),K.useRef(null);const T=async({msg:P,otherItems:N})=>{try{const $=await fetch("https://full-stack-estate-main-k9cj.onrender.com/api/ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threadId:g,humanMessage:P,estateData:N})});if(!$.ok)throw new Error(`HTTP error! status: ${$.status}`);const D=$.body.getReader(),z=new TextDecoder("utf-8");let G="";for(;;){const{value:W,done:Z}=await D.read();if(Z)break;const q=z.decode(W,{stream:!0});G+=q;let B=G.split(`
`);G=B.pop();for(let j of B)if(j.trim()){const U=JSON.parse(j);U.event==="agent"&&U.message==="Completed"&&(r(H=>[...H,{sender:"ai",content:U.data}]),console.log(U)),U.event==="place_search"&&U.message==="Search completed"&&(d(U.data),console.log(U.data)),console.log(U.message),m(U.message),console.log(p),y(H=>[...H,U])}}if(G.trim()){const W=JSON.parse(G);y(Z=>[...Z,W])}c(!1)}catch($){console.log($),c(!1)}},O=async()=>{const{images:P,...N}=t;c(!0),r(D=>[...D,{sender:"human",content:a}]);const $=a;l(""),await T({msg:$,otherItems:N})},A=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),O())},C=()=>{l(E.current.value);const P=E.current;P.style.height="auto",P.style.height=`${P.scrollHeight}px`},M=async P=>{c(!0);const{images:N,...$}=t;r(D=>[...D,{sender:"human",content:P}]),await T({msg:P,otherItems:$})},R=()=>{i&&(r([]),b(Dy())),s(P=>!P)};return K.useEffect(()=>{const P=Dy();b(P),(async()=>{const $=await eK(t);console.log($),x($.question)})()},[]),I.jsxs("div",{className:"item",children:[I.jsxs("div",{className:"card",children:[I.jsx(Fs,{to:`/${t.id}`,className:"imageContainer",children:I.jsx("img",{src:t.images[0],alt:""})}),I.jsxs("div",{className:"textContainer",children:[I.jsx("h2",{className:"title",children:I.jsx(Fs,{to:`/${t.id}`,children:t.title})}),I.jsxs("p",{className:"address",children:[I.jsx("img",{src:"/pin.png",alt:""}),I.jsx("span",{children:t.address})]}),I.jsxs("p",{className:"price",children:["$ ",t.price]}),I.jsxs("div",{className:"bottom",children:[I.jsxs("div",{className:"features",children:[I.jsxs("div",{className:"feature",children:[I.jsx("img",{src:"/bed.png",alt:""}),I.jsxs("span",{children:[t.bedroom," bedroom"]})]}),I.jsxs("div",{className:"feature",children:[I.jsx("img",{src:"/bath.png",alt:""}),I.jsxs("span",{children:[t.bathroom," bathroom"]})]})]}),I.jsxs("div",{className:"icons",children:[I.jsx("button",{className:"ask-ai",onClick:R,children:i?"close":"Ask AI"}),I.jsx("div",{className:"icon",children:I.jsx("img",{src:"/save.png",alt:""})}),I.jsx("div",{className:"icon",children:I.jsx("img",{src:"/chat.png",alt:""})})]})]})]})]}),I.jsx(x5,{children:i&&I.jsxs(y5.div,{initial:{height:0},animate:{height:300},exit:{height:0},className:"chat-ai-container",children:[I.jsx("div",{className:"messages-box",children:n.length===0?I.jsxs("div",{className:"follow-up-container",children:[I.jsx("span",{children:"generated by AI ⋆˙⟡"}),v.map((P,N)=>I.jsx("button",{onClick:async()=>{await M(P)},className:"follow-up",children:P}))]}):n.map((P,N)=>I.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[P.sender==="ai"?I.jsx("div",{className:"message ai",children:I.jsx(z5,{content:P.content,typeSpeed:3,cursor:{shape:"block",color:"bg-blue-500"}})},N):I.jsx("div",{className:"message human",children:P.content},N),u&&N===n.length-1&&I.jsx("div",{style:{fontSize:"16px",alignSelf:"center",color:"black"},children:p})]}))}),I.jsxs("div",{className:"send-container",children:[I.jsx("textarea",{onKeyDown:A,value:a,ref:E,onInput:C,placeholder:"Type a message",name:"",id:""}),I.jsx("button",{disabled:u||!a,onClick:O,children:u?"Thinking...":"➤"})]})]},"chat-ai-container")})]})}function Ej(t,e){const n=K.useRef(e);K.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const tK=1;function nK(t){return Object.freeze({__version:tK,map:t})}function rK(t,e){return Object.freeze({...t,...e})}const Sj=K.createContext(null),Tj=Sj.Provider;function Pj(){const t=K.useContext(Sj);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function iK(t){function e(n,r){const{instance:i,context:s}=t(n).current;return K.useImperativeHandle(r,()=>i),n.children==null?null:zl.createElement(Tj,{value:s},n.children)}return K.forwardRef(e)}function sK(t){function e(n,r){const[i,s]=K.useState(!1),{instance:a}=t(n,s).current;K.useImperativeHandle(r,()=>a),K.useEffect(function(){i&&a.update()},[a,i,n.children]);const l=a._contentNode;return l?nd.createPortal(n.children,l):null}return K.forwardRef(e)}function aK(t){function e(n,r){const{instance:i}=t(n).current;return K.useImperativeHandle(r,()=>i),null}return K.forwardRef(e)}function Oj(t,e){const n=K.useRef();K.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function O1(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function oK(t,e){return function(r,i){const s=Pj(),a=t(O1(r,s),s);return Ej(s.map,r.attribution),Oj(a.current,r.eventHandlers),e(a.current,s,r,i),a}}var Nb={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Hn,function(n){var r="1.9.4";function i(o){var h,_,S,k;for(_=1,S=arguments.length;_<S;_++){k=arguments[_];for(h in k)o[h]=k[h]}return o}var s=Object.create||function(){function o(){}return function(h){return o.prototype=h,new o}}();function a(o,h){var _=Array.prototype.slice;if(o.bind)return o.bind.apply(o,_.call(arguments,1));var S=_.call(arguments,2);return function(){return o.apply(h,S.length?S.concat(_.call(arguments)):arguments)}}var l=0;function u(o){return"_leaflet_id"in o||(o._leaflet_id=++l),o._leaflet_id}function c(o,h,_){var S,k,F,X;return X=function(){S=!1,k&&(F.apply(_,k),k=!1)},F=function(){S?k=arguments:(o.apply(_,arguments),setTimeout(X,h),S=!0)},F}function f(o,h,_){var S=h[1],k=h[0],F=S-k;return o===S&&_?o:((o-k)%F+F)%F+k}function d(){return!1}function p(o,h){if(h===!1)return o;var _=Math.pow(10,h===void 0?6:h);return Math.round(o*_)/_}function m(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function g(o){return m(o).split(/\s+/)}function b(o,h){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?s(o.options):{});for(var _ in h)o.options[_]=h[_];return o.options}function w(o,h,_){var S=[];for(var k in o)S.push(encodeURIComponent(_?k.toUpperCase():k)+"="+encodeURIComponent(o[k]));return(!h||h.indexOf("?")===-1?"?":"&")+S.join("&")}var y=/\{ *([\w_ -]+) *\}/g;function v(o,h){return o.replace(y,function(_,S){var k=h[S];if(k===void 0)throw new Error("No value provided for variable "+_);return typeof k=="function"&&(k=k(h)),k})}var x=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function E(o,h){for(var _=0;_<o.length;_++)if(o[_]===h)return _;return-1}var T="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var A=0;function C(o){var h=+new Date,_=Math.max(0,16-(h-A));return A=h+_,window.setTimeout(o,_)}var M=window.requestAnimationFrame||O("RequestAnimationFrame")||C,R=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function P(o,h,_){if(_&&M===C)o.call(h);else return M.call(window,a(o,h))}function N(o){o&&R.call(window,o)}var $={__proto__:null,extend:i,create:s,bind:a,get lastId(){return l},stamp:u,throttle:c,wrapNum:f,falseFn:d,formatNum:p,trim:m,splitWords:g,setOptions:b,getParamString:w,template:v,isArray:x,indexOf:E,emptyImageUrl:T,requestFn:M,cancelFn:R,requestAnimFrame:P,cancelAnimFrame:N};function D(){}D.extend=function(o){var h=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=h.__super__=this.prototype,S=s(_);S.constructor=h,h.prototype=S;for(var k in this)Object.prototype.hasOwnProperty.call(this,k)&&k!=="prototype"&&k!=="__super__"&&(h[k]=this[k]);return o.statics&&i(h,o.statics),o.includes&&(z(o.includes),i.apply(null,[S].concat(o.includes))),i(S,o),delete S.statics,delete S.includes,S.options&&(S.options=_.options?s(_.options):{},i(S.options,o.options)),S._initHooks=[],S.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var F=0,X=S._initHooks.length;F<X;F++)S._initHooks[F].call(this)}},h},D.include=function(o){var h=this.prototype.options;return i(this.prototype,o),o.options&&(this.prototype.options=h,this.mergeOptions(o.options)),this},D.mergeOptions=function(o){return i(this.prototype.options,o),this},D.addInitHook=function(o){var h=Array.prototype.slice.call(arguments,1),_=typeof o=="function"?o:function(){this[o].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function z(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=x(o)?o:[o];for(var h=0;h<o.length;h++)o[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(o,h,_){if(typeof o=="object")for(var S in o)this._on(S,o[S],h);else{o=g(o);for(var k=0,F=o.length;k<F;k++)this._on(o[k],h,_)}return this},off:function(o,h,_){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var S in o)this._off(S,o[S],h);else{o=g(o);for(var k=arguments.length===1,F=0,X=o.length;F<X;F++)k?this._off(o[F]):this._off(o[F],h,_)}return this},_on:function(o,h,_,S){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(o,h,_)===!1){_===this&&(_=void 0);var k={fn:h,ctx:_};S&&(k.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(k)}},_off:function(o,h,_){var S,k,F;if(this._events&&(S=this._events[o],!!S)){if(arguments.length===1){if(this._firingCount)for(k=0,F=S.length;k<F;k++)S[k].fn=d;delete this._events[o];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var X=this._listens(o,h,_);if(X!==!1){var ne=S[X];this._firingCount&&(ne.fn=d,this._events[o]=S=S.slice()),S.splice(X,1)}}},fire:function(o,h,_){if(!this.listens(o,_))return this;var S=i({},h,{type:o,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var k=this._events[o];if(k){this._firingCount=this._firingCount+1||1;for(var F=0,X=k.length;F<X;F++){var ne=k[F],ae=ne.fn;ne.once&&this.off(o,ae,ne.ctx),ae.call(ne.ctx||this,S)}this._firingCount--}}return _&&this._propagateEvent(S),this},listens:function(o,h,_,S){typeof o!="string"&&console.warn('"string" type argument expected');var k=h;typeof h!="function"&&(S=!!h,k=void 0,_=void 0);var F=this._events&&this._events[o];if(F&&F.length&&this._listens(o,k,_)!==!1)return!0;if(S){for(var X in this._eventParents)if(this._eventParents[X].listens(o,h,_,S))return!0}return!1},_listens:function(o,h,_){if(!this._events)return!1;var S=this._events[o]||[];if(!h)return!!S.length;_===this&&(_=void 0);for(var k=0,F=S.length;k<F;k++)if(S[k].fn===h&&S[k].ctx===_)return k;return!1},once:function(o,h,_){if(typeof o=="object")for(var S in o)this._on(S,o[S],h,!0);else{o=g(o);for(var k=0,F=o.length;k<F;k++)this._on(o[k],h,_,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[u(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[u(o)],this},_propagateEvent:function(o){for(var h in this._eventParents)this._eventParents[h].fire(o.type,i({layer:o.target,propagatedFrom:o.target},o),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var W=D.extend(G);function Z(o,h,_){this.x=_?Math.round(o):o,this.y=_?Math.round(h):h}var q=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};Z.prototype={clone:function(){return new Z(this.x,this.y)},add:function(o){return this.clone()._add(B(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(B(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new Z(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new Z(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=q(this.x),this.y=q(this.y),this},distanceTo:function(o){o=B(o);var h=o.x-this.x,_=o.y-this.y;return Math.sqrt(h*h+_*_)},equals:function(o){return o=B(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=B(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function B(o,h,_){return o instanceof Z?o:x(o)?new Z(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new Z(o.x,o.y):new Z(o,h,_)}function j(o,h){if(o)for(var _=h?[o,h]:o,S=0,k=_.length;S<k;S++)this.extend(_[S])}j.prototype={extend:function(o){var h,_;if(!o)return this;if(o instanceof Z||typeof o[0]=="number"||"x"in o)h=_=B(o);else if(o=U(o),h=o.min,_=o.max,!h||!_)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=_.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(o){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var h,_;return typeof o[0]=="number"||o instanceof Z?o=B(o):o=U(o),o instanceof j?(h=o.min,_=o.max):h=_=o,h.x>=this.min.x&&_.x<=this.max.x&&h.y>=this.min.y&&_.y<=this.max.y},intersects:function(o){o=U(o);var h=this.min,_=this.max,S=o.min,k=o.max,F=k.x>=h.x&&S.x<=_.x,X=k.y>=h.y&&S.y<=_.y;return F&&X},overlaps:function(o){o=U(o);var h=this.min,_=this.max,S=o.min,k=o.max,F=k.x>h.x&&S.x<_.x,X=k.y>h.y&&S.y<_.y;return F&&X},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var h=this.min,_=this.max,S=Math.abs(h.x-_.x)*o,k=Math.abs(h.y-_.y)*o;return U(B(h.x-S,h.y-k),B(_.x+S,_.y+k))},equals:function(o){return o?(o=U(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function U(o,h){return!o||o instanceof j?o:new j(o,h)}function H(o,h){if(o)for(var _=h?[o,h]:o,S=0,k=_.length;S<k;S++)this.extend(_[S])}H.prototype={extend:function(o){var h=this._southWest,_=this._northEast,S,k;if(o instanceof J)S=o,k=o;else if(o instanceof H){if(S=o._southWest,k=o._northEast,!S||!k)return this}else return o?this.extend(V(o)||Y(o)):this;return!h&&!_?(this._southWest=new J(S.lat,S.lng),this._northEast=new J(k.lat,k.lng)):(h.lat=Math.min(S.lat,h.lat),h.lng=Math.min(S.lng,h.lng),_.lat=Math.max(k.lat,_.lat),_.lng=Math.max(k.lng,_.lng)),this},pad:function(o){var h=this._southWest,_=this._northEast,S=Math.abs(h.lat-_.lat)*o,k=Math.abs(h.lng-_.lng)*o;return new H(new J(h.lat-S,h.lng-k),new J(_.lat+S,_.lng+k))},getCenter:function(){return new J((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new J(this.getNorth(),this.getWest())},getSouthEast:function(){return new J(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof J||"lat"in o?o=V(o):o=Y(o);var h=this._southWest,_=this._northEast,S,k;return o instanceof H?(S=o.getSouthWest(),k=o.getNorthEast()):S=k=o,S.lat>=h.lat&&k.lat<=_.lat&&S.lng>=h.lng&&k.lng<=_.lng},intersects:function(o){o=Y(o);var h=this._southWest,_=this._northEast,S=o.getSouthWest(),k=o.getNorthEast(),F=k.lat>=h.lat&&S.lat<=_.lat,X=k.lng>=h.lng&&S.lng<=_.lng;return F&&X},overlaps:function(o){o=Y(o);var h=this._southWest,_=this._northEast,S=o.getSouthWest(),k=o.getNorthEast(),F=k.lat>h.lat&&S.lat<_.lat,X=k.lng>h.lng&&S.lng<_.lng;return F&&X},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,h){return o?(o=Y(o),this._southWest.equals(o.getSouthWest(),h)&&this._northEast.equals(o.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Y(o,h){return o instanceof H?o:new H(o,h)}function J(o,h,_){if(isNaN(o)||isNaN(h))throw new Error("Invalid LatLng object: ("+o+", "+h+")");this.lat=+o,this.lng=+h,_!==void 0&&(this.alt=+_)}J.prototype={equals:function(o,h){if(!o)return!1;o=V(o);var _=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return _<=(h===void 0?1e-9:h)},toString:function(o){return"LatLng("+p(this.lat,o)+", "+p(this.lng,o)+")"},distanceTo:function(o){return re.distance(this,V(o))},wrap:function(){return re.wrapLatLng(this)},toBounds:function(o){var h=180*o/40075017,_=h/Math.cos(Math.PI/180*this.lat);return Y([this.lat-h,this.lng-_],[this.lat+h,this.lng+_])},clone:function(){return new J(this.lat,this.lng,this.alt)}};function V(o,h,_){return o instanceof J?o:x(o)&&typeof o[0]!="object"?o.length===3?new J(o[0],o[1],o[2]):o.length===2?new J(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new J(o.lat,"lng"in o?o.lng:o.lon,o.alt):h===void 0?null:new J(o,h,_)}var Q={latLngToPoint:function(o,h){var _=this.projection.project(o),S=this.scale(h);return this.transformation._transform(_,S)},pointToLatLng:function(o,h){var _=this.scale(h),S=this.transformation.untransform(o,_);return this.projection.unproject(S)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var h=this.projection.bounds,_=this.scale(o),S=this.transformation.transform(h.min,_),k=this.transformation.transform(h.max,_);return new j(S,k)},infinite:!1,wrapLatLng:function(o){var h=this.wrapLng?f(o.lng,this.wrapLng,!0):o.lng,_=this.wrapLat?f(o.lat,this.wrapLat,!0):o.lat,S=o.alt;return new J(_,h,S)},wrapLatLngBounds:function(o){var h=o.getCenter(),_=this.wrapLatLng(h),S=h.lat-_.lat,k=h.lng-_.lng;if(S===0&&k===0)return o;var F=o.getSouthWest(),X=o.getNorthEast(),ne=new J(F.lat-S,F.lng-k),ae=new J(X.lat-S,X.lng-k);return new H(ne,ae)}},re=i({},Q,{wrapLng:[-180,180],R:6371e3,distance:function(o,h){var _=Math.PI/180,S=o.lat*_,k=h.lat*_,F=Math.sin((h.lat-o.lat)*_/2),X=Math.sin((h.lng-o.lng)*_/2),ne=F*F+Math.cos(S)*Math.cos(k)*X*X,ae=2*Math.atan2(Math.sqrt(ne),Math.sqrt(1-ne));return this.R*ae}}),ie=6378137,ce={R:ie,MAX_LATITUDE:85.0511287798,project:function(o){var h=Math.PI/180,_=this.MAX_LATITUDE,S=Math.max(Math.min(_,o.lat),-_),k=Math.sin(S*h);return new Z(this.R*o.lng*h,this.R*Math.log((1+k)/(1-k))/2)},unproject:function(o){var h=180/Math.PI;return new J((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*h,o.x*h/this.R)},bounds:function(){var o=ie*Math.PI;return new j([-o,-o],[o,o])}()};function me(o,h,_,S){if(x(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=h,this._c=_,this._d=S}me.prototype={transform:function(o,h){return this._transform(o.clone(),h)},_transform:function(o,h){return h=h||1,o.x=h*(this._a*o.x+this._b),o.y=h*(this._c*o.y+this._d),o},untransform:function(o,h){return h=h||1,new Z((o.x/h-this._b)/this._a,(o.y/h-this._d)/this._c)}};function Ce(o,h,_,S){return new me(o,h,_,S)}var je=i({},re,{code:"EPSG:3857",projection:ce,transformation:function(){var o=.5/(Math.PI*ce.R);return Ce(o,.5,-o,.5)}()}),Ze=i({},je,{code:"EPSG:900913"});function We(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function $t(o,h){var _="",S,k,F,X,ne,ae;for(S=0,F=o.length;S<F;S++){for(ne=o[S],k=0,X=ne.length;k<X;k++)ae=ne[k],_+=(k?"L":"M")+ae.x+" "+ae.y;_+=h?_e.svg?"z":"x":""}return _||"M0 0"}var At=document.documentElement.style,oe="ActiveXObject"in window,fe=oe&&!document.addEventListener,we="msLaunchUri"in navigator&&!("documentMode"in document),be=Me("webkit"),he=Me("android"),$e=Me("android 2")||Me("android 3"),Be=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ve=he&&Me("Google")&&Be<537&&!("AudioNode"in window),Yt=!!window.opera,sn=!we&&Me("chrome"),bt=Me("gecko")&&!be&&!Yt&&!oe,Cn=!sn&&Me("safari"),wt=Me("phantom"),Bt="OTransition"in At,ti=navigator.platform.indexOf("Win")===0,Gs=oe&&"transition"in At,$i="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!$e,hs="MozPerspective"in At,Bi=!window.L_DISABLE_3D&&(Gs||$i||hs)&&!Bt&&!wt,ni=typeof orientation<"u"||Me("mobile"),ju=ni&&be,Vt=ni&&$i,ri=!window.PointerEvent&&window.MSPointerEvent,za=!!(window.PointerEvent||ri),Va="ontouchstart"in window||!!window.TouchEvent,te=!window.L_NO_TOUCH&&(Va||za),se=ni&&Yt,ue=ni&&bt,xe=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ke=function(){var o=!1;try{var h=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",d,h),window.removeEventListener("testPassiveEventSupport",d,h)}catch{}return o}(),Ke=function(){return!!document.createElement("canvas").getContext}(),Fe=!!(document.createElementNS&&We("svg").createSVGRect),Re=!!Fe&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Le=!Fe&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var h=o.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),Qe=navigator.platform.indexOf("Mac")===0,qt=navigator.platform.indexOf("Linux")===0;function Me(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var _e={ie:oe,ielt9:fe,edge:we,webkit:be,android:he,android23:$e,androidStock:Ve,opera:Yt,chrome:sn,gecko:bt,safari:Cn,phantom:wt,opera12:Bt,win:ti,ie3d:Gs,webkit3d:$i,gecko3d:hs,any3d:Bi,mobile:ni,mobileWebkit:ju,mobileWebkit3d:Vt,msPointer:ri,pointer:za,touch:te,touchNative:Va,mobileOpera:se,mobileGecko:ue,retina:xe,passiveEvents:ke,canvas:Ke,svg:Fe,vml:Le,inlineSvg:Re,mac:Qe,linux:qt},xt=_e.msPointer?"MSPointerDown":"pointerdown",vn=_e.msPointer?"MSPointerMove":"pointermove",Ft=_e.msPointer?"MSPointerUp":"pointerup",jr=_e.msPointer?"MSPointerCancel":"pointercancel",Fi={touchstart:xt,touchmove:vn,touchend:Ft,touchcancel:jr},ii={touchstart:Qt,touchmove:Ye,touchend:Ye,touchcancel:Ye},Ee={},ee=!1;function ye(o,h,_){return h==="touchstart"&&qe(),ii[h]?(_=ii[h].bind(this,_),o.addEventListener(Fi[h],_,!1),_):(console.warn("wrong event specified:",h),d)}function Oe(o,h,_){if(!Fi[h]){console.warn("wrong event specified:",h);return}o.removeEventListener(Fi[h],_,!1)}function gt(o){Ee[o.pointerId]=o}function Nt(o){Ee[o.pointerId]&&(Ee[o.pointerId]=o)}function Ut(o){delete Ee[o.pointerId]}function qe(){ee||(document.addEventListener(xt,gt,!0),document.addEventListener(vn,Nt,!0),document.addEventListener(Ft,Ut,!0),document.addEventListener(jr,Ut,!0),ee=!0)}function Ye(o,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var _ in Ee)h.touches.push(Ee[_]);h.changedTouches=[h],o(h)}}function Qt(o,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&Rn(h),Ye(o,h)}function an(o){var h={},_,S;for(S in o)_=o[S],h[S]=_&&_.bind?_.bind(o):_;return o=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var $o=200;function xd(o,h){o.addEventListener("dblclick",h);var _=0,S;function k(F){if(F.detail!==1){S=F.detail;return}if(!(F.pointerType==="mouse"||F.sourceCapabilities&&!F.sourceCapabilities.firesTouchEvents)){var X=K1(F);if(!(X.some(function(ae){return ae instanceof HTMLLabelElement&&ae.attributes.for})&&!X.some(function(ae){return ae instanceof HTMLInputElement||ae instanceof HTMLSelectElement}))){var ne=Date.now();ne-_<=$o?(S++,S===2&&h(an(F))):S=1,_=ne}}}return o.addEventListener("click",k),{dblclick:h,simDblclick:k}}function FM(o,h){o.removeEventListener("dblclick",h.dblclick),o.removeEventListener("click",h.simDblclick)}var Sg=Td(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Mu=Td(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),H1=Mu==="webkitTransition"||Mu==="OTransition"?Mu+"End":"transitionend";function Z1(o){return typeof o=="string"?document.getElementById(o):o}function Du(o,h){var _=o.style[h]||o.currentStyle&&o.currentStyle[h];if((!_||_==="auto")&&document.defaultView){var S=document.defaultView.getComputedStyle(o,null);_=S?S[h]:null}return _==="auto"?null:_}function yt(o,h,_){var S=document.createElement(o);return S.className=h||"",_&&_.appendChild(S),S}function Ht(o){var h=o.parentNode;h&&h.removeChild(o)}function Ed(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Bo(o){var h=o.parentNode;h&&h.lastChild!==o&&h.appendChild(o)}function Fo(o){var h=o.parentNode;h&&h.firstChild!==o&&h.insertBefore(o,h.firstChild)}function Tg(o,h){if(o.classList!==void 0)return o.classList.contains(h);var _=Sd(o);return _.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(_)}function et(o,h){if(o.classList!==void 0)for(var _=g(h),S=0,k=_.length;S<k;S++)o.classList.add(_[S]);else if(!Tg(o,h)){var F=Sd(o);Pg(o,(F?F+" ":"")+h)}}function on(o,h){o.classList!==void 0?o.classList.remove(h):Pg(o,m((" "+Sd(o)+" ").replace(" "+h+" "," ")))}function Pg(o,h){o.className.baseVal===void 0?o.className=h:o.className.baseVal=h}function Sd(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function Mr(o,h){"opacity"in o.style?o.style.opacity=h:"filter"in o.style&&UM(o,h)}function UM(o,h){var _=!1,S="DXImageTransform.Microsoft.Alpha";try{_=o.filters.item(S)}catch{if(h===1)return}h=Math.round(h*100),_?(_.Enabled=h!==100,_.Opacity=h):o.style.filter+=" progid:"+S+"(opacity="+h+")"}function Td(o){for(var h=document.documentElement.style,_=0;_<o.length;_++)if(o[_]in h)return o[_];return!1}function qa(o,h,_){var S=h||new Z(0,0);o.style[Sg]=(_e.ie3d?"translate("+S.x+"px,"+S.y+"px)":"translate3d("+S.x+"px,"+S.y+"px,0)")+(_?" scale("+_+")":"")}function fn(o,h){o._leaflet_pos=h,_e.any3d?qa(o,h):(o.style.left=h.x+"px",o.style.top=h.y+"px")}function Ha(o){return o._leaflet_pos||new Z(0,0)}var $u,Bu,Og;if("onselectstart"in document)$u=function(){Je(window,"selectstart",Rn)},Bu=function(){Rt(window,"selectstart",Rn)};else{var Fu=Td(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);$u=function(){if(Fu){var o=document.documentElement.style;Og=o[Fu],o[Fu]="none"}},Bu=function(){Fu&&(document.documentElement.style[Fu]=Og,Og=void 0)}}function Ag(){Je(window,"dragstart",Rn)}function kg(){Rt(window,"dragstart",Rn)}var Pd,Cg;function Rg(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Od(),Pd=o,Cg=o.style.outlineStyle,o.style.outlineStyle="none",Je(window,"keydown",Od))}function Od(){Pd&&(Pd.style.outlineStyle=Cg,Pd=void 0,Cg=void 0,Rt(window,"keydown",Od))}function W1(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Lg(o){var h=o.getBoundingClientRect();return{x:h.width/o.offsetWidth||1,y:h.height/o.offsetHeight||1,boundingClientRect:h}}var zM={__proto__:null,TRANSFORM:Sg,TRANSITION:Mu,TRANSITION_END:H1,get:Z1,getStyle:Du,create:yt,remove:Ht,empty:Ed,toFront:Bo,toBack:Fo,hasClass:Tg,addClass:et,removeClass:on,setClass:Pg,getClass:Sd,setOpacity:Mr,testProp:Td,setTransform:qa,setPosition:fn,getPosition:Ha,get disableTextSelection(){return $u},get enableTextSelection(){return Bu},disableImageDrag:Ag,enableImageDrag:kg,preventOutline:Rg,restoreOutline:Od,getSizedParentNode:W1,getScale:Lg};function Je(o,h,_,S){if(h&&typeof h=="object")for(var k in h)Ig(o,k,h[k],_);else{h=g(h);for(var F=0,X=h.length;F<X;F++)Ig(o,h[F],_,S)}return this}var Ui="_leaflet_events";function Rt(o,h,_,S){if(arguments.length===1)G1(o),delete o[Ui];else if(h&&typeof h=="object")for(var k in h)jg(o,k,h[k],_);else if(h=g(h),arguments.length===2)G1(o,function(ne){return E(h,ne)!==-1});else for(var F=0,X=h.length;F<X;F++)jg(o,h[F],_,S);return this}function G1(o,h){for(var _ in o[Ui]){var S=_.split(/\d/)[0];(!h||h(S))&&jg(o,S,null,null,_)}}var Ng={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ig(o,h,_,S){var k=h+u(_)+(S?"_"+u(S):"");if(o[Ui]&&o[Ui][k])return this;var F=function(ne){return _.call(S||o,ne||window.event)},X=F;!_e.touchNative&&_e.pointer&&h.indexOf("touch")===0?F=ye(o,h,F):_e.touch&&h==="dblclick"?F=xd(o,F):"addEventListener"in o?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?o.addEventListener(Ng[h]||h,F,_e.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(F=function(ne){ne=ne||window.event,Dg(o,ne)&&X(ne)},o.addEventListener(Ng[h],F,!1)):o.addEventListener(h,X,!1):o.attachEvent("on"+h,F),o[Ui]=o[Ui]||{},o[Ui][k]=F}function jg(o,h,_,S,k){k=k||h+u(_)+(S?"_"+u(S):"");var F=o[Ui]&&o[Ui][k];if(!F)return this;!_e.touchNative&&_e.pointer&&h.indexOf("touch")===0?Oe(o,h,F):_e.touch&&h==="dblclick"?FM(o,F):"removeEventListener"in o?o.removeEventListener(Ng[h]||h,F,!1):o.detachEvent("on"+h,F),o[Ui][k]=null}function Za(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Mg(o){return Ig(o,"wheel",Za),this}function Uu(o){return Je(o,"mousedown touchstart dblclick contextmenu",Za),o._leaflet_disable_click=!0,this}function Rn(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Wa(o){return Rn(o),Za(o),this}function K1(o){if(o.composedPath)return o.composedPath();for(var h=[],_=o.target;_;)h.push(_),_=_.parentNode;return h}function J1(o,h){if(!h)return new Z(o.clientX,o.clientY);var _=Lg(h),S=_.boundingClientRect;return new Z((o.clientX-S.left)/_.x-h.clientLeft,(o.clientY-S.top)/_.y-h.clientTop)}var VM=_e.linux&&_e.chrome?window.devicePixelRatio:_e.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function X1(o){return _e.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/VM:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Dg(o,h){var _=h.relatedTarget;if(!_)return!0;try{for(;_&&_!==o;)_=_.parentNode}catch{return!1}return _!==o}var qM={__proto__:null,on:Je,off:Rt,stopPropagation:Za,disableScrollPropagation:Mg,disableClickPropagation:Uu,preventDefault:Rn,stop:Wa,getPropagationPath:K1,getMousePosition:J1,getWheelDelta:X1,isExternalTarget:Dg,addListener:Je,removeListener:Rt},Y1=W.extend({run:function(o,h,_,S){this.stop(),this._el=o,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(S||.5,.2),this._startPos=Ha(o),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=P(this._animate,this),this._step()},_step:function(o){var h=+new Date-this._startTime,_=this._duration*1e3;h<_?this._runFrame(this._easeOut(h/_),o):(this._runFrame(1),this._complete())},_runFrame:function(o,h){var _=this._startPos.add(this._offset.multiplyBy(o));h&&_._round(),fn(this._el,_),this.fire("step")},_complete:function(){N(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),ft=W.extend({options:{crs:je,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,h){h=b(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(V(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Mu&&_e.any3d&&!_e.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Je(this._proxy,H1,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,h,_){if(h=h===void 0?this._zoom:this._limitZoom(h),o=this._limitCenter(V(o),h,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=i({animate:_.animate},_.zoom),_.pan=i({animate:_.animate,duration:_.duration},_.pan));var S=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,h,_.zoom):this._tryAnimatedPan(o,_.pan);if(S)return clearTimeout(this._sizeTimer),this}return this._resetView(o,h,_.pan&&_.pan.noMoveStart),this},setZoom:function(o,h){return this._loaded?this.setView(this.getCenter(),o,{zoom:h}):(this._zoom=o,this)},zoomIn:function(o,h){return o=o||(_e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,h)},zoomOut:function(o,h){return o=o||(_e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,h)},setZoomAround:function(o,h,_){var S=this.getZoomScale(h),k=this.getSize().divideBy(2),F=o instanceof Z?o:this.latLngToContainerPoint(o),X=F.subtract(k).multiplyBy(1-1/S),ne=this.containerPointToLatLng(k.add(X));return this.setView(ne,h,{zoom:_})},_getBoundsCenterZoom:function(o,h){h=h||{},o=o.getBounds?o.getBounds():Y(o);var _=B(h.paddingTopLeft||h.padding||[0,0]),S=B(h.paddingBottomRight||h.padding||[0,0]),k=this.getBoundsZoom(o,!1,_.add(S));if(k=typeof h.maxZoom=="number"?Math.min(h.maxZoom,k):k,k===1/0)return{center:o.getCenter(),zoom:k};var F=S.subtract(_).divideBy(2),X=this.project(o.getSouthWest(),k),ne=this.project(o.getNorthEast(),k),ae=this.unproject(X.add(ne).divideBy(2).add(F),k);return{center:ae,zoom:k}},fitBounds:function(o,h){if(o=Y(o),!o.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(o,h);return this.setView(_.center,_.zoom,h)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,h){return this.setView(o,this._zoom,{pan:h})},panBy:function(o,h){if(o=B(o).round(),h=h||{},!o.x&&!o.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Y1,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){et(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,_,h.duration||.25,h.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,h,_){if(_=_||{},_.animate===!1||!_e.any3d)return this.setView(o,h,_);this._stop();var S=this.project(this.getCenter()),k=this.project(o),F=this.getSize(),X=this._zoom;o=V(o),h=h===void 0?X:h;var ne=Math.max(F.x,F.y),ae=ne*this.getZoomScale(X,h),pe=k.distanceTo(S)||1,Te=1.42,ze=Te*Te;function it(dn){var Bd=dn?-1:1,L2=dn?ae:ne,N2=ae*ae-ne*ne+Bd*ze*ze*pe*pe,I2=2*L2*ze*pe,Gg=N2/I2,Lx=Math.sqrt(Gg*Gg+1)-Gg,j2=Lx<1e-9?-18:Math.log(Lx);return j2}function Jn(dn){return(Math.exp(dn)-Math.exp(-dn))/2}function Sn(dn){return(Math.exp(dn)+Math.exp(-dn))/2}function $r(dn){return Jn(dn)/Sn(dn)}var lr=it(0);function Zo(dn){return ne*(Sn(lr)/Sn(lr+Te*dn))}function A2(dn){return ne*(Sn(lr)*$r(lr+Te*dn)-Jn(lr))/ze}function k2(dn){return 1-Math.pow(1-dn,1.5)}var C2=Date.now(),Cx=(it(1)-lr)/Te,R2=_.duration?1e3*_.duration:1e3*Cx*.8;function Rx(){var dn=(Date.now()-C2)/R2,Bd=k2(dn)*Cx;dn<=1?(this._flyToFrame=P(Rx,this),this._move(this.unproject(S.add(k.subtract(S).multiplyBy(A2(Bd)/pe)),X),this.getScaleZoom(ne/Zo(Bd),X),{flyTo:!0})):this._move(o,h)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),Rx.call(this),this},flyToBounds:function(o,h){var _=this._getBoundsCenterZoom(o,h);return this.flyTo(_.center,_.zoom,h)},setMaxBounds:function(o){return o=Y(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var h=this.options.minZoom;return this.options.minZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var h=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,h){this._enforcingBounds=!0;var _=this.getCenter(),S=this._limitCenter(_,this._zoom,Y(o));return _.equals(S)||this.panTo(S,h),this._enforcingBounds=!1,this},panInside:function(o,h){h=h||{};var _=B(h.paddingTopLeft||h.padding||[0,0]),S=B(h.paddingBottomRight||h.padding||[0,0]),k=this.project(this.getCenter()),F=this.project(o),X=this.getPixelBounds(),ne=U([X.min.add(_),X.max.subtract(S)]),ae=ne.getSize();if(!ne.contains(F)){this._enforcingBounds=!0;var pe=F.subtract(ne.getCenter()),Te=ne.extend(F).getSize().subtract(ae);k.x+=pe.x<0?-Te.x:Te.x,k.y+=pe.y<0?-Te.y:Te.y,this.panTo(this.unproject(k),h),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=i({animate:!1,pan:!0},o===!0?{animate:!0}:o);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),S=h.divideBy(2).round(),k=_.divideBy(2).round(),F=S.subtract(k);return!F.x&&!F.y?this:(o.animate&&o.pan?this.panBy(F):(o.pan&&this._rawPanBy(F),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=i({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=a(this._handleGeolocationResponse,this),_=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,_,o):navigator.geolocation.getCurrentPosition(h,_,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var h=o.code,_=o.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var h=o.coords.latitude,_=o.coords.longitude,S=new J(h,_),k=S.toBounds(o.coords.accuracy*2),F=this._locateOptions;if(F.setView){var X=this.getBoundsZoom(k);this.setView(S,F.maxZoom?Math.min(X,F.maxZoom):X)}var ne={latlng:S,bounds:k,timestamp:o.timestamp};for(var ae in o.coords)typeof o.coords[ae]=="number"&&(ne[ae]=o.coords[ae]);this.fire("locationfound",ne)}},addHandler:function(o,h){if(!h)return this;var _=this[o]=new h(this);return this._handlers.push(_),this.options[o]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ht(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(N(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Ht(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,h){var _="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),S=yt("div",_,h||this._mapPane);return o&&(this._panes[o]=S),S},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),h=this.unproject(o.getBottomLeft()),_=this.unproject(o.getTopRight());return new H(h,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,h,_){o=Y(o),_=B(_||[0,0]);var S=this.getZoom()||0,k=this.getMinZoom(),F=this.getMaxZoom(),X=o.getNorthWest(),ne=o.getSouthEast(),ae=this.getSize().subtract(_),pe=U(this.project(ne,S),this.project(X,S)).getSize(),Te=_e.any3d?this.options.zoomSnap:1,ze=ae.x/pe.x,it=ae.y/pe.y,Jn=h?Math.max(ze,it):Math.min(ze,it);return S=this.getScaleZoom(Jn,S),Te&&(S=Math.round(S/(Te/100))*(Te/100),S=h?Math.ceil(S/Te)*Te:Math.floor(S/Te)*Te),Math.max(k,Math.min(F,S))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,h){var _=this._getTopLeftPoint(o,h);return new j(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,h){var _=this.options.crs;return h=h===void 0?this._zoom:h,_.scale(o)/_.scale(h)},getScaleZoom:function(o,h){var _=this.options.crs;h=h===void 0?this._zoom:h;var S=_.zoom(o*_.scale(h));return isNaN(S)?1/0:S},project:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(V(o),h)},unproject:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(B(o),h)},layerPointToLatLng:function(o){var h=B(o).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(o){var h=this.project(V(o))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(V(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(Y(o))},distance:function(o,h){return this.options.crs.distance(V(o),V(h))},containerPointToLayerPoint:function(o){return B(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return B(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var h=this.containerPointToLayerPoint(B(o));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(V(o)))},mouseEventToContainerPoint:function(o){return J1(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var h=this._container=Z1(o);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Je(h,"scroll",this._onScroll,this),this._containerId=u(h)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&_e.any3d,et(o,"leaflet-container"+(_e.touch?" leaflet-touch":"")+(_e.retina?" leaflet-retina":"")+(_e.ielt9?" leaflet-oldie":"")+(_e.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=Du(o,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),fn(this._mapPane,new Z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(et(o.markerPane,"leaflet-zoom-hide"),et(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,h,_){fn(this._mapPane,new Z(0,0));var S=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var k=this._zoom!==h;this._moveStart(k,_)._move(o,h)._moveEnd(k),this.fire("viewreset"),S&&this.fire("load")},_moveStart:function(o,h){return o&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(o,h,_,S){h===void 0&&(h=this._zoom);var k=this._zoom!==h;return this._zoom=h,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),S?_&&_.pinch&&this.fire("zoom",_):((k||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return N(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){fn(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[u(this._container)]=this;var h=o?Rt:Je;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),_e.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){N(this._resizeRequest),this._resizeRequest=P(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,h){for(var _=[],S,k=h==="mouseout"||h==="mouseover",F=o.target||o.srcElement,X=!1;F;){if(S=this._targets[u(F)],S&&(h==="click"||h==="preclick")&&this._draggableMoved(S)){X=!0;break}if(S&&S.listens(h,!0)&&(k&&!Dg(F,o)||(_.push(S),k))||F===this._container)break;F=F.parentNode}return!_.length&&!X&&!k&&this.listens(h,!0)&&(_=[this]),_},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var h=o.target||o.srcElement;if(!(!this._loaded||h._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(h))){var _=o.type;_==="mousedown"&&Rg(h),this._fireDOMEvent(o,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,h,_){if(o.type==="click"){var S=i({},o);S.type="preclick",this._fireDOMEvent(S,S.type,_)}var k=this._findEventTargets(o,h);if(_){for(var F=[],X=0;X<_.length;X++)_[X].listens(h,!0)&&F.push(_[X]);k=F.concat(k)}if(k.length){h==="contextmenu"&&Rn(o);var ne=k[0],ae={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var pe=ne.getLatLng&&(!ne._radius||ne._radius<=10);ae.containerPoint=pe?this.latLngToContainerPoint(ne.getLatLng()):this.mouseEventToContainerPoint(o),ae.layerPoint=this.containerPointToLayerPoint(ae.containerPoint),ae.latlng=pe?ne.getLatLng():this.layerPointToLatLng(ae.layerPoint)}for(X=0;X<k.length;X++)if(k[X].fire(h,ae,!0),ae.originalEvent._stopped||k[X].options.bubblingMouseEvents===!1&&E(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,h=this._handlers.length;o<h;o++)this._handlers[o].disable()},whenReady:function(o,h){return this._loaded?o.call(h||this,{target:this}):this.on("load",o,h),this},_getMapPanePos:function(){return Ha(this._mapPane)||new Z(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,h){var _=o&&h!==void 0?this._getNewPixelOrigin(o,h):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,h){var _=this.getSize()._divideBy(2);return this.project(o,h)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,h,_){var S=this._getNewPixelOrigin(_,h);return this.project(o,h)._subtract(S)},_latLngBoundsToNewLayerBounds:function(o,h,_){var S=this._getNewPixelOrigin(_,h);return U([this.project(o.getSouthWest(),h)._subtract(S),this.project(o.getNorthWest(),h)._subtract(S),this.project(o.getSouthEast(),h)._subtract(S),this.project(o.getNorthEast(),h)._subtract(S)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,h,_){if(!_)return o;var S=this.project(o,h),k=this.getSize().divideBy(2),F=new j(S.subtract(k),S.add(k)),X=this._getBoundsOffset(F,_,h);return Math.abs(X.x)<=1&&Math.abs(X.y)<=1?o:this.unproject(S.add(X),h)},_limitOffset:function(o,h){if(!h)return o;var _=this.getPixelBounds(),S=new j(_.min.add(o),_.max.add(o));return o.add(this._getBoundsOffset(S,h))},_getBoundsOffset:function(o,h,_){var S=U(this.project(h.getNorthEast(),_),this.project(h.getSouthWest(),_)),k=S.min.subtract(o.min),F=S.max.subtract(o.max),X=this._rebound(k.x,-F.x),ne=this._rebound(k.y,-F.y);return new Z(X,ne)},_rebound:function(o,h){return o+h>0?Math.round(o-h)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(h))},_limitZoom:function(o){var h=this.getMinZoom(),_=this.getMaxZoom(),S=_e.any3d?this.options.zoomSnap:1;return S&&(o=Math.round(o/S)*S),Math.max(h,Math.min(_,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){on(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,h){var _=this._getCenterOffset(o)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,h),!0)},_createAnimProxy:function(){var o=this._proxy=yt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(h){var _=Sg,S=this._proxy.style[_];qa(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),S===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ht(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),h=this.getZoom();qa(this._proxy,this.project(o,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,h,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var S=this.getZoomScale(h),k=this._getCenterOffset(o)._divideBy(1-1/S);return _.animate!==!0&&!this.getSize().contains(k)?!1:(P(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(o,h,!0)},this),!0)},_animateZoom:function(o,h,_,S){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=h,et(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:h,noUpdate:S}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&on(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function HM(o,h){return new ft(o,h)}var si=D.extend({options:{position:"topright"},initialize:function(o){b(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var h=this._map;return h&&h.removeControl(this),this.options.position=o,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var h=this._container=this.onAdd(o),_=this.getPosition(),S=o._controlCorners[_];return et(h,"leaflet-control"),_.indexOf("bottom")!==-1?S.insertBefore(h,S.firstChild):S.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ht(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),zu=function(o){return new si(o)};ft.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},h="leaflet-",_=this._controlContainer=yt("div",h+"control-container",this._container);function S(k,F){var X=h+k+" "+h+F;o[k+F]=yt("div",X,_)}S("top","left"),S("top","right"),S("bottom","left"),S("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Ht(this._controlCorners[o]);Ht(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Q1=si.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,h,_,S){return _<S?-1:S<_?1:0}},initialize:function(o,h,_){b(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var S in o)this._addLayer(o[S],S);for(S in h)this._addLayer(h[S],S,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return si.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,h){return this._addLayer(o,h),this._map?this._update():this},addOverlay:function(o,h){return this._addLayer(o,h,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var h=this._getLayer(u(o));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){et(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(et(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):on(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return on(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",h=this._container=yt("div",o),_=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Uu(h),Mg(h);var S=this._section=yt("section",o+"-list");_&&(this._map.on("click",this.collapse,this),Je(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var k=this._layersLink=yt("a",o+"-toggle",h);k.href="#",k.title="Layers",k.setAttribute("role","button"),Je(k,{keydown:function(F){F.keyCode===13&&this._expandSafely()},click:function(F){Rn(F),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=yt("div",o+"-base",S),this._separator=yt("div",o+"-separator",S),this._overlaysList=yt("div",o+"-overlays",S),h.appendChild(S)},_getLayer:function(o){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&u(this._layers[h].layer)===o)return this._layers[h]},_addLayer:function(o,h,_){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:h,overlay:_}),this.options.sortLayers&&this._layers.sort(a(function(S,k){return this.options.sortFunction(S.layer,k.layer,S.name,k.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ed(this._baseLayersList),Ed(this._overlaysList),this._layerControlInputs=[];var o,h,_,S,k=0;for(_=0;_<this._layers.length;_++)S=this._layers[_],this._addItem(S),h=h||S.overlay,o=o||!S.overlay,k+=S.overlay?0:1;return this.options.hideSingleBase&&(o=o&&k>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=h&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var h=this._getLayer(u(o.target)),_=h.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;_&&this._map.fire(_,h)},_createRadioElement:function(o,h){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(h?' checked="checked"':"")+"/>",S=document.createElement("div");return S.innerHTML=_,S.firstChild},_addItem:function(o){var h=document.createElement("label"),_=this._map.hasLayer(o.layer),S;o.overlay?(S=document.createElement("input"),S.type="checkbox",S.className="leaflet-control-layers-selector",S.defaultChecked=_):S=this._createRadioElement("leaflet-base-layers_"+u(this),_),this._layerControlInputs.push(S),S.layerId=u(o.layer),Je(S,"click",this._onInputClick,this);var k=document.createElement("span");k.innerHTML=" "+o.name;var F=document.createElement("span");h.appendChild(F),F.appendChild(S),F.appendChild(k);var X=o.overlay?this._overlaysList:this._baseLayersList;return X.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,h,_,S=[],k=[];this._handlingClick=!0;for(var F=o.length-1;F>=0;F--)h=o[F],_=this._getLayer(h.layerId).layer,h.checked?S.push(_):h.checked||k.push(_);for(F=0;F<k.length;F++)this._map.hasLayer(k[F])&&this._map.removeLayer(k[F]);for(F=0;F<S.length;F++)this._map.hasLayer(S[F])||this._map.addLayer(S[F]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,h,_,S=this._map.getZoom(),k=o.length-1;k>=0;k--)h=o[k],_=this._getLayer(h.layerId).layer,h.disabled=_.options.minZoom!==void 0&&S<_.options.minZoom||_.options.maxZoom!==void 0&&S>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,Je(o,"click",Rn),this.expand();var h=this;setTimeout(function(){Rt(o,"click",Rn),h._preventClick=!1})}}),ZM=function(o,h,_){return new Q1(o,h,_)},$g=si.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var h="leaflet-control-zoom",_=yt("div",h+" leaflet-bar"),S=this.options;return this._zoomInButton=this._createButton(S.zoomInText,S.zoomInTitle,h+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(S.zoomOutText,S.zoomOutTitle,h+"-out",_,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,h,_,S,k){var F=yt("a",_,S);return F.innerHTML=o,F.href="#",F.title=h,F.setAttribute("role","button"),F.setAttribute("aria-label",h),Uu(F),Je(F,"click",Wa),Je(F,"click",k,this),Je(F,"click",this._refocusOnMap,this),F},_updateDisabled:function(){var o=this._map,h="leaflet-disabled";on(this._zoomInButton,h),on(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(et(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(et(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});ft.mergeOptions({zoomControl:!0}),ft.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new $g,this.addControl(this.zoomControl))});var WM=function(o){return new $g(o)},ex=si.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var h="leaflet-control-scale",_=yt("div",h),S=this.options;return this._addScales(S,h+"-line",_),o.on(S.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),_},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,h,_){o.metric&&(this._mScale=yt("div",h,_)),o.imperial&&(this._iScale=yt("div",h,_))},_update:function(){var o=this._map,h=o.getSize().y/2,_=o.distance(o.containerPointToLatLng([0,h]),o.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(_)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var h=this._getRoundNum(o),_=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,_,h/o)},_updateImperial:function(o){var h=o*3.2808399,_,S,k;h>5280?(_=h/5280,S=this._getRoundNum(_),this._updateScale(this._iScale,S+" mi",S/_)):(k=this._getRoundNum(h),this._updateScale(this._iScale,k+" ft",k/h))},_updateScale:function(o,h,_){o.style.width=Math.round(this.options.maxWidth*_)+"px",o.innerHTML=h},_getRoundNum:function(o){var h=Math.pow(10,(Math.floor(o)+"").length-1),_=o/h;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,h*_}}),GM=function(o){return new ex(o)},KM='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Bg=si.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(_e.inlineSvg?KM+" ":"")+"Leaflet</a>"},initialize:function(o){b(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=yt("div","leaflet-control-attribution"),Uu(this._container);for(var h in o._layers)o._layers[h].getAttribution&&this.addAttribution(o._layers[h].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var h in this._attributions)this._attributions[h]&&o.push(h);var _=[];this.options.prefix&&_.push(this.options.prefix),o.length&&_.push(o.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});ft.mergeOptions({attributionControl:!0}),ft.addInitHook(function(){this.options.attributionControl&&new Bg().addTo(this)});var JM=function(o){return new Bg(o)};si.Layers=Q1,si.Zoom=$g,si.Scale=ex,si.Attribution=Bg,zu.layers=ZM,zu.zoom=WM,zu.scale=GM,zu.attribution=JM;var zi=D.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});zi.addTo=function(o,h){return o.addHandler(h,this),this};var XM={Events:G},tx=_e.touch?"touchstart mousedown":"mousedown",Ks=W.extend({options:{clickTolerance:3},initialize:function(o,h,_,S){b(this,S),this._element=o,this._dragStartTarget=h||o,this._preventOutline=_},enable:function(){this._enabled||(Je(this._dragStartTarget,tx,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ks._dragging===this&&this.finishDrag(!0),Rt(this._dragStartTarget,tx,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Tg(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Ks._dragging===this&&this.finishDrag();return}if(!(Ks._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Ks._dragging=this,this._preventOutline&&Rg(this._element),Ag(),$u(),!this._moving)){this.fire("down");var h=o.touches?o.touches[0]:o,_=W1(this._element);this._startPoint=new Z(h.clientX,h.clientY),this._startPos=Ha(this._element),this._parentScale=Lg(_);var S=o.type==="mousedown";Je(document,S?"mousemove":"touchmove",this._onMove,this),Je(document,S?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var h=o.touches&&o.touches.length===1?o.touches[0]:o,_=new Z(h.clientX,h.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,Rn(o),this._moved||(this.fire("dragstart"),this._moved=!0,et(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),et(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),fn(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){on(document.body,"leaflet-dragging"),this._lastTarget&&(on(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Rt(document,"mousemove touchmove",this._onMove,this),Rt(document,"mouseup touchend touchcancel",this._onUp,this),kg(),Bu();var h=this._moved&&this._moving;this._moving=!1,Ks._dragging=!1,h&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function nx(o,h,_){var S,k=[1,4,2,8],F,X,ne,ae,pe,Te,ze,it;for(F=0,Te=o.length;F<Te;F++)o[F]._code=Ga(o[F],h);for(ne=0;ne<4;ne++){for(ze=k[ne],S=[],F=0,Te=o.length,X=Te-1;F<Te;X=F++)ae=o[F],pe=o[X],ae._code&ze?pe._code&ze||(it=Ad(pe,ae,ze,h,_),it._code=Ga(it,h),S.push(it)):(pe._code&ze&&(it=Ad(pe,ae,ze,h,_),it._code=Ga(it,h),S.push(it)),S.push(ae));o=S}return o}function rx(o,h){var _,S,k,F,X,ne,ae,pe,Te;if(!o||o.length===0)throw new Error("latlngs not passed");Dr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ze=V([0,0]),it=Y(o),Jn=it.getNorthWest().distanceTo(it.getSouthWest())*it.getNorthEast().distanceTo(it.getNorthWest());Jn<1700&&(ze=Fg(o));var Sn=o.length,$r=[];for(_=0;_<Sn;_++){var lr=V(o[_]);$r.push(h.project(V([lr.lat-ze.lat,lr.lng-ze.lng])))}for(ne=ae=pe=0,_=0,S=Sn-1;_<Sn;S=_++)k=$r[_],F=$r[S],X=k.y*F.x-F.y*k.x,ae+=(k.x+F.x)*X,pe+=(k.y+F.y)*X,ne+=X*3;ne===0?Te=$r[0]:Te=[ae/ne,pe/ne];var Zo=h.unproject(B(Te));return V([Zo.lat+ze.lat,Zo.lng+ze.lng])}function Fg(o){for(var h=0,_=0,S=0,k=0;k<o.length;k++){var F=V(o[k]);h+=F.lat,_+=F.lng,S++}return V([h/S,_/S])}var YM={__proto__:null,clipPolygon:nx,polygonCenter:rx,centroid:Fg};function ix(o,h){if(!h||!o.length)return o.slice();var _=h*h;return o=t2(o,_),o=e2(o,_),o}function sx(o,h,_){return Math.sqrt(Vu(o,h,_,!0))}function QM(o,h,_){return Vu(o,h,_)}function e2(o,h){var _=o.length,S=typeof Uint8Array<"u"?Uint8Array:Array,k=new S(_);k[0]=k[_-1]=1,Ug(o,k,h,0,_-1);var F,X=[];for(F=0;F<_;F++)k[F]&&X.push(o[F]);return X}function Ug(o,h,_,S,k){var F=0,X,ne,ae;for(ne=S+1;ne<=k-1;ne++)ae=Vu(o[ne],o[S],o[k],!0),ae>F&&(X=ne,F=ae);F>_&&(h[X]=1,Ug(o,h,_,S,X),Ug(o,h,_,X,k))}function t2(o,h){for(var _=[o[0]],S=1,k=0,F=o.length;S<F;S++)n2(o[S],o[k])>h&&(_.push(o[S]),k=S);return k<F-1&&_.push(o[F-1]),_}var ax;function ox(o,h,_,S,k){var F=S?ax:Ga(o,_),X=Ga(h,_),ne,ae,pe;for(ax=X;;){if(!(F|X))return[o,h];if(F&X)return!1;ne=F||X,ae=Ad(o,h,ne,_,k),pe=Ga(ae,_),ne===F?(o=ae,F=pe):(h=ae,X=pe)}}function Ad(o,h,_,S,k){var F=h.x-o.x,X=h.y-o.y,ne=S.min,ae=S.max,pe,Te;return _&8?(pe=o.x+F*(ae.y-o.y)/X,Te=ae.y):_&4?(pe=o.x+F*(ne.y-o.y)/X,Te=ne.y):_&2?(pe=ae.x,Te=o.y+X*(ae.x-o.x)/F):_&1&&(pe=ne.x,Te=o.y+X*(ne.x-o.x)/F),new Z(pe,Te,k)}function Ga(o,h){var _=0;return o.x<h.min.x?_|=1:o.x>h.max.x&&(_|=2),o.y<h.min.y?_|=4:o.y>h.max.y&&(_|=8),_}function n2(o,h){var _=h.x-o.x,S=h.y-o.y;return _*_+S*S}function Vu(o,h,_,S){var k=h.x,F=h.y,X=_.x-k,ne=_.y-F,ae=X*X+ne*ne,pe;return ae>0&&(pe=((o.x-k)*X+(o.y-F)*ne)/ae,pe>1?(k=_.x,F=_.y):pe>0&&(k+=X*pe,F+=ne*pe)),X=o.x-k,ne=o.y-F,S?X*X+ne*ne:new Z(k,F)}function Dr(o){return!x(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function lx(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Dr(o)}function ux(o,h){var _,S,k,F,X,ne,ae,pe;if(!o||o.length===0)throw new Error("latlngs not passed");Dr(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Te=V([0,0]),ze=Y(o),it=ze.getNorthWest().distanceTo(ze.getSouthWest())*ze.getNorthEast().distanceTo(ze.getNorthWest());it<1700&&(Te=Fg(o));var Jn=o.length,Sn=[];for(_=0;_<Jn;_++){var $r=V(o[_]);Sn.push(h.project(V([$r.lat-Te.lat,$r.lng-Te.lng])))}for(_=0,S=0;_<Jn-1;_++)S+=Sn[_].distanceTo(Sn[_+1])/2;if(S===0)pe=Sn[0];else for(_=0,F=0;_<Jn-1;_++)if(X=Sn[_],ne=Sn[_+1],k=X.distanceTo(ne),F+=k,F>S){ae=(F-S)/k,pe=[ne.x-ae*(ne.x-X.x),ne.y-ae*(ne.y-X.y)];break}var lr=h.unproject(B(pe));return V([lr.lat+Te.lat,lr.lng+Te.lng])}var r2={__proto__:null,simplify:ix,pointToSegmentDistance:sx,closestPointOnSegment:QM,clipSegment:ox,_getEdgeIntersection:Ad,_getBitCode:Ga,_sqClosestPointOnSegment:Vu,isFlat:Dr,_flat:lx,polylineCenter:ux},zg={project:function(o){return new Z(o.lng,o.lat)},unproject:function(o){return new J(o.y,o.x)},bounds:new j([-180,-90],[180,90])},Vg={R:6378137,R_MINOR:6356752314245179e-9,bounds:new j([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var h=Math.PI/180,_=this.R,S=o.lat*h,k=this.R_MINOR/_,F=Math.sqrt(1-k*k),X=F*Math.sin(S),ne=Math.tan(Math.PI/4-S/2)/Math.pow((1-X)/(1+X),F/2);return S=-_*Math.log(Math.max(ne,1e-10)),new Z(o.lng*h*_,S)},unproject:function(o){for(var h=180/Math.PI,_=this.R,S=this.R_MINOR/_,k=Math.sqrt(1-S*S),F=Math.exp(-o.y/_),X=Math.PI/2-2*Math.atan(F),ne=0,ae=.1,pe;ne<15&&Math.abs(ae)>1e-7;ne++)pe=k*Math.sin(X),pe=Math.pow((1-pe)/(1+pe),k/2),ae=Math.PI/2-2*Math.atan(F*pe)-X,X+=ae;return new J(X*h,o.x*h/_)}},i2={__proto__:null,LonLat:zg,Mercator:Vg,SphericalMercator:ce},s2=i({},re,{code:"EPSG:3395",projection:Vg,transformation:function(){var o=.5/(Math.PI*Vg.R);return Ce(o,.5,-o,.5)}()}),cx=i({},re,{code:"EPSG:4326",projection:zg,transformation:Ce(1/180,1,-1/180,.5)}),a2=i({},Q,{projection:zg,transformation:Ce(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,h){var _=h.lng-o.lng,S=h.lat-o.lat;return Math.sqrt(_*_+S*S)},infinite:!0});Q.Earth=re,Q.EPSG3395=s2,Q.EPSG3857=je,Q.EPSG900913=Ze,Q.EPSG4326=cx,Q.Simple=a2;var ai=W.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[u(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[u(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var h=o.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var _=this.getEvents();h.on(_,this),this.once("remove",function(){h.off(_,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});ft.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var h=u(o);return this._layers[h]?this:(this._layers[h]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var h=u(o);return this._layers[h]?(this._loaded&&o.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return u(o)in this._layers},eachLayer:function(o,h){for(var _ in this._layers)o.call(h,this._layers[_]);return this},_addLayers:function(o){o=o?x(o)?o:[o]:[];for(var h=0,_=o.length;h<_;h++)this.addLayer(o[h])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[u(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var h=u(o);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,h=-1/0,_=this._getZoomSpan();for(var S in this._zoomBoundLayers){var k=this._zoomBoundLayers[S].options;o=k.minZoom===void 0?o:Math.min(o,k.minZoom),h=k.maxZoom===void 0?h:Math.max(h,k.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=o===1/0?void 0:o,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Uo=ai.extend({initialize:function(o,h){b(this,h),this._layers={};var _,S;if(o)for(_=0,S=o.length;_<S;_++)this.addLayer(o[_])},addLayer:function(o){var h=this.getLayerId(o);return this._layers[h]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var h=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(o){var h=typeof o=="number"?o:this.getLayerId(o);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var h=Array.prototype.slice.call(arguments,1),_,S;for(_ in this._layers)S=this._layers[_],S[o]&&S[o].apply(S,h);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,h){for(var _ in this._layers)o.call(h,this._layers[_]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return u(o)}}),o2=function(o,h){return new Uo(o,h)},ps=Uo.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),Uo.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),Uo.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new H;for(var h in this._layers){var _=this._layers[h];o.extend(_.getBounds?_.getBounds():_.getLatLng())}return o}}),l2=function(o,h){return new ps(o,h)},zo=D.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){b(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,h){var _=this._getIconUrl(o);if(!_){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var S=this._createImg(_,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(S,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),S},_setIconStyles:function(o,h){var _=this.options,S=_[h+"Size"];typeof S=="number"&&(S=[S,S]);var k=B(S),F=B(h==="shadow"&&_.shadowAnchor||_.iconAnchor||k&&k.divideBy(2,!0));o.className="leaflet-marker-"+h+" "+(_.className||""),F&&(o.style.marginLeft=-F.x+"px",o.style.marginTop=-F.y+"px"),k&&(o.style.width=k.x+"px",o.style.height=k.y+"px")},_createImg:function(o,h){return h=h||document.createElement("img"),h.src=o,h},_getIconUrl:function(o){return _e.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function u2(o){return new zo(o)}var qu=zo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof qu.imagePath!="string"&&(qu.imagePath=this._detectIconPath()),(this.options.imagePath||qu.imagePath)+zo.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var h=function(_,S,k){var F=S.exec(_);return F&&F[k]};return o=h(o,/^url\((['"])?(.+)\1\)$/,2),o&&h(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=yt("div","leaflet-default-icon-path",document.body),h=Du(o,"background-image")||Du(o,"backgroundImage");if(document.body.removeChild(o),h=this._stripUrl(h),h)return h;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),fx=zi.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Ks(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),et(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&on(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var h=this._marker,_=h._map,S=this._marker.options.autoPanSpeed,k=this._marker.options.autoPanPadding,F=Ha(h._icon),X=_.getPixelBounds(),ne=_.getPixelOrigin(),ae=U(X.min._subtract(ne).add(k),X.max._subtract(ne).subtract(k));if(!ae.contains(F)){var pe=B((Math.max(ae.max.x,F.x)-ae.max.x)/(X.max.x-ae.max.x)-(Math.min(ae.min.x,F.x)-ae.min.x)/(X.min.x-ae.min.x),(Math.max(ae.max.y,F.y)-ae.max.y)/(X.max.y-ae.max.y)-(Math.min(ae.min.y,F.y)-ae.min.y)/(X.min.y-ae.min.y)).multiplyBy(S);_.panBy(pe,{animate:!1}),this._draggable._newPos._add(pe),this._draggable._startPos._add(pe),fn(h._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=P(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(N(this._panRequest),this._panRequest=P(this._adjustPan.bind(this,o)))},_onDrag:function(o){var h=this._marker,_=h._shadow,S=Ha(h._icon),k=h._map.layerPointToLatLng(S);_&&fn(_,S),h._latlng=k,o.latlng=k,o.oldLatLng=this._oldLatLng,h.fire("move",o).fire("drag",o)},_onDragEnd:function(o){N(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),kd=ai.extend({options:{icon:new qu,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,h){b(this,h),this._latlng=V(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var h=this._latlng;return this._latlng=V(o),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=o.icon.createIcon(this._icon),S=!1;_!==this._icon&&(this._icon&&this._removeIcon(),S=!0,o.title&&(_.title=o.title),_.tagName==="IMG"&&(_.alt=o.alt||"")),et(_,h),o.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Je(_,"focus",this._panOnFocus,this);var k=o.icon.createShadow(this._shadow),F=!1;k!==this._shadow&&(this._removeShadow(),F=!0),k&&(et(k,h),k.alt=""),this._shadow=k,o.opacity<1&&this._updateOpacity(),S&&this.getPane().appendChild(this._icon),this._initInteraction(),k&&F&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Rt(this._icon,"focus",this._panOnFocus,this),Ht(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ht(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&fn(this._icon,o),this._shadow&&fn(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(et(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),fx)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new fx(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&Mr(this._icon,o),this._shadow&&Mr(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var h=this.options.icon.options,_=h.iconSize?B(h.iconSize):B(0,0),S=h.iconAnchor?B(h.iconAnchor):B(0,0);o.panInside(this._latlng,{paddingTopLeft:S,paddingBottomRight:_.subtract(S)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function c2(o,h){return new kd(o,h)}var Js=ai.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return b(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Cd=Js.extend({options:{fill:!0,radius:10},initialize:function(o,h){b(this,h),this._latlng=V(o),this._radius=this.options.radius},setLatLng:function(o){var h=this._latlng;return this._latlng=V(o),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var h=o&&o.radius||this._radius;return Js.prototype.setStyle.call(this,o),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,h=this._radiusY||o,_=this._clickTolerance(),S=[o+_,h+_];this._pxBounds=new j(this._point.subtract(S),this._point.add(S))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function f2(o,h){return new Cd(o,h)}var qg=Cd.extend({initialize:function(o,h,_){if(typeof h=="number"&&(h=i({},_,{radius:h})),b(this,h),this._latlng=V(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new H(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Js.prototype.setStyle,_project:function(){var o=this._latlng.lng,h=this._latlng.lat,_=this._map,S=_.options.crs;if(S.distance===re.distance){var k=Math.PI/180,F=this._mRadius/re.R/k,X=_.project([h+F,o]),ne=_.project([h-F,o]),ae=X.add(ne).divideBy(2),pe=_.unproject(ae).lat,Te=Math.acos((Math.cos(F*k)-Math.sin(h*k)*Math.sin(pe*k))/(Math.cos(h*k)*Math.cos(pe*k)))/k;(isNaN(Te)||Te===0)&&(Te=F/Math.cos(Math.PI/180*h)),this._point=ae.subtract(_.getPixelOrigin()),this._radius=isNaN(Te)?0:ae.x-_.project([pe,o-Te]).x,this._radiusY=ae.y-X.y}else{var ze=S.unproject(S.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(ze).x}this._updateBounds()}});function d2(o,h,_){return new qg(o,h,_)}var ms=Js.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,h){b(this,h),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var h=1/0,_=null,S=Vu,k,F,X=0,ne=this._parts.length;X<ne;X++)for(var ae=this._parts[X],pe=1,Te=ae.length;pe<Te;pe++){k=ae[pe-1],F=ae[pe];var ze=S(o,k,F,!0);ze<h&&(h=ze,_=S(o,k,F))}return _&&(_.distance=Math.sqrt(h)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ux(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,h){return h=h||this._defaultShape(),o=V(o),h.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new H,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return Dr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var h=[],_=Dr(o),S=0,k=o.length;S<k;S++)_?(h[S]=V(o[S]),this._bounds.extend(h[S])):h[S]=this._convertLatLngs(o[S]);return h},_project:function(){var o=new j;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),h=new Z(o,o);this._rawPxBounds&&(this._pxBounds=new j([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(o,h,_){var S=o[0]instanceof J,k=o.length,F,X;if(S){for(X=[],F=0;F<k;F++)X[F]=this._map.latLngToLayerPoint(o[F]),_.extend(X[F]);h.push(X)}else for(F=0;F<k;F++)this._projectLatlngs(o[F],h,_)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,_,S,k,F,X,ne,ae;for(_=0,k=0,F=this._rings.length;_<F;_++)for(ae=this._rings[_],S=0,X=ae.length;S<X-1;S++)ne=ox(ae[S],ae[S+1],o,S,!0),ne&&(h[k]=h[k]||[],h[k].push(ne[0]),(ne[1]!==ae[S+1]||S===X-2)&&(h[k].push(ne[1]),k++))}},_simplifyPoints:function(){for(var o=this._parts,h=this.options.smoothFactor,_=0,S=o.length;_<S;_++)o[_]=ix(o[_],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,h){var _,S,k,F,X,ne,ae=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(_=0,F=this._parts.length;_<F;_++)for(ne=this._parts[_],S=0,X=ne.length,k=X-1;S<X;k=S++)if(!(!h&&S===0)&&sx(o,ne[k],ne[S])<=ae)return!0;return!1}});function h2(o,h){return new ms(o,h)}ms._flat=lx;var Vo=ms.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return rx(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var h=ms.prototype._convertLatLngs.call(this,o),_=h.length;return _>=2&&h[0]instanceof J&&h[0].equals(h[_-1])&&h.pop(),h},_setLatLngs:function(o){ms.prototype._setLatLngs.call(this,o),Dr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Dr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,h=this.options.weight,_=new Z(h,h);if(o=new j(o.min.subtract(_),o.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var S=0,k=this._rings.length,F;S<k;S++)F=nx(this._rings[S],o,!0),F.length&&this._parts.push(F)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var h=!1,_,S,k,F,X,ne,ae,pe;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(F=0,ae=this._parts.length;F<ae;F++)for(_=this._parts[F],X=0,pe=_.length,ne=pe-1;X<pe;ne=X++)S=_[X],k=_[ne],S.y>o.y!=k.y>o.y&&o.x<(k.x-S.x)*(o.y-S.y)/(k.y-S.y)+S.x&&(h=!h);return h||ms.prototype._containsPoint.call(this,o,!0)}});function p2(o,h){return new Vo(o,h)}var gs=ps.extend({initialize:function(o,h){b(this,h),this._layers={},o&&this.addData(o)},addData:function(o){var h=x(o)?o:o.features,_,S,k;if(h){for(_=0,S=h.length;_<S;_++)k=h[_],(k.geometries||k.geometry||k.features||k.coordinates)&&this.addData(k);return this}var F=this.options;if(F.filter&&!F.filter(o))return this;var X=Rd(o,F);return X?(X.feature=Id(o),X.defaultOptions=X.options,this.resetStyle(X),F.onEachFeature&&F.onEachFeature(o,X),this.addLayer(X)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=i({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(h){this._setLayerStyle(h,o)},this)},_setLayerStyle:function(o,h){o.setStyle&&(typeof h=="function"&&(h=h(o.feature)),o.setStyle(h))}});function Rd(o,h){var _=o.type==="Feature"?o.geometry:o,S=_?_.coordinates:null,k=[],F=h&&h.pointToLayer,X=h&&h.coordsToLatLng||Hg,ne,ae,pe,Te;if(!S&&!_)return null;switch(_.type){case"Point":return ne=X(S),dx(F,o,ne,h);case"MultiPoint":for(pe=0,Te=S.length;pe<Te;pe++)ne=X(S[pe]),k.push(dx(F,o,ne,h));return new ps(k);case"LineString":case"MultiLineString":return ae=Ld(S,_.type==="LineString"?0:1,X),new ms(ae,h);case"Polygon":case"MultiPolygon":return ae=Ld(S,_.type==="Polygon"?1:2,X),new Vo(ae,h);case"GeometryCollection":for(pe=0,Te=_.geometries.length;pe<Te;pe++){var ze=Rd({geometry:_.geometries[pe],type:"Feature",properties:o.properties},h);ze&&k.push(ze)}return new ps(k);case"FeatureCollection":for(pe=0,Te=_.features.length;pe<Te;pe++){var it=Rd(_.features[pe],h);it&&k.push(it)}return new ps(k);default:throw new Error("Invalid GeoJSON object.")}}function dx(o,h,_,S){return o?o(h,_):new kd(_,S&&S.markersInheritOptions&&S)}function Hg(o){return new J(o[1],o[0],o[2])}function Ld(o,h,_){for(var S=[],k=0,F=o.length,X;k<F;k++)X=h?Ld(o[k],h-1,_):(_||Hg)(o[k]),S.push(X);return S}function Zg(o,h){return o=V(o),o.alt!==void 0?[p(o.lng,h),p(o.lat,h),p(o.alt,h)]:[p(o.lng,h),p(o.lat,h)]}function Nd(o,h,_,S){for(var k=[],F=0,X=o.length;F<X;F++)k.push(h?Nd(o[F],Dr(o[F])?0:h-1,_,S):Zg(o[F],S));return!h&&_&&k.length>0&&k.push(k[0].slice()),k}function qo(o,h){return o.feature?i({},o.feature,{geometry:h}):Id(h)}function Id(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var Wg={toGeoJSON:function(o){return qo(this,{type:"Point",coordinates:Zg(this.getLatLng(),o)})}};kd.include(Wg),qg.include(Wg),Cd.include(Wg),ms.include({toGeoJSON:function(o){var h=!Dr(this._latlngs),_=Nd(this._latlngs,h?1:0,!1,o);return qo(this,{type:(h?"Multi":"")+"LineString",coordinates:_})}}),Vo.include({toGeoJSON:function(o){var h=!Dr(this._latlngs),_=h&&!Dr(this._latlngs[0]),S=Nd(this._latlngs,_?2:h?1:0,!0,o);return h||(S=[S]),qo(this,{type:(_?"Multi":"")+"Polygon",coordinates:S})}}),Uo.include({toMultiPoint:function(o){var h=[];return this.eachLayer(function(_){h.push(_.toGeoJSON(o).geometry.coordinates)}),qo(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(o){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(o);var _=h==="GeometryCollection",S=[];return this.eachLayer(function(k){if(k.toGeoJSON){var F=k.toGeoJSON(o);if(_)S.push(F.geometry);else{var X=Id(F);X.type==="FeatureCollection"?S.push.apply(S,X.features):S.push(X)}}}),_?qo(this,{geometries:S,type:"GeometryCollection"}):{type:"FeatureCollection",features:S}}});function hx(o,h){return new gs(o,h)}var m2=hx,jd=ai.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,h,_){this._url=o,this._bounds=Y(h),b(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(et(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ht(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Bo(this._image),this},bringToBack:function(){return this._map&&Fo(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=Y(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",h=this._image=o?this._url:yt("img");if(et(h,"leaflet-image-layer"),this._zoomAnimated&&et(h,"leaflet-zoom-animated"),this.options.className&&et(h,this.options.className),h.onselectstart=d,h.onmousemove=d,h.onload=a(this.fire,this,"load"),h.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(o){var h=this._map.getZoomScale(o.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;qa(this._image,_,h)},_reset:function(){var o=this._image,h=new j(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=h.getSize();fn(o,h.min),o.style.width=_.x+"px",o.style.height=_.y+"px"},_updateOpacity:function(){Mr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),g2=function(o,h,_){return new jd(o,h,_)},px=jd.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",h=this._image=o?this._url:yt("video");if(et(h,"leaflet-image-layer"),this._zoomAnimated&&et(h,"leaflet-zoom-animated"),this.options.className&&et(h,this.options.className),h.onselectstart=d,h.onmousemove=d,h.onloadeddata=a(this.fire,this,"load"),o){for(var _=h.getElementsByTagName("source"),S=[],k=0;k<_.length;k++)S.push(_[k].src);this._url=_.length>0?S:[h.src];return}x(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var F=0;F<this._url.length;F++){var X=yt("source");X.src=this._url[F],h.appendChild(X)}}});function y2(o,h,_){return new px(o,h,_)}var mx=jd.extend({_initImage:function(){var o=this._image=this._url;et(o,"leaflet-image-layer"),this._zoomAnimated&&et(o,"leaflet-zoom-animated"),this.options.className&&et(o,this.options.className),o.onselectstart=d,o.onmousemove=d}});function v2(o,h,_){return new mx(o,h,_)}var Vi=ai.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,h){o&&(o instanceof J||x(o))?(this._latlng=V(o),b(this,h)):(b(this,o),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&Mr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&Mr(this._container,1),this.bringToFront(),this.options.interactive&&(et(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(Mr(this._container,0),this._removeTimeout=setTimeout(a(Ht,void 0,this._container),200)):Ht(this._container),this.options.interactive&&(on(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=V(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Bo(this._container),this},bringToBack:function(){return this._map&&Fo(this._container),this},_prepareOpen:function(o){var h=this._source;if(!h._map)return!1;if(h instanceof ps){h=null;var _=this._source._layers;for(var S in _)if(_[S]._map){h=_[S];break}if(!h)return!1;this._source=h}if(!o)if(h.getCenter)o=h.getCenter();else if(h.getLatLng)o=h.getLatLng();else if(h.getBounds)o=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")o.innerHTML=h;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),h=B(this.options.offset),_=this._getAnchor();this._zoomAnimated?fn(this._container,o.add(_)):h=h.add(o).add(_);var S=this._containerBottom=-h.y,k=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=S+"px",this._container.style.left=k+"px"}},_getAnchor:function(){return[0,0]}});ft.include({_initOverlay:function(o,h,_,S){var k=h;return k instanceof o||(k=new o(S).setContent(h)),_&&k.setLatLng(_),k}}),ai.include({_initOverlay:function(o,h,_,S){var k=_;return k instanceof o?(b(k,S),k._source=this):(k=h&&!S?h:new o(S,this),k.setContent(_)),k}});var Md=Vi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Vi.prototype.openOn.call(this,o)},onAdd:function(o){Vi.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Js||this._source.on("preclick",Za))},onRemove:function(o){Vi.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Js||this._source.off("preclick",Za))},getEvents:function(){var o=Vi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",h=this._container=yt("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=yt("div",o+"-content-wrapper",h);if(this._contentNode=yt("div",o+"-content",_),Uu(h),Mg(this._contentNode),Je(h,"contextmenu",Za),this._tipContainer=yt("div",o+"-tip-container",h),this._tip=yt("div",o+"-tip",this._tipContainer),this.options.closeButton){var S=this._closeButton=yt("a",o+"-close-button",h);S.setAttribute("role","button"),S.setAttribute("aria-label","Close popup"),S.href="#close",S.innerHTML='<span aria-hidden="true">&#215;</span>',Je(S,"click",function(k){Rn(k),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,h=o.style;h.width="",h.whiteSpace="nowrap";var _=o.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),h.width=_+1+"px",h.whiteSpace="",h.height="";var S=o.offsetHeight,k=this.options.maxHeight,F="leaflet-popup-scrolled";k&&S>k?(h.height=k+"px",et(o,F)):on(o,F),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),_=this._getAnchor();fn(this._container,h.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,h=parseInt(Du(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+h,S=this._containerWidth,k=new Z(this._containerLeft,-_-this._containerBottom);k._add(Ha(this._container));var F=o.layerPointToContainerPoint(k),X=B(this.options.autoPanPadding),ne=B(this.options.autoPanPaddingTopLeft||X),ae=B(this.options.autoPanPaddingBottomRight||X),pe=o.getSize(),Te=0,ze=0;F.x+S+ae.x>pe.x&&(Te=F.x+S-pe.x+ae.x),F.x-Te-ne.x<0&&(Te=F.x-ne.x),F.y+_+ae.y>pe.y&&(ze=F.y+_-pe.y+ae.y),F.y-ze-ne.y<0&&(ze=F.y-ne.y),(Te||ze)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Te,ze]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),_2=function(o,h){return new Md(o,h)};ft.mergeOptions({closePopupOnClick:!0}),ft.include({openPopup:function(o,h,_){return this._initOverlay(Md,o,h,_).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),ai.include({bindPopup:function(o,h){return this._popup=this._initOverlay(Md,this._popup,o,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof ps||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Wa(o);var h=o.layer||o.target;if(this._popup._source===h&&!(h instanceof Js)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=h,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Dd=Vi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Vi.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Vi.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Vi.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",h=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=yt("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var h,_,S=this._map,k=this._container,F=S.latLngToContainerPoint(S.getCenter()),X=S.layerPointToContainerPoint(o),ne=this.options.direction,ae=k.offsetWidth,pe=k.offsetHeight,Te=B(this.options.offset),ze=this._getAnchor();ne==="top"?(h=ae/2,_=pe):ne==="bottom"?(h=ae/2,_=0):ne==="center"?(h=ae/2,_=pe/2):ne==="right"?(h=0,_=pe/2):ne==="left"?(h=ae,_=pe/2):X.x<F.x?(ne="right",h=0,_=pe/2):(ne="left",h=ae+(Te.x+ze.x)*2,_=pe/2),o=o.subtract(B(h,_,!0)).add(Te).add(ze),on(k,"leaflet-tooltip-right"),on(k,"leaflet-tooltip-left"),on(k,"leaflet-tooltip-top"),on(k,"leaflet-tooltip-bottom"),et(k,"leaflet-tooltip-"+ne),fn(k,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&Mr(this._container,o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(h)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),b2=function(o,h){return new Dd(o,h)};ft.include({openTooltip:function(o,h,_){return this._initOverlay(Dd,o,h,_).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),ai.include({bindTooltip:function(o,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Dd,this._tooltip,o,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var h=o?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[h](_),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof ps||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&(Je(h,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),Je(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var h=o.latlng,_,S;this._tooltip.options.sticky&&o.originalEvent&&(_=this._map.mouseEventToContainerPoint(o.originalEvent),S=this._map.containerPointToLayerPoint(_),h=this._map.layerPointToLatLng(S)),this._tooltip.setLatLng(h)}});var gx=zo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var h=o&&o.tagName==="DIV"?o:document.createElement("div"),_=this.options;if(_.html instanceof Element?(Ed(h),h.appendChild(_.html)):h.innerHTML=_.html!==!1?_.html:"",_.bgPos){var S=B(_.bgPos);h.style.backgroundPosition=-S.x+"px "+-S.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function w2(o){return new gx(o)}zo.Default=qu;var Hu=ai.extend({options:{tileSize:256,opacity:1,updateWhenIdle:_e.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){b(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Ht(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Bo(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Fo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof Z?o:new Z(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var h=this.getPane().children,_=-o(-1/0,1/0),S=0,k=h.length,F;S<k;S++)F=h[S].style.zIndex,h[S]!==this._container&&F&&(_=o(_,+F));isFinite(_)&&(this.options.zIndex=_+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!_e.ielt9){Mr(this._container,this.options.opacity);var o=+new Date,h=!1,_=!1;for(var S in this._tiles){var k=this._tiles[S];if(!(!k.current||!k.loaded)){var F=Math.min(1,(o-k.loaded)/200);Mr(k.el,F),F<1?h=!0:(k.active?_=!0:this._onOpaqueTile(k),k.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),h&&(N(this._fadeFrame),this._fadeFrame=P(this._updateOpacity,this))}},_onOpaqueTile:d,_initContainer:function(){this._container||(this._container=yt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,h=this.options.maxZoom;if(o!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===o?(this._levels[_].el.style.zIndex=h-Math.abs(o-_),this._onUpdateLevel(_)):(Ht(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var S=this._levels[o],k=this._map;return S||(S=this._levels[o]={},S.el=yt("div","leaflet-tile-container leaflet-zoom-animated",this._container),S.el.style.zIndex=h,S.origin=k.project(k.unproject(k.getPixelOrigin()),o).round(),S.zoom=o,this._setZoomTransform(S,k.getCenter(),k.getZoom()),d(S.el.offsetWidth),this._onCreateLevel(S)),this._level=S,S}},_onUpdateLevel:d,_onRemoveLevel:d,_onCreateLevel:d,_pruneTiles:function(){if(this._map){var o,h,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)h=this._tiles[o],h.retain=h.current;for(o in this._tiles)if(h=this._tiles[o],h.current&&!h.active){var S=h.coords;this._retainParent(S.x,S.y,S.z,S.z-5)||this._retainChildren(S.x,S.y,S.z,S.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var h in this._tiles)this._tiles[h].coords.z===o&&this._removeTile(h)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Ht(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,h,_,S){var k=Math.floor(o/2),F=Math.floor(h/2),X=_-1,ne=new Z(+k,+F);ne.z=+X;var ae=this._tileCoordsToKey(ne),pe=this._tiles[ae];return pe&&pe.active?(pe.retain=!0,!0):(pe&&pe.loaded&&(pe.retain=!0),X>S?this._retainParent(k,F,X,S):!1)},_retainChildren:function(o,h,_,S){for(var k=2*o;k<2*o+2;k++)for(var F=2*h;F<2*h+2;F++){var X=new Z(k,F);X.z=_+1;var ne=this._tileCoordsToKey(X),ae=this._tiles[ne];if(ae&&ae.active){ae.retain=!0;continue}else ae&&ae.loaded&&(ae.retain=!0);_+1<S&&this._retainChildren(k,F,_+1,S)}},_resetView:function(o){var h=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var h=this.options;return h.minNativeZoom!==void 0&&o<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<o?h.maxNativeZoom:o},_setView:function(o,h,_,S){var k=Math.round(h);this.options.maxZoom!==void 0&&k>this.options.maxZoom||this.options.minZoom!==void 0&&k<this.options.minZoom?k=void 0:k=this._clampZoom(k);var F=this.options.updateWhenZooming&&k!==this._tileZoom;(!S||F)&&(this._tileZoom=k,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),k!==void 0&&this._update(o),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(o,h)},_setZoomTransforms:function(o,h){for(var _ in this._levels)this._setZoomTransform(this._levels[_],o,h)},_setZoomTransform:function(o,h,_){var S=this._map.getZoomScale(_,o.zoom),k=o.origin.multiplyBy(S).subtract(this._map._getNewPixelOrigin(h,_)).round();_e.any3d?qa(o.el,k,S):fn(o.el,k)},_resetGrid:function(){var o=this._map,h=o.options.crs,_=this._tileSize=this.getTileSize(),S=this._tileZoom,k=this._map.getPixelWorldBounds(this._tileZoom);k&&(this._globalTileRange=this._pxBoundsToTileRange(k)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,h.wrapLng[0]],S).x/_.x),Math.ceil(o.project([0,h.wrapLng[1]],S).x/_.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([h.wrapLat[0],0],S).y/_.x),Math.ceil(o.project([h.wrapLat[1],0],S).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var h=this._map,_=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),S=h.getZoomScale(_,this._tileZoom),k=h.project(o,this._tileZoom).floor(),F=h.getSize().divideBy(S*2);return new j(k.subtract(F),k.add(F))},_update:function(o){var h=this._map;if(h){var _=this._clampZoom(h.getZoom());if(o===void 0&&(o=h.getCenter()),this._tileZoom!==void 0){var S=this._getTiledPixelBounds(o),k=this._pxBoundsToTileRange(S),F=k.getCenter(),X=[],ne=this.options.keepBuffer,ae=new j(k.getBottomLeft().subtract([ne,-ne]),k.getTopRight().add([ne,-ne]));if(!(isFinite(k.min.x)&&isFinite(k.min.y)&&isFinite(k.max.x)&&isFinite(k.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var pe in this._tiles){var Te=this._tiles[pe].coords;(Te.z!==this._tileZoom||!ae.contains(new Z(Te.x,Te.y)))&&(this._tiles[pe].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(o,_);return}for(var ze=k.min.y;ze<=k.max.y;ze++)for(var it=k.min.x;it<=k.max.x;it++){var Jn=new Z(it,ze);if(Jn.z=this._tileZoom,!!this._isValidTile(Jn)){var Sn=this._tiles[this._tileCoordsToKey(Jn)];Sn?Sn.current=!0:X.push(Jn)}}if(X.sort(function(lr,Zo){return lr.distanceTo(F)-Zo.distanceTo(F)}),X.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var $r=document.createDocumentFragment();for(it=0;it<X.length;it++)this._addTile(X[it],$r);this._level.el.appendChild($r)}}}},_isValidTile:function(o){var h=this._map.options.crs;if(!h.infinite){var _=this._globalTileRange;if(!h.wrapLng&&(o.x<_.min.x||o.x>_.max.x)||!h.wrapLat&&(o.y<_.min.y||o.y>_.max.y))return!1}if(!this.options.bounds)return!0;var S=this._tileCoordsToBounds(o);return Y(this.options.bounds).overlaps(S)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var h=this._map,_=this.getTileSize(),S=o.scaleBy(_),k=S.add(_),F=h.unproject(S,o.z),X=h.unproject(k,o.z);return[F,X]},_tileCoordsToBounds:function(o){var h=this._tileCoordsToNwSe(o),_=new H(h[0],h[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var h=o.split(":"),_=new Z(+h[0],+h[1]);return _.z=+h[2],_},_removeTile:function(o){var h=this._tiles[o];h&&(Ht(h.el),delete this._tiles[o],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){et(o,"leaflet-tile");var h=this.getTileSize();o.style.width=h.x+"px",o.style.height=h.y+"px",o.onselectstart=d,o.onmousemove=d,_e.ielt9&&this.options.opacity<1&&Mr(o,this.options.opacity)},_addTile:function(o,h){var _=this._getTilePos(o),S=this._tileCoordsToKey(o),k=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(k),this.createTile.length<2&&P(a(this._tileReady,this,o,null,k)),fn(k,_),this._tiles[S]={el:k,coords:o,current:!0},h.appendChild(k),this.fire("tileloadstart",{tile:k,coords:o})},_tileReady:function(o,h,_){h&&this.fire("tileerror",{error:h,tile:_,coords:o});var S=this._tileCoordsToKey(o);_=this._tiles[S],_&&(_.loaded=+new Date,this._map._fadeAnimated?(Mr(_.el,0),N(this._fadeFrame),this._fadeFrame=P(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),h||(et(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),_e.ielt9||!this._map._fadeAnimated?P(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var h=new Z(this._wrapX?f(o.x,this._wrapX):o.x,this._wrapY?f(o.y,this._wrapY):o.y);return h.z=o.z,h},_pxBoundsToTileRange:function(o){var h=this.getTileSize();return new j(o.min.unscaleBy(h).floor(),o.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function x2(o){return new Hu(o)}var Ho=Hu.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,h){this._url=o,h=b(this,h),h.detectRetina&&_e.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,h){return this._url===o&&h===void 0&&(h=!0),this._url=o,h||this.redraw(),this},createTile:function(o,h){var _=document.createElement("img");return Je(_,"load",a(this._tileOnLoad,this,h,_)),Je(_,"error",a(this._tileOnError,this,h,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(o),_},getTileUrl:function(o){var h={r:_e.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-o.y;this.options.tms&&(h.y=_),h["-y"]=_}return v(this._url,i(h,this.options))},_tileOnLoad:function(o,h){_e.ielt9?setTimeout(a(o,this,null,h),0):o(null,h)},_tileOnError:function(o,h,_){var S=this.options.errorTileUrl;S&&h.getAttribute("src")!==S&&(h.src=S),o(_,h)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,h=this.options.maxZoom,_=this.options.zoomReverse,S=this.options.zoomOffset;return _&&(o=h-o),o+S},_getSubdomain:function(o){var h=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var o,h;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(h=this._tiles[o].el,h.onload=d,h.onerror=d,!h.complete)){h.src=T;var _=this._tiles[o].coords;Ht(h),delete this._tiles[o],this.fire("tileabort",{tile:h,coords:_})}},_removeTile:function(o){var h=this._tiles[o];if(h)return h.el.setAttribute("src",T),Hu.prototype._removeTile.call(this,o)},_tileReady:function(o,h,_){if(!(!this._map||_&&_.getAttribute("src")===T))return Hu.prototype._tileReady.call(this,o,h,_)}});function yx(o,h){return new Ho(o,h)}var vx=Ho.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,h){this._url=o;var _=i({},this.defaultWmsParams);for(var S in h)S in this.options||(_[S]=h[S]);h=b(this,h);var k=h.detectRetina&&_e.retina?2:1,F=this.getTileSize();_.width=F.x*k,_.height=F.y*k,this.wmsParams=_},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Ho.prototype.onAdd.call(this,o)},getTileUrl:function(o){var h=this._tileCoordsToNwSe(o),_=this._crs,S=U(_.project(h[0]),_.project(h[1])),k=S.min,F=S.max,X=(this._wmsVersion>=1.3&&this._crs===cx?[k.y,k.x,F.y,F.x]:[k.x,k.y,F.x,F.y]).join(","),ne=Ho.prototype.getTileUrl.call(this,o);return ne+w(this.wmsParams,ne,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+X},setParams:function(o,h){return i(this.wmsParams,o),h||this.redraw(),this}});function E2(o,h){return new vx(o,h)}Ho.WMS=vx,yx.wms=E2;var ys=ai.extend({options:{padding:.1},initialize:function(o){b(this,o),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),et(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,h){var _=this._map.getZoomScale(h,this._zoom),S=this._map.getSize().multiplyBy(.5+this.options.padding),k=this._map.project(this._center,h),F=S.multiplyBy(-_).add(k).subtract(this._map._getNewPixelOrigin(o,h));_e.any3d?qa(this._container,F,_):fn(this._container,F)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,h=this._map.getSize(),_=this._map.containerPointToLayerPoint(h.multiplyBy(-o)).round();this._bounds=new j(_,_.add(h.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),_x=ys.extend({options:{tolerance:0},getEvents:function(){var o=ys.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ys.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");Je(o,"mousemove",this._onMouseMove,this),Je(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Je(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){N(this._redrawRequest),delete this._ctx,Ht(this._container),Rt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var h in this._layers)o=this._layers[h],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ys.prototype._update.call(this);var o=this._bounds,h=this._container,_=o.getSize(),S=_e.retina?2:1;fn(h,o.min),h.width=S*_.x,h.height=S*_.y,h.style.width=_.x+"px",h.style.height=_.y+"px",_e.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){ys.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[u(o)]=o;var h=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var h=o._order,_=h.next,S=h.prev;_?_.prev=S:this._drawLast=S,S?S.next=_:this._drawFirst=_,delete o._order,delete this._layers[u(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var h=o.options.dashArray.split(/[, ]+/),_=[],S,k;for(k=0;k<h.length;k++){if(S=Number(h[k]),isNaN(S))return;_.push(S)}o.options._dashArray=_}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||P(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var h=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new j,this._redrawBounds.extend(o._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(o._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var h=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,h=this._redrawBounds;if(this._ctx.save(),h){var _=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var S=this._drawFirst;S;S=S.next)o=S.layer,(!h||o._pxBounds&&o._pxBounds.intersects(h))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,h){if(this._drawing){var _,S,k,F,X=o._parts,ne=X.length,ae=this._ctx;if(ne){for(ae.beginPath(),_=0;_<ne;_++){for(S=0,k=X[_].length;S<k;S++)F=X[_][S],ae[S?"lineTo":"moveTo"](F.x,F.y);h&&ae.closePath()}this._fillStroke(ae,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var h=o._point,_=this._ctx,S=Math.max(Math.round(o._radius),1),k=(Math.max(Math.round(o._radiusY),1)||S)/S;k!==1&&(_.save(),_.scale(1,k)),_.beginPath(),_.arc(h.x,h.y/k,S,0,Math.PI*2,!1),k!==1&&_.restore(),this._fillStroke(_,o)}},_fillStroke:function(o,h){var _=h.options;_.fill&&(o.globalAlpha=_.fillOpacity,o.fillStyle=_.fillColor||_.color,o.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(o.setLineDash&&o.setLineDash(h.options&&h.options._dashArray||[]),o.globalAlpha=_.opacity,o.lineWidth=_.weight,o.strokeStyle=_.color,o.lineCap=_.lineCap,o.lineJoin=_.lineJoin,o.stroke())},_onClick:function(o){for(var h=this._map.mouseEventToLayerPoint(o),_,S,k=this._drawFirst;k;k=k.next)_=k.layer,_.options.interactive&&_._containsPoint(h)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(_))&&(S=_);this._fireEvent(S?[S]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,h)}},_handleMouseOut:function(o){var h=this._hoveredLayer;h&&(on(this._container,"leaflet-interactive"),this._fireEvent([h],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,h){if(!this._mouseHoverThrottled){for(var _,S,k=this._drawFirst;k;k=k.next)_=k.layer,_.options.interactive&&_._containsPoint(h)&&(S=_);S!==this._hoveredLayer&&(this._handleMouseOut(o),S&&(et(this._container,"leaflet-interactive"),this._fireEvent([S],o,"mouseover"),this._hoveredLayer=S)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,h,_){this._map._fireDOMEvent(h,_||h.type,o)},_bringToFront:function(o){var h=o._order;if(h){var _=h.next,S=h.prev;if(_)_.prev=S;else return;S?S.next=_:_&&(this._drawFirst=_),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(o)}},_bringToBack:function(o){var h=o._order;if(h){var _=h.next,S=h.prev;if(S)S.next=_;else return;_?_.prev=S:S&&(this._drawLast=S),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(o)}}});function bx(o){return _e.canvas?new _x(o):null}var Zu=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),S2={_initContainer:function(){this._container=yt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ys.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var h=o._container=Zu("shape");et(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",o._path=Zu("path"),h.appendChild(o._path),this._updateStyle(o),this._layers[u(o)]=o},_addPath:function(o){var h=o._container;this._container.appendChild(h),o.options.interactive&&o.addInteractiveTarget(h)},_removePath:function(o){var h=o._container;Ht(h),o.removeInteractiveTarget(h),delete this._layers[u(o)]},_updateStyle:function(o){var h=o._stroke,_=o._fill,S=o.options,k=o._container;k.stroked=!!S.stroke,k.filled=!!S.fill,S.stroke?(h||(h=o._stroke=Zu("stroke")),k.appendChild(h),h.weight=S.weight+"px",h.color=S.color,h.opacity=S.opacity,S.dashArray?h.dashStyle=x(S.dashArray)?S.dashArray.join(" "):S.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=S.lineCap.replace("butt","flat"),h.joinstyle=S.lineJoin):h&&(k.removeChild(h),o._stroke=null),S.fill?(_||(_=o._fill=Zu("fill")),k.appendChild(_),_.color=S.fillColor||S.color,_.opacity=S.fillOpacity):_&&(k.removeChild(_),o._fill=null)},_updateCircle:function(o){var h=o._point.round(),_=Math.round(o._radius),S=Math.round(o._radiusY||_);this._setPath(o,o._empty()?"M0 0":"AL "+h.x+","+h.y+" "+_+","+S+" 0,"+65535*360)},_setPath:function(o,h){o._path.v=h},_bringToFront:function(o){Bo(o._container)},_bringToBack:function(o){Fo(o._container)}},$d=_e.vml?Zu:We,Wu=ys.extend({_initContainer:function(){this._container=$d("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=$d("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ht(this._container),Rt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ys.prototype._update.call(this);var o=this._bounds,h=o.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,_.setAttribute("width",h.x),_.setAttribute("height",h.y)),fn(_,o.min),_.setAttribute("viewBox",[o.min.x,o.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(o){var h=o._path=$d("path");o.options.className&&et(h,o.options.className),o.options.interactive&&et(h,"leaflet-interactive"),this._updateStyle(o),this._layers[u(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Ht(o._path),o.removeInteractiveTarget(o._path),delete this._layers[u(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var h=o._path,_=o.options;h&&(_.stroke?(h.setAttribute("stroke",_.color),h.setAttribute("stroke-opacity",_.opacity),h.setAttribute("stroke-width",_.weight),h.setAttribute("stroke-linecap",_.lineCap),h.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?h.setAttribute("stroke-dasharray",_.dashArray):h.removeAttribute("stroke-dasharray"),_.dashOffset?h.setAttribute("stroke-dashoffset",_.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),_.fill?(h.setAttribute("fill",_.fillColor||_.color),h.setAttribute("fill-opacity",_.fillOpacity),h.setAttribute("fill-rule",_.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(o,h){this._setPath(o,$t(o._parts,h))},_updateCircle:function(o){var h=o._point,_=Math.max(Math.round(o._radius),1),S=Math.max(Math.round(o._radiusY),1)||_,k="a"+_+","+S+" 0 1,0 ",F=o._empty()?"M0 0":"M"+(h.x-_)+","+h.y+k+_*2+",0 "+k+-_*2+",0 ";this._setPath(o,F)},_setPath:function(o,h){o._path.setAttribute("d",h)},_bringToFront:function(o){Bo(o._path)},_bringToBack:function(o){Fo(o._path)}});_e.vml&&Wu.include(S2);function wx(o){return _e.svg||_e.vml?new Wu(o):null}ft.include({getRenderer:function(o){var h=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var h=this._paneRenderers[o];return h===void 0&&(h=this._createRenderer({pane:o}),this._paneRenderers[o]=h),h},_createRenderer:function(o){return this.options.preferCanvas&&bx(o)||wx(o)}});var xx=Vo.extend({initialize:function(o,h){Vo.prototype.initialize.call(this,this._boundsToLatLngs(o),h)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=Y(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function T2(o,h){return new xx(o,h)}Wu.create=$d,Wu.pointsToPath=$t,gs.geometryToLayer=Rd,gs.coordsToLatLng=Hg,gs.coordsToLatLngs=Ld,gs.latLngToCoords=Zg,gs.latLngsToCoords=Nd,gs.getFeature=qo,gs.asFeature=Id,ft.mergeOptions({boxZoom:!0});var Ex=zi.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){Je(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Rt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ht(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),$u(),Ag(),this._startPoint=this._map.mouseEventToContainerPoint(o),Je(document,{contextmenu:Wa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=yt("div","leaflet-zoom-box",this._container),et(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var h=new j(this._point,this._startPoint),_=h.getSize();fn(this._box,h.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(Ht(this._box),on(this._container,"leaflet-crosshair")),Bu(),kg(),Rt(document,{contextmenu:Wa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var h=new H(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ft.addInitHook("addHandler","boxZoom",Ex),ft.mergeOptions({doubleClickZoom:!0});var Sx=zi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var h=this._map,_=h.getZoom(),S=h.options.zoomDelta,k=o.originalEvent.shiftKey?_-S:_+S;h.options.doubleClickZoom==="center"?h.setZoom(k):h.setZoomAround(o.containerPoint,k)}});ft.addInitHook("addHandler","doubleClickZoom",Sx),ft.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Tx=zi.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Ks(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}et(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){on(this._map._container,"leaflet-grab"),on(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=Y(this._map.options.maxBounds);this._offsetLimit=U(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var h=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(h),this._prunePositions(h)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,h){return o-(o-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;o.x<h.min.x&&(o.x=this._viscousLimit(o.x,h.min.x)),o.y<h.min.y&&(o.y=this._viscousLimit(o.y,h.min.y)),o.x>h.max.x&&(o.x=this._viscousLimit(o.x,h.max.x)),o.y>h.max.y&&(o.y=this._viscousLimit(o.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,h=Math.round(o/2),_=this._initialWorldOffset,S=this._draggable._newPos.x,k=(S-h+_)%o+h-_,F=(S+h+_)%o-h-_,X=Math.abs(k+_)<Math.abs(F+_)?k:F;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=X},_onDragEnd:function(o){var h=this._map,_=h.options,S=!_.inertia||o.noInertia||this._times.length<2;if(h.fire("dragend",o),S)h.fire("moveend");else{this._prunePositions(+new Date);var k=this._lastPos.subtract(this._positions[0]),F=(this._lastTime-this._times[0])/1e3,X=_.easeLinearity,ne=k.multiplyBy(X/F),ae=ne.distanceTo([0,0]),pe=Math.min(_.inertiaMaxSpeed,ae),Te=ne.multiplyBy(pe/ae),ze=pe/(_.inertiaDeceleration*X),it=Te.multiplyBy(-ze/2).round();!it.x&&!it.y?h.fire("moveend"):(it=h._limitOffset(it,h.options.maxBounds),P(function(){h.panBy(it,{duration:ze,easeLinearity:X,noMoveStart:!0,animate:!0})}))}}});ft.addInitHook("addHandler","dragging",Tx),ft.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Px=zi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),Je(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Rt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,h=document.documentElement,_=o.scrollTop||h.scrollTop,S=o.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(S,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var h=this._panKeys={},_=this.keyCodes,S,k;for(S=0,k=_.left.length;S<k;S++)h[_.left[S]]=[-1*o,0];for(S=0,k=_.right.length;S<k;S++)h[_.right[S]]=[o,0];for(S=0,k=_.down.length;S<k;S++)h[_.down[S]]=[0,o];for(S=0,k=_.up.length;S<k;S++)h[_.up[S]]=[0,-1*o]},_setZoomDelta:function(o){var h=this._zoomKeys={},_=this.keyCodes,S,k;for(S=0,k=_.zoomIn.length;S<k;S++)h[_.zoomIn[S]]=o;for(S=0,k=_.zoomOut.length;S<k;S++)h[_.zoomOut[S]]=-o},_addHooks:function(){Je(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Rt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var h=o.keyCode,_=this._map,S;if(h in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(S=this._panKeys[h],o.shiftKey&&(S=B(S).multiplyBy(3)),_.options.maxBounds&&(S=_._limitOffset(B(S),_.options.maxBounds)),_.options.worldCopyJump){var k=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(S)));_.panTo(k)}else _.panBy(S)}else if(h in this._zoomKeys)_.setZoom(_.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;Wa(o)}}});ft.addInitHook("addHandler","keyboard",Px),ft.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ox=zi.extend({addHooks:function(){Je(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Rt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var h=X1(o),_=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var S=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),S),Wa(o)},_performZoom:function(){var o=this._map,h=o.getZoom(),_=this._map.options.zoomSnap||0;o._stop();var S=this._delta/(this._map.options.wheelPxPerZoomLevel*4),k=4*Math.log(2/(1+Math.exp(-Math.abs(S))))/Math.LN2,F=_?Math.ceil(k/_)*_:k,X=o._limitZoom(h+(this._delta>0?F:-F))-h;this._delta=0,this._startTime=null,X&&(o.options.scrollWheelZoom==="center"?o.setZoom(h+X):o.setZoomAround(this._lastMousePos,h+X))}});ft.addInitHook("addHandler","scrollWheelZoom",Ox);var P2=600;ft.mergeOptions({tapHold:_e.touchNative&&_e.safari&&_e.mobile,tapTolerance:15});var Ax=zi.extend({addHooks:function(){Je(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Rt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var h=o.touches[0];this._startPos=this._newPos=new Z(h.clientX,h.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(Je(document,"touchend",Rn),Je(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),P2),Je(document,"touchend touchcancel contextmenu",this._cancel,this),Je(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){Rt(document,"touchend",Rn),Rt(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),Rt(document,"touchend touchcancel contextmenu",this._cancel,this),Rt(document,"touchmove",this._onMove,this)},_onMove:function(o){var h=o.touches[0];this._newPos=new Z(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,h){var _=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});_._simulated=!0,h.target.dispatchEvent(_)}});ft.addInitHook("addHandler","tapHold",Ax),ft.mergeOptions({touchZoom:_e.touch,bounceAtZoomLimits:!0});var kx=zi.extend({addHooks:function(){et(this._map._container,"leaflet-touch-zoom"),Je(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){on(this._map._container,"leaflet-touch-zoom"),Rt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var h=this._map;if(!(!o.touches||o.touches.length!==2||h._animatingZoom||this._zooming)){var _=h.mouseEventToContainerPoint(o.touches[0]),S=h.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(_.add(S)._divideBy(2))),this._startDist=_.distanceTo(S),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),Je(document,"touchmove",this._onTouchMove,this),Je(document,"touchend touchcancel",this._onTouchEnd,this),Rn(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var h=this._map,_=h.mouseEventToContainerPoint(o.touches[0]),S=h.mouseEventToContainerPoint(o.touches[1]),k=_.distanceTo(S)/this._startDist;if(this._zoom=h.getScaleZoom(k,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&k<1||this._zoom>h.getMaxZoom()&&k>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,k===1)return}else{var F=_._add(S)._divideBy(2)._subtract(this._centerPoint);if(k===1&&F.x===0&&F.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(F),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),N(this._animRequest);var X=a(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=P(X,this,!0),Rn(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,N(this._animRequest),Rt(document,"touchmove",this._onTouchMove,this),Rt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ft.addInitHook("addHandler","touchZoom",kx),ft.BoxZoom=Ex,ft.DoubleClickZoom=Sx,ft.Drag=Tx,ft.Keyboard=Px,ft.ScrollWheelZoom=Ox,ft.TapHold=Ax,ft.TouchZoom=kx,n.Bounds=j,n.Browser=_e,n.CRS=Q,n.Canvas=_x,n.Circle=qg,n.CircleMarker=Cd,n.Class=D,n.Control=si,n.DivIcon=gx,n.DivOverlay=Vi,n.DomEvent=qM,n.DomUtil=zM,n.Draggable=Ks,n.Evented=W,n.FeatureGroup=ps,n.GeoJSON=gs,n.GridLayer=Hu,n.Handler=zi,n.Icon=zo,n.ImageOverlay=jd,n.LatLng=J,n.LatLngBounds=H,n.Layer=ai,n.LayerGroup=Uo,n.LineUtil=r2,n.Map=ft,n.Marker=kd,n.Mixin=XM,n.Path=Js,n.Point=Z,n.PolyUtil=YM,n.Polygon=Vo,n.Polyline=ms,n.Popup=Md,n.PosAnimation=Y1,n.Projection=i2,n.Rectangle=xx,n.Renderer=ys,n.SVG=Wu,n.SVGOverlay=mx,n.TileLayer=Ho,n.Tooltip=Dd,n.Transformation=me,n.Util=$,n.VideoOverlay=px,n.bind=a,n.bounds=U,n.canvas=bx,n.circle=d2,n.circleMarker=f2,n.control=zu,n.divIcon=w2,n.extend=i,n.featureGroup=l2,n.geoJSON=hx,n.geoJson=m2,n.gridLayer=x2,n.icon=u2,n.imageOverlay=g2,n.latLng=V,n.latLngBounds=Y,n.layerGroup=o2,n.map=HM,n.marker=c2,n.point=B,n.polygon=p2,n.polyline=h2,n.popup=_2,n.rectangle=T2,n.setOptions=b,n.stamp=u,n.svg=wx,n.svgOverlay=v2,n.tileLayer=yx,n.tooltip=b2,n.transformation=Ce,n.version=r,n.videoOverlay=y2;var O2=window.L;n.noConflict=function(){return window.L=O2,this},window.L=n})})(Nb,Nb.exports);var ug=Nb.exports;function A1(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function k1(t,e){return e==null?function(r,i){const s=K.useRef();return s.current||(s.current=t(r,i)),s}:function(r,i){const s=K.useRef();s.current||(s.current=t(r,i));const a=K.useRef(r),{instance:l}=s.current;return K.useEffect(function(){a.current!==r&&(e(l,r,a.current),a.current=r)},[l,r,i]),s}}function lK(t,e){K.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var s;(s=e.layerContainer)==null||s.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function Aj(t){return function(n){const r=Pj(),i=t(O1(n,r),r);return Ej(r.map,n.attribution),Oj(i.current,n.eventHandlers),lK(i.current,r),i}}function uK(t,e){const n=k1(t,e),r=Aj(n);return iK(r)}function cK(t,e){const n=k1(t),r=oK(n,e);return sK(r)}function fK(t,e){const n=k1(t,e),r=Aj(n);return aK(r)}function dK(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function Ib(){return Ib=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ib.apply(this,arguments)}function hK({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:s,placeholder:a,style:l,whenReady:u,zoom:c,...f},d){const[p]=K.useState({className:i,id:s,style:l}),[m,g]=K.useState(null);K.useImperativeHandle(d,()=>(m==null?void 0:m.map)??null,[m]);const b=K.useCallback(y=>{if(y!==null&&m===null){const v=new ug.Map(y,f);n!=null&&c!=null?v.setView(n,c):t!=null&&v.fitBounds(t,e),u!=null&&v.whenReady(u),g(nK(v))}},[]);K.useEffect(()=>()=>{m==null||m.map.remove()},[m]);const w=m?zl.createElement(Tj,{value:m},r):a??null;return zl.createElement("div",Ib({},p,{ref:b}),w)}const pK=K.forwardRef(hK),mK=uK(function({position:e,...n},r){const i=new ug.Marker(e,n);return A1(i,rK(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),gK=cK(function(e,n){const r=new ug.Popup(e,n.overlayContainer);return A1(r,n)},function(e,n,{position:r},i){K.useEffect(function(){const{instance:a}=e;function l(c){c.popup===a&&(a.update(),i(!0))}function u(c){c.popup===a&&i(!1)}return n.map.on({popupopen:l,popupclose:u}),n.overlayContainer==null?(r!=null&&a.setLatLng(r),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var f;n.map.off({popupopen:l,popupclose:u}),(f=n.overlayContainer)==null||f.unbindPopup(),n.map.removeLayer(a)}},[e,n,i,r])}),yK=fK(function({url:e,...n},r){const i=new ug.TileLayer(e,O1(n,r));return A1(i,r)},function(e,n,r){dK(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)});function vK({item:t}){return I.jsx(mK,{position:[t.latitude,t.longitude],children:I.jsx(gK,{children:I.jsxs("div",{className:"popupContainer",children:[I.jsx("img",{src:t.images[0],alt:""}),I.jsxs("div",{className:"textContainer",children:[I.jsx(Fs,{to:`/${t.id}`,children:t.title}),I.jsxs("span",{children:[t.bedroom," bedroom"]}),I.jsxs("b",{children:["$ ",t.price]})]})]})})})}function kj({items:t}){return I.jsxs(pK,{center:t.length===1?[t[0].latitude,t[0].longitude]:[52.520008,13.404954],zoom:10,scrollWheelZoom:!0,className:"map",children:[I.jsx(yK,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.map(e=>I.jsx(vK,{item:e},e.id))]})}function _K(){const t=Yw();return I.jsxs("div",{className:"listPage",children:[I.jsx("div",{className:"listContainer",children:I.jsxs("div",{className:"wrapper",children:[I.jsx(YF,{}),I.jsx(K.Suspense,{fallback:I.jsx("p",{children:"Loading..."}),children:I.jsx(Vc,{resolve:t.postResponse,errorElement:I.jsx("p",{children:"Error loading posts!"}),children:e=>e.data.map((n,r)=>I.jsx(xj,{firstItem:r===0,item:n},n.id))})})]})}),I.jsx("div",{className:"mapContainer",children:I.jsx(K.Suspense,{fallback:I.jsx("p",{children:"Loading..."}),children:I.jsx(Vc,{resolve:t.postResponse,errorElement:I.jsx("p",{children:"Error loading posts!"}),children:e=>I.jsx(kj,{items:e.data})})})})]})}var bK={VITE_OPENAI_API_KEY:"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",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const iO=t=>{let e;const n=new Set,r=(f,d)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const m=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(g=>g(e,m))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>c,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(bK?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,u);return u},wK=t=>t?iO(t):iO;var Cj={exports:{}},Rj={},Lj={exports:{}},Nj={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lu=K;function xK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var EK=typeof Object.is=="function"?Object.is:xK,SK=lu.useState,TK=lu.useEffect,PK=lu.useLayoutEffect,OK=lu.useDebugValue;function AK(t,e){var n=e(),r=SK({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return PK(function(){i.value=n,i.getSnapshot=e,wv(i)&&s({inst:i})},[t,n,e]),TK(function(){return wv(i)&&s({inst:i}),t(function(){wv(i)&&s({inst:i})})},[t]),OK(n),n}function wv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!EK(t,n)}catch{return!0}}function kK(t,e){return e()}var CK=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kK:AK;Nj.useSyncExternalStore=lu.useSyncExternalStore!==void 0?lu.useSyncExternalStore:CK;Lj.exports=Nj;var RK=Lj.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg=K,LK=RK;function NK(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var IK=typeof Object.is=="function"?Object.is:NK,jK=LK.useSyncExternalStore,MK=cg.useRef,DK=cg.useEffect,$K=cg.useMemo,BK=cg.useDebugValue;Rj.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=MK(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=$K(function(){function u(m){if(!c){if(c=!0,f=m,m=r(m),i!==void 0&&a.hasValue){var g=a.value;if(i(g,m))return d=g}return d=m}if(g=d,IK(f,m))return g;var b=r(m);return i!==void 0&&i(g,b)?g:(f=m,d=b)}var c=!1,f,d,p=n===void 0?null:n;return[function(){return u(e())},p===null?void 0:function(){return u(p())}]},[e,n,r,i]);var l=jK(t,s[0],s[1]);return DK(function(){a.hasValue=!0,a.value=l},[l]),BK(l),l};Cj.exports=Rj;var FK=Cj.exports;const UK=Ro(FK);var Ij={VITE_OPENAI_API_KEY:"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",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:zK}=zl,{useSyncExternalStoreWithSelector:VK}=UK;let sO=!1;const qK=t=>t;function HK(t,e=qK,n){(Ij?"production":void 0)!=="production"&&n&&!sO&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),sO=!0);const r=VK(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return zK(r),r}const aO=t=>{(Ij?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?wK(t):t,n=(r,i)=>HK(e,r,i);return Object.assign(n,e),n},ZK=t=>t?aO(t):aO;function jj(t,e){return function(){return t.apply(e,arguments)}}const{toString:WK}=Object.prototype,{getPrototypeOf:C1}=Object,fg=(t=>e=>{const n=WK.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ds=t=>(t=t.toLowerCase(),e=>fg(e)===t),dg=t=>e=>typeof e===t,{isArray:Ou}=Array,Jf=dg("undefined");function GK(t){return t!==null&&!Jf(t)&&t.constructor!==null&&!Jf(t.constructor)&&Xr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Mj=ds("ArrayBuffer");function KK(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Mj(t.buffer),e}const JK=dg("string"),Xr=dg("function"),Dj=dg("number"),hg=t=>t!==null&&typeof t=="object",XK=t=>t===!0||t===!1,Qh=t=>{if(fg(t)!=="object")return!1;const e=C1(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},YK=ds("Date"),QK=ds("File"),eJ=ds("Blob"),tJ=ds("FileList"),nJ=t=>hg(t)&&Xr(t.pipe),rJ=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Xr(t.append)&&((e=fg(t))==="formdata"||e==="object"&&Xr(t.toString)&&t.toString()==="[object FormData]"))},iJ=ds("URLSearchParams"),sJ=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bd(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Ou(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let l;for(r=0;r<a;r++)l=s[r],e.call(null,t[l],l,t)}}function $j(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Bj=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Fj=t=>!Jf(t)&&t!==Bj;function jb(){const{caseless:t}=Fj(this)&&this||{},e={},n=(r,i)=>{const s=t&&$j(e,i)||i;Qh(e[s])&&Qh(r)?e[s]=jb(e[s],r):Qh(r)?e[s]=jb({},r):Ou(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&bd(arguments[r],n);return e}const aJ=(t,e,n,{allOwnKeys:r}={})=>(bd(e,(i,s)=>{n&&Xr(i)?t[s]=jj(i,n):t[s]=i},{allOwnKeys:r}),t),oJ=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),lJ=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},uJ=(t,e,n,r)=>{let i,s,a;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!r||r(a,t,e))&&!l[a]&&(e[a]=t[a],l[a]=!0);t=n!==!1&&C1(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},cJ=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},fJ=t=>{if(!t)return null;if(Ou(t))return t;let e=t.length;if(!Dj(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},dJ=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&C1(Uint8Array)),hJ=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},pJ=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},mJ=ds("HTMLFormElement"),gJ=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),oO=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),yJ=ds("RegExp"),Uj=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};bd(n,(i,s)=>{let a;(a=e(i,s,t))!==!1&&(r[s]=a||i)}),Object.defineProperties(t,r)},vJ=t=>{Uj(t,(e,n)=>{if(Xr(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Xr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},_J=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Ou(t)?r(t):r(String(t).split(e)),n},bJ=()=>{},wJ=(t,e)=>(t=+t,Number.isFinite(t)?t:e),xv="abcdefghijklmnopqrstuvwxyz",lO="0123456789",zj={DIGIT:lO,ALPHA:xv,ALPHA_DIGIT:xv+xv.toUpperCase()+lO},xJ=(t=16,e=zj.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function EJ(t){return!!(t&&Xr(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const SJ=t=>{const e=new Array(10),n=(r,i)=>{if(hg(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Ou(r)?[]:{};return bd(r,(a,l)=>{const u=n(a,i+1);!Jf(u)&&(s[l]=u)}),e[i]=void 0,s}}return r};return n(t,0)},TJ=ds("AsyncFunction"),PJ=t=>t&&(hg(t)||Xr(t))&&Xr(t.then)&&Xr(t.catch),de={isArray:Ou,isArrayBuffer:Mj,isBuffer:GK,isFormData:rJ,isArrayBufferView:KK,isString:JK,isNumber:Dj,isBoolean:XK,isObject:hg,isPlainObject:Qh,isUndefined:Jf,isDate:YK,isFile:QK,isBlob:eJ,isRegExp:yJ,isFunction:Xr,isStream:nJ,isURLSearchParams:iJ,isTypedArray:dJ,isFileList:tJ,forEach:bd,merge:jb,extend:aJ,trim:sJ,stripBOM:oJ,inherits:lJ,toFlatObject:uJ,kindOf:fg,kindOfTest:ds,endsWith:cJ,toArray:fJ,forEachEntry:hJ,matchAll:pJ,isHTMLForm:mJ,hasOwnProperty:oO,hasOwnProp:oO,reduceDescriptors:Uj,freezeMethods:vJ,toObjectSet:_J,toCamelCase:gJ,noop:bJ,toFiniteNumber:wJ,findKey:$j,global:Bj,isContextDefined:Fj,ALPHABET:zj,generateString:xJ,isSpecCompliantForm:EJ,toJSONObject:SJ,isAsyncFn:TJ,isThenable:PJ};function dt(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}de.inherits(dt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:de.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Vj=dt.prototype,qj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{qj[t]={value:t}});Object.defineProperties(dt,qj);Object.defineProperty(Vj,"isAxiosError",{value:!0});dt.from=(t,e,n,r,i,s)=>{const a=Object.create(Vj);return de.toFlatObject(t,a,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),dt.call(a,t.message,e,n,r,i),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const OJ=null;function Mb(t){return de.isPlainObject(t)||de.isArray(t)}function Hj(t){return de.endsWith(t,"[]")?t.slice(0,-2):t}function uO(t,e,n){return t?t.concat(e).map(function(i,s){return i=Hj(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function AJ(t){return de.isArray(t)&&!t.some(Mb)}const kJ=de.toFlatObject(de,{},null,function(e){return/^is[A-Z]/.test(e)});function pg(t,e,n){if(!de.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=de.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,w){return!de.isUndefined(w[b])});const r=n.metaTokens,i=n.visitor||f,s=n.dots,a=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&de.isSpecCompliantForm(e);if(!de.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(de.isDate(g))return g.toISOString();if(!u&&de.isBlob(g))throw new dt("Blob is not supported. Use a Buffer instead.");return de.isArrayBuffer(g)||de.isTypedArray(g)?u&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function f(g,b,w){let y=g;if(g&&!w&&typeof g=="object"){if(de.endsWith(b,"{}"))b=r?b:b.slice(0,-2),g=JSON.stringify(g);else if(de.isArray(g)&&AJ(g)||(de.isFileList(g)||de.endsWith(b,"[]"))&&(y=de.toArray(g)))return b=Hj(b),y.forEach(function(x,E){!(de.isUndefined(x)||x===null)&&e.append(a===!0?uO([b],E,s):a===null?b:b+"[]",c(x))}),!1}return Mb(g)?!0:(e.append(uO(w,b,s),c(g)),!1)}const d=[],p=Object.assign(kJ,{defaultVisitor:f,convertValue:c,isVisitable:Mb});function m(g,b){if(!de.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+b.join("."));d.push(g),de.forEach(g,function(y,v){(!(de.isUndefined(y)||y===null)&&i.call(e,y,de.isString(v)?v.trim():v,b,p))===!0&&m(y,b?b.concat(v):[v])}),d.pop()}}if(!de.isObject(t))throw new TypeError("data must be an object");return m(t),e}function cO(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function R1(t,e){this._pairs=[],t&&pg(t,this,e)}const Zj=R1.prototype;Zj.append=function(e,n){this._pairs.push([e,n])};Zj.toString=function(e){const n=e?function(r){return e.call(this,r,cO)}:cO;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function CJ(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Wj(t,e,n){if(!e)return t;const r=n&&n.encode||CJ,i=n&&n.serialize;let s;if(i?s=i(e,n):s=de.isURLSearchParams(e)?e.toString():new R1(e,n).toString(r),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class fO{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){de.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Gj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},RJ=typeof URLSearchParams<"u"?URLSearchParams:R1,LJ=typeof FormData<"u"?FormData:null,NJ=typeof Blob<"u"?Blob:null,IJ={isBrowser:!0,classes:{URLSearchParams:RJ,FormData:LJ,Blob:NJ},protocols:["http","https","file","blob","url","data"]},Kj=typeof window<"u"&&typeof document<"u",jJ=(t=>Kj&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),MJ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",DJ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Kj,hasStandardBrowserEnv:jJ,hasStandardBrowserWebWorkerEnv:MJ},Symbol.toStringTag,{value:"Module"})),ts={...DJ,...IJ};function $J(t,e){return pg(t,new ts.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return ts.isNode&&de.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function BJ(t){return de.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function FJ(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function Jj(t){function e(n,r,i,s){let a=n[s++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),u=s>=n.length;return a=!a&&de.isArray(i)?i.length:a,u?(de.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!l):((!i[a]||!de.isObject(i[a]))&&(i[a]=[]),e(n,r,i[a],s)&&de.isArray(i[a])&&(i[a]=FJ(i[a])),!l)}if(de.isFormData(t)&&de.isFunction(t.entries)){const n={};return de.forEachEntry(t,(r,i)=>{e(BJ(r),i,n,0)}),n}return null}function UJ(t,e,n){if(de.isString(t))try{return(e||JSON.parse)(t),de.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const L1={transitional:Gj,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=de.isObject(e);if(s&&de.isHTMLForm(e)&&(e=new FormData(e)),de.isFormData(e))return i?JSON.stringify(Jj(e)):e;if(de.isArrayBuffer(e)||de.isBuffer(e)||de.isStream(e)||de.isFile(e)||de.isBlob(e))return e;if(de.isArrayBufferView(e))return e.buffer;if(de.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return $J(e,this.formSerializer).toString();if((l=de.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return pg(l?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),UJ(e)):e}],transformResponse:[function(e){const n=this.transitional||L1.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&de.isString(e)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(a)throw l.name==="SyntaxError"?dt.from(l,dt.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ts.classes.FormData,Blob:ts.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};de.forEach(["delete","get","head","post","put","patch"],t=>{L1.headers[t]={}});const N1=L1,zJ=de.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VJ=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||e[n]&&zJ[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},dO=Symbol("internals");function fc(t){return t&&String(t).trim().toLowerCase()}function ep(t){return t===!1||t==null?t:de.isArray(t)?t.map(ep):String(t)}function qJ(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const HJ=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ev(t,e,n,r,i){if(de.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!de.isString(e)){if(de.isString(r))return e.indexOf(r)!==-1;if(de.isRegExp(r))return r.test(e)}}function ZJ(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function WJ(t,e){const n=de.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,a){return this[r].call(this,e,i,s,a)},configurable:!0})})}class mg{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(l,u,c){const f=fc(u);if(!f)throw new Error("header name must be a non-empty string");const d=de.findKey(i,f);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||u]=ep(l))}const a=(l,u)=>de.forEach(l,(c,f)=>s(c,f,u));return de.isPlainObject(e)||e instanceof this.constructor?a(e,n):de.isString(e)&&(e=e.trim())&&!HJ(e)?a(VJ(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=fc(e),e){const r=de.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return qJ(i);if(de.isFunction(n))return n.call(this,i,r);if(de.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=fc(e),e){const r=de.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Ev(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(a){if(a=fc(a),a){const l=de.findKey(r,a);l&&(!n||Ev(r,r[l],l,n))&&(delete r[l],i=!0)}}return de.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||Ev(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return de.forEach(this,(i,s)=>{const a=de.findKey(r,s);if(a){n[a]=ep(i),delete n[s];return}const l=e?ZJ(s):String(s).trim();l!==s&&delete n[s],n[l]=ep(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return de.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&de.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[dO]=this[dO]={accessors:{}}).accessors,i=this.prototype;function s(a){const l=fc(a);r[l]||(WJ(i,a),r[l]=!0)}return de.isArray(e)?e.forEach(s):s(e),this}}mg.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);de.reduceDescriptors(mg.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});de.freezeMethods(mg);const js=mg;function Sv(t,e){const n=this||N1,r=e||n,i=js.from(r.headers);let s=r.data;return de.forEach(t,function(l){s=l.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Xj(t){return!!(t&&t.__CANCEL__)}function wd(t,e,n){dt.call(this,t??"canceled",dt.ERR_CANCELED,e,n),this.name="CanceledError"}de.inherits(wd,dt,{__CANCEL__:!0});function GJ(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new dt("Request failed with status code "+n.status,[dt.ERR_BAD_REQUEST,dt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const KJ=ts.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const a=[t+"="+encodeURIComponent(e)];de.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),de.isString(r)&&a.push("path="+r),de.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function JJ(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function XJ(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Yj(t,e){return t&&!JJ(e)?XJ(t,e):e}const YJ=ts.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let a=s;return e&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(a){const l=de.isString(a)?i(a):a;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function QJ(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function eX(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(u){const c=Date.now(),f=r[s];a||(a=c),n[i]=u,r[i]=c;let d=s,p=0;for(;d!==i;)p+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-a<e)return;const m=f&&c-f;return m?Math.round(p*1e3/m):void 0}}function hO(t,e){let n=0;const r=eX(50,250);return i=>{const s=i.loaded,a=i.lengthComputable?i.total:void 0,l=s-n,u=r(l),c=s<=a;n=s;const f={loaded:s,total:a,progress:a?s/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&c?(a-s)/u:void 0,event:i};f[e?"download":"upload"]=!0,t(f)}}const tX=typeof XMLHttpRequest<"u",nX=tX&&function(t){return new Promise(function(n,r){let i=t.data;const s=js.from(t.headers).normalize();let{responseType:a,withXSRFToken:l}=t,u;function c(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}let f;if(de.isFormData(i)){if(ts.hasStandardBrowserEnv||ts.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((f=s.getContentType())!==!1){const[b,...w]=f?f.split(";").map(y=>y.trim()).filter(Boolean):[];s.setContentType([b||"multipart/form-data",...w].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const b=t.auth.username||"",w=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(b+":"+w))}const p=Yj(t.baseURL,t.url);d.open(t.method.toUpperCase(),Wj(p,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function m(){if(!d)return;const b=js.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),y={data:!a||a==="text"||a==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:b,config:t,request:d};GJ(function(x){n(x),c()},function(x){r(x),c()},y),d=null}if("onloadend"in d?d.onloadend=m:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(m)},d.onabort=function(){d&&(r(new dt("Request aborted",dt.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new dt("Network Error",dt.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let w=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const y=t.transitional||Gj;t.timeoutErrorMessage&&(w=t.timeoutErrorMessage),r(new dt(w,y.clarifyTimeoutError?dt.ETIMEDOUT:dt.ECONNABORTED,t,d)),d=null},ts.hasStandardBrowserEnv&&(l&&de.isFunction(l)&&(l=l(t)),l||l!==!1&&YJ(p))){const b=t.xsrfHeaderName&&t.xsrfCookieName&&KJ.read(t.xsrfCookieName);b&&s.set(t.xsrfHeaderName,b)}i===void 0&&s.setContentType(null),"setRequestHeader"in d&&de.forEach(s.toJSON(),function(w,y){d.setRequestHeader(y,w)}),de.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),a&&a!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",hO(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",hO(t.onUploadProgress)),(t.cancelToken||t.signal)&&(u=b=>{d&&(r(!b||b.type?new wd(null,t,d):b),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u)));const g=QJ(p);if(g&&ts.protocols.indexOf(g)===-1){r(new dt("Unsupported protocol "+g+":",dt.ERR_BAD_REQUEST,t));return}d.send(i||null)})},Db={http:OJ,xhr:nX};de.forEach(Db,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const pO=t=>`- ${t}`,rX=t=>de.isFunction(t)||t===null||t===!1,Qj={getAdapter:t=>{t=de.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let a;if(r=n,!rX(n)&&(r=Db[(a=String(n)).toLowerCase()],r===void 0))throw new dt(`Unknown adapter '${a}'`);if(r)break;i[a||"#"+s]=r}if(!r){const s=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(pO).join(`
`):" "+pO(s[0]):"as no adapter specified";throw new dt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:Db};function Tv(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new wd(null,t)}function mO(t){return Tv(t),t.headers=js.from(t.headers),t.data=Sv.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Qj.getAdapter(t.adapter||N1.adapter)(t).then(function(r){return Tv(t),r.data=Sv.call(t,t.transformResponse,r),r.headers=js.from(r.headers),r},function(r){return Xj(r)||(Tv(t),r&&r.response&&(r.response.data=Sv.call(t,t.transformResponse,r.response),r.response.headers=js.from(r.response.headers))),Promise.reject(r)})}const gO=t=>t instanceof js?t.toJSON():t;function uu(t,e){e=e||{};const n={};function r(c,f,d){return de.isPlainObject(c)&&de.isPlainObject(f)?de.merge.call({caseless:d},c,f):de.isPlainObject(f)?de.merge({},f):de.isArray(f)?f.slice():f}function i(c,f,d){if(de.isUndefined(f)){if(!de.isUndefined(c))return r(void 0,c,d)}else return r(c,f,d)}function s(c,f){if(!de.isUndefined(f))return r(void 0,f)}function a(c,f){if(de.isUndefined(f)){if(!de.isUndefined(c))return r(void 0,c)}else return r(void 0,f)}function l(c,f,d){if(d in e)return r(c,f);if(d in t)return r(void 0,c)}const u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(c,f)=>i(gO(c),gO(f),!0)};return de.forEach(Object.keys(Object.assign({},t,e)),function(f){const d=u[f]||i,p=d(t[f],e[f],f);de.isUndefined(p)&&d!==l||(n[f]=p)}),n}const eM="1.6.7",I1={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{I1[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const yO={};I1.transitional=function(e,n,r){function i(s,a){return"[Axios v"+eM+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,l)=>{if(e===!1)throw new dt(i(a," has been removed"+(n?" in "+n:"")),dt.ERR_DEPRECATED);return n&&!yO[a]&&(yO[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,l):!0}};function iX(t,e,n){if(typeof t!="object")throw new dt("options must be an object",dt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],a=e[s];if(a){const l=t[s],u=l===void 0||a(l,s,t);if(u!==!0)throw new dt("option "+s+" must be "+u,dt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new dt("Unknown option "+s,dt.ERR_BAD_OPTION)}}const $b={assertOptions:iX,validators:I1},na=$b.validators;class om{constructor(e){this.defaults=e,this.interceptors={request:new fO,response:new fO}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=uu(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&$b.assertOptions(r,{silentJSONParsing:na.transitional(na.boolean),forcedJSONParsing:na.transitional(na.boolean),clarifyTimeoutError:na.transitional(na.boolean)},!1),i!=null&&(de.isFunction(i)?n.paramsSerializer={serialize:i}:$b.assertOptions(i,{encode:na.function,serialize:na.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&de.merge(s.common,s[n.method]);s&&de.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),n.headers=js.concat(a,s);const l=[];let u=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(u=u&&b.synchronous,l.unshift(b.fulfilled,b.rejected))});const c=[];this.interceptors.response.forEach(function(b){c.push(b.fulfilled,b.rejected)});let f,d=0,p;if(!u){const g=[mO.bind(this),void 0];for(g.unshift.apply(g,l),g.push.apply(g,c),p=g.length,f=Promise.resolve(n);d<p;)f=f.then(g[d++],g[d++]);return f}p=l.length;let m=n;for(d=0;d<p;){const g=l[d++],b=l[d++];try{m=g(m)}catch(w){b.call(this,w);break}}try{f=mO.call(this,m)}catch(g){return Promise.reject(g)}for(d=0,p=c.length;d<p;)f=f.then(c[d++],c[d++]);return f}getUri(e){e=uu(this.defaults,e);const n=Yj(e.baseURL,e.url);return Wj(n,e.params,e.paramsSerializer)}}de.forEach(["delete","get","head","options"],function(e){om.prototype[e]=function(n,r){return this.request(uu(r||{},{method:e,url:n,data:(r||{}).data}))}});de.forEach(["post","put","patch"],function(e){function n(r){return function(s,a,l){return this.request(uu(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}om.prototype[e]=n(),om.prototype[e+"Form"]=n(!0)});const tp=om;class j1{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(l=>{r.subscribe(l),s=l}).then(i);return a.cancel=function(){r.unsubscribe(s)},a},e(function(s,a,l){r.reason||(r.reason=new wd(s,a,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new j1(function(i){e=i}),cancel:e}}}const sX=j1;function aX(t){return function(n){return t.apply(null,n)}}function oX(t){return de.isObject(t)&&t.isAxiosError===!0}const Bb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Bb).forEach(([t,e])=>{Bb[e]=t});const lX=Bb;function tM(t){const e=new tp(t),n=jj(tp.prototype.request,e);return de.extend(n,tp.prototype,e,{allOwnKeys:!0}),de.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return tM(uu(t,i))},n}const yn=tM(N1);yn.Axios=tp;yn.CanceledError=wd;yn.CancelToken=sX;yn.isCancel=Xj;yn.VERSION=eM;yn.toFormData=pg;yn.AxiosError=dt;yn.Cancel=yn.CanceledError;yn.all=function(e){return Promise.all(e)};yn.spread=aX;yn.isAxiosError=oX;yn.mergeConfig=uu;yn.AxiosHeaders=js;yn.formToJSON=t=>Jj(de.isHTMLForm(t)?new FormData(t):t);yn.getAdapter=Qj.getAdapter;yn.HttpStatusCode=lX;yn.default=yn;const gr=yn.create({baseURL:"https://full-stack-estate-main-k9cj.onrender.com/api",withCredentials:!0}),Fb=ZK(t=>({number:0,fetch:async()=>{const e=await gr("/users/notification");t({number:e.data})},decrease:()=>{t(e=>({number:e.number-1}))},reset:()=>{t({number:0})}}));function nM(){const[t,e]=K.useState(!1),{currentUser:n}=K.useContext(fs),r=Fb(s=>s.fetch),i=Fb(s=>s.number);return n&&r(),I.jsxs("nav",{children:[I.jsxs("div",{className:"left",children:[I.jsxs("a",{href:"/",className:"logo",children:[I.jsx("img",{src:"/logo.png",alt:""}),I.jsx("span",{children:"LamaEstate"})]}),I.jsx("a",{href:"/",children:"Home"}),I.jsx("a",{href:"/",children:"About"}),I.jsx("a",{href:"/",children:"Contact"}),I.jsx("a",{href:"/",children:"Agents"})]}),I.jsxs("div",{className:"right",children:[n?I.jsxs("div",{className:"user",children:[I.jsx("img",{src:n.avatar||"/noavatar.jpg",alt:""}),I.jsx("span",{children:n.username}),I.jsxs(Fs,{to:"/profile",className:"profile",children:[i>0&&I.jsx("div",{className:"notification",children:i}),I.jsx("span",{children:"Profile"})]})]}):I.jsxs(I.Fragment,{children:[I.jsx("a",{href:"/login",children:"Sign in"}),I.jsx("a",{href:"/register",className:"register",children:"Sign up"})]}),I.jsx("div",{className:"menuIcon",children:I.jsx("img",{src:"/menu.png",alt:"",onClick:()=>e(s=>!s)})}),I.jsxs("div",{className:t?"menu active":"menu",children:[I.jsx("a",{href:"/",children:"Home"}),I.jsx("a",{href:"/",children:"About"}),I.jsx("a",{href:"/",children:"Contact"}),I.jsx("a",{href:"/",children:"Agents"}),I.jsx("a",{href:"/",children:"Sign in"}),I.jsx("a",{href:"/",children:"Sign up"})]})]})]})}function uX(){return I.jsxs("div",{className:"layout",children:[I.jsx("div",{className:"navbar",children:I.jsx(nM,{})}),I.jsx("div",{className:"content",children:I.jsx(UC,{})})]})}function cX(){const{currentUser:t}=K.useContext(fs);return t?I.jsxs("div",{className:"layout",children:[I.jsx("div",{className:"navbar",children:I.jsx(nM,{})}),I.jsx("div",{className:"content",children:I.jsx(UC,{})})]}):I.jsx(wF,{to:"/login"})}function fX({images:t}){const[e,n]=K.useState(null),r=i=>{i==="left"?n(e===0?t.length-1:e-1):e===t.length-1?n(0):n(e+1)};return I.jsxs("div",{className:"slider",children:[e!==null&&I.jsxs("div",{className:"fullSlider",children:[I.jsx("div",{className:"arrow",onClick:()=>r("left"),children:I.jsx("img",{src:"/arrow.png",alt:""})}),I.jsx("div",{className:"imgContainer",children:I.jsx("img",{src:t[e],alt:""})}),I.jsx("div",{className:"arrow",onClick:()=>r("right"),children:I.jsx("img",{src:"/arrow.png",className:"right",alt:""})}),I.jsx("div",{className:"close",onClick:()=>n(null),children:"X"})]}),I.jsx("div",{className:"bigImage",children:I.jsx("img",{src:t[0],alt:"",onClick:()=>n(0)})}),I.jsx("div",{className:"smallImages",children:t.slice(1).map((i,s)=>I.jsx("img",{src:i,alt:"",onClick:()=>n(s+1)},s))})]})}/*! @license DOMPurify 3.0.9 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.9/LICENSE */const{entries:rM,setPrototypeOf:vO,isFrozen:dX,getPrototypeOf:hX,getOwnPropertyDescriptor:pX}=Object;let{freeze:rr,seal:Ni,create:iM}=Object,{apply:Ub,construct:zb}=typeof Reflect<"u"&&Reflect;rr||(rr=function(e){return e});Ni||(Ni=function(e){return e});Ub||(Ub=function(e,n,r){return e.apply(n,r)});zb||(zb=function(e,n){return new e(...n)});const Eh=Lr(Array.prototype.forEach),_O=Lr(Array.prototype.pop),dc=Lr(Array.prototype.push),np=Lr(String.prototype.toLowerCase),Pv=Lr(String.prototype.toString),mX=Lr(String.prototype.match),hc=Lr(String.prototype.replace),gX=Lr(String.prototype.indexOf),yX=Lr(String.prototype.trim),mi=Lr(Object.prototype.hasOwnProperty),br=Lr(RegExp.prototype.test),pc=vX(TypeError);function Lr(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Ub(t,e,r)}}function vX(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return zb(t,n)}}function at(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:np;vO&&vO(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=n(i);s!==i&&(dX(e)||(e[r]=s),i=s)}t[i]=!0}return t}function _X(t){for(let e=0;e<t.length;e++)mi(t,e)||(t[e]=null);return t}function no(t){const e=iM(null);for(const[n,r]of rM(t))mi(t,n)&&(Array.isArray(r)?e[n]=_X(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=no(r):e[n]=r);return e}function Sh(t,e){for(;t!==null;){const r=pX(t,e);if(r){if(r.get)return Lr(r.get);if(typeof r.value=="function")return Lr(r.value)}t=hX(t)}function n(){return null}return n}const bO=rr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ov=rr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Av=rr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),bX=rr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),kv=rr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),wX=rr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),wO=rr(["#text"]),xO=rr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Cv=rr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),EO=rr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Th=rr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),xX=Ni(/\{\{[\w\W]*|[\w\W]*\}\}/gm),EX=Ni(/<%[\w\W]*|[\w\W]*%>/gm),SX=Ni(/\${[\w\W]*}/gm),TX=Ni(/^data-[\-\w.\u00B7-\uFFFF]/),PX=Ni(/^aria-[\-\w]+$/),sM=Ni(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),OX=Ni(/^(?:\w+script|data):/i),AX=Ni(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),aM=Ni(/^html$/i);var SO=Object.freeze({__proto__:null,MUSTACHE_EXPR:xX,ERB_EXPR:EX,TMPLIT_EXPR:SX,DATA_ATTR:TX,ARIA_ATTR:PX,IS_ALLOWED_URI:sM,IS_SCRIPT_OR_DATA:OX,ATTR_WHITESPACE:AX,DOCTYPE_NAME:aM});const kX=function(){return typeof window>"u"?null:window},CX=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function oM(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:kX();const e=Ee=>oM(Ee);if(e.version="3.0.9",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:l,Element:u,NodeFilter:c,NamedNodeMap:f=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:p,trustedTypes:m}=t,g=u.prototype,b=Sh(g,"cloneNode"),w=Sh(g,"nextSibling"),y=Sh(g,"childNodes"),v=Sh(g,"parentNode");if(typeof a=="function"){const Ee=n.createElement("template");Ee.content&&Ee.content.ownerDocument&&(n=Ee.content.ownerDocument)}let x,E="";const{implementation:T,createNodeIterator:O,createDocumentFragment:A,getElementsByTagName:C}=n,{importNode:M}=r;let R={};e.isSupported=typeof rM=="function"&&typeof v=="function"&&T&&T.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:P,ERB_EXPR:N,TMPLIT_EXPR:$,DATA_ATTR:D,ARIA_ATTR:z,IS_SCRIPT_OR_DATA:G,ATTR_WHITESPACE:W}=SO;let{IS_ALLOWED_URI:Z}=SO,q=null;const B=at({},[...bO,...Ov,...Av,...kv,...wO]);let j=null;const U=at({},[...xO,...Cv,...EO,...Th]);let H=Object.seal(iM(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Y=null,J=null,V=!0,Q=!0,re=!1,ie=!0,ce=!1,me=!1,Ce=!1,je=!1,Ze=!1,We=!1,$t=!1,At=!0,oe=!1;const fe="user-content-";let we=!0,be=!1,he={},$e=null;const Be=at({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ve=null;const Yt=at({},["audio","video","img","source","image","track"]);let sn=null;const bt=at({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Cn="http://www.w3.org/1998/Math/MathML",wt="http://www.w3.org/2000/svg",Bt="http://www.w3.org/1999/xhtml";let ti=Bt,Gs=!1,$i=null;const hs=at({},[Cn,wt,Bt],Pv);let Bi=null;const ni=["application/xhtml+xml","text/html"],ju="text/html";let Vt=null,ri=null;const za=n.createElement("form"),Va=function(ee){return ee instanceof RegExp||ee instanceof Function},te=function(){let ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ri&&ri===ee)){if((!ee||typeof ee!="object")&&(ee={}),ee=no(ee),Bi=ni.indexOf(ee.PARSER_MEDIA_TYPE)===-1?ju:ee.PARSER_MEDIA_TYPE,Vt=Bi==="application/xhtml+xml"?Pv:np,q=mi(ee,"ALLOWED_TAGS")?at({},ee.ALLOWED_TAGS,Vt):B,j=mi(ee,"ALLOWED_ATTR")?at({},ee.ALLOWED_ATTR,Vt):U,$i=mi(ee,"ALLOWED_NAMESPACES")?at({},ee.ALLOWED_NAMESPACES,Pv):hs,sn=mi(ee,"ADD_URI_SAFE_ATTR")?at(no(bt),ee.ADD_URI_SAFE_ATTR,Vt):bt,Ve=mi(ee,"ADD_DATA_URI_TAGS")?at(no(Yt),ee.ADD_DATA_URI_TAGS,Vt):Yt,$e=mi(ee,"FORBID_CONTENTS")?at({},ee.FORBID_CONTENTS,Vt):Be,Y=mi(ee,"FORBID_TAGS")?at({},ee.FORBID_TAGS,Vt):{},J=mi(ee,"FORBID_ATTR")?at({},ee.FORBID_ATTR,Vt):{},he=mi(ee,"USE_PROFILES")?ee.USE_PROFILES:!1,V=ee.ALLOW_ARIA_ATTR!==!1,Q=ee.ALLOW_DATA_ATTR!==!1,re=ee.ALLOW_UNKNOWN_PROTOCOLS||!1,ie=ee.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ce=ee.SAFE_FOR_TEMPLATES||!1,me=ee.WHOLE_DOCUMENT||!1,Ze=ee.RETURN_DOM||!1,We=ee.RETURN_DOM_FRAGMENT||!1,$t=ee.RETURN_TRUSTED_TYPE||!1,je=ee.FORCE_BODY||!1,At=ee.SANITIZE_DOM!==!1,oe=ee.SANITIZE_NAMED_PROPS||!1,we=ee.KEEP_CONTENT!==!1,be=ee.IN_PLACE||!1,Z=ee.ALLOWED_URI_REGEXP||sM,ti=ee.NAMESPACE||Bt,H=ee.CUSTOM_ELEMENT_HANDLING||{},ee.CUSTOM_ELEMENT_HANDLING&&Va(ee.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=ee.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ee.CUSTOM_ELEMENT_HANDLING&&Va(ee.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=ee.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ee.CUSTOM_ELEMENT_HANDLING&&typeof ee.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(H.allowCustomizedBuiltInElements=ee.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ce&&(Q=!1),We&&(Ze=!0),he&&(q=at({},wO),j=[],he.html===!0&&(at(q,bO),at(j,xO)),he.svg===!0&&(at(q,Ov),at(j,Cv),at(j,Th)),he.svgFilters===!0&&(at(q,Av),at(j,Cv),at(j,Th)),he.mathMl===!0&&(at(q,kv),at(j,EO),at(j,Th))),ee.ADD_TAGS&&(q===B&&(q=no(q)),at(q,ee.ADD_TAGS,Vt)),ee.ADD_ATTR&&(j===U&&(j=no(j)),at(j,ee.ADD_ATTR,Vt)),ee.ADD_URI_SAFE_ATTR&&at(sn,ee.ADD_URI_SAFE_ATTR,Vt),ee.FORBID_CONTENTS&&($e===Be&&($e=no($e)),at($e,ee.FORBID_CONTENTS,Vt)),we&&(q["#text"]=!0),me&&at(q,["html","head","body"]),q.table&&(at(q,["tbody"]),delete Y.tbody),ee.TRUSTED_TYPES_POLICY){if(typeof ee.TRUSTED_TYPES_POLICY.createHTML!="function")throw pc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ee.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw pc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=ee.TRUSTED_TYPES_POLICY,E=x.createHTML("")}else x===void 0&&(x=CX(m,i)),x!==null&&typeof E=="string"&&(E=x.createHTML(""));rr&&rr(ee),ri=ee}},se=at({},["mi","mo","mn","ms","mtext"]),ue=at({},["foreignobject","desc","title","annotation-xml"]),xe=at({},["title","style","font","a","script"]),ke=at({},[...Ov,...Av,...bX]),Ke=at({},[...kv,...wX]),Fe=function(ee){let ye=v(ee);(!ye||!ye.tagName)&&(ye={namespaceURI:ti,tagName:"template"});const Oe=np(ee.tagName),gt=np(ye.tagName);return $i[ee.namespaceURI]?ee.namespaceURI===wt?ye.namespaceURI===Bt?Oe==="svg":ye.namespaceURI===Cn?Oe==="svg"&&(gt==="annotation-xml"||se[gt]):!!ke[Oe]:ee.namespaceURI===Cn?ye.namespaceURI===Bt?Oe==="math":ye.namespaceURI===wt?Oe==="math"&&ue[gt]:!!Ke[Oe]:ee.namespaceURI===Bt?ye.namespaceURI===wt&&!ue[gt]||ye.namespaceURI===Cn&&!se[gt]?!1:!Ke[Oe]&&(xe[Oe]||!ke[Oe]):!!(Bi==="application/xhtml+xml"&&$i[ee.namespaceURI]):!1},Re=function(ee){dc(e.removed,{element:ee});try{ee.parentNode.removeChild(ee)}catch{ee.remove()}},Le=function(ee,ye){try{dc(e.removed,{attribute:ye.getAttributeNode(ee),from:ye})}catch{dc(e.removed,{attribute:null,from:ye})}if(ye.removeAttribute(ee),ee==="is"&&!j[ee])if(Ze||We)try{Re(ye)}catch{}else try{ye.setAttribute(ee,"")}catch{}},Qe=function(ee){let ye=null,Oe=null;if(je)ee="<remove></remove>"+ee;else{const Ut=mX(ee,/^[\r\n\t ]+/);Oe=Ut&&Ut[0]}Bi==="application/xhtml+xml"&&ti===Bt&&(ee='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ee+"</body></html>");const gt=x?x.createHTML(ee):ee;if(ti===Bt)try{ye=new p().parseFromString(gt,Bi)}catch{}if(!ye||!ye.documentElement){ye=T.createDocument(ti,"template",null);try{ye.documentElement.innerHTML=Gs?E:gt}catch{}}const Nt=ye.body||ye.documentElement;return ee&&Oe&&Nt.insertBefore(n.createTextNode(Oe),Nt.childNodes[0]||null),ti===Bt?C.call(ye,me?"html":"body")[0]:me?ye.documentElement:Nt},qt=function(ee){return O.call(ee.ownerDocument||ee,ee,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null)},Me=function(ee){return ee instanceof d&&(typeof ee.nodeName!="string"||typeof ee.textContent!="string"||typeof ee.removeChild!="function"||!(ee.attributes instanceof f)||typeof ee.removeAttribute!="function"||typeof ee.setAttribute!="function"||typeof ee.namespaceURI!="string"||typeof ee.insertBefore!="function"||typeof ee.hasChildNodes!="function")},_e=function(ee){return typeof l=="function"&&ee instanceof l},xt=function(ee,ye,Oe){R[ee]&&Eh(R[ee],gt=>{gt.call(e,ye,Oe,ri)})},vn=function(ee){let ye=null;if(xt("beforeSanitizeElements",ee,null),Me(ee))return Re(ee),!0;const Oe=Vt(ee.nodeName);if(xt("uponSanitizeElement",ee,{tagName:Oe,allowedTags:q}),ee.hasChildNodes()&&!_e(ee.firstElementChild)&&br(/<[/\w]/g,ee.innerHTML)&&br(/<[/\w]/g,ee.textContent))return Re(ee),!0;if(!q[Oe]||Y[Oe]){if(!Y[Oe]&&jr(Oe)&&(H.tagNameCheck instanceof RegExp&&br(H.tagNameCheck,Oe)||H.tagNameCheck instanceof Function&&H.tagNameCheck(Oe)))return!1;if(we&&!$e[Oe]){const gt=v(ee)||ee.parentNode,Nt=y(ee)||ee.childNodes;if(Nt&&gt){const Ut=Nt.length;for(let qe=Ut-1;qe>=0;--qe)gt.insertBefore(b(Nt[qe],!0),w(ee))}}return Re(ee),!0}return ee instanceof u&&!Fe(ee)||(Oe==="noscript"||Oe==="noembed"||Oe==="noframes")&&br(/<\/no(script|embed|frames)/i,ee.innerHTML)?(Re(ee),!0):(ce&&ee.nodeType===3&&(ye=ee.textContent,Eh([P,N,$],gt=>{ye=hc(ye,gt," ")}),ee.textContent!==ye&&(dc(e.removed,{element:ee.cloneNode()}),ee.textContent=ye)),xt("afterSanitizeElements",ee,null),!1)},Ft=function(ee,ye,Oe){if(At&&(ye==="id"||ye==="name")&&(Oe in n||Oe in za))return!1;if(!(Q&&!J[ye]&&br(D,ye))){if(!(V&&br(z,ye))){if(!j[ye]||J[ye]){if(!(jr(ee)&&(H.tagNameCheck instanceof RegExp&&br(H.tagNameCheck,ee)||H.tagNameCheck instanceof Function&&H.tagNameCheck(ee))&&(H.attributeNameCheck instanceof RegExp&&br(H.attributeNameCheck,ye)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(ye))||ye==="is"&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&br(H.tagNameCheck,Oe)||H.tagNameCheck instanceof Function&&H.tagNameCheck(Oe))))return!1}else if(!sn[ye]){if(!br(Z,hc(Oe,W,""))){if(!((ye==="src"||ye==="xlink:href"||ye==="href")&&ee!=="script"&&gX(Oe,"data:")===0&&Ve[ee])){if(!(re&&!br(G,hc(Oe,W,"")))){if(Oe)return!1}}}}}}return!0},jr=function(ee){return ee!=="annotation-xml"&&ee.indexOf("-")>0},Fi=function(ee){xt("beforeSanitizeAttributes",ee,null);const{attributes:ye}=ee;if(!ye)return;const Oe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:j};let gt=ye.length;for(;gt--;){const Nt=ye[gt],{name:Ut,namespaceURI:qe,value:Ye}=Nt,Qt=Vt(Ut);let an=Ut==="value"?Ye:yX(Ye);if(Oe.attrName=Qt,Oe.attrValue=an,Oe.keepAttr=!0,Oe.forceKeepAttr=void 0,xt("uponSanitizeAttribute",ee,Oe),an=Oe.attrValue,Oe.forceKeepAttr||(Le(Ut,ee),!Oe.keepAttr))continue;if(!ie&&br(/\/>/i,an)){Le(Ut,ee);continue}ce&&Eh([P,N,$],xd=>{an=hc(an,xd," ")});const $o=Vt(ee.nodeName);if(Ft($o,Qt,an)){if(oe&&(Qt==="id"||Qt==="name")&&(Le(Ut,ee),an=fe+an),x&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!qe)switch(m.getAttributeType($o,Qt)){case"TrustedHTML":{an=x.createHTML(an);break}case"TrustedScriptURL":{an=x.createScriptURL(an);break}}try{qe?ee.setAttributeNS(qe,Ut,an):ee.setAttribute(Ut,an),_O(e.removed)}catch{}}}xt("afterSanitizeAttributes",ee,null)},ii=function Ee(ee){let ye=null;const Oe=qt(ee);for(xt("beforeSanitizeShadowDOM",ee,null);ye=Oe.nextNode();)xt("uponSanitizeShadowNode",ye,null),!vn(ye)&&(ye.content instanceof s&&Ee(ye.content),Fi(ye));xt("afterSanitizeShadowDOM",ee,null)};return e.sanitize=function(Ee){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye=null,Oe=null,gt=null,Nt=null;if(Gs=!Ee,Gs&&(Ee="<!-->"),typeof Ee!="string"&&!_e(Ee))if(typeof Ee.toString=="function"){if(Ee=Ee.toString(),typeof Ee!="string")throw pc("dirty is not a string, aborting")}else throw pc("toString is not a function");if(!e.isSupported)return Ee;if(Ce||te(ee),e.removed=[],typeof Ee=="string"&&(be=!1),be){if(Ee.nodeName){const Ye=Vt(Ee.nodeName);if(!q[Ye]||Y[Ye])throw pc("root node is forbidden and cannot be sanitized in-place")}}else if(Ee instanceof l)ye=Qe("<!---->"),Oe=ye.ownerDocument.importNode(Ee,!0),Oe.nodeType===1&&Oe.nodeName==="BODY"||Oe.nodeName==="HTML"?ye=Oe:ye.appendChild(Oe);else{if(!Ze&&!ce&&!me&&Ee.indexOf("<")===-1)return x&&$t?x.createHTML(Ee):Ee;if(ye=Qe(Ee),!ye)return Ze?null:$t?E:""}ye&&je&&Re(ye.firstChild);const Ut=qt(be?Ee:ye);for(;gt=Ut.nextNode();)vn(gt)||(gt.content instanceof s&&ii(gt.content),Fi(gt));if(be)return Ee;if(Ze){if(We)for(Nt=A.call(ye.ownerDocument);ye.firstChild;)Nt.appendChild(ye.firstChild);else Nt=ye;return(j.shadowroot||j.shadowrootmode)&&(Nt=M.call(r,Nt,!0)),Nt}let qe=me?ye.outerHTML:ye.innerHTML;return me&&q["!doctype"]&&ye.ownerDocument&&ye.ownerDocument.doctype&&ye.ownerDocument.doctype.name&&br(aM,ye.ownerDocument.doctype.name)&&(qe="<!DOCTYPE "+ye.ownerDocument.doctype.name+`>
`+qe),ce&&Eh([P,N,$],Ye=>{qe=hc(qe,Ye," ")}),x&&$t?x.createHTML(qe):qe},e.setConfig=function(){let Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};te(Ee),Ce=!0},e.clearConfig=function(){ri=null,Ce=!1},e.isValidAttribute=function(Ee,ee,ye){ri||te({});const Oe=Vt(Ee),gt=Vt(ee);return Ft(Oe,gt,ye)},e.addHook=function(Ee,ee){typeof ee=="function"&&(R[Ee]=R[Ee]||[],dc(R[Ee],ee))},e.removeHook=function(Ee){if(R[Ee])return _O(R[Ee])},e.removeHooks=function(Ee){R[Ee]&&(R[Ee]=[])},e.removeAllHooks=function(){R={}},e}var RX=oM();function LX(){const t=Yw(),[e,n]=K.useState(t.isSaved),{currentUser:r}=K.useContext(fs),i=Zs(),s=async()=>{r||i("/login"),n(a=>!a);try{await gr.post("/users/save",{postId:t.id})}catch(a){console.log(a),n(l=>!l)}};return I.jsxs("div",{className:"singlePage",children:[I.jsx("div",{className:"details",children:I.jsxs("div",{className:"wrapper",children:[I.jsx(fX,{images:t.images}),I.jsxs("div",{className:"info",children:[I.jsxs("div",{className:"top",children:[I.jsxs("div",{className:"post",children:[I.jsx("h1",{children:t.title}),I.jsxs("div",{className:"address",children:[I.jsx("img",{src:"/pin.png",alt:""}),I.jsx("span",{children:t.address})]}),I.jsxs("div",{className:"price",children:["$ ",t.price]})]}),I.jsxs("div",{className:"user",children:[I.jsx("img",{src:t.user.avatar,alt:""}),I.jsx("span",{children:t.user.username})]})]}),I.jsx("div",{className:"bottom",dangerouslySetInnerHTML:{__html:RX.sanitize(t.postDetail.desc)}})]})]})}),I.jsx("div",{className:"features",children:I.jsxs("div",{className:"wrapper",children:[I.jsx("p",{className:"title",children:"General"}),I.jsxs("div",{className:"listVertical",children:[I.jsxs("div",{className:"feature",children:[I.jsx("img",{src:"/utility.png",alt:""}),I.jsxs("div",{className:"featureText",children:[I.jsx("span",{children:"Utilities"}),t.postDetail.utilities==="owner"?I.jsx("p",{children:"Owner is responsible"}):I.jsx("p",{children:"Tenant is responsible"})]})]}),I.jsxs("div",{className:"feature",children:[I.jsx("img",{src:"/pet.png",alt:""}),I.jsxs("div",{className:"featureText",children:[I.jsx("span",{children:"Pet Policy"}),t.postDetail.pet==="allowed"?I.jsx("p",{children:"Pets Allowed"}):I.jsx("p",{children:"Pets not Allowed"})]})]}),I.jsxs("div",{className:"feature",children:[I.jsx("img",{src:"/fee.png",alt:""}),I.jsxs("div",{className:"featureText",children:[I.jsx("span",{children:"Income Policy"}),I.jsx("p",{children:t.postDetail.income})]})]})]}),I.jsx("p",{className:"title",children:"Sizes"}),I.jsxs("div",{className:"sizes",children:[I.jsxs("div",{className:"size",children:[I.jsx("img",{src:"/size.png",alt:""}),I.jsxs("span",{children:[t.postDetail.size," sqft"]})]}),I.jsxs("div",{className:"size",children:[I.jsx("img",{src:"/bed.png",alt:""}),I.jsxs("span",{children:[t.bedroom," beds"]})]}),I.jsxs("div",{className:"size",children:[I.jsx("img",{src:"/bath.png",alt:""}),I.jsxs("span",{children:[t.bathroom," bathroom"]})]})]}),I.jsx("p",{className:"title",children:"Nearby Places"}),I.jsxs("div",{className:"listHorizontal",children:[I.jsxs("div",{className:"feature",children:[I.jsx("img",{src:"/school.png",alt:""}),I.jsxs("div",{className:"featureText",children:[I.jsx("span",{children:"School"}),I.jsxs("p",{children:[t.postDetail.school>999?t.postDetail.school/1e3+"km":t.postDetail.school+"m"," ","away"]})]})]}),I.jsxs("div",{className:"feature",children:[I.jsx("img",{src:"/pet.png",alt:""}),I.jsxs("div",{className:"featureText",children:[I.jsx("span",{children:"Bus Stop"}),I.jsxs("p",{children:[t.postDetail.bus,"m away"]})]})]}),I.jsxs("div",{className:"feature",children:[I.jsx("img",{src:"/fee.png",alt:""}),I.jsxs("div",{className:"featureText",children:[I.jsx("span",{children:"Restaurant"}),I.jsxs("p",{children:[t.postDetail.restaurant,"m away"]})]})]})]}),I.jsx("p",{className:"title",children:"Location"}),I.jsx("div",{className:"mapContainer",children:I.jsx(kj,{items:[t]})}),I.jsxs("div",{className:"buttons",children:[I.jsxs("button",{children:[I.jsx("img",{src:"/chat.png",alt:""}),"Send a Message"]}),I.jsxs("button",{onClick:s,style:{backgroundColor:e?"#fece51":"white"},children:[I.jsx("img",{src:"/save.png",alt:""}),e?"Place Saved":"Save the Place"]})]})]})})]})}var NX=["second","minute","hour","day","week","month","year"];function IX(t,e){if(e===0)return["just now","right now"];var n=NX[Math.floor(e/2)];return t>1&&(n+="s"),[t+" "+n+" ago","in "+t+" "+n]}var jX=["秒","分钟","小时","天","周","个月","年"];function MX(t,e){if(e===0)return["刚刚","片刻后"];var n=jX[~~(e/2)];return[t+" "+n+"前",t+" "+n+"后"]}var Vb={},lM=function(t,e){Vb[t]=e},DX=function(t){return Vb[t]||Vb.en_US},Rv=[60,60,24,7,365/7/12,12];function TO(t){return t instanceof Date?t:!isNaN(t)||/^\d+$/.test(t)?new Date(parseInt(t)):(t=(t||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(t))}function $X(t,e){var n=t<0?1:0;t=Math.abs(t);for(var r=t,i=0;t>=Rv[i]&&i<Rv.length;i++)t/=Rv[i];return t=Math.floor(t),i*=2,t>(i===0?9:1)&&(i+=1),e(t,i,r)[n].replace("%s",t.toString())}function BX(t,e){var n=e?TO(e):new Date;return(+n-+TO(t))/1e3}var FX=function(t,e,n){var r=BX(t,n&&n.relativeDate);return $X(r,DX(e))};lM("en_US",IX);lM("zh_CN",MX);const cs=Object.create(null);cs.open="0";cs.close="1";cs.ping="2";cs.pong="3";cs.message="4";cs.upgrade="5";cs.noop="6";const rp=Object.create(null);Object.keys(cs).forEach(t=>{rp[cs[t]]=t});const qb={type:"error",data:"parser error"},uM=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",cM=typeof ArrayBuffer=="function",fM=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,M1=({type:t,data:e},n,r)=>uM&&e instanceof Blob?n?r(e):PO(e,r):cM&&(e instanceof ArrayBuffer||fM(e))?n?r(e):PO(new Blob([e]),r):r(cs[t]+(e||"")),PO=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function OO(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Lv;function UX(t,e){if(uM&&t.data instanceof Blob)return t.data.arrayBuffer().then(OO).then(e);if(cM&&(t.data instanceof ArrayBuffer||fM(t.data)))return e(OO(t.data));M1(t,!1,n=>{Lv||(Lv=new TextEncoder),e(Lv.encode(n))})}const AO="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<AO.length;t++)Lc[AO.charCodeAt(t)]=t;const zX=t=>{let e=t.length*.75,n=t.length,r,i=0,s,a,l,u;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),f=new Uint8Array(c);for(r=0;r<n;r+=4)s=Lc[t.charCodeAt(r)],a=Lc[t.charCodeAt(r+1)],l=Lc[t.charCodeAt(r+2)],u=Lc[t.charCodeAt(r+3)],f[i++]=s<<2|a>>4,f[i++]=(a&15)<<4|l>>2,f[i++]=(l&3)<<6|u&63;return c},VX=typeof ArrayBuffer=="function",D1=(t,e)=>{if(typeof t!="string")return{type:"message",data:dM(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:qX(t.substring(1),e)}:rp[n]?t.length>1?{type:rp[n],data:t.substring(1)}:{type:rp[n]}:qb},qX=(t,e)=>{if(VX){const n=zX(t);return dM(n,e)}else return{base64:!0,data:t}},dM=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},hM="",HX=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,a)=>{M1(s,!1,l=>{r[a]=l,++i===n&&e(r.join(hM))})})},ZX=(t,e)=>{const n=t.split(hM),r=[];for(let i=0;i<n.length;i++){const s=D1(n[i],e);if(r.push(s),s.type==="error")break}return r};function WX(){return new TransformStream({transform(t,e){UX(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let Nv;function Ph(t){return t.reduce((e,n)=>e+n.length,0)}function Oh(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function GX(t,e){Nv||(Nv=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(a,l){for(n.push(a);;){if(r===0){if(Ph(n)<1)break;const u=Oh(n,1);s=(u[0]&128)===128,i=u[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Ph(n)<2)break;const u=Oh(n,2);i=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),r=3}else if(r===2){if(Ph(n)<8)break;const u=Oh(n,8),c=new DataView(u.buffer,u.byteOffset,u.length),f=c.getUint32(0);if(f>Math.pow(2,21)-1){l.enqueue(qb);break}i=f*Math.pow(2,32)+c.getUint32(4),r=3}else{if(Ph(n)<i)break;const u=Oh(n,i);l.enqueue(D1(s?u:Nv.decode(u),e)),r=0}if(i===0||i>t){l.enqueue(qb);break}}}})}const pM=4;function mn(t){if(t)return KX(t)}function KX(t){for(var e in mn.prototype)t[e]=mn.prototype[e];return t}mn.prototype.on=mn.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};mn.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};mn.prototype.off=mn.prototype.removeListener=mn.prototype.removeAllListeners=mn.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};mn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};mn.prototype.emitReserved=mn.prototype.emit;mn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};mn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Wr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function mM(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const JX=Wr.setTimeout,XX=Wr.clearTimeout;function gg(t,e){e.useNativeTimers?(t.setTimeoutFn=JX.bind(Wr),t.clearTimeoutFn=XX.bind(Wr)):(t.setTimeoutFn=Wr.setTimeout.bind(Wr),t.clearTimeoutFn=Wr.clearTimeout.bind(Wr))}const YX=1.33;function QX(t){return typeof t=="string"?eY(t):Math.ceil((t.byteLength||t.size)*YX)}function eY(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function tY(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function nY(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class rY extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class $1 extends mn{constructor(e){super(),this.writable=!1,gg(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,r){return super.emitReserved("error",new rY(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=D1(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=tY(e);return n.length?"?"+n:""}}const gM="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Hb=64,iY={};let kO=0,Ah=0,CO;function RO(t){let e="";do e=gM[t%Hb]+e,t=Math.floor(t/Hb);while(t>0);return e}function yM(){const t=RO(+new Date);return t!==CO?(kO=0,CO=t):t+"."+RO(kO++)}for(;Ah<Hb;Ah++)iY[gM[Ah]]=Ah;let vM=!1;try{vM=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const sY=vM;function _M(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||sY))return new XMLHttpRequest}catch{}if(!e)try{return new Wr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function aY(){}const oY=function(){return new _M({xdomain:!1}).responseType!=null}();class lY extends $1{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}const n=e&&e.forceBase64;this.supportsBinary=oY&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};ZX(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,HX(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=yM()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Ul(this.uri(),e)}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let Ul=class ip extends mn{constructor(e,n){super(),gg(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=mM(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const r=this.xhr=new _M(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=ip.requestsCount++,ip.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=aY,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete ip.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};Ul.requestsCount=0;Ul.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",LO);else if(typeof addEventListener=="function"){const t="onpagehide"in Wr?"pagehide":"unload";addEventListener(t,LO,!1)}}function LO(){for(let t in Ul.requests)Ul.requests.hasOwnProperty(t)&&Ul.requests[t].abort()}const B1=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),kh=Wr.WebSocket||Wr.MozWebSocket,NO=!0,uY="arraybuffer",IO=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class cY extends $1{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,r=IO?{}:mM(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=NO&&!IO?n?new kh(e,n):new kh(e):new kh(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;M1(r,this.supportsBinary,s=>{const a={};try{NO&&this.ws.send(s)}catch{}i&&B1(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=yM()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!kh}}class fY extends $1{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=GX(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=WX();i.readable.pipeTo(e.writable),this.writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:u})=>{l||(this.onPacket(u),s())}).catch(l=>{})};s();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this.writer.write(a).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this.writer.write(r).then(()=>{i&&B1(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const dY={websocket:cY,webtransport:fY,polling:lY},hY=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,pY=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Zb(t){if(t.length>2e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=hY.exec(t||""),s={},a=14;for(;a--;)s[pY[a]]=i[a]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=mY(s,s.path),s.queryKey=gY(s,s.query),s}function mY(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function gY(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}let bM=class il extends mn{constructor(e,n={}){super(),this.binaryType=uY,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=Zb(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=Zb(n.host).host),gg(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=nY(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=pM,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new dY[e](r)}open(){let e;if(this.opts.rememberUpgrade&&il.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),r=!1;il.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;il.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(f(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function s(){r||(r=!0,f(),n.close(),n=null)}const a=d=>{const p=new Error("probe error: "+d);p.transport=n.name,s(),this.emitReserved("upgradeError",p)};function l(){a("transport closed")}function u(){a("socket closed")}function c(d){n&&d.name!==n.name&&s()}const f=()=>{n.removeListener("open",i),n.removeListener("error",a),n.removeListener("close",l),this.off("close",u),this.off("upgrading",c)};n.once("open",i),n.once("error",a),n.once("close",l),this.once("close",u),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onOpen(){if(this.readyState="open",il.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=QX(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(e,n,r){return this.sendPacket("message",e,n,r),this}send(e,n,r){return this.sendPacket("message",e,n,r),this}sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){il.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let r=0;const i=e.length;for(;r<i;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}};bM.protocol=pM;function yY(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Zb(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const vY=typeof ArrayBuffer=="function",_Y=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,wM=Object.prototype.toString,bY=typeof Blob=="function"||typeof Blob<"u"&&wM.call(Blob)==="[object BlobConstructor]",wY=typeof File=="function"||typeof File<"u"&&wM.call(File)==="[object FileConstructor]";function F1(t){return vY&&(t instanceof ArrayBuffer||_Y(t))||bY&&t instanceof Blob||wY&&t instanceof File}function sp(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(sp(t[n]))return!0;return!1}if(F1(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return sp(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&sp(t[n]))return!0;return!1}function xY(t){const e=[],n=t.data,r=t;return r.data=Wb(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Wb(t,e){if(!t)return t;if(F1(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=Wb(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=Wb(t[r],e));return n}return t}function EY(t,e){return t.data=Gb(t.data,e),delete t.attachments,t}function Gb(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Gb(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Gb(t[n],e));return t}const SY=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],TY=5;var ct;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(ct||(ct={}));class PY{constructor(e){this.replacer=e}encode(e){return(e.type===ct.EVENT||e.type===ct.ACK)&&sp(e)?this.encodeAsBinary({type:e.type===ct.EVENT?ct.BINARY_EVENT:ct.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===ct.BINARY_EVENT||e.type===ct.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=xY(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function jO(t){return Object.prototype.toString.call(t)==="[object Object]"}class U1 extends mn{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===ct.BINARY_EVENT;r||n.type===ct.BINARY_ACK?(n.type=r?ct.EVENT:ct.ACK,this.reconstructor=new OY(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(F1(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(ct[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===ct.BINARY_EVENT||r.type===ct.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const a=e.substring(s,n);if(a!=Number(a)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const a=e.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(U1.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case ct.CONNECT:return jO(n);case ct.DISCONNECT:return n===void 0;case ct.CONNECT_ERROR:return typeof n=="string"||jO(n);case ct.EVENT:case ct.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&SY.indexOf(n[0])===-1);case ct.ACK:case ct.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class OY{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=EY(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const AY=Object.freeze(Object.defineProperty({__proto__:null,Decoder:U1,Encoder:PY,get PacketType(){return ct},protocol:TY},Symbol.toStringTag,{value:"Module"}));function bi(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const kY=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class xM extends mn{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[bi(e,"open",this.onopen.bind(this)),bi(e,"packet",this.onpacket.bind(this)),bi(e,"error",this.onerror.bind(this)),bi(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(kY.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:ct.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const a=this.ids++,l=n.pop();this._registerAckCallback(a,l),r.id=a}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),a=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(a,l)=>a?i(a):r(l);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ct.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ct.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ct.EVENT:case ct.BINARY_EVENT:this.onevent(e);break;case ct.ACK:case ct.BINARY_ACK:this.onack(e);break;case ct.DISCONNECT:this.ondisconnect();break;case ct.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:ct.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ct.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Au(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Au.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Au.prototype.reset=function(){this.attempts=0};Au.prototype.setMin=function(t){this.ms=t};Au.prototype.setMax=function(t){this.max=t};Au.prototype.setJitter=function(t){this.jitter=t};class Kb extends mn{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,gg(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Au({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||AY;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new bM(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=bi(n,"open",function(){r.onopen(),e&&e()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},a=bi(n,"error",s);if(this._timeout!==!1){const l=this._timeout,u=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(bi(e,"ping",this.onping.bind(this)),bi(e,"data",this.ondata.bind(this)),bi(e,"error",this.onerror.bind(this)),bi(e,"close",this.onclose.bind(this)),bi(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){B1(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new xM(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const mc={};function ap(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=yY(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,a=mc[i]&&s in mc[i].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let u;return l?u=new Kb(r,e):(mc[i]||(mc[i]=new Kb(r,e)),u=mc[i]),n.query&&!e.query&&(e.query=n.queryKey),u.socket(n.path,e)}Object.assign(ap,{Manager:Kb,Socket:xM,io:ap,connect:ap});const EM=K.createContext(),CY=({children:t})=>{const{currentUser:e}=K.useContext(fs),[n,r]=K.useState(null);return K.useEffect(()=>{r(ap("http://localhost:4000"))},[]),K.useEffect(()=>{e&&(n==null||n.emit("newUser",e.id))},[e,n]),I.jsx(EM.Provider,{value:{socket:n},children:t})};function RY({chats:t}){const[e,n]=K.useState(null),{currentUser:r}=K.useContext(fs),{socket:i}=K.useContext(EM),s=K.useRef(),a=Fb(c=>c.decrease);K.useEffect(()=>{var c;(c=s.current)==null||c.scrollIntoView({behavior:"smooth"})},[e]);const l=async(c,f)=>{try{const d=await gr("/chats/"+c);d.data.seenBy.includes(r.id)||a(),n({...d.data,receiver:f})}catch(d){console.log(d)}},u=async c=>{c.preventDefault();const d=new FormData(c.target).get("text");if(d)try{const p=await gr.post("/messages/"+e.id,{text:d});n(m=>({...m,messages:[...m.messages,p.data]})),c.target.reset(),i.emit("sendMessage",{receiverId:e.receiver.id,data:p.data})}catch(p){console.log(p)}};return K.useEffect(()=>{const c=async()=>{try{await gr.put("/chats/read/"+e.id)}catch(f){console.log(f)}};return e&&i&&i.on("getMessage",f=>{e.id===f.chatId&&(n(d=>({...d,messages:[...d.messages,f]})),c())}),()=>{i.off("getMessage")}},[i,e]),I.jsxs("div",{className:"chat",children:[I.jsxs("div",{className:"messages",children:[I.jsx("h1",{children:"Messages"}),t==null?void 0:t.map(c=>I.jsxs("div",{className:"message",style:{backgroundColor:c.seenBy.includes(r.id)||(e==null?void 0:e.id)===c.id?"white":"#fecd514e"},onClick:()=>l(c.id,c.receiver),children:[I.jsx("img",{src:c.receiver.avatar||"/noavatar.jpg",alt:""}),I.jsx("span",{children:c.receiver.username}),I.jsx("p",{children:c.lastMessage})]},c.id))]}),e&&I.jsxs("div",{className:"chatBox",children:[I.jsxs("div",{className:"top",children:[I.jsxs("div",{className:"user",children:[I.jsx("img",{src:e.receiver.avatar||"noavatar.jpg",alt:""}),e.receiver.username]}),I.jsx("span",{className:"close",onClick:()=>n(null),children:"X"})]}),I.jsxs("div",{className:"center",children:[e.messages.map(c=>I.jsxs("div",{className:"chatMessage",style:{alignSelf:c.userId===r.id?"flex-end":"flex-start",textAlign:c.userId===r.id?"right":"left"},children:[I.jsx("p",{children:c.text}),I.jsx("span",{children:FX(c.createdAt)})]},c.id)),I.jsx("div",{ref:s})]}),I.jsxs("form",{onSubmit:u,className:"bottom",children:[I.jsx("textarea",{name:"text"}),I.jsx("button",{children:"Send"})]})]})]})}function MO({posts:t}){return I.jsx("div",{className:"list",children:t.map(e=>I.jsx(xj,{item:e},e.id))})}function LY(){const t=Yw(),{updateUser:e,currentUser:n}=K.useContext(fs),r=Zs(),i=async()=>{try{await gr.post("/auth/logout"),e(null),r("/")}catch(s){console.log(s)}};return I.jsxs("div",{className:"profilePage",children:[I.jsx("div",{className:"details",children:I.jsxs("div",{className:"wrapper",children:[I.jsxs("div",{className:"title",children:[I.jsx("h1",{children:"User Information"}),I.jsx(Fs,{to:"/profile/update",children:I.jsx("button",{children:"Update Profile"})})]}),I.jsxs("div",{className:"info",children:[I.jsxs("span",{children:["Avatar:",I.jsx("img",{src:n.avatar||"noavatar.jpg",alt:""})]}),I.jsxs("span",{children:["Username: ",I.jsx("b",{children:n.username})]}),I.jsxs("span",{children:["E-mail: ",I.jsx("b",{children:n.email})]}),I.jsx("button",{onClick:i,children:"Logout"})]}),I.jsxs("div",{className:"title",children:[I.jsx("h1",{children:"My List"}),I.jsx(Fs,{to:"/add",children:I.jsx("button",{children:"Create New Post"})})]}),I.jsx(K.Suspense,{fallback:I.jsx("p",{children:"Loading..."}),children:I.jsx(Vc,{resolve:t.postResponse,errorElement:I.jsx("p",{children:"Error loading posts!"}),children:s=>I.jsx(MO,{posts:s.data.userPosts})})}),I.jsx("div",{className:"title",children:I.jsx("h1",{children:"Saved List"})}),I.jsx(K.Suspense,{fallback:I.jsx("p",{children:"Loading..."}),children:I.jsx(Vc,{resolve:t.postResponse,errorElement:I.jsx("p",{children:"Error loading posts!"}),children:s=>I.jsx(MO,{posts:s.data.savedPosts})})})]})}),I.jsx("div",{className:"chatContainer",children:I.jsx("div",{className:"wrapper",children:I.jsx(K.Suspense,{fallback:I.jsx("p",{children:"Loading..."}),children:I.jsx(Vc,{resolve:t.chatResponse,errorElement:I.jsx("p",{children:"Error loading chats!"}),children:s=>I.jsx(RY,{chats:s.data})})})})})]})}function NY(){const[t,e]=K.useState(""),[n,r]=K.useState(!1),{updateUser:i}=K.useContext(fs),s=Zs(),a=async l=>{l.preventDefault(),r(!0),e("");const u=new FormData(l.target),c=u.get("username"),f=u.get("password");try{const d=await gr.post("/auth/login",{username:c,password:f});i(d.data),s("/")}catch(d){e(d.response.data.message)}finally{r(!1)}};return I.jsxs("div",{className:"login",children:[I.jsx("div",{className:"formContainer",children:I.jsxs("form",{onSubmit:a,children:[I.jsx("h1",{children:"Welcome back"}),I.jsx("input",{name:"username",required:!0,minLength:3,maxLength:20,type:"text",placeholder:"Username"}),I.jsx("input",{name:"password",type:"password",required:!0,placeholder:"Password"}),I.jsx("button",{disabled:n,children:"Login"}),t&&I.jsx("span",{children:t}),I.jsxs(Fs,{to:"/register",children:["Don't"," you have an account?"]})]})}),I.jsx("div",{className:"imgContainer",children:I.jsx("img",{src:"/bg.png",alt:""})})]})}function IY(){const[t,e]=K.useState(""),[n,r]=K.useState(!1),i=Zs(),s=async a=>{a.preventDefault(),e(""),r(!0);const l=new FormData(a.target),u=l.get("username"),c=l.get("email"),f=l.get("password");try{const d=await gr.post("/auth/register",{username:u,email:c,password:f});i("/login")}catch(d){e(d.response.data.message)}finally{r(!1)}};return I.jsxs("div",{className:"registerPage",children:[I.jsx("div",{className:"formContainer",children:I.jsxs("form",{onSubmit:s,children:[I.jsx("h1",{children:"Create an Account"}),I.jsx("input",{name:"username",type:"text",placeholder:"Username"}),I.jsx("input",{name:"email",type:"text",placeholder:"Email"}),I.jsx("input",{name:"password",type:"password",placeholder:"Password"}),I.jsx("button",{disabled:n,children:"Register"}),t&&I.jsx("span",{children:t}),I.jsx(Fs,{to:"/login",children:"Do you have an account?"})]})}),I.jsx("div",{className:"imgContainer",children:I.jsx("img",{src:"/bg.png",alt:""})})]})}const jY=K.createContext();function SM({uwConfig:t,setPublicId:e,setState:n}){const[r,i]=K.useState(!1);K.useEffect(()=>{if(!r)if(document.getElementById("uw"))i(!0);else{const l=document.createElement("script");l.setAttribute("async",""),l.setAttribute("id","uw"),l.src="https://upload-widget.cloudinary.com/global/all.js",l.addEventListener("load",()=>i(!0)),document.body.appendChild(l)}},[r]);const s=()=>{if(r){var a=window.cloudinary.createUploadWidget(t,(l,u)=>{!l&&u&&u.event==="success"&&(console.log("Done! Here is the image info: ",u.info),n(c=>[...c,u.info.secure_url]))});document.getElementById("upload_widget").addEventListener("click",function(){a.open()},!1)}};return I.jsx(jY.Provider,{value:{loaded:r},children:I.jsx("button",{id:"upload_widget",className:"cloudinary-button",onClick:s,children:"Upload"})})}function MY(){const{currentUser:t,updateUser:e}=K.useContext(fs),[n,r]=K.useState(""),[i,s]=K.useState([]),a=Zs(),l=async u=>{u.preventDefault();const c=new FormData(u.target),{username:f,email:d,password:p}=Object.fromEntries(c);try{const m=await gr.put(`/users/${t.id}`,{username:f,email:d,password:p,avatar:i[0]});e(m.data),a("/profile")}catch(m){console.log(m),r(m.response.data.message)}};return I.jsxs("div",{className:"profileUpdatePage",children:[I.jsx("div",{className:"formContainer",children:I.jsxs("form",{onSubmit:l,children:[I.jsx("h1",{children:"Update Profile"}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"username",children:"Username"}),I.jsx("input",{id:"username",name:"username",type:"text",defaultValue:t.username})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"email",children:"Email"}),I.jsx("input",{id:"email",name:"email",type:"email",defaultValue:t.email})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"password",children:"Password"}),I.jsx("input",{id:"password",name:"password",type:"password"})]}),I.jsx("button",{children:"Update"}),n&&I.jsx("span",{children:"error"})]})}),I.jsxs("div",{className:"sideContainer",children:[I.jsx("img",{src:i[0]||t.avatar||"/noavatar.jpg",alt:"",className:"avatar"}),I.jsx(SM,{uwConfig:{cloudName:"lamadev",uploadPreset:"estate",multiple:!1,maxImageFileSize:2e6,folder:"avatars"},setState:s})]})]})}function DY(){this.__data__=[],this.size=0}var $Y=DY;function BY(t,e){return t===e||t!==t&&e!==e}var TM=BY,FY=TM;function UY(t,e){for(var n=t.length;n--;)if(FY(t[n][0],e))return n;return-1}var yg=UY,zY=yg,VY=Array.prototype,qY=VY.splice;function HY(t){var e=this.__data__,n=zY(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():qY.call(e,n,1),--this.size,!0}var ZY=HY,WY=yg;function GY(t){var e=this.__data__,n=WY(e,t);return n<0?void 0:e[n][1]}var KY=GY,JY=yg;function XY(t){return JY(this.__data__,t)>-1}var YY=XY,QY=yg;function eQ(t,e){var n=this.__data__,r=QY(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var tQ=eQ,nQ=$Y,rQ=ZY,iQ=KY,sQ=YY,aQ=tQ;function ku(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ku.prototype.clear=nQ;ku.prototype.delete=rQ;ku.prototype.get=iQ;ku.prototype.has=sQ;ku.prototype.set=aQ;var vg=ku,oQ=vg;function lQ(){this.__data__=new oQ,this.size=0}var uQ=lQ;function cQ(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var fQ=cQ;function dQ(t){return this.__data__.get(t)}var hQ=dQ;function pQ(t){return this.__data__.has(t)}var mQ=pQ,gQ=typeof Hn=="object"&&Hn&&Hn.Object===Object&&Hn,PM=gQ,yQ=PM,vQ=typeof self=="object"&&self&&self.Object===Object&&self,_Q=yQ||vQ||Function("return this")(),Ws=_Q,bQ=Ws,wQ=bQ.Symbol,z1=wQ,DO=z1,OM=Object.prototype,xQ=OM.hasOwnProperty,EQ=OM.toString,gc=DO?DO.toStringTag:void 0;function SQ(t){var e=xQ.call(t,gc),n=t[gc];try{t[gc]=void 0;var r=!0}catch{}var i=EQ.call(t);return r&&(e?t[gc]=n:delete t[gc]),i}var TQ=SQ,PQ=Object.prototype,OQ=PQ.toString;function AQ(t){return OQ.call(t)}var kQ=AQ,$O=z1,CQ=TQ,RQ=kQ,LQ="[object Null]",NQ="[object Undefined]",BO=$O?$O.toStringTag:void 0;function IQ(t){return t==null?t===void 0?NQ:LQ:BO&&BO in Object(t)?CQ(t):RQ(t)}var _g=IQ;function jQ(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var AM=jQ,MQ=_g,DQ=AM,$Q="[object AsyncFunction]",BQ="[object Function]",FQ="[object GeneratorFunction]",UQ="[object Proxy]";function zQ(t){if(!DQ(t))return!1;var e=MQ(t);return e==BQ||e==FQ||e==$Q||e==UQ}var kM=zQ,VQ=Ws,qQ=VQ["__core-js_shared__"],HQ=qQ,Iv=HQ,FO=function(){var t=/[^.]+$/.exec(Iv&&Iv.keys&&Iv.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function ZQ(t){return!!FO&&FO in t}var WQ=ZQ,GQ=Function.prototype,KQ=GQ.toString;function JQ(t){if(t!=null){try{return KQ.call(t)}catch{}try{return t+""}catch{}}return""}var CM=JQ,XQ=kM,YQ=WQ,QQ=AM,eee=CM,tee=/[\\^$.*+?()[\]{}|]/g,nee=/^\[object .+?Constructor\]$/,ree=Function.prototype,iee=Object.prototype,see=ree.toString,aee=iee.hasOwnProperty,oee=RegExp("^"+see.call(aee).replace(tee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lee(t){if(!QQ(t)||YQ(t))return!1;var e=XQ(t)?oee:nee;return e.test(eee(t))}var uee=lee;function cee(t,e){return t==null?void 0:t[e]}var fee=cee,dee=uee,hee=fee;function pee(t,e){var n=hee(t,e);return dee(n)?n:void 0}var Cu=pee,mee=Cu,gee=Ws,yee=mee(gee,"Map"),V1=yee,vee=Cu,_ee=vee(Object,"create"),bg=_ee,UO=bg;function bee(){this.__data__=UO?UO(null):{},this.size=0}var wee=bee;function xee(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Eee=xee,See=bg,Tee="__lodash_hash_undefined__",Pee=Object.prototype,Oee=Pee.hasOwnProperty;function Aee(t){var e=this.__data__;if(See){var n=e[t];return n===Tee?void 0:n}return Oee.call(e,t)?e[t]:void 0}var kee=Aee,Cee=bg,Ree=Object.prototype,Lee=Ree.hasOwnProperty;function Nee(t){var e=this.__data__;return Cee?e[t]!==void 0:Lee.call(e,t)}var Iee=Nee,jee=bg,Mee="__lodash_hash_undefined__";function Dee(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=jee&&e===void 0?Mee:e,this}var $ee=Dee,Bee=wee,Fee=Eee,Uee=kee,zee=Iee,Vee=$ee;function Ru(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ru.prototype.clear=Bee;Ru.prototype.delete=Fee;Ru.prototype.get=Uee;Ru.prototype.has=zee;Ru.prototype.set=Vee;var qee=Ru,zO=qee,Hee=vg,Zee=V1;function Wee(){this.size=0,this.__data__={hash:new zO,map:new(Zee||Hee),string:new zO}}var Gee=Wee;function Kee(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Jee=Kee,Xee=Jee;function Yee(t,e){var n=t.__data__;return Xee(e)?n[typeof e=="string"?"string":"hash"]:n.map}var wg=Yee,Qee=wg;function ete(t){var e=Qee(this,t).delete(t);return this.size-=e?1:0,e}var tte=ete,nte=wg;function rte(t){return nte(this,t).get(t)}var ite=rte,ste=wg;function ate(t){return ste(this,t).has(t)}var ote=ate,lte=wg;function ute(t,e){var n=lte(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var cte=ute,fte=Gee,dte=tte,hte=ite,pte=ote,mte=cte;function Lu(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Lu.prototype.clear=fte;Lu.prototype.delete=dte;Lu.prototype.get=hte;Lu.prototype.has=pte;Lu.prototype.set=mte;var RM=Lu,gte=vg,yte=V1,vte=RM,_te=200;function bte(t,e){var n=this.__data__;if(n instanceof gte){var r=n.__data__;if(!yte||r.length<_te-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new vte(r)}return n.set(t,e),this.size=n.size,this}var wte=bte,xte=vg,Ete=uQ,Ste=fQ,Tte=hQ,Pte=mQ,Ote=wte;function Nu(t){var e=this.__data__=new xte(t);this.size=e.size}Nu.prototype.clear=Ete;Nu.prototype.delete=Ste;Nu.prototype.get=Tte;Nu.prototype.has=Pte;Nu.prototype.set=Ote;var Ate=Nu,kte="__lodash_hash_undefined__";function Cte(t){return this.__data__.set(t,kte),this}var Rte=Cte;function Lte(t){return this.__data__.has(t)}var Nte=Lte,Ite=RM,jte=Rte,Mte=Nte;function lm(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Ite;++e<n;)this.add(t[e])}lm.prototype.add=lm.prototype.push=jte;lm.prototype.has=Mte;var Dte=lm;function $te(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Bte=$te;function Fte(t,e){return t.has(e)}var Ute=Fte,zte=Dte,Vte=Bte,qte=Ute,Hte=1,Zte=2;function Wte(t,e,n,r,i,s){var a=n&Hte,l=t.length,u=e.length;if(l!=u&&!(a&&u>l))return!1;var c=s.get(t),f=s.get(e);if(c&&f)return c==e&&f==t;var d=-1,p=!0,m=n&Zte?new zte:void 0;for(s.set(t,e),s.set(e,t);++d<l;){var g=t[d],b=e[d];if(r)var w=a?r(b,g,d,e,t,s):r(g,b,d,t,e,s);if(w!==void 0){if(w)continue;p=!1;break}if(m){if(!Vte(e,function(y,v){if(!qte(m,v)&&(g===y||i(g,y,n,r,s)))return m.push(v)})){p=!1;break}}else if(!(g===b||i(g,b,n,r,s))){p=!1;break}}return s.delete(t),s.delete(e),p}var LM=Wte,Gte=Ws,Kte=Gte.Uint8Array,Jte=Kte;function Xte(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var Yte=Xte;function Qte(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var ene=Qte,VO=z1,qO=Jte,tne=TM,nne=LM,rne=Yte,ine=ene,sne=1,ane=2,one="[object Boolean]",lne="[object Date]",une="[object Error]",cne="[object Map]",fne="[object Number]",dne="[object RegExp]",hne="[object Set]",pne="[object String]",mne="[object Symbol]",gne="[object ArrayBuffer]",yne="[object DataView]",HO=VO?VO.prototype:void 0,jv=HO?HO.valueOf:void 0;function vne(t,e,n,r,i,s,a){switch(n){case yne:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case gne:return!(t.byteLength!=e.byteLength||!s(new qO(t),new qO(e)));case one:case lne:case fne:return tne(+t,+e);case une:return t.name==e.name&&t.message==e.message;case dne:case pne:return t==e+"";case cne:var l=rne;case hne:var u=r&sne;if(l||(l=ine),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=ane,a.set(t,e);var f=nne(l(t),l(e),r,i,s,a);return a.delete(t),f;case mne:if(jv)return jv.call(t)==jv.call(e)}return!1}var _ne=vne;function bne(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var wne=bne,xne=Array.isArray,q1=xne,Ene=wne,Sne=q1;function Tne(t,e,n){var r=e(t);return Sne(t)?r:Ene(r,n(t))}var Pne=Tne;function One(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}var Ane=One;function kne(){return[]}var Cne=kne,Rne=Ane,Lne=Cne,Nne=Object.prototype,Ine=Nne.propertyIsEnumerable,ZO=Object.getOwnPropertySymbols,jne=ZO?function(t){return t==null?[]:(t=Object(t),Rne(ZO(t),function(e){return Ine.call(t,e)}))}:Lne,Mne=jne;function Dne(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var $ne=Dne;function Bne(t){return t!=null&&typeof t=="object"}var xg=Bne,Fne=_g,Une=xg,zne="[object Arguments]";function Vne(t){return Une(t)&&Fne(t)==zne}var qne=Vne,WO=qne,Hne=xg,NM=Object.prototype,Zne=NM.hasOwnProperty,Wne=NM.propertyIsEnumerable,Gne=WO(function(){return arguments}())?WO:function(t){return Hne(t)&&Zne.call(t,"callee")&&!Wne.call(t,"callee")},Kne=Gne,um={exports:{}};function Jne(){return!1}var Xne=Jne;um.exports;(function(t,e){var n=Ws,r=Xne,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,l=a?n.Buffer:void 0,u=l?l.isBuffer:void 0,c=u||r;t.exports=c})(um,um.exports);var IM=um.exports,Yne=9007199254740991,Qne=/^(?:0|[1-9]\d*)$/;function ere(t,e){var n=typeof t;return e=e??Yne,!!e&&(n=="number"||n!="symbol"&&Qne.test(t))&&t>-1&&t%1==0&&t<e}var tre=ere,nre=9007199254740991;function rre(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=nre}var jM=rre,ire=_g,sre=jM,are=xg,ore="[object Arguments]",lre="[object Array]",ure="[object Boolean]",cre="[object Date]",fre="[object Error]",dre="[object Function]",hre="[object Map]",pre="[object Number]",mre="[object Object]",gre="[object RegExp]",yre="[object Set]",vre="[object String]",_re="[object WeakMap]",bre="[object ArrayBuffer]",wre="[object DataView]",xre="[object Float32Array]",Ere="[object Float64Array]",Sre="[object Int8Array]",Tre="[object Int16Array]",Pre="[object Int32Array]",Ore="[object Uint8Array]",Are="[object Uint8ClampedArray]",kre="[object Uint16Array]",Cre="[object Uint32Array]",jt={};jt[xre]=jt[Ere]=jt[Sre]=jt[Tre]=jt[Pre]=jt[Ore]=jt[Are]=jt[kre]=jt[Cre]=!0;jt[ore]=jt[lre]=jt[bre]=jt[ure]=jt[wre]=jt[cre]=jt[fre]=jt[dre]=jt[hre]=jt[pre]=jt[mre]=jt[gre]=jt[yre]=jt[vre]=jt[_re]=!1;function Rre(t){return are(t)&&sre(t.length)&&!!jt[ire(t)]}var Lre=Rre;function Nre(t){return function(e){return t(e)}}var Ire=Nre,cm={exports:{}};cm.exports;(function(t,e){var n=PM,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s&&n.process,l=function(){try{var u=i&&i.require&&i.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}}();t.exports=l})(cm,cm.exports);var jre=cm.exports,Mre=Lre,Dre=Ire,GO=jre,KO=GO&&GO.isTypedArray,$re=KO?Dre(KO):Mre,MM=$re,Bre=$ne,Fre=Kne,Ure=q1,zre=IM,Vre=tre,qre=MM,Hre=Object.prototype,Zre=Hre.hasOwnProperty;function Wre(t,e){var n=Ure(t),r=!n&&Fre(t),i=!n&&!r&&zre(t),s=!n&&!r&&!i&&qre(t),a=n||r||i||s,l=a?Bre(t.length,String):[],u=l.length;for(var c in t)(e||Zre.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Vre(c,u)))&&l.push(c);return l}var Gre=Wre,Kre=Object.prototype;function Jre(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Kre;return t===n}var Xre=Jre;function Yre(t,e){return function(n){return t(e(n))}}var Qre=Yre,eie=Qre,tie=eie(Object.keys,Object),nie=tie,rie=Xre,iie=nie,sie=Object.prototype,aie=sie.hasOwnProperty;function oie(t){if(!rie(t))return iie(t);var e=[];for(var n in Object(t))aie.call(t,n)&&n!="constructor"&&e.push(n);return e}var lie=oie,uie=kM,cie=jM;function fie(t){return t!=null&&cie(t.length)&&!uie(t)}var die=fie,hie=Gre,pie=lie,mie=die;function gie(t){return mie(t)?hie(t):pie(t)}var yie=gie,vie=Pne,_ie=Mne,bie=yie;function wie(t){return vie(t,bie,_ie)}var xie=wie,JO=xie,Eie=1,Sie=Object.prototype,Tie=Sie.hasOwnProperty;function Pie(t,e,n,r,i,s){var a=n&Eie,l=JO(t),u=l.length,c=JO(e),f=c.length;if(u!=f&&!a)return!1;for(var d=u;d--;){var p=l[d];if(!(a?p in e:Tie.call(e,p)))return!1}var m=s.get(t),g=s.get(e);if(m&&g)return m==e&&g==t;var b=!0;s.set(t,e),s.set(e,t);for(var w=a;++d<u;){p=l[d];var y=t[p],v=e[p];if(r)var x=a?r(v,y,p,e,t,s):r(y,v,p,t,e,s);if(!(x===void 0?y===v||i(y,v,n,r,s):x)){b=!1;break}w||(w=p=="constructor")}if(b&&!w){var E=t.constructor,T=e.constructor;E!=T&&"constructor"in t&&"constructor"in e&&!(typeof E=="function"&&E instanceof E&&typeof T=="function"&&T instanceof T)&&(b=!1)}return s.delete(t),s.delete(e),b}var Oie=Pie,Aie=Cu,kie=Ws,Cie=Aie(kie,"DataView"),Rie=Cie,Lie=Cu,Nie=Ws,Iie=Lie(Nie,"Promise"),jie=Iie,Mie=Cu,Die=Ws,$ie=Mie(Die,"Set"),Bie=$ie,Fie=Cu,Uie=Ws,zie=Fie(Uie,"WeakMap"),Vie=zie,Jb=Rie,Xb=V1,Yb=jie,Qb=Bie,ew=Vie,DM=_g,Iu=CM,XO="[object Map]",qie="[object Object]",YO="[object Promise]",QO="[object Set]",eA="[object WeakMap]",tA="[object DataView]",Hie=Iu(Jb),Zie=Iu(Xb),Wie=Iu(Yb),Gie=Iu(Qb),Kie=Iu(ew),ro=DM;(Jb&&ro(new Jb(new ArrayBuffer(1)))!=tA||Xb&&ro(new Xb)!=XO||Yb&&ro(Yb.resolve())!=YO||Qb&&ro(new Qb)!=QO||ew&&ro(new ew)!=eA)&&(ro=function(t){var e=DM(t),n=e==qie?t.constructor:void 0,r=n?Iu(n):"";if(r)switch(r){case Hie:return tA;case Zie:return XO;case Wie:return YO;case Gie:return QO;case Kie:return eA}return e});var Jie=ro,Mv=Ate,Xie=LM,Yie=_ne,Qie=Oie,nA=Jie,rA=q1,iA=IM,ese=MM,tse=1,sA="[object Arguments]",aA="[object Array]",Ch="[object Object]",nse=Object.prototype,oA=nse.hasOwnProperty;function rse(t,e,n,r,i,s){var a=rA(t),l=rA(e),u=a?aA:nA(t),c=l?aA:nA(e);u=u==sA?Ch:u,c=c==sA?Ch:c;var f=u==Ch,d=c==Ch,p=u==c;if(p&&iA(t)){if(!iA(e))return!1;a=!0,f=!1}if(p&&!f)return s||(s=new Mv),a||ese(t)?Xie(t,e,n,r,i,s):Yie(t,e,u,n,r,i,s);if(!(n&tse)){var m=f&&oA.call(t,"__wrapped__"),g=d&&oA.call(e,"__wrapped__");if(m||g){var b=m?t.value():t,w=g?e.value():e;return s||(s=new Mv),i(b,w,n,r,s)}}return p?(s||(s=new Mv),Qie(t,e,n,r,i,s)):!1}var ise=rse,sse=ise,lA=xg;function $M(t,e,n,r,i){return t===e?!0:t==null||e==null||!lA(t)&&!lA(e)?t!==t&&e!==e:sse(t,e,n,r,$M,i)}var ase=$M,ose=ase;function lse(t,e){return ose(t,e)}var use=lse,BM={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(t,e){(function(r,i){t.exports=i()})(typeof self<"u"?self:Hn,function(){return function(n){var r={};function i(s){if(r[s])return r[s].exports;var a=r[s]={i:s,l:!1,exports:{}};return n[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.d=function(s,a,l){i.o(s,a)||Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:l})},i.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(a,"a",a),a},i.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},i.p="",i(i.s=109)}([function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),a=i(18),l=i(19),u=i(45),c=i(46),f=i(47),d=i(48),p=i(49),m=i(12),g=i(32),b=i(33),w=i(31),y=i(1),v={Scope:y.Scope,create:y.create,find:y.find,query:y.query,register:y.register,Container:s.default,Format:a.default,Leaf:l.default,Embed:d.default,Scroll:u.default,Block:f.default,Inline:c.default,Text:p.default,Attributor:{Attribute:m.default,Class:g.default,Style:b.default,Store:w.default}};r.default=v},function(n,r,i){var s=this&&this.__extends||function(){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var x in v)v.hasOwnProperty(x)&&(y[x]=v[x])};return function(y,v){w(y,v);function x(){this.constructor=y}y.prototype=v===null?Object.create(v):(x.prototype=v.prototype,new x)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=function(w){s(y,w);function y(v){var x=this;return v="[Parchment] "+v,x=w.call(this,v)||this,x.message=v,x.name=x.constructor.name,x}return y}(Error);r.ParchmentError=a;var l={},u={},c={},f={};r.DATA_KEY="__blot";var d;(function(w){w[w.TYPE=3]="TYPE",w[w.LEVEL=12]="LEVEL",w[w.ATTRIBUTE=13]="ATTRIBUTE",w[w.BLOT=14]="BLOT",w[w.INLINE=7]="INLINE",w[w.BLOCK=11]="BLOCK",w[w.BLOCK_BLOT=10]="BLOCK_BLOT",w[w.INLINE_BLOT=6]="INLINE_BLOT",w[w.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",w[w.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",w[w.ANY=15]="ANY"})(d=r.Scope||(r.Scope={}));function p(w,y){var v=g(w);if(v==null)throw new a("Unable to create "+w+" blot");var x=v,E=w instanceof Node||w.nodeType===Node.TEXT_NODE?w:x.create(y);return new x(E,y)}r.create=p;function m(w,y){return y===void 0&&(y=!1),w==null?null:w[r.DATA_KEY]!=null?w[r.DATA_KEY].blot:y?m(w.parentNode,y):null}r.find=m;function g(w,y){y===void 0&&(y=d.ANY);var v;if(typeof w=="string")v=f[w]||l[w];else if(w instanceof Text||w.nodeType===Node.TEXT_NODE)v=f.text;else if(typeof w=="number")w&d.LEVEL&d.BLOCK?v=f.block:w&d.LEVEL&d.INLINE&&(v=f.inline);else if(w instanceof HTMLElement){var x=(w.getAttribute("class")||"").split(/\s+/);for(var E in x)if(v=u[x[E]],v)break;v=v||c[w.tagName]}return v==null?null:y&d.LEVEL&v.scope&&y&d.TYPE&v.scope?v:null}r.query=g;function b(){for(var w=[],y=0;y<arguments.length;y++)w[y]=arguments[y];if(w.length>1)return w.map(function(E){return b(E)});var v=w[0];if(typeof v.blotName!="string"&&typeof v.attrName!="string")throw new a("Invalid definition");if(v.blotName==="abstract")throw new a("Cannot register abstract class");if(f[v.blotName||v.attrName]=v,typeof v.keyName=="string")l[v.keyName]=v;else if(v.className!=null&&(u[v.className]=v),v.tagName!=null){Array.isArray(v.tagName)?v.tagName=v.tagName.map(function(E){return E.toUpperCase()}):v.tagName=v.tagName.toUpperCase();var x=Array.isArray(v.tagName)?v.tagName:[v.tagName];x.forEach(function(E){(c[E]==null||v.className==null)&&(c[E]=v)})}return v}r.register=b},function(n,r,i){var s=i(51),a=i(11),l=i(3),u=i(20),c="\0",f=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};f.prototype.insert=function(d,p){var m={};return d.length===0?this:(m.insert=d,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(m.attributes=p),this.push(m))},f.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},f.prototype.retain=function(d,p){if(d<=0)return this;var m={retain:d};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(m.attributes=p),this.push(m)},f.prototype.push=function(d){var p=this.ops.length,m=this.ops[p-1];if(d=l(!0,{},d),typeof m=="object"){if(typeof d.delete=="number"&&typeof m.delete=="number")return this.ops[p-1]={delete:m.delete+d.delete},this;if(typeof m.delete=="number"&&d.insert!=null&&(p-=1,m=this.ops[p-1],typeof m!="object"))return this.ops.unshift(d),this;if(a(d.attributes,m.attributes)){if(typeof d.insert=="string"&&typeof m.insert=="string")return this.ops[p-1]={insert:m.insert+d.insert},typeof d.attributes=="object"&&(this.ops[p-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof m.retain=="number")return this.ops[p-1]={retain:m.retain+d.retain},typeof d.attributes=="object"&&(this.ops[p-1].attributes=d.attributes),this}}return p===this.ops.length?this.ops.push(d):this.ops.splice(p,0,d),this},f.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},f.prototype.filter=function(d){return this.ops.filter(d)},f.prototype.forEach=function(d){this.ops.forEach(d)},f.prototype.map=function(d){return this.ops.map(d)},f.prototype.partition=function(d){var p=[],m=[];return this.forEach(function(g){var b=d(g)?p:m;b.push(g)}),[p,m]},f.prototype.reduce=function(d,p){return this.ops.reduce(d,p)},f.prototype.changeLength=function(){return this.reduce(function(d,p){return p.insert?d+u.length(p):p.delete?d-p.delete:d},0)},f.prototype.length=function(){return this.reduce(function(d,p){return d+u.length(p)},0)},f.prototype.slice=function(d,p){d=d||0,typeof p!="number"&&(p=1/0);for(var m=[],g=u.iterator(this.ops),b=0;b<p&&g.hasNext();){var w;b<d?w=g.next(d-b):(w=g.next(p-b),m.push(w)),b+=u.length(w)}return new f(m)},f.prototype.compose=function(d){var p=u.iterator(this.ops),m=u.iterator(d.ops),g=[],b=m.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){for(var w=b.retain;p.peekType()==="insert"&&p.peekLength()<=w;)w-=p.peekLength(),g.push(p.next());b.retain-w>0&&m.next(b.retain-w)}for(var y=new f(g);p.hasNext()||m.hasNext();)if(m.peekType()==="insert")y.push(m.next());else if(p.peekType()==="delete")y.push(p.next());else{var v=Math.min(p.peekLength(),m.peekLength()),x=p.next(v),E=m.next(v);if(typeof E.retain=="number"){var T={};typeof x.retain=="number"?T.retain=v:T.insert=x.insert;var O=u.attributes.compose(x.attributes,E.attributes,typeof x.retain=="number");if(O&&(T.attributes=O),y.push(T),!m.hasNext()&&a(y.ops[y.ops.length-1],T)){var A=new f(p.rest());return y.concat(A).chop()}}else typeof E.delete=="number"&&typeof x.retain=="number"&&y.push(E)}return y.chop()},f.prototype.concat=function(d){var p=new f(this.ops.slice());return d.ops.length>0&&(p.push(d.ops[0]),p.ops=p.ops.concat(d.ops.slice(1))),p},f.prototype.diff=function(d,p){if(this.ops===d.ops)return new f;var m=[this,d].map(function(v){return v.map(function(x){if(x.insert!=null)return typeof x.insert=="string"?x.insert:c;var E=v===d?"on":"with";throw new Error("diff() called "+E+" non-document")}).join("")}),g=new f,b=s(m[0],m[1],p),w=u.iterator(this.ops),y=u.iterator(d.ops);return b.forEach(function(v){for(var x=v[1].length;x>0;){var E=0;switch(v[0]){case s.INSERT:E=Math.min(y.peekLength(),x),g.push(y.next(E));break;case s.DELETE:E=Math.min(x,w.peekLength()),w.next(E),g.delete(E);break;case s.EQUAL:E=Math.min(w.peekLength(),y.peekLength(),x);var T=w.next(E),O=y.next(E);a(T.insert,O.insert)?g.retain(E,u.attributes.diff(T.attributes,O.attributes)):g.push(O).delete(E);break}x-=E}}),g.chop()},f.prototype.eachLine=function(d,p){p=p||`
`;for(var m=u.iterator(this.ops),g=new f,b=0;m.hasNext();){if(m.peekType()!=="insert")return;var w=m.peek(),y=u.length(w)-m.peekLength(),v=typeof w.insert=="string"?w.insert.indexOf(p,y)-y:-1;if(v<0)g.push(m.next());else if(v>0)g.push(m.next(v));else{if(d(g,m.next(1).attributes||{},b)===!1)return;b+=1,g=new f}}g.length()>0&&d(g,{},b)},f.prototype.transform=function(d,p){if(p=!!p,typeof d=="number")return this.transformPosition(d,p);for(var m=u.iterator(this.ops),g=u.iterator(d.ops),b=new f;m.hasNext()||g.hasNext();)if(m.peekType()==="insert"&&(p||g.peekType()!=="insert"))b.retain(u.length(m.next()));else if(g.peekType()==="insert")b.push(g.next());else{var w=Math.min(m.peekLength(),g.peekLength()),y=m.next(w),v=g.next(w);if(y.delete)continue;v.delete?b.push(v):b.retain(w,u.attributes.transform(y.attributes,v.attributes,p))}return b.chop()},f.prototype.transformPosition=function(d,p){p=!!p;for(var m=u.iterator(this.ops),g=0;m.hasNext()&&g<=d;){var b=m.peekLength(),w=m.peekType();if(m.next(),w==="delete"){d-=Math.min(b,d-g);continue}else w==="insert"&&(g<d||!p)&&(d+=b);g+=b}return d},n.exports=f},function(n,r){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,a=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u=function(m){return typeof Array.isArray=="function"?Array.isArray(m):s.call(m)==="[object Array]"},c=function(m){if(!m||s.call(m)!=="[object Object]")return!1;var g=i.call(m,"constructor"),b=m.constructor&&m.constructor.prototype&&i.call(m.constructor.prototype,"isPrototypeOf");if(m.constructor&&!g&&!b)return!1;var w;for(w in m);return typeof w>"u"||i.call(m,w)},f=function(m,g){a&&g.name==="__proto__"?a(m,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):m[g.name]=g.newValue},d=function(m,g){if(g==="__proto__")if(i.call(m,g)){if(l)return l(m,g).value}else return;return m[g]};n.exports=function p(){var m,g,b,w,y,v,x=arguments[0],E=1,T=arguments.length,O=!1;for(typeof x=="boolean"&&(O=x,x=arguments[1]||{},E=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});E<T;++E)if(m=arguments[E],m!=null)for(g in m)b=d(x,g),w=d(m,g),x!==w&&(O&&w&&(c(w)||(y=u(w)))?(y?(y=!1,v=b&&u(b)?b:[]):v=b&&c(b)?b:{},f(x,{name:g,newValue:p(O,v,w)})):typeof w<"u"&&f(x,{name:g,newValue:w}));return x}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var s=function(){function P(N,$){for(var D=0;D<$.length;D++){var z=$[D];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(N,z.key,z)}}return function(N,$,D){return $&&P(N.prototype,$),D&&P(N,D),N}}(),a=function P(N,$,D){N===null&&(N=Function.prototype);var z=Object.getOwnPropertyDescriptor(N,$);if(z===void 0){var G=Object.getPrototypeOf(N);return G===null?void 0:P(G,$,D)}else{if("value"in z)return z.value;var W=z.get;return W===void 0?void 0:W.call(D)}},l=i(3),u=x(l),c=i(2),f=x(c),d=i(0),p=x(d),m=i(16),g=x(m),b=i(6),w=x(b),y=i(7),v=x(y);function x(P){return P&&P.__esModule?P:{default:P}}function E(P,N){if(!(P instanceof N))throw new TypeError("Cannot call a class as a function")}function T(P,N){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:P}function O(P,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);P.prototype=Object.create(N&&N.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(P,N):P.__proto__=N)}var A=1,C=function(P){O(N,P);function N(){return E(this,N),T(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return s(N,[{key:"attach",value:function(){a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"attach",this).call(this),this.attributes=new p.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new f.default().insert(this.value(),(0,u.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(D,z){var G=p.default.query(D,p.default.Scope.BLOCK_ATTRIBUTE);G!=null&&this.attributes.attribute(G,z)}},{key:"formatAt",value:function(D,z,G,W){this.format(G,W)}},{key:"insertAt",value:function(D,z,G){if(typeof z=="string"&&z.endsWith(`
`)){var W=p.default.create(M.blotName);this.parent.insertBefore(W,D===0?this:this.next),W.insertAt(0,z.slice(0,-1))}else a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,D,z,G)}}]),N}(p.default.Embed);C.scope=p.default.Scope.BLOCK_BLOT;var M=function(P){O(N,P);function N($){E(this,N);var D=T(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,$));return D.cache={},D}return s(N,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(p.default.Leaf).reduce(function(D,z){return z.length()===0?D:D.insert(z.value(),R(z))},new f.default).insert(`
`,R(this))),this.cache.delta}},{key:"deleteAt",value:function(D,z){a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"deleteAt",this).call(this,D,z),this.cache={}}},{key:"formatAt",value:function(D,z,G,W){z<=0||(p.default.query(G,p.default.Scope.BLOCK)?D+z===this.length()&&this.format(G,W):a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"formatAt",this).call(this,D,Math.min(z,this.length()-D-1),G,W),this.cache={})}},{key:"insertAt",value:function(D,z,G){if(G!=null)return a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,D,z,G);if(z.length!==0){var W=z.split(`
`),Z=W.shift();Z.length>0&&(D<this.length()-1||this.children.tail==null?a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,Math.min(D,this.length()-1),Z):this.children.tail.insertAt(this.children.tail.length(),Z),this.cache={});var q=this;W.reduce(function(B,j){return q=q.split(B,!0),q.insertAt(0,j),j.length},D+Z.length)}}},{key:"insertBefore",value:function(D,z){var G=this.children.head;a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,D,z),G instanceof g.default&&G.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"length",this).call(this)+A),this.cache.length}},{key:"moveChildren",value:function(D,z){a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"moveChildren",this).call(this,D,z),this.cache={}}},{key:"optimize",value:function(D){a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,D),this.cache={}}},{key:"path",value:function(D){return a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"path",this).call(this,D,!0)}},{key:"removeChild",value:function(D){a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"removeChild",this).call(this,D),this.cache={}}},{key:"split",value:function(D){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(z&&(D===0||D>=this.length()-A)){var G=this.clone();return D===0?(this.parent.insertBefore(G,this),this):(this.parent.insertBefore(G,this.next),G)}else{var W=a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"split",this).call(this,D,z);return this.cache={},W}}}]),N}(p.default.Block);M.blotName="block",M.tagName="P",M.defaultChild="break",M.allowedChildren=[w.default,p.default.Embed,v.default];function R(P){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return P==null||(typeof P.formats=="function"&&(N=(0,u.default)(N,P.formats())),P.parent==null||P.parent.blotName=="scroll"||P.parent.statics.scope!==P.statics.scope)?N:R(P.parent,N)}r.bubbleFormats=R,r.BlockEmbed=C,r.default=M},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},a=function(){function q(B,j){var U=[],H=!0,Y=!1,J=void 0;try{for(var V=B[Symbol.iterator](),Q;!(H=(Q=V.next()).done)&&(U.push(Q.value),!(j&&U.length===j));H=!0);}catch(re){Y=!0,J=re}finally{try{!H&&V.return&&V.return()}finally{if(Y)throw J}}return U}return function(B,j){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return q(B,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function q(B,j){for(var U=0;U<j.length;U++){var H=j[U];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(B,H.key,H)}}return function(B,j,U){return j&&q(B.prototype,j),U&&q(B,U),B}}();i(50);var u=i(2),c=R(u),f=i(14),d=R(f),p=i(8),m=R(p),g=i(9),b=R(g),w=i(0),y=R(w),v=i(15),x=R(v),E=i(3),T=R(E),O=i(10),A=R(O),C=i(34),M=R(C);function R(q){return q&&q.__esModule?q:{default:q}}function P(q,B,j){return B in q?Object.defineProperty(q,B,{value:j,enumerable:!0,configurable:!0,writable:!0}):q[B]=j,q}function N(q,B){if(!(q instanceof B))throw new TypeError("Cannot call a class as a function")}var $=(0,A.default)("quill"),D=function(){l(q,null,[{key:"debug",value:function(j){j===!0&&(j="log"),A.default.level(j)}},{key:"find",value:function(j){return j.__quill||y.default.find(j)}},{key:"import",value:function(j){return this.imports[j]==null&&$.error("Cannot import "+j+". Are you sure it was registered?"),this.imports[j]}},{key:"register",value:function(j,U){var H=this,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof j!="string"){var J=j.attrName||j.blotName;typeof J=="string"?this.register("formats/"+J,j,U):Object.keys(j).forEach(function(V){H.register(V,j[V],U)})}else this.imports[j]!=null&&!Y&&$.warn("Overwriting "+j+" with",U),this.imports[j]=U,(j.startsWith("blots/")||j.startsWith("formats/"))&&U.blotName!=="abstract"?y.default.register(U):j.startsWith("modules")&&typeof U.register=="function"&&U.register()}}]);function q(B){var j=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(N(this,q),this.options=z(B,U),this.container=this.options.container,this.container==null)return $.error("Invalid Quill container",B);this.options.debug&&q.debug(this.options.debug);var H=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new m.default,this.scroll=y.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new x.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(m.default.events.EDITOR_CHANGE,function(J){J===m.default.events.TEXT_CHANGE&&j.root.classList.toggle("ql-blank",j.editor.isBlank())}),this.emitter.on(m.default.events.SCROLL_UPDATE,function(J,V){var Q=j.selection.lastRange,re=Q&&Q.length===0?Q.index:void 0;G.call(j,function(){return j.editor.update(null,V,re)},J)});var Y=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+H+"<p><br></p></div>");this.setContents(Y),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(q,[{key:"addContainer",value:function(j){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof j=="string"){var H=j;j=document.createElement("div"),j.classList.add(H)}return this.container.insertBefore(j,U),j}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(j,U,H){var Y=this,J=W(j,U,H),V=a(J,4);return j=V[0],U=V[1],H=V[3],G.call(this,function(){return Y.editor.deleteText(j,U)},H,j,-1*U)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(j),this.container.classList.toggle("ql-disabled",!j)}},{key:"focus",value:function(){var j=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=j,this.scrollIntoView()}},{key:"format",value:function(j,U){var H=this,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m.default.sources.API;return G.call(this,function(){var J=H.getSelection(!0),V=new c.default;if(J==null)return V;if(y.default.query(j,y.default.Scope.BLOCK))V=H.editor.formatLine(J.index,J.length,P({},j,U));else{if(J.length===0)return H.selection.format(j,U),V;V=H.editor.formatText(J.index,J.length,P({},j,U))}return H.setSelection(J,m.default.sources.SILENT),V},Y)}},{key:"formatLine",value:function(j,U,H,Y,J){var V=this,Q=void 0,re=W(j,U,H,Y,J),ie=a(re,4);return j=ie[0],U=ie[1],Q=ie[2],J=ie[3],G.call(this,function(){return V.editor.formatLine(j,U,Q)},J,j,0)}},{key:"formatText",value:function(j,U,H,Y,J){var V=this,Q=void 0,re=W(j,U,H,Y,J),ie=a(re,4);return j=ie[0],U=ie[1],Q=ie[2],J=ie[3],G.call(this,function(){return V.editor.formatText(j,U,Q)},J,j,0)}},{key:"getBounds",value:function(j){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,H=void 0;typeof j=="number"?H=this.selection.getBounds(j,U):H=this.selection.getBounds(j.index,j.length);var Y=this.container.getBoundingClientRect();return{bottom:H.bottom-Y.top,height:H.height,left:H.left-Y.left,right:H.right-Y.left,top:H.top-Y.top,width:H.width}}},{key:"getContents",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-j,H=W(j,U),Y=a(H,2);return j=Y[0],U=Y[1],this.editor.getContents(j,U)}},{key:"getFormat",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof j=="number"?this.editor.getFormat(j,U):this.editor.getFormat(j.index,j.length)}},{key:"getIndex",value:function(j){return j.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(j){return this.scroll.leaf(j)}},{key:"getLine",value:function(j){return this.scroll.line(j)}},{key:"getLines",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof j!="number"?this.scroll.lines(j.index,j.length):this.scroll.lines(j,U)}},{key:"getModule",value:function(j){return this.theme.modules[j]}},{key:"getSelection",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return j&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-j,H=W(j,U),Y=a(H,2);return j=Y[0],U=Y[1],this.editor.getText(j,U)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(j,U,H){var Y=this,J=arguments.length>3&&arguments[3]!==void 0?arguments[3]:q.sources.API;return G.call(this,function(){return Y.editor.insertEmbed(j,U,H)},J,j)}},{key:"insertText",value:function(j,U,H,Y,J){var V=this,Q=void 0,re=W(j,0,H,Y,J),ie=a(re,4);return j=ie[0],Q=ie[2],J=ie[3],G.call(this,function(){return V.editor.insertText(j,U,Q)},J,j,U.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(j,U,H){this.clipboard.dangerouslyPasteHTML(j,U,H)}},{key:"removeFormat",value:function(j,U,H){var Y=this,J=W(j,U,H),V=a(J,4);return j=V[0],U=V[1],H=V[3],G.call(this,function(){return Y.editor.removeFormat(j,U)},H,j)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(j){var U=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return G.call(this,function(){j=new c.default(j);var Y=U.getLength(),J=U.editor.deleteText(0,Y),V=U.editor.applyDelta(j),Q=V.ops[V.ops.length-1];Q!=null&&typeof Q.insert=="string"&&Q.insert[Q.insert.length-1]===`
`&&(U.editor.deleteText(U.getLength()-1,1),V.delete(1));var re=J.compose(V);return re},H)}},{key:"setSelection",value:function(j,U,H){if(j==null)this.selection.setRange(null,U||q.sources.API);else{var Y=W(j,U,H),J=a(Y,4);j=J[0],U=J[1],H=J[3],this.selection.setRange(new v.Range(j,U),H),H!==m.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(j){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API,H=new c.default().insert(j);return this.setContents(H,U)}},{key:"update",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m.default.sources.USER,U=this.scroll.update(j);return this.selection.update(j),U}},{key:"updateContents",value:function(j){var U=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return G.call(this,function(){return j=new c.default(j),U.editor.applyDelta(j,H)},H,!0)}}]),q}();D.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},D.events=m.default.events,D.sources=m.default.sources,D.version="1.3.7",D.imports={delta:c.default,parchment:y.default,"core/module":b.default,"core/theme":M.default};function z(q,B){if(B=(0,T.default)(!0,{container:q,modules:{clipboard:!0,keyboard:!0,history:!0}},B),!B.theme||B.theme===D.DEFAULTS.theme)B.theme=M.default;else if(B.theme=D.import("themes/"+B.theme),B.theme==null)throw new Error("Invalid theme "+B.theme+". Did you register it?");var j=(0,T.default)(!0,{},B.theme.DEFAULTS);[j,B].forEach(function(Y){Y.modules=Y.modules||{},Object.keys(Y.modules).forEach(function(J){Y.modules[J]===!0&&(Y.modules[J]={})})});var U=Object.keys(j.modules).concat(Object.keys(B.modules)),H=U.reduce(function(Y,J){var V=D.import("modules/"+J);return V==null?$.error("Cannot load "+J+" module. Are you sure you registered it?"):Y[J]=V.DEFAULTS||{},Y},{});return B.modules!=null&&B.modules.toolbar&&B.modules.toolbar.constructor!==Object&&(B.modules.toolbar={container:B.modules.toolbar}),B=(0,T.default)(!0,{},D.DEFAULTS,{modules:H},j,B),["bounds","container","scrollingContainer"].forEach(function(Y){typeof B[Y]=="string"&&(B[Y]=document.querySelector(B[Y]))}),B.modules=Object.keys(B.modules).reduce(function(Y,J){return B.modules[J]&&(Y[J]=B.modules[J]),Y},{}),B}function G(q,B,j,U){if(this.options.strict&&!this.isEnabled()&&B===m.default.sources.USER)return new c.default;var H=j==null?null:this.getSelection(),Y=this.editor.delta,J=q();if(H!=null&&(j===!0&&(j=H.index),U==null?H=Z(H,J,B):U!==0&&(H=Z(H,j,U,B)),this.setSelection(H,m.default.sources.SILENT)),J.length()>0){var V,Q=[m.default.events.TEXT_CHANGE,J,Y,B];if((V=this.emitter).emit.apply(V,[m.default.events.EDITOR_CHANGE].concat(Q)),B!==m.default.sources.SILENT){var re;(re=this.emitter).emit.apply(re,Q)}}return J}function W(q,B,j,U,H){var Y={};return typeof q.index=="number"&&typeof q.length=="number"?typeof B!="number"?(H=U,U=j,j=B,B=q.length,q=q.index):(B=q.length,q=q.index):typeof B!="number"&&(H=U,U=j,j=B,B=0),(typeof j>"u"?"undefined":s(j))==="object"?(Y=j,H=U):typeof j=="string"&&(U!=null?Y[j]=U:H=j),H=H||m.default.sources.API,[q,B,Y,H]}function Z(q,B,j,U){if(q==null)return null;var H=void 0,Y=void 0;if(B instanceof c.default){var J=[q.index,q.index+q.length].map(function(ie){return B.transformPosition(ie,U!==m.default.sources.USER)}),V=a(J,2);H=V[0],Y=V[1]}else{var Q=[q.index,q.index+q.length].map(function(ie){return ie<B||ie===B&&U===m.default.sources.USER?ie:j>=0?ie+j:Math.max(B,ie+j)}),re=a(Q,2);H=re[0],Y=re[1]}return new v.Range(H,Y-H)}r.expandConfig=z,r.overload=W,r.default=D},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function w(y,v){for(var x=0;x<v.length;x++){var E=v[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}return function(y,v,x){return v&&w(y.prototype,v),x&&w(y,x),y}}(),a=function w(y,v,x){y===null&&(y=Function.prototype);var E=Object.getOwnPropertyDescriptor(y,v);if(E===void 0){var T=Object.getPrototypeOf(y);return T===null?void 0:w(T,v,x)}else{if("value"in E)return E.value;var O=E.get;return O===void 0?void 0:O.call(x)}},l=i(7),u=d(l),c=i(0),f=d(c);function d(w){return w&&w.__esModule?w:{default:w}}function p(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function m(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function g(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var b=function(w){g(y,w);function y(){return p(this,y),m(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,[{key:"formatAt",value:function(x,E,T,O){if(y.compare(this.statics.blotName,T)<0&&f.default.query(T,f.default.Scope.BLOT)){var A=this.isolate(x,E);O&&A.wrap(T,O)}else a(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"formatAt",this).call(this,x,E,T,O)}},{key:"optimize",value:function(x){if(a(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,x),this.parent instanceof y&&y.compare(this.statics.blotName,this.parent.statics.blotName)>0){var E=this.parent.isolate(this.offset(),this.length());this.moveChildren(E),E.wrap(this)}}}],[{key:"compare",value:function(x,E){var T=y.order.indexOf(x),O=y.order.indexOf(E);return T>=0||O>=0?T-O:x===E?0:x<E?-1:1}}]),y}(f.default.Inline);b.allowedChildren=[b,f.default.Embed,u.default],b.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),a=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function u(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function c(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(){return u(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(a.default.Text);r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function v(x,E){for(var T=0;T<E.length;T++){var O=E[T];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(x,O.key,O)}}return function(x,E,T){return E&&v(x.prototype,E),T&&v(x,T),x}}(),a=function v(x,E,T){x===null&&(x=Function.prototype);var O=Object.getOwnPropertyDescriptor(x,E);if(O===void 0){var A=Object.getPrototypeOf(x);return A===null?void 0:v(A,E,T)}else{if("value"in O)return O.value;var C=O.get;return C===void 0?void 0:C.call(T)}},l=i(54),u=d(l),c=i(10),f=d(c);function d(v){return v&&v.__esModule?v:{default:v}}function p(v,x){if(!(v instanceof x))throw new TypeError("Cannot call a class as a function")}function m(v,x){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:v}function g(v,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);v.prototype=Object.create(x&&x.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(v,x):v.__proto__=x)}var b=(0,f.default)("quill:events"),w=["selectionchange","mousedown","mouseup","click"];w.forEach(function(v){document.addEventListener(v,function(){for(var x=arguments.length,E=Array(x),T=0;T<x;T++)E[T]=arguments[T];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(O){if(O.__quill&&O.__quill.emitter){var A;(A=O.__quill.emitter).handleDOM.apply(A,E)}})})});var y=function(v){g(x,v);function x(){p(this,x);var E=m(this,(x.__proto__||Object.getPrototypeOf(x)).call(this));return E.listeners={},E.on("error",b.error),E}return s(x,[{key:"emit",value:function(){b.log.apply(b,arguments),a(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(T){for(var O=arguments.length,A=Array(O>1?O-1:0),C=1;C<O;C++)A[C-1]=arguments[C];(this.listeners[T.type]||[]).forEach(function(M){var R=M.node,P=M.handler;(T.target===R||R.contains(T.target))&&P.apply(void 0,[T].concat(A))})}},{key:"listenDOM",value:function(T,O,A){this.listeners[T]||(this.listeners[T]=[]),this.listeners[T].push({node:O,handler:A})}}]),x}(u.default);y.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},y.sources={API:"api",SILENT:"silent",USER:"user"},r.default=y},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});function s(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var a=function l(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,l),this.quill=u,this.options=c};a.DEFAULTS={},r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=["error","warn","log","info"],a="warn";function l(c){if(s.indexOf(c)<=s.indexOf(a)){for(var f,d=arguments.length,p=Array(d>1?d-1:0),m=1;m<d;m++)p[m-1]=arguments[m];(f=console)[c].apply(f,p)}}function u(c){return s.reduce(function(f,d){return f[d]=l.bind(console,d,c),f},{})}l.level=u.level=function(c){a=c},r.default=u},function(n,r,i){var s=Array.prototype.slice,a=i(52),l=i(53),u=n.exports=function(p,m,g){return g||(g={}),p===m?!0:p instanceof Date&&m instanceof Date?p.getTime()===m.getTime():!p||!m||typeof p!="object"&&typeof m!="object"?g.strict?p===m:p==m:d(p,m,g)};function c(p){return p==null}function f(p){return!(!p||typeof p!="object"||typeof p.length!="number"||typeof p.copy!="function"||typeof p.slice!="function"||p.length>0&&typeof p[0]!="number")}function d(p,m,g){var b,w;if(c(p)||c(m)||p.prototype!==m.prototype)return!1;if(l(p))return l(m)?(p=s.call(p),m=s.call(m),u(p,m,g)):!1;if(f(p)){if(!f(m)||p.length!==m.length)return!1;for(b=0;b<p.length;b++)if(p[b]!==m[b])return!1;return!0}try{var y=a(p),v=a(m)}catch{return!1}if(y.length!=v.length)return!1;for(y.sort(),v.sort(),b=y.length-1;b>=0;b--)if(y[b]!=v[b])return!1;for(b=y.length-1;b>=0;b--)if(w=y[b],!u(p[w],m[w],g))return!1;return typeof p==typeof m}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),a=function(){function l(u,c,f){f===void 0&&(f={}),this.attrName=u,this.keyName=c;var d=s.Scope.TYPE&s.Scope.ATTRIBUTE;f.scope!=null?this.scope=f.scope&s.Scope.LEVEL|d:this.scope=s.Scope.ATTRIBUTE,f.whitelist!=null&&(this.whitelist=f.whitelist)}return l.keys=function(u){return[].map.call(u.attributes,function(c){return c.name})},l.prototype.add=function(u,c){return this.canAdd(u,c)?(u.setAttribute(this.keyName,c),!0):!1},l.prototype.canAdd=function(u,c){var f=s.query(u,s.Scope.BLOT&(this.scope|s.Scope.TYPE));return f==null?!1:this.whitelist==null?!0:typeof c=="string"?this.whitelist.indexOf(c.replace(/["']/g,""))>-1:this.whitelist.indexOf(c)>-1},l.prototype.remove=function(u){u.removeAttribute(this.keyName)},l.prototype.value=function(u){var c=u.getAttribute(this.keyName);return this.canAdd(u,c)&&c?c:""},l}();r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var s=function(){function C(M,R){var P=[],N=!0,$=!1,D=void 0;try{for(var z=M[Symbol.iterator](),G;!(N=(G=z.next()).done)&&(P.push(G.value),!(R&&P.length===R));N=!0);}catch(W){$=!0,D=W}finally{try{!N&&z.return&&z.return()}finally{if($)throw D}}return P}return function(M,R){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return C(M,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function C(M,R){for(var P=0;P<R.length;P++){var N=R[P];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}return function(M,R,P){return R&&C(M.prototype,R),P&&C(M,P),M}}(),l=function C(M,R,P){M===null&&(M=Function.prototype);var N=Object.getOwnPropertyDescriptor(M,R);if(N===void 0){var $=Object.getPrototypeOf(M);return $===null?void 0:C($,R,P)}else{if("value"in N)return N.value;var D=N.get;return D===void 0?void 0:D.call(P)}},u=i(2),c=v(u),f=i(0),d=v(f),p=i(4),m=v(p),g=i(6),b=v(g),w=i(7),y=v(w);function v(C){return C&&C.__esModule?C:{default:C}}function x(C,M){if(!(C instanceof M))throw new TypeError("Cannot call a class as a function")}function E(C,M){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:C}function T(C,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);C.prototype=Object.create(M&&M.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(C,M):C.__proto__=M)}var O=function(C){T(M,C);function M(){return x(this,M),E(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return M}(b.default);O.blotName="code",O.tagName="CODE";var A=function(C){T(M,C);function M(){return x(this,M),E(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return a(M,[{key:"delta",value:function(){var P=this,N=this.domNode.textContent;return N.endsWith(`
`)&&(N=N.slice(0,-1)),N.split(`
`).reduce(function($,D){return $.insert(D).insert(`
`,P.formats())},new c.default)}},{key:"format",value:function(P,N){if(!(P===this.statics.blotName&&N)){var $=this.descendant(y.default,this.length()-1),D=s($,1),z=D[0];z!=null&&z.deleteAt(z.length()-1,1),l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"format",this).call(this,P,N)}}},{key:"formatAt",value:function(P,N,$,D){if(N!==0&&!(d.default.query($,d.default.Scope.BLOCK)==null||$===this.statics.blotName&&D===this.statics.formats(this.domNode))){var z=this.newlineIndex(P);if(!(z<0||z>=P+N)){var G=this.newlineIndex(P,!0)+1,W=z-G+1,Z=this.isolate(G,W),q=Z.next;Z.format($,D),q instanceof M&&q.formatAt(0,P-G+N-W,$,D)}}}},{key:"insertAt",value:function(P,N,$){if($==null){var D=this.descendant(y.default,P),z=s(D,2),G=z[0],W=z[1];G.insertAt(W,N)}}},{key:"length",value:function(){var P=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?P:P+1}},{key:"newlineIndex",value:function(P){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(N)return this.domNode.textContent.slice(0,P).lastIndexOf(`
`);var $=this.domNode.textContent.slice(P).indexOf(`
`);return $>-1?P+$:-1}},{key:"optimize",value:function(P){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"optimize",this).call(this,P);var N=this.next;N!=null&&N.prev===this&&N.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===N.statics.formats(N.domNode)&&(N.optimize(P),N.moveChildren(this),N.remove())}},{key:"replace",value:function(P){l(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"replace",this).call(this,P),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(N){var $=d.default.find(N);$==null?N.parentNode.removeChild(N):$ instanceof d.default.Embed?$.remove():$.unwrap()})}}],[{key:"create",value:function(P){var N=l(M.__proto__||Object.getPrototypeOf(M),"create",this).call(this,P);return N.setAttribute("spellcheck",!1),N}},{key:"formats",value:function(){return!0}}]),M}(m.default);A.blotName="code-block",A.tagName="PRE",A.TAB="  ",r.Code=O,r.default=A},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},a=function(){function q(B,j){var U=[],H=!0,Y=!1,J=void 0;try{for(var V=B[Symbol.iterator](),Q;!(H=(Q=V.next()).done)&&(U.push(Q.value),!(j&&U.length===j));H=!0);}catch(re){Y=!0,J=re}finally{try{!H&&V.return&&V.return()}finally{if(Y)throw J}}return U}return function(B,j){if(Array.isArray(B))return B;if(Symbol.iterator in Object(B))return q(B,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function q(B,j){for(var U=0;U<j.length;U++){var H=j[U];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(B,H.key,H)}}return function(B,j,U){return j&&q(B.prototype,j),U&&q(B,U),B}}(),u=i(2),c=N(u),f=i(20),d=N(f),p=i(0),m=N(p),g=i(13),b=N(g),w=i(24),y=N(w),v=i(4),x=N(v),E=i(16),T=N(E),O=i(21),A=N(O),C=i(11),M=N(C),R=i(3),P=N(R);function N(q){return q&&q.__esModule?q:{default:q}}function $(q,B,j){return B in q?Object.defineProperty(q,B,{value:j,enumerable:!0,configurable:!0,writable:!0}):q[B]=j,q}function D(q,B){if(!(q instanceof B))throw new TypeError("Cannot call a class as a function")}var z=/^[ -~]*$/,G=function(){function q(B){D(this,q),this.scroll=B,this.delta=this.getDelta()}return l(q,[{key:"applyDelta",value:function(j){var U=this,H=!1;this.scroll.update();var Y=this.scroll.length();return this.scroll.batchStart(),j=Z(j),j.reduce(function(J,V){var Q=V.retain||V.delete||V.insert.length||1,re=V.attributes||{};if(V.insert!=null){if(typeof V.insert=="string"){var ie=V.insert;ie.endsWith(`
`)&&H&&(H=!1,ie=ie.slice(0,-1)),J>=Y&&!ie.endsWith(`
`)&&(H=!0),U.scroll.insertAt(J,ie);var ce=U.scroll.line(J),me=a(ce,2),Ce=me[0],je=me[1],Ze=(0,P.default)({},(0,v.bubbleFormats)(Ce));if(Ce instanceof x.default){var We=Ce.descendant(m.default.Leaf,je),$t=a(We,1),At=$t[0];Ze=(0,P.default)(Ze,(0,v.bubbleFormats)(At))}re=d.default.attributes.diff(Ze,re)||{}}else if(s(V.insert)==="object"){var oe=Object.keys(V.insert)[0];if(oe==null)return J;U.scroll.insertAt(J,oe,V.insert[oe])}Y+=Q}return Object.keys(re).forEach(function(fe){U.scroll.formatAt(J,Q,fe,re[fe])}),J+Q},0),j.reduce(function(J,V){return typeof V.delete=="number"?(U.scroll.deleteAt(J,V.delete),J):J+(V.retain||V.insert.length||1)},0),this.scroll.batchEnd(),this.update(j)}},{key:"deleteText",value:function(j,U){return this.scroll.deleteAt(j,U),this.update(new c.default().retain(j).delete(U))}},{key:"formatLine",value:function(j,U){var H=this,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Y).forEach(function(J){if(!(H.scroll.whitelist!=null&&!H.scroll.whitelist[J])){var V=H.scroll.lines(j,Math.max(U,1)),Q=U;V.forEach(function(re){var ie=re.length();if(!(re instanceof b.default))re.format(J,Y[J]);else{var ce=j-re.offset(H.scroll),me=re.newlineIndex(ce+Q)-ce+1;re.formatAt(ce,me,J,Y[J])}Q-=ie})}}),this.scroll.optimize(),this.update(new c.default().retain(j).retain(U,(0,A.default)(Y)))}},{key:"formatText",value:function(j,U){var H=this,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Y).forEach(function(J){H.scroll.formatAt(j,U,J,Y[J])}),this.update(new c.default().retain(j).retain(U,(0,A.default)(Y)))}},{key:"getContents",value:function(j,U){return this.delta.slice(j,j+U)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(j,U){return j.concat(U.delta())},new c.default)}},{key:"getFormat",value:function(j){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,H=[],Y=[];U===0?this.scroll.path(j).forEach(function(V){var Q=a(V,1),re=Q[0];re instanceof x.default?H.push(re):re instanceof m.default.Leaf&&Y.push(re)}):(H=this.scroll.lines(j,U),Y=this.scroll.descendants(m.default.Leaf,j,U));var J=[H,Y].map(function(V){if(V.length===0)return{};for(var Q=(0,v.bubbleFormats)(V.shift());Object.keys(Q).length>0;){var re=V.shift();if(re==null)return Q;Q=W((0,v.bubbleFormats)(re),Q)}return Q});return P.default.apply(P.default,J)}},{key:"getText",value:function(j,U){return this.getContents(j,U).filter(function(H){return typeof H.insert=="string"}).map(function(H){return H.insert}).join("")}},{key:"insertEmbed",value:function(j,U,H){return this.scroll.insertAt(j,U,H),this.update(new c.default().retain(j).insert($({},U,H)))}},{key:"insertText",value:function(j,U){var H=this,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return U=U.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(j,U),Object.keys(Y).forEach(function(J){H.scroll.formatAt(j,U.length,J,Y[J])}),this.update(new c.default().retain(j).insert(U,(0,A.default)(Y)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var j=this.scroll.children.head;return j.statics.blotName!==x.default.blotName||j.children.length>1?!1:j.children.head instanceof T.default}},{key:"removeFormat",value:function(j,U){var H=this.getText(j,U),Y=this.scroll.line(j+U),J=a(Y,2),V=J[0],Q=J[1],re=0,ie=new c.default;V!=null&&(V instanceof b.default?re=V.newlineIndex(Q)-Q+1:re=V.length()-Q,ie=V.delta().slice(Q,Q+re-1).insert(`
`));var ce=this.getContents(j,U+re),me=ce.diff(new c.default().insert(H).concat(ie)),Ce=new c.default().retain(j).concat(me);return this.applyDelta(Ce)}},{key:"update",value:function(j){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Y=this.delta;if(U.length===1&&U[0].type==="characterData"&&U[0].target.data.match(z)&&m.default.find(U[0].target)){var J=m.default.find(U[0].target),V=(0,v.bubbleFormats)(J),Q=J.offset(this.scroll),re=U[0].oldValue.replace(y.default.CONTENTS,""),ie=new c.default().insert(re),ce=new c.default().insert(J.value()),me=new c.default().retain(Q).concat(ie.diff(ce,H));j=me.reduce(function(Ce,je){return je.insert?Ce.insert(je.insert,V):Ce.push(je)},new c.default),this.delta=Y.compose(j)}else this.delta=this.getDelta(),(!j||!(0,M.default)(Y.compose(j),this.delta))&&(j=Y.diff(this.delta,H));return j}}]),q}();function W(q,B){return Object.keys(B).reduce(function(j,U){return q[U]==null||(B[U]===q[U]?j[U]=B[U]:Array.isArray(B[U])?B[U].indexOf(q[U])<0&&(j[U]=B[U].concat([q[U]])):j[U]=[B[U],q[U]]),j},{})}function Z(q){return q.reduce(function(B,j){if(j.insert===1){var U=(0,A.default)(j.attributes);return delete U.image,B.insert({image:j.attributes.image},U)}if(j.attributes!=null&&(j.attributes.list===!0||j.attributes.bullet===!0)&&(j=(0,A.default)(j),j.attributes.list?j.attributes.list="ordered":(j.attributes.list="bullet",delete j.attributes.bullet)),typeof j.insert=="string"){var H=j.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return B.insert(H,j.attributes)}return B.push(j)},new c.default)}r.default=G},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var s=function(){function C(M,R){var P=[],N=!0,$=!1,D=void 0;try{for(var z=M[Symbol.iterator](),G;!(N=(G=z.next()).done)&&(P.push(G.value),!(R&&P.length===R));N=!0);}catch(W){$=!0,D=W}finally{try{!N&&z.return&&z.return()}finally{if($)throw D}}return P}return function(M,R){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return C(M,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function C(M,R){for(var P=0;P<R.length;P++){var N=R[P];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(M,N.key,N)}}return function(M,R,P){return R&&C(M.prototype,R),P&&C(M,P),M}}(),l=i(0),u=y(l),c=i(21),f=y(c),d=i(11),p=y(d),m=i(8),g=y(m),b=i(10),w=y(b);function y(C){return C&&C.__esModule?C:{default:C}}function v(C){if(Array.isArray(C)){for(var M=0,R=Array(C.length);M<C.length;M++)R[M]=C[M];return R}else return Array.from(C)}function x(C,M){if(!(C instanceof M))throw new TypeError("Cannot call a class as a function")}var E=(0,w.default)("quill:selection"),T=function C(M){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;x(this,C),this.index=M,this.length=R},O=function(){function C(M,R){var P=this;x(this,C),this.emitter=R,this.scroll=M,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=u.default.create("cursor",this),this.lastRange=this.savedRange=new T(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){P.mouseDown||setTimeout(P.update.bind(P,g.default.sources.USER),1)}),this.emitter.on(g.default.events.EDITOR_CHANGE,function(N,$){N===g.default.events.TEXT_CHANGE&&$.length()>0&&P.update(g.default.sources.SILENT)}),this.emitter.on(g.default.events.SCROLL_BEFORE_UPDATE,function(){if(P.hasFocus()){var N=P.getNativeRange();N!=null&&N.start.node!==P.cursor.textNode&&P.emitter.once(g.default.events.SCROLL_UPDATE,function(){try{P.setNativeRange(N.start.node,N.start.offset,N.end.node,N.end.offset)}catch{}})}}),this.emitter.on(g.default.events.SCROLL_OPTIMIZE,function(N,$){if($.range){var D=$.range,z=D.startNode,G=D.startOffset,W=D.endNode,Z=D.endOffset;P.setNativeRange(z,G,W,Z)}}),this.update(g.default.sources.SILENT)}return a(C,[{key:"handleComposition",value:function(){var R=this;this.root.addEventListener("compositionstart",function(){R.composing=!0}),this.root.addEventListener("compositionend",function(){if(R.composing=!1,R.cursor.parent){var P=R.cursor.restore();if(!P)return;setTimeout(function(){R.setNativeRange(P.startNode,P.startOffset,P.endNode,P.endOffset)},1)}})}},{key:"handleDragging",value:function(){var R=this;this.emitter.listenDOM("mousedown",document.body,function(){R.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){R.mouseDown=!1,R.update(g.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(R,P){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[R])){this.scroll.update();var N=this.getNativeRange();if(!(N==null||!N.native.collapsed||u.default.query(R,u.default.Scope.BLOCK))){if(N.start.node!==this.cursor.textNode){var $=u.default.find(N.start.node,!1);if($==null)return;if($ instanceof u.default.Leaf){var D=$.split(N.start.offset);$.parent.insertBefore(this.cursor,D)}else $.insertBefore(this.cursor,N.start.node);this.cursor.attach()}this.cursor.format(R,P),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(R){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=this.scroll.length();R=Math.min(R,N-1),P=Math.min(R+P,N-1)-R;var $=void 0,D=this.scroll.leaf(R),z=s(D,2),G=z[0],W=z[1];if(G==null)return null;var Z=G.position(W,!0),q=s(Z,2);$=q[0],W=q[1];var B=document.createRange();if(P>0){B.setStart($,W);var j=this.scroll.leaf(R+P),U=s(j,2);if(G=U[0],W=U[1],G==null)return null;var H=G.position(W,!0),Y=s(H,2);return $=Y[0],W=Y[1],B.setEnd($,W),B.getBoundingClientRect()}else{var J="left",V=void 0;return $ instanceof Text?(W<$.data.length?(B.setStart($,W),B.setEnd($,W+1)):(B.setStart($,W-1),B.setEnd($,W),J="right"),V=B.getBoundingClientRect()):(V=G.domNode.getBoundingClientRect(),W>0&&(J="right")),{bottom:V.top+V.height,height:V.height,left:V[J],right:V[J],top:V.top,width:0}}}},{key:"getNativeRange",value:function(){var R=document.getSelection();if(R==null||R.rangeCount<=0)return null;var P=R.getRangeAt(0);if(P==null)return null;var N=this.normalizeNative(P);return E.info("getNativeRange",N),N}},{key:"getRange",value:function(){var R=this.getNativeRange();if(R==null)return[null,null];var P=this.normalizedToRange(R);return[P,R]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(R){var P=this,N=[[R.start.node,R.start.offset]];R.native.collapsed||N.push([R.end.node,R.end.offset]);var $=N.map(function(G){var W=s(G,2),Z=W[0],q=W[1],B=u.default.find(Z,!0),j=B.offset(P.scroll);return q===0?j:B instanceof u.default.Container?j+B.length():j+B.index(Z,q)}),D=Math.min(Math.max.apply(Math,v($)),this.scroll.length()-1),z=Math.min.apply(Math,[D].concat(v($)));return new T(z,D-z)}},{key:"normalizeNative",value:function(R){if(!A(this.root,R.startContainer)||!R.collapsed&&!A(this.root,R.endContainer))return null;var P={start:{node:R.startContainer,offset:R.startOffset},end:{node:R.endContainer,offset:R.endOffset},native:R};return[P.start,P.end].forEach(function(N){for(var $=N.node,D=N.offset;!($ instanceof Text)&&$.childNodes.length>0;)if($.childNodes.length>D)$=$.childNodes[D],D=0;else if($.childNodes.length===D)$=$.lastChild,D=$ instanceof Text?$.data.length:$.childNodes.length+1;else break;N.node=$,N.offset=D}),P}},{key:"rangeToNative",value:function(R){var P=this,N=R.collapsed?[R.index]:[R.index,R.index+R.length],$=[],D=this.scroll.length();return N.forEach(function(z,G){z=Math.min(D-1,z);var W=void 0,Z=P.scroll.leaf(z),q=s(Z,2),B=q[0],j=q[1],U=B.position(j,G!==0),H=s(U,2);W=H[0],j=H[1],$.push(W,j)}),$.length<2&&($=$.concat($)),$}},{key:"scrollIntoView",value:function(R){var P=this.lastRange;if(P!=null){var N=this.getBounds(P.index,P.length);if(N!=null){var $=this.scroll.length()-1,D=this.scroll.line(Math.min(P.index,$)),z=s(D,1),G=z[0],W=G;if(P.length>0){var Z=this.scroll.line(Math.min(P.index+P.length,$)),q=s(Z,1);W=q[0]}if(!(G==null||W==null)){var B=R.getBoundingClientRect();N.top<B.top?R.scrollTop-=B.top-N.top:N.bottom>B.bottom&&(R.scrollTop+=N.bottom-B.bottom)}}}}},{key:"setNativeRange",value:function(R,P){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:R,$=arguments.length>3&&arguments[3]!==void 0?arguments[3]:P,D=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(E.info("setNativeRange",R,P,N,$),!(R!=null&&(this.root.parentNode==null||R.parentNode==null||N.parentNode==null))){var z=document.getSelection();if(z!=null)if(R!=null){this.hasFocus()||this.root.focus();var G=(this.getNativeRange()||{}).native;if(G==null||D||R!==G.startContainer||P!==G.startOffset||N!==G.endContainer||$!==G.endOffset){R.tagName=="BR"&&(P=[].indexOf.call(R.parentNode.childNodes,R),R=R.parentNode),N.tagName=="BR"&&($=[].indexOf.call(N.parentNode.childNodes,N),N=N.parentNode);var W=document.createRange();W.setStart(R,P),W.setEnd(N,$),z.removeAllRanges(),z.addRange(W)}}else z.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(R){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof P=="string"&&(N=P,P=!1),E.info("setRange",R),R!=null){var $=this.rangeToNative(R);this.setNativeRange.apply(this,v($).concat([P]))}else this.setNativeRange(null);this.update(N)}},{key:"update",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.default.sources.USER,P=this.lastRange,N=this.getRange(),$=s(N,2),D=$[0],z=$[1];if(this.lastRange=D,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,p.default)(P,this.lastRange)){var G;!this.composing&&z!=null&&z.native.collapsed&&z.start.node!==this.cursor.textNode&&this.cursor.restore();var W=[g.default.events.SELECTION_CHANGE,(0,f.default)(this.lastRange),(0,f.default)(P),R];if((G=this.emitter).emit.apply(G,[g.default.events.EDITOR_CHANGE].concat(W)),R!==g.default.sources.SILENT){var Z;(Z=this.emitter).emit.apply(Z,W)}}}}]),C}();function A(C,M){try{M.parentNode}catch{return!1}return M instanceof Text&&(M=M.parentNode),C.contains(M)}r.Range=T,r.default=O},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function g(b,w){for(var y=0;y<w.length;y++){var v=w[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(b,v.key,v)}}return function(b,w,y){return w&&g(b.prototype,w),y&&g(b,y),b}}(),a=function g(b,w,y){b===null&&(b=Function.prototype);var v=Object.getOwnPropertyDescriptor(b,w);if(v===void 0){var x=Object.getPrototypeOf(b);return x===null?void 0:g(x,w,y)}else{if("value"in v)return v.value;var E=v.get;return E===void 0?void 0:E.call(y)}},l=i(0),u=c(l);function c(g){return g&&g.__esModule?g:{default:g}}function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function d(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function p(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var m=function(g){p(b,g);function b(){return f(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"insertInto",value:function(y,v){y.children.length===0?a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertInto",this).call(this,y,v):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),b}(u.default.Embed);m.blotName="break",m.tagName="BR",r.default=m},function(n,r,i){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var g in m)m.hasOwnProperty(g)&&(p[g]=m[g])};return function(p,m){d(p,m);function g(){this.constructor=p}p.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(44),l=i(30),u=i(1),c=function(d){s(p,d);function p(m){var g=d.call(this,m)||this;return g.build(),g}return p.prototype.appendChild=function(m){this.insertBefore(m)},p.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(m){m.attach()})},p.prototype.build=function(){var m=this;this.children=new a.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(g){try{var b=f(g);m.insertBefore(b,m.children.head||void 0)}catch(w){if(w instanceof u.ParchmentError)return;throw w}})},p.prototype.deleteAt=function(m,g){if(m===0&&g===this.length())return this.remove();this.children.forEachAt(m,g,function(b,w,y){b.deleteAt(w,y)})},p.prototype.descendant=function(m,g){var b=this.children.find(g),w=b[0],y=b[1];return m.blotName==null&&m(w)||m.blotName!=null&&w instanceof m?[w,y]:w instanceof p?w.descendant(m,y):[null,-1]},p.prototype.descendants=function(m,g,b){g===void 0&&(g=0),b===void 0&&(b=Number.MAX_VALUE);var w=[],y=b;return this.children.forEachAt(g,b,function(v,x,E){(m.blotName==null&&m(v)||m.blotName!=null&&v instanceof m)&&w.push(v),v instanceof p&&(w=w.concat(v.descendants(m,x,y))),y-=E}),w},p.prototype.detach=function(){this.children.forEach(function(m){m.detach()}),d.prototype.detach.call(this)},p.prototype.formatAt=function(m,g,b,w){this.children.forEachAt(m,g,function(y,v,x){y.formatAt(v,x,b,w)})},p.prototype.insertAt=function(m,g,b){var w=this.children.find(m),y=w[0],v=w[1];if(y)y.insertAt(v,g,b);else{var x=b==null?u.create("text",g):u.create(g,b);this.appendChild(x)}},p.prototype.insertBefore=function(m,g){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(b){return m instanceof b}))throw new u.ParchmentError("Cannot insert "+m.statics.blotName+" into "+this.statics.blotName);m.insertInto(this,g)},p.prototype.length=function(){return this.children.reduce(function(m,g){return m+g.length()},0)},p.prototype.moveChildren=function(m,g){this.children.forEach(function(b){m.insertBefore(b,g)})},p.prototype.optimize=function(m){if(d.prototype.optimize.call(this,m),this.children.length===0)if(this.statics.defaultChild!=null){var g=u.create(this.statics.defaultChild);this.appendChild(g),g.optimize(m)}else this.remove()},p.prototype.path=function(m,g){g===void 0&&(g=!1);var b=this.children.find(m,g),w=b[0],y=b[1],v=[[this,m]];return w instanceof p?v.concat(w.path(y,g)):(w!=null&&v.push([w,y]),v)},p.prototype.removeChild=function(m){this.children.remove(m)},p.prototype.replace=function(m){m instanceof p&&m.moveChildren(this),d.prototype.replace.call(this,m)},p.prototype.split=function(m,g){if(g===void 0&&(g=!1),!g){if(m===0)return this;if(m===this.length())return this.next}var b=this.clone();return this.parent.insertBefore(b,this.next),this.children.forEachAt(m,this.length(),function(w,y,v){w=w.split(y,g),b.appendChild(w)}),b},p.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},p.prototype.update=function(m,g){var b=this,w=[],y=[];m.forEach(function(v){v.target===b.domNode&&v.type==="childList"&&(w.push.apply(w,v.addedNodes),y.push.apply(y,v.removedNodes))}),y.forEach(function(v){if(!(v.parentNode!=null&&v.tagName!=="IFRAME"&&document.body.compareDocumentPosition(v)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var x=u.find(v);x!=null&&(x.domNode.parentNode==null||x.domNode.parentNode===b.domNode)&&x.detach()}}),w.filter(function(v){return v.parentNode==b.domNode}).sort(function(v,x){return v===x?0:v.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(v){var x=null;v.nextSibling!=null&&(x=u.find(v.nextSibling));var E=f(v);(E.next!=x||E.next==null)&&(E.parent!=null&&E.parent.removeChild(b),b.insertBefore(E,x||void 0))})},p}(l.default);function f(d){var p=u.find(d);if(p==null)try{p=u.create(d)}catch{p=u.create(u.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(g){p.domNode.appendChild(g)}),d.parentNode&&d.parentNode.replaceChild(p.domNode,d),p.attach()}return p}r.default=c},function(n,r,i){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var g in m)m.hasOwnProperty(g)&&(p[g]=m[g])};return function(p,m){d(p,m);function g(){this.constructor=p}p.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(12),l=i(31),u=i(17),c=i(1),f=function(d){s(p,d);function p(m){var g=d.call(this,m)||this;return g.attributes=new l.default(g.domNode),g}return p.formats=function(m){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return m.tagName.toLowerCase()},p.prototype.format=function(m,g){var b=c.query(m);b instanceof a.default?this.attributes.attribute(b,g):g&&b!=null&&(m!==this.statics.blotName||this.formats()[m]!==g)&&this.replaceWith(m,g)},p.prototype.formats=function(){var m=this.attributes.values(),g=this.statics.formats(this.domNode);return g!=null&&(m[this.statics.blotName]=g),m},p.prototype.replaceWith=function(m,g){var b=d.prototype.replaceWith.call(this,m,g);return this.attributes.copy(b),b},p.prototype.update=function(m,g){var b=this;d.prototype.update.call(this,m,g),m.some(function(w){return w.target===b.domNode&&w.type==="attributes"})&&this.attributes.build()},p.prototype.wrap=function(m,g){var b=d.prototype.wrap.call(this,m,g);return b instanceof p&&b.statics.scope===this.statics.scope&&this.attributes.move(b),b},p}(u.default);r.default=f},function(n,r,i){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){c(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(30),l=i(1),u=function(c){s(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.value=function(d){return!0},f.prototype.index=function(d,p){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(p,1):-1},f.prototype.position=function(d,p){var m=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(m+=1),[this.parent.domNode,m]},f.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},f.scope=l.Scope.INLINE_BLOT,f}(a.default);r.default=u},function(n,r,i){var s=i(11),a=i(3),l={attributes:{compose:function(c,f,d){typeof c!="object"&&(c={}),typeof f!="object"&&(f={});var p=a(!0,{},f);d||(p=Object.keys(p).reduce(function(g,b){return p[b]!=null&&(g[b]=p[b]),g},{}));for(var m in c)c[m]!==void 0&&f[m]===void 0&&(p[m]=c[m]);return Object.keys(p).length>0?p:void 0},diff:function(c,f){typeof c!="object"&&(c={}),typeof f!="object"&&(f={});var d=Object.keys(c).concat(Object.keys(f)).reduce(function(p,m){return s(c[m],f[m])||(p[m]=f[m]===void 0?null:f[m]),p},{});return Object.keys(d).length>0?d:void 0},transform:function(c,f,d){if(typeof c!="object")return f;if(typeof f=="object"){if(!d)return f;var p=Object.keys(f).reduce(function(m,g){return c[g]===void 0&&(m[g]=f[g]),m},{});return Object.keys(p).length>0?p:void 0}}},iterator:function(c){return new u(c)},length:function(c){return typeof c.delete=="number"?c.delete:typeof c.retain=="number"?c.retain:typeof c.insert=="string"?c.insert.length:1}};function u(c){this.ops=c,this.index=0,this.offset=0}u.prototype.hasNext=function(){return this.peekLength()<1/0},u.prototype.next=function(c){c||(c=1/0);var f=this.ops[this.index];if(f){var d=this.offset,p=l.length(f);if(c>=p-d?(c=p-d,this.index+=1,this.offset=0):this.offset+=c,typeof f.delete=="number")return{delete:c};var m={};return f.attributes&&(m.attributes=f.attributes),typeof f.retain=="number"?m.retain=c:typeof f.insert=="string"?m.insert=f.insert.substr(d,c):m.insert=f.insert,m}else return{retain:1/0}},u.prototype.peek=function(){return this.ops[this.index]},u.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},u.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},u.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var c=this.offset,f=this.index,d=this.next(),p=this.ops.slice(this.index);return this.offset=c,this.index=f,[d].concat(p)}else return[]},n.exports=l},function(n,r){var i=function(){function s(b,w){return w!=null&&b instanceof w}var a;try{a=Map}catch{a=function(){}}var l;try{l=Set}catch{l=function(){}}var u;try{u=Promise}catch{u=function(){}}function c(b,w,y,v,x){typeof w=="object"&&(y=w.depth,v=w.prototype,x=w.includeNonEnumerable,w=w.circular);var E=[],T=[],O=typeof Buffer<"u";typeof w>"u"&&(w=!0),typeof y>"u"&&(y=1/0);function A(C,M){if(C===null)return null;if(M===0)return C;var R,P;if(typeof C!="object")return C;if(s(C,a))R=new a;else if(s(C,l))R=new l;else if(s(C,u))R=new u(function(B,j){C.then(function(U){B(A(U,M-1))},function(U){j(A(U,M-1))})});else if(c.__isArray(C))R=[];else if(c.__isRegExp(C))R=new RegExp(C.source,g(C)),C.lastIndex&&(R.lastIndex=C.lastIndex);else if(c.__isDate(C))R=new Date(C.getTime());else{if(O&&Buffer.isBuffer(C))return Buffer.allocUnsafe?R=Buffer.allocUnsafe(C.length):R=new Buffer(C.length),C.copy(R),R;s(C,Error)?R=Object.create(C):typeof v>"u"?(P=Object.getPrototypeOf(C),R=Object.create(P)):(R=Object.create(v),P=v)}if(w){var N=E.indexOf(C);if(N!=-1)return T[N];E.push(C),T.push(R)}s(C,a)&&C.forEach(function(B,j){var U=A(j,M-1),H=A(B,M-1);R.set(U,H)}),s(C,l)&&C.forEach(function(B){var j=A(B,M-1);R.add(j)});for(var $ in C){var D;P&&(D=Object.getOwnPropertyDescriptor(P,$)),!(D&&D.set==null)&&(R[$]=A(C[$],M-1))}if(Object.getOwnPropertySymbols)for(var z=Object.getOwnPropertySymbols(C),$=0;$<z.length;$++){var G=z[$],W=Object.getOwnPropertyDescriptor(C,G);W&&!W.enumerable&&!x||(R[G]=A(C[G],M-1),W.enumerable||Object.defineProperty(R,G,{enumerable:!1}))}if(x)for(var Z=Object.getOwnPropertyNames(C),$=0;$<Z.length;$++){var q=Z[$],W=Object.getOwnPropertyDescriptor(C,q);W&&W.enumerable||(R[q]=A(C[q],M-1),Object.defineProperty(R,q,{enumerable:!1}))}return R}return A(b,y)}c.clonePrototype=function(w){if(w===null)return null;var y=function(){};return y.prototype=w,new y};function f(b){return Object.prototype.toString.call(b)}c.__objToStr=f;function d(b){return typeof b=="object"&&f(b)==="[object Date]"}c.__isDate=d;function p(b){return typeof b=="object"&&f(b)==="[object Array]"}c.__isArray=p;function m(b){return typeof b=="object"&&f(b)==="[object RegExp]"}c.__isRegExp=m;function g(b){var w="";return b.global&&(w+="g"),b.ignoreCase&&(w+="i"),b.multiline&&(w+="m"),w}return c.__getRegExpFlags=g,c}();typeof n=="object"&&n.exports&&(n.exports=i)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function R(P,N){var $=[],D=!0,z=!1,G=void 0;try{for(var W=P[Symbol.iterator](),Z;!(D=(Z=W.next()).done)&&($.push(Z.value),!(N&&$.length===N));D=!0);}catch(q){z=!0,G=q}finally{try{!D&&W.return&&W.return()}finally{if(z)throw G}}return $}return function(P,N){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return R(P,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function R(P,N){for(var $=0;$<N.length;$++){var D=N[$];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(P,D.key,D)}}return function(P,N,$){return N&&R(P.prototype,N),$&&R(P,$),P}}(),l=function R(P,N,$){P===null&&(P=Function.prototype);var D=Object.getOwnPropertyDescriptor(P,N);if(D===void 0){var z=Object.getPrototypeOf(P);return z===null?void 0:R(z,N,$)}else{if("value"in D)return D.value;var G=D.get;return G===void 0?void 0:G.call($)}},u=i(0),c=E(u),f=i(8),d=E(f),p=i(4),m=E(p),g=i(16),b=E(g),w=i(13),y=E(w),v=i(25),x=E(v);function E(R){return R&&R.__esModule?R:{default:R}}function T(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")}function O(R,P){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:R}function A(R,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);R.prototype=Object.create(P&&P.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(R,P):R.__proto__=P)}function C(R){return R instanceof m.default||R instanceof p.BlockEmbed}var M=function(R){A(P,R);function P(N,$){T(this,P);var D=O(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,N));return D.emitter=$.emitter,Array.isArray($.whitelist)&&(D.whitelist=$.whitelist.reduce(function(z,G){return z[G]=!0,z},{})),D.domNode.addEventListener("DOMNodeInserted",function(){}),D.optimize(),D.enable(),D}return a(P,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function($,D){var z=this.line($),G=s(z,2),W=G[0],Z=G[1],q=this.line($+D),B=s(q,1),j=B[0];if(l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"deleteAt",this).call(this,$,D),j!=null&&W!==j&&Z>0){if(W instanceof p.BlockEmbed||j instanceof p.BlockEmbed){this.optimize();return}if(W instanceof y.default){var U=W.newlineIndex(W.length(),!0);if(U>-1&&(W=W.split(U+1),W===j)){this.optimize();return}}else if(j instanceof y.default){var H=j.newlineIndex(0);H>-1&&j.split(H+1)}var Y=j.children.head instanceof b.default?null:j.children.head;W.moveChildren(j,Y),W.remove()}this.optimize()}},{key:"enable",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",$)}},{key:"formatAt",value:function($,D,z,G){this.whitelist!=null&&!this.whitelist[z]||(l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"formatAt",this).call(this,$,D,z,G),this.optimize())}},{key:"insertAt",value:function($,D,z){if(!(z!=null&&this.whitelist!=null&&!this.whitelist[D])){if($>=this.length())if(z==null||c.default.query(D,c.default.Scope.BLOCK)==null){var G=c.default.create(this.statics.defaultChild);this.appendChild(G),z==null&&D.endsWith(`
`)&&(D=D.slice(0,-1)),G.insertAt(0,D,z)}else{var W=c.default.create(D,z);this.appendChild(W)}else l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertAt",this).call(this,$,D,z);this.optimize()}}},{key:"insertBefore",value:function($,D){if($.statics.scope===c.default.Scope.INLINE_BLOT){var z=c.default.create(this.statics.defaultChild);z.appendChild($),$=z}l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertBefore",this).call(this,$,D)}},{key:"leaf",value:function($){return this.path($).pop()||[null,-1]}},{key:"line",value:function($){return $===this.length()?this.line($-1):this.descendant(C,$)}},{key:"lines",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,z=function G(W,Z,q){var B=[],j=q;return W.children.forEachAt(Z,q,function(U,H,Y){C(U)?B.push(U):U instanceof c.default.Container&&(B=B.concat(G(U,H,j))),j-=Y}),B};return z(this,$,D)}},{key:"optimize",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,$,D),$.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,$,D))}},{key:"path",value:function($){return l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"path",this).call(this,$).slice(1)}},{key:"update",value:function($){if(this.batch!==!0){var D=d.default.sources.USER;typeof $=="string"&&(D=$),Array.isArray($)||($=this.observer.takeRecords()),$.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,D,$),l(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"update",this).call(this,$.concat([])),$.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,D,$)}}}]),P}(c.default.Scroll);M.blotName="scroll",M.className="ql-editor",M.tagName="DIV",M.defaultChild="block",M.allowedChildren=[m.default,p.BlockEmbed,x.default],r.default=M},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},a=function(){function V(Q,re){var ie=[],ce=!0,me=!1,Ce=void 0;try{for(var je=Q[Symbol.iterator](),Ze;!(ce=(Ze=je.next()).done)&&(ie.push(Ze.value),!(re&&ie.length===re));ce=!0);}catch(We){me=!0,Ce=We}finally{try{!ce&&je.return&&je.return()}finally{if(me)throw Ce}}return ie}return function(Q,re){if(Array.isArray(Q))return Q;if(Symbol.iterator in Object(Q))return V(Q,re);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function V(Q,re){for(var ie=0;ie<re.length;ie++){var ce=re[ie];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(Q,ce.key,ce)}}return function(Q,re,ie){return re&&V(Q.prototype,re),ie&&V(Q,ie),Q}}(),u=i(21),c=R(u),f=i(11),d=R(f),p=i(3),m=R(p),g=i(2),b=R(g),w=i(20),y=R(w),v=i(0),x=R(v),E=i(5),T=R(E),O=i(10),A=R(O),C=i(9),M=R(C);function R(V){return V&&V.__esModule?V:{default:V}}function P(V,Q,re){return Q in V?Object.defineProperty(V,Q,{value:re,enumerable:!0,configurable:!0,writable:!0}):V[Q]=re,V}function N(V,Q){if(!(V instanceof Q))throw new TypeError("Cannot call a class as a function")}function $(V,Q){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q&&(typeof Q=="object"||typeof Q=="function")?Q:V}function D(V,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Q);V.prototype=Object.create(Q&&Q.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),Q&&(Object.setPrototypeOf?Object.setPrototypeOf(V,Q):V.__proto__=Q)}var z=(0,A.default)("quill:keyboard"),G=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",W=function(V){D(Q,V),l(Q,null,[{key:"match",value:function(ie,ce){return ce=J(ce),["altKey","ctrlKey","metaKey","shiftKey"].some(function(me){return!!ce[me]!==ie[me]&&ce[me]!==null})?!1:ce.key===(ie.which||ie.keyCode)}}]);function Q(re,ie){N(this,Q);var ce=$(this,(Q.__proto__||Object.getPrototypeOf(Q)).call(this,re,ie));return ce.bindings={},Object.keys(ce.options.bindings).forEach(function(me){me==="list autofill"&&re.scroll.whitelist!=null&&!re.scroll.whitelist.list||ce.options.bindings[me]&&ce.addBinding(ce.options.bindings[me])}),ce.addBinding({key:Q.keys.ENTER,shiftKey:null},U),ce.addBinding({key:Q.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ce.addBinding({key:Q.keys.BACKSPACE},{collapsed:!0},q),ce.addBinding({key:Q.keys.DELETE},{collapsed:!0},B)):(ce.addBinding({key:Q.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},q),ce.addBinding({key:Q.keys.DELETE},{collapsed:!0,suffix:/^.?$/},B)),ce.addBinding({key:Q.keys.BACKSPACE},{collapsed:!1},j),ce.addBinding({key:Q.keys.DELETE},{collapsed:!1},j),ce.addBinding({key:Q.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},q),ce.listen(),ce}return l(Q,[{key:"addBinding",value:function(ie){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ce=J(ie);if(Ce==null||Ce.key==null)return z.warn("Attempted to add invalid keyboard binding",Ce);typeof ce=="function"&&(ce={handler:ce}),typeof me=="function"&&(me={handler:me}),Ce=(0,m.default)(Ce,ce,me),this.bindings[Ce.key]=this.bindings[Ce.key]||[],this.bindings[Ce.key].push(Ce)}},{key:"listen",value:function(){var ie=this;this.quill.root.addEventListener("keydown",function(ce){if(!ce.defaultPrevented){var me=ce.which||ce.keyCode,Ce=(ie.bindings[me]||[]).filter(function(wt){return Q.match(ce,wt)});if(Ce.length!==0){var je=ie.quill.getSelection();if(!(je==null||!ie.quill.hasFocus())){var Ze=ie.quill.getLine(je.index),We=a(Ze,2),$t=We[0],At=We[1],oe=ie.quill.getLeaf(je.index),fe=a(oe,2),we=fe[0],be=fe[1],he=je.length===0?[we,be]:ie.quill.getLeaf(je.index+je.length),$e=a(he,2),Be=$e[0],Ve=$e[1],Yt=we instanceof x.default.Text?we.value().slice(0,be):"",sn=Be instanceof x.default.Text?Be.value().slice(Ve):"",bt={collapsed:je.length===0,empty:je.length===0&&$t.length()<=1,format:ie.quill.getFormat(je),offset:At,prefix:Yt,suffix:sn},Cn=Ce.some(function(wt){if(wt.collapsed!=null&&wt.collapsed!==bt.collapsed||wt.empty!=null&&wt.empty!==bt.empty||wt.offset!=null&&wt.offset!==bt.offset)return!1;if(Array.isArray(wt.format)){if(wt.format.every(function(Bt){return bt.format[Bt]==null}))return!1}else if(s(wt.format)==="object"&&!Object.keys(wt.format).every(function(Bt){return wt.format[Bt]===!0?bt.format[Bt]!=null:wt.format[Bt]===!1?bt.format[Bt]==null:(0,d.default)(wt.format[Bt],bt.format[Bt])}))return!1;return wt.prefix!=null&&!wt.prefix.test(bt.prefix)||wt.suffix!=null&&!wt.suffix.test(bt.suffix)?!1:wt.handler.call(ie,je,bt)!==!0});Cn&&ce.preventDefault()}}}})}}]),Q}(M.default);W.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},W.DEFAULTS={bindings:{bold:Y("bold"),italic:Y("italic"),underline:Y("underline"),indent:{key:W.keys.TAB,format:["blockquote","indent","list"],handler:function(Q,re){if(re.collapsed&&re.offset!==0)return!0;this.quill.format("indent","+1",T.default.sources.USER)}},outdent:{key:W.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(Q,re){if(re.collapsed&&re.offset!==0)return!0;this.quill.format("indent","-1",T.default.sources.USER)}},"outdent backspace":{key:W.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(Q,re){re.format.indent!=null?this.quill.format("indent","-1",T.default.sources.USER):re.format.list!=null&&this.quill.format("list",!1,T.default.sources.USER)}},"indent code-block":H(!0),"outdent code-block":H(!1),"remove tab":{key:W.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(Q){this.quill.deleteText(Q.index-1,1,T.default.sources.USER)}},tab:{key:W.keys.TAB,handler:function(Q){this.quill.history.cutoff();var re=new b.default().retain(Q.index).delete(Q.length).insert("	");this.quill.updateContents(re,T.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Q.index+1,T.default.sources.SILENT)}},"list empty enter":{key:W.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(Q,re){this.quill.format("list",!1,T.default.sources.USER),re.format.indent&&this.quill.format("indent",!1,T.default.sources.USER)}},"checklist enter":{key:W.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(Q){var re=this.quill.getLine(Q.index),ie=a(re,2),ce=ie[0],me=ie[1],Ce=(0,m.default)({},ce.formats(),{list:"checked"}),je=new b.default().retain(Q.index).insert(`
`,Ce).retain(ce.length()-me-1).retain(1,{list:"unchecked"});this.quill.updateContents(je,T.default.sources.USER),this.quill.setSelection(Q.index+1,T.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:W.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(Q,re){var ie=this.quill.getLine(Q.index),ce=a(ie,2),me=ce[0],Ce=ce[1],je=new b.default().retain(Q.index).insert(`
`,re.format).retain(me.length()-Ce-1).retain(1,{header:null});this.quill.updateContents(je,T.default.sources.USER),this.quill.setSelection(Q.index+1,T.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(Q,re){var ie=re.prefix.length,ce=this.quill.getLine(Q.index),me=a(ce,2),Ce=me[0],je=me[1];if(je>ie)return!0;var Ze=void 0;switch(re.prefix.trim()){case"[]":case"[ ]":Ze="unchecked";break;case"[x]":Ze="checked";break;case"-":case"*":Ze="bullet";break;default:Ze="ordered"}this.quill.insertText(Q.index," ",T.default.sources.USER),this.quill.history.cutoff();var We=new b.default().retain(Q.index-je).delete(ie+1).retain(Ce.length()-2-je).retain(1,{list:Ze});this.quill.updateContents(We,T.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Q.index-ie,T.default.sources.SILENT)}},"code exit":{key:W.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(Q){var re=this.quill.getLine(Q.index),ie=a(re,2),ce=ie[0],me=ie[1],Ce=new b.default().retain(Q.index+ce.length()-me-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Ce,T.default.sources.USER)}},"embed left":Z(W.keys.LEFT,!1),"embed left shift":Z(W.keys.LEFT,!0),"embed right":Z(W.keys.RIGHT,!1),"embed right shift":Z(W.keys.RIGHT,!0)}};function Z(V,Q){var re,ie=V===W.keys.LEFT?"prefix":"suffix";return re={key:V,shiftKey:Q,altKey:null},P(re,ie,/^$/),P(re,"handler",function(me){var Ce=me.index;V===W.keys.RIGHT&&(Ce+=me.length+1);var je=this.quill.getLeaf(Ce),Ze=a(je,1),We=Ze[0];return We instanceof x.default.Embed?(V===W.keys.LEFT?Q?this.quill.setSelection(me.index-1,me.length+1,T.default.sources.USER):this.quill.setSelection(me.index-1,T.default.sources.USER):Q?this.quill.setSelection(me.index,me.length+1,T.default.sources.USER):this.quill.setSelection(me.index+me.length+1,T.default.sources.USER),!1):!0}),re}function q(V,Q){if(!(V.index===0||this.quill.getLength()<=1)){var re=this.quill.getLine(V.index),ie=a(re,1),ce=ie[0],me={};if(Q.offset===0){var Ce=this.quill.getLine(V.index-1),je=a(Ce,1),Ze=je[0];if(Ze!=null&&Ze.length()>1){var We=ce.formats(),$t=this.quill.getFormat(V.index-1,1);me=y.default.attributes.diff(We,$t)||{}}}var At=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(Q.prefix)?2:1;this.quill.deleteText(V.index-At,At,T.default.sources.USER),Object.keys(me).length>0&&this.quill.formatLine(V.index-At,At,me,T.default.sources.USER),this.quill.focus()}}function B(V,Q){var re=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(Q.suffix)?2:1;if(!(V.index>=this.quill.getLength()-re)){var ie={},ce=0,me=this.quill.getLine(V.index),Ce=a(me,1),je=Ce[0];if(Q.offset>=je.length()-1){var Ze=this.quill.getLine(V.index+1),We=a(Ze,1),$t=We[0];if($t){var At=je.formats(),oe=this.quill.getFormat(V.index,1);ie=y.default.attributes.diff(At,oe)||{},ce=$t.length()}}this.quill.deleteText(V.index,re,T.default.sources.USER),Object.keys(ie).length>0&&this.quill.formatLine(V.index+ce-1,re,ie,T.default.sources.USER)}}function j(V){var Q=this.quill.getLines(V),re={};if(Q.length>1){var ie=Q[0].formats(),ce=Q[Q.length-1].formats();re=y.default.attributes.diff(ce,ie)||{}}this.quill.deleteText(V,T.default.sources.USER),Object.keys(re).length>0&&this.quill.formatLine(V.index,1,re,T.default.sources.USER),this.quill.setSelection(V.index,T.default.sources.SILENT),this.quill.focus()}function U(V,Q){var re=this;V.length>0&&this.quill.scroll.deleteAt(V.index,V.length);var ie=Object.keys(Q.format).reduce(function(ce,me){return x.default.query(me,x.default.Scope.BLOCK)&&!Array.isArray(Q.format[me])&&(ce[me]=Q.format[me]),ce},{});this.quill.insertText(V.index,`
`,ie,T.default.sources.USER),this.quill.setSelection(V.index+1,T.default.sources.SILENT),this.quill.focus(),Object.keys(Q.format).forEach(function(ce){ie[ce]==null&&(Array.isArray(Q.format[ce])||ce!=="link"&&re.quill.format(ce,Q.format[ce],T.default.sources.USER))})}function H(V){return{key:W.keys.TAB,shiftKey:!V,format:{"code-block":!0},handler:function(re){var ie=x.default.query("code-block"),ce=re.index,me=re.length,Ce=this.quill.scroll.descendant(ie,ce),je=a(Ce,2),Ze=je[0],We=je[1];if(Ze!=null){var $t=this.quill.getIndex(Ze),At=Ze.newlineIndex(We,!0)+1,oe=Ze.newlineIndex($t+We+me),fe=Ze.domNode.textContent.slice(At,oe).split(`
`);We=0,fe.forEach(function(we,be){V?(Ze.insertAt(At+We,ie.TAB),We+=ie.TAB.length,be===0?ce+=ie.TAB.length:me+=ie.TAB.length):we.startsWith(ie.TAB)&&(Ze.deleteAt(At+We,ie.TAB.length),We-=ie.TAB.length,be===0?ce-=ie.TAB.length:me-=ie.TAB.length),We+=we.length+1}),this.quill.update(T.default.sources.USER),this.quill.setSelection(ce,me,T.default.sources.SILENT)}}}}function Y(V){return{key:V[0].toUpperCase(),shortKey:!0,handler:function(re,ie){this.quill.format(V,!ie.format[V],T.default.sources.USER)}}}function J(V){if(typeof V=="string"||typeof V=="number")return J({key:V});if((typeof V>"u"?"undefined":s(V))==="object"&&(V=(0,c.default)(V,!1)),typeof V.key=="string")if(W.keys[V.key.toUpperCase()]!=null)V.key=W.keys[V.key.toUpperCase()];else if(V.key.length===1)V.key=V.key.toUpperCase().charCodeAt(0);else return null;return V.shortKey&&(V[G]=V.shortKey,delete V.shortKey),V}r.default=W,r.SHORTKEY=G},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function y(v,x){var E=[],T=!0,O=!1,A=void 0;try{for(var C=v[Symbol.iterator](),M;!(T=(M=C.next()).done)&&(E.push(M.value),!(x&&E.length===x));T=!0);}catch(R){O=!0,A=R}finally{try{!T&&C.return&&C.return()}finally{if(O)throw A}}return E}return function(v,x){if(Array.isArray(v))return v;if(Symbol.iterator in Object(v))return y(v,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function y(v,x,E){v===null&&(v=Function.prototype);var T=Object.getOwnPropertyDescriptor(v,x);if(T===void 0){var O=Object.getPrototypeOf(v);return O===null?void 0:y(O,x,E)}else{if("value"in T)return T.value;var A=T.get;return A===void 0?void 0:A.call(E)}},l=function(){function y(v,x){for(var E=0;E<x.length;E++){var T=x[E];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}return function(v,x,E){return x&&y(v.prototype,x),E&&y(v,E),v}}(),u=i(0),c=p(u),f=i(7),d=p(f);function p(y){return y&&y.__esModule?y:{default:y}}function m(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function g(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function b(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var w=function(y){b(v,y),l(v,null,[{key:"value",value:function(){}}]);function v(x,E){m(this,v);var T=g(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,x));return T.selection=E,T.textNode=document.createTextNode(v.CONTENTS),T.domNode.appendChild(T.textNode),T._length=0,T}return l(v,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(E,T){if(this._length!==0)return a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,E,T);for(var O=this,A=0;O!=null&&O.statics.scope!==c.default.Scope.BLOCK_BLOT;)A+=O.offset(O.parent),O=O.parent;O!=null&&(this._length=v.CONTENTS.length,O.optimize(),O.formatAt(A,v.CONTENTS.length,E,T),this._length=0)}},{key:"index",value:function(E,T){return E===this.textNode?0:a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"index",this).call(this,E,T)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var E=this.textNode,T=this.selection.getNativeRange(),O=void 0,A=void 0,C=void 0;if(T!=null&&T.start.node===E&&T.end.node===E){var M=[E,T.start.offset,T.end.offset];O=M[0],A=M[1],C=M[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==v.CONTENTS){var R=this.textNode.data.split(v.CONTENTS).join("");this.next instanceof d.default?(O=this.next.domNode,this.next.insertAt(0,R),this.textNode.data=v.CONTENTS):(this.textNode.data=R,this.parent.insertBefore(c.default.create(this.textNode),this),this.textNode=document.createTextNode(v.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),A!=null){var P=[A,C].map(function($){return Math.max(0,Math.min(O.data.length,$-1))}),N=s(P,2);return A=N[0],C=N[1],{startNode:O,startOffset:A,endNode:O,endOffset:C}}}}},{key:"update",value:function(E,T){var O=this;if(E.some(function(C){return C.type==="characterData"&&C.target===O.textNode})){var A=this.restore();A&&(T.range=A)}}},{key:"value",value:function(){return""}}]),v}(c.default.Embed);w.blotName="cursor",w.className="ql-cursor",w.tagName="span",w.CONTENTS="\uFEFF",r.default=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),a=c(s),l=i(4),u=c(l);function c(g){return g&&g.__esModule?g:{default:g}}function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function d(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function p(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var m=function(g){p(b,g);function b(){return f(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return b}(a.default.Container);m.allowedChildren=[u.default,l.BlockEmbed,m],r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var s=function(){function w(y,v){for(var x=0;x<v.length;x++){var E=v[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}return function(y,v,x){return v&&w(y.prototype,v),x&&w(y,x),y}}(),a=function w(y,v,x){y===null&&(y=Function.prototype);var E=Object.getOwnPropertyDescriptor(y,v);if(E===void 0){var T=Object.getPrototypeOf(y);return T===null?void 0:w(T,v,x)}else{if("value"in E)return E.value;var O=E.get;return O===void 0?void 0:O.call(x)}},l=i(0),u=c(l);function c(w){return w&&w.__esModule?w:{default:w}}function f(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function d(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function p(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var m=function(w){p(y,w);function y(){return f(this,y),d(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,[{key:"value",value:function(x){var E=a(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,x);return E.startsWith("rgb(")?(E=E.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+E.split(",").map(function(T){return("00"+parseInt(T).toString(16)).slice(-2)}).join("")):E}}]),y}(u.default.Attributor.Style),g=new u.default.Attributor.Class("color","ql-color",{scope:u.default.Scope.INLINE}),b=new m("color","color",{scope:u.default.Scope.INLINE});r.ColorAttributor=m,r.ColorClass=g,r.ColorStyle=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var s=function(){function b(w,y){for(var v=0;v<y.length;v++){var x=y[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(w,x.key,x)}}return function(w,y,v){return y&&b(w.prototype,y),v&&b(w,v),w}}(),a=function b(w,y,v){w===null&&(w=Function.prototype);var x=Object.getOwnPropertyDescriptor(w,y);if(x===void 0){var E=Object.getPrototypeOf(w);return E===null?void 0:b(E,y,v)}else{if("value"in x)return x.value;var T=x.get;return T===void 0?void 0:T.call(v)}},l=i(6),u=c(l);function c(b){return b&&b.__esModule?b:{default:b}}function f(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function d(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function p(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var m=function(b){p(w,b);function w(){return f(this,w),d(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,[{key:"format",value:function(v,x){if(v!==this.statics.blotName||!x)return a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,v,x);x=this.constructor.sanitize(x),this.domNode.setAttribute("href",x)}}],[{key:"create",value:function(v){var x=a(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,v);return v=this.sanitize(v),x.setAttribute("href",v),x.setAttribute("rel","noopener noreferrer"),x.setAttribute("target","_blank"),x}},{key:"formats",value:function(v){return v.getAttribute("href")}},{key:"sanitize",value:function(v){return g(v,this.PROTOCOL_WHITELIST)?v:this.SANITIZED_URL}}]),w}(u.default);m.blotName="link",m.tagName="A",m.SANITIZED_URL="about:blank",m.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function g(b,w){var y=document.createElement("a");y.href=b;var v=y.href.slice(0,y.href.indexOf(":"));return w.indexOf(v)>-1}r.default=m,r.sanitize=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},a=function(){function w(y,v){for(var x=0;x<v.length;x++){var E=v[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}return function(y,v,x){return v&&w(y.prototype,v),x&&w(y,x),y}}(),l=i(23),u=d(l),c=i(107),f=d(c);function d(w){return w&&w.__esModule?w:{default:w}}function p(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}var m=0;function g(w,y){w.setAttribute(y,w.getAttribute(y)!=="true")}var b=function(){function w(y){var v=this;p(this,w),this.select=y,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){v.togglePicker()}),this.label.addEventListener("keydown",function(x){switch(x.keyCode){case u.default.keys.ENTER:v.togglePicker();break;case u.default.keys.ESCAPE:v.escape(),x.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return a(w,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),g(this.label,"aria-expanded"),g(this.options,"aria-hidden")}},{key:"buildItem",value:function(v){var x=this,E=document.createElement("span");return E.tabIndex="0",E.setAttribute("role","button"),E.classList.add("ql-picker-item"),v.hasAttribute("value")&&E.setAttribute("data-value",v.getAttribute("value")),v.textContent&&E.setAttribute("data-label",v.textContent),E.addEventListener("click",function(){x.selectItem(E,!0)}),E.addEventListener("keydown",function(T){switch(T.keyCode){case u.default.keys.ENTER:x.selectItem(E,!0),T.preventDefault();break;case u.default.keys.ESCAPE:x.escape(),T.preventDefault();break}}),E}},{key:"buildLabel",value:function(){var v=document.createElement("span");return v.classList.add("ql-picker-label"),v.innerHTML=f.default,v.tabIndex="0",v.setAttribute("role","button"),v.setAttribute("aria-expanded","false"),this.container.appendChild(v),v}},{key:"buildOptions",value:function(){var v=this,x=document.createElement("span");x.classList.add("ql-picker-options"),x.setAttribute("aria-hidden","true"),x.tabIndex="-1",x.id="ql-picker-options-"+m,m+=1,this.label.setAttribute("aria-controls",x.id),this.options=x,[].slice.call(this.select.options).forEach(function(E){var T=v.buildItem(E);x.appendChild(T),E.selected===!0&&v.selectItem(T)}),this.container.appendChild(x)}},{key:"buildPicker",value:function(){var v=this;[].slice.call(this.select.attributes).forEach(function(x){v.container.setAttribute(x.name,x.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var v=this;this.close(),setTimeout(function(){return v.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(v){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,E=this.container.querySelector(".ql-selected");if(v!==E&&(E!=null&&E.classList.remove("ql-selected"),v!=null&&(v.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(v.parentNode.children,v),v.hasAttribute("data-value")?this.label.setAttribute("data-value",v.getAttribute("data-value")):this.label.removeAttribute("data-value"),v.hasAttribute("data-label")?this.label.setAttribute("data-label",v.getAttribute("data-label")):this.label.removeAttribute("data-label"),x))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":s(Event))==="object"){var T=document.createEvent("Event");T.initEvent("change",!0,!0),this.select.dispatchEvent(T)}this.close()}}},{key:"update",value:function(){var v=void 0;if(this.select.selectedIndex>-1){var x=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];v=this.select.options[this.select.selectedIndex],this.selectItem(x)}else this.selectItem(null);var E=v!=null&&v!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",E)}}]),w}();r.default=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),a=z(s),l=i(5),u=z(l),c=i(4),f=z(c),d=i(16),p=z(d),m=i(25),g=z(m),b=i(24),w=z(b),y=i(35),v=z(y),x=i(6),E=z(x),T=i(22),O=z(T),A=i(7),C=z(A),M=i(55),R=z(M),P=i(42),N=z(P),$=i(23),D=z($);function z(G){return G&&G.__esModule?G:{default:G}}u.default.register({"blots/block":f.default,"blots/block/embed":c.BlockEmbed,"blots/break":p.default,"blots/container":g.default,"blots/cursor":w.default,"blots/embed":v.default,"blots/inline":E.default,"blots/scroll":O.default,"blots/text":C.default,"modules/clipboard":R.default,"modules/history":N.default,"modules/keyboard":D.default}),a.default.register(f.default,p.default,w.default,E.default,O.default,C.default),r.default=u.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),a=function(){function l(u){this.domNode=u,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(u){if(this.tagName==null)throw new s.ParchmentError("Blot definition missing tagName");var c;return Array.isArray(this.tagName)?(typeof u=="string"&&(u=u.toUpperCase(),parseInt(u).toString()===u&&(u=parseInt(u))),typeof u=="number"?c=document.createElement(this.tagName[u-1]):this.tagName.indexOf(u)>-1?c=document.createElement(u):c=document.createElement(this.tagName[0])):c=document.createElement(this.tagName),this.className&&c.classList.add(this.className),c},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var u=this.domNode.cloneNode(!1);return s.create(u)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},l.prototype.deleteAt=function(u,c){var f=this.isolate(u,c);f.remove()},l.prototype.formatAt=function(u,c,f,d){var p=this.isolate(u,c);if(s.query(f,s.Scope.BLOT)!=null&&d)p.wrap(f,d);else if(s.query(f,s.Scope.ATTRIBUTE)!=null){var m=s.create(this.statics.scope);p.wrap(m),m.format(f,d)}},l.prototype.insertAt=function(u,c,f){var d=f==null?s.create("text",c):s.create(c,f),p=this.split(u);this.parent.insertBefore(d,p)},l.prototype.insertInto=function(u,c){c===void 0&&(c=null),this.parent!=null&&this.parent.children.remove(this);var f=null;u.children.insertBefore(this,c),c!=null&&(f=c.domNode),(this.domNode.parentNode!=u.domNode||this.domNode.nextSibling!=f)&&u.domNode.insertBefore(this.domNode,f),this.parent=u,this.attach()},l.prototype.isolate=function(u,c){var f=this.split(u);return f.split(c),f},l.prototype.length=function(){return 1},l.prototype.offset=function(u){return u===void 0&&(u=this.parent),this.parent==null||this==u?0:this.parent.children.offset(this)+this.parent.offset(u)},l.prototype.optimize=function(u){this.domNode[s.DATA_KEY]!=null&&delete this.domNode[s.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(u){u.parent!=null&&(u.parent.insertBefore(this,u.next),u.remove())},l.prototype.replaceWith=function(u,c){var f=typeof u=="string"?s.create(u,c):u;return f.replace(this),f},l.prototype.split=function(u,c){return u===0?this:this.next},l.prototype.update=function(u,c){},l.prototype.wrap=function(u,c){var f=typeof u=="string"?s.create(u,c):u;return this.parent!=null&&this.parent.insertBefore(f,this.next),f.appendChild(this),f},l.blotName="abstract",l}();r.default=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),a=i(32),l=i(33),u=i(1),c=function(){function f(d){this.attributes={},this.domNode=d,this.build()}return f.prototype.attribute=function(d,p){p?d.add(this.domNode,p)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},f.prototype.build=function(){var d=this;this.attributes={};var p=s.default.keys(this.domNode),m=a.default.keys(this.domNode),g=l.default.keys(this.domNode);p.concat(m).concat(g).forEach(function(b){var w=u.query(b,u.Scope.ATTRIBUTE);w instanceof s.default&&(d.attributes[w.attrName]=w)})},f.prototype.copy=function(d){var p=this;Object.keys(this.attributes).forEach(function(m){var g=p.attributes[m].value(p.domNode);d.format(m,g)})},f.prototype.move=function(d){var p=this;this.copy(d),Object.keys(this.attributes).forEach(function(m){p.attributes[m].remove(p.domNode)}),this.attributes={}},f.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(p,m){return p[m]=d.attributes[m].value(d.domNode),p},{})},f}();r.default=c},function(n,r,i){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){c(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(12);function l(c,f){var d=c.getAttribute("class")||"";return d.split(/\s+/).filter(function(p){return p.indexOf(f+"-")===0})}var u=function(c){s(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(p){return p.split("-").slice(0,-1).join("-")})},f.prototype.add=function(d,p){return this.canAdd(d,p)?(this.remove(d),d.classList.add(this.keyName+"-"+p),!0):!1},f.prototype.remove=function(d){var p=l(d,this.keyName);p.forEach(function(m){d.classList.remove(m)}),d.classList.length===0&&d.removeAttribute("class")},f.prototype.value=function(d){var p=l(d,this.keyName)[0]||"",m=p.slice(this.keyName.length+1);return this.canAdd(d,m)?m:""},f}(a.default);r.default=u},function(n,r,i){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){c(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(12);function l(c){var f=c.split("-"),d=f.slice(1).map(function(p){return p[0].toUpperCase()+p.slice(1)}).join("");return f[0]+d}var u=function(c){s(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(p){var m=p.split(":");return m[0].trim()})},f.prototype.add=function(d,p){return this.canAdd(d,p)?(d.style[l(this.keyName)]=p,!0):!1},f.prototype.remove=function(d){d.style[l(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},f.prototype.value=function(d){var p=d.style[l(this.keyName)];return this.canAdd(d,p)?p:""},f}(a.default);r.default=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function u(c,f){for(var d=0;d<f.length;d++){var p=f[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}return function(c,f,d){return f&&u(c.prototype,f),d&&u(c,d),c}}();function a(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")}var l=function(){function u(c,f){a(this,u),this.quill=c,this.options=f,this.modules={}}return s(u,[{key:"init",value:function(){var f=this;Object.keys(this.options.modules).forEach(function(d){f.modules[d]==null&&f.addModule(d)})}},{key:"addModule",value:function(f){var d=this.quill.constructor.import("modules/"+f);return this.modules[f]=new d(this.quill,this.options.modules[f]||{}),this.modules[f]}}]),u}();l.DEFAULTS={modules:{}},l.themes={default:l},r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function y(v,x){for(var E=0;E<x.length;E++){var T=x[E];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}return function(v,x,E){return x&&y(v.prototype,x),E&&y(v,E),v}}(),a=function y(v,x,E){v===null&&(v=Function.prototype);var T=Object.getOwnPropertyDescriptor(v,x);if(T===void 0){var O=Object.getPrototypeOf(v);return O===null?void 0:y(O,x,E)}else{if("value"in T)return T.value;var A=T.get;return A===void 0?void 0:A.call(E)}},l=i(0),u=d(l),c=i(7),f=d(c);function d(y){return y&&y.__esModule?y:{default:y}}function p(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function m(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function g(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var b="\uFEFF",w=function(y){g(v,y);function v(x){p(this,v);var E=m(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,x));return E.contentNode=document.createElement("span"),E.contentNode.setAttribute("contenteditable",!1),[].slice.call(E.domNode.childNodes).forEach(function(T){E.contentNode.appendChild(T)}),E.leftGuard=document.createTextNode(b),E.rightGuard=document.createTextNode(b),E.domNode.appendChild(E.leftGuard),E.domNode.appendChild(E.contentNode),E.domNode.appendChild(E.rightGuard),E}return s(v,[{key:"index",value:function(E,T){return E===this.leftGuard?0:E===this.rightGuard?1:a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"index",this).call(this,E,T)}},{key:"restore",value:function(E){var T=void 0,O=void 0,A=E.data.split(b).join("");if(E===this.leftGuard)if(this.prev instanceof f.default){var C=this.prev.length();this.prev.insertAt(C,A),T={startNode:this.prev.domNode,startOffset:C+A.length}}else O=document.createTextNode(A),this.parent.insertBefore(u.default.create(O),this),T={startNode:O,startOffset:A.length};else E===this.rightGuard&&(this.next instanceof f.default?(this.next.insertAt(0,A),T={startNode:this.next.domNode,startOffset:A.length}):(O=document.createTextNode(A),this.parent.insertBefore(u.default.create(O),this.next),T={startNode:O,startOffset:A.length}));return E.data=b,T}},{key:"update",value:function(E,T){var O=this;E.forEach(function(A){if(A.type==="characterData"&&(A.target===O.leftGuard||A.target===O.rightGuard)){var C=O.restore(A.target);C&&(T.range=C)}})}}]),v}(u.default.Embed);r.default=w},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var s=i(0),a=l(s);function l(p){return p&&p.__esModule?p:{default:p}}var u={scope:a.default.Scope.BLOCK,whitelist:["right","center","justify"]},c=new a.default.Attributor.Attribute("align","align",u),f=new a.default.Attributor.Class("align","ql-align",u),d=new a.default.Attributor.Style("align","text-align",u);r.AlignAttribute=c,r.AlignClass=f,r.AlignStyle=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var s=i(0),a=u(s),l=i(26);function u(d){return d&&d.__esModule?d:{default:d}}var c=new a.default.Attributor.Class("background","ql-bg",{scope:a.default.Scope.INLINE}),f=new l.ColorAttributor("background","background-color",{scope:a.default.Scope.INLINE});r.BackgroundClass=c,r.BackgroundStyle=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var s=i(0),a=l(s);function l(p){return p&&p.__esModule?p:{default:p}}var u={scope:a.default.Scope.BLOCK,whitelist:["rtl"]},c=new a.default.Attributor.Attribute("direction","dir",u),f=new a.default.Attributor.Class("direction","ql-direction",u),d=new a.default.Attributor.Style("direction","direction",u);r.DirectionAttribute=c,r.DirectionClass=f,r.DirectionStyle=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var s=function(){function y(v,x){for(var E=0;E<x.length;E++){var T=x[E];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(v,T.key,T)}}return function(v,x,E){return x&&y(v.prototype,x),E&&y(v,E),v}}(),a=function y(v,x,E){v===null&&(v=Function.prototype);var T=Object.getOwnPropertyDescriptor(v,x);if(T===void 0){var O=Object.getPrototypeOf(v);return O===null?void 0:y(O,x,E)}else{if("value"in T)return T.value;var A=T.get;return A===void 0?void 0:A.call(E)}},l=i(0),u=c(l);function c(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function p(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var m={scope:u.default.Scope.INLINE,whitelist:["serif","monospace"]},g=new u.default.Attributor.Class("font","ql-font",m),b=function(y){p(v,y);function v(){return f(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"value",value:function(E){return a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,E).replace(/["']/g,"")}}]),v}(u.default.Attributor.Style),w=new b("font","font-family",m);r.FontStyle=w,r.FontClass=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var s=i(0),a=l(s);function l(f){return f&&f.__esModule?f:{default:f}}var u=new a.default.Attributor.Class("size","ql-size",{scope:a.default.Scope.INLINE,whitelist:["small","large","huge"]}),c=new a.default.Attributor.Style("size","font-size",{scope:a.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=u,r.SizeStyle=c},function(n,r,i){n.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var s=function(){function x(E,T){for(var O=0;O<T.length;O++){var A=T[O];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(E,A.key,A)}}return function(E,T,O){return T&&x(E.prototype,T),O&&x(E,O),E}}(),a=i(0),l=p(a),u=i(5),c=p(u),f=i(9),d=p(f);function p(x){return x&&x.__esModule?x:{default:x}}function m(x,E){if(!(x instanceof E))throw new TypeError("Cannot call a class as a function")}function g(x,E){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:x}function b(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);x.prototype=Object.create(E&&E.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(x,E):x.__proto__=E)}var w=function(x){b(E,x);function E(T,O){m(this,E);var A=g(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,T,O));return A.lastRecorded=0,A.ignoreChange=!1,A.clear(),A.quill.on(c.default.events.EDITOR_CHANGE,function(C,M,R,P){C!==c.default.events.TEXT_CHANGE||A.ignoreChange||(!A.options.userOnly||P===c.default.sources.USER?A.record(M,R):A.transform(M))}),A.quill.keyboard.addBinding({key:"Z",shortKey:!0},A.undo.bind(A)),A.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},A.redo.bind(A)),/Win/i.test(navigator.platform)&&A.quill.keyboard.addBinding({key:"Y",shortKey:!0},A.redo.bind(A)),A}return s(E,[{key:"change",value:function(O,A){if(this.stack[O].length!==0){var C=this.stack[O].pop();this.stack[A].push(C),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(C[O],c.default.sources.USER),this.ignoreChange=!1;var M=v(C[O]);this.quill.setSelection(M)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(O,A){if(O.ops.length!==0){this.stack.redo=[];var C=this.quill.getContents().diff(A),M=Date.now();if(this.lastRecorded+this.options.delay>M&&this.stack.undo.length>0){var R=this.stack.undo.pop();C=C.compose(R.undo),O=R.redo.compose(O)}else this.lastRecorded=M;this.stack.undo.push({redo:O,undo:C}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(O){this.stack.undo.forEach(function(A){A.undo=O.transform(A.undo,!0),A.redo=O.transform(A.redo,!0)}),this.stack.redo.forEach(function(A){A.undo=O.transform(A.undo,!0),A.redo=O.transform(A.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),E}(d.default);w.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function y(x){var E=x.ops[x.ops.length-1];return E==null?!1:E.insert!=null?typeof E.insert=="string"&&E.insert.endsWith(`
`):E.attributes!=null?Object.keys(E.attributes).some(function(T){return l.default.query(T,l.default.Scope.BLOCK)!=null}):!1}function v(x){var E=x.reduce(function(O,A){return O+=A.delete||0,O},0),T=x.length()-E;return y(x)&&(T-=1),T}r.default=w,r.getLastChangeIndex=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var s=function(){function U(H,Y){for(var J=0;J<Y.length;J++){var V=Y[J];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(H,V.key,V)}}return function(H,Y,J){return Y&&U(H.prototype,Y),J&&U(H,J),H}}(),a=function U(H,Y,J){H===null&&(H=Function.prototype);var V=Object.getOwnPropertyDescriptor(H,Y);if(V===void 0){var Q=Object.getPrototypeOf(H);return Q===null?void 0:U(Q,Y,J)}else{if("value"in V)return V.value;var re=V.get;return re===void 0?void 0:re.call(J)}},l=i(3),u=M(l),c=i(2),f=M(c),d=i(8),p=M(d),m=i(23),g=M(m),b=i(34),w=M(b),y=i(59),v=M(y),x=i(60),E=M(x),T=i(28),O=M(T),A=i(61),C=M(A);function M(U){return U&&U.__esModule?U:{default:U}}function R(U,H){if(!(U instanceof H))throw new TypeError("Cannot call a class as a function")}function P(U,H){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:U}function N(U,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);U.prototype=Object.create(H&&H.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(U,H):U.__proto__=H)}var $=[!1,"center","right","justify"],D=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],z=[!1,"serif","monospace"],G=["1","2","3",!1],W=["small",!1,"large","huge"],Z=function(U){N(H,U);function H(Y,J){R(this,H);var V=P(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,Y,J)),Q=function re(ie){if(!document.body.contains(Y.root))return document.body.removeEventListener("click",re);V.tooltip!=null&&!V.tooltip.root.contains(ie.target)&&document.activeElement!==V.tooltip.textbox&&!V.quill.hasFocus()&&V.tooltip.hide(),V.pickers!=null&&V.pickers.forEach(function(ce){ce.container.contains(ie.target)||ce.close()})};return Y.emitter.listenDOM("click",document.body,Q),V}return s(H,[{key:"addModule",value:function(J){var V=a(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"addModule",this).call(this,J);return J==="toolbar"&&this.extendToolbar(V),V}},{key:"buildButtons",value:function(J,V){J.forEach(function(Q){var re=Q.getAttribute("class")||"";re.split(/\s+/).forEach(function(ie){if(ie.startsWith("ql-")&&(ie=ie.slice(3),V[ie]!=null))if(ie==="direction")Q.innerHTML=V[ie][""]+V[ie].rtl;else if(typeof V[ie]=="string")Q.innerHTML=V[ie];else{var ce=Q.value||"";ce!=null&&V[ie][ce]&&(Q.innerHTML=V[ie][ce])}})})}},{key:"buildPickers",value:function(J,V){var Q=this;this.pickers=J.map(function(ie){if(ie.classList.contains("ql-align"))return ie.querySelector("option")==null&&j(ie,$),new E.default(ie,V.align);if(ie.classList.contains("ql-background")||ie.classList.contains("ql-color")){var ce=ie.classList.contains("ql-background")?"background":"color";return ie.querySelector("option")==null&&j(ie,D,ce==="background"?"#ffffff":"#000000"),new v.default(ie,V[ce])}else return ie.querySelector("option")==null&&(ie.classList.contains("ql-font")?j(ie,z):ie.classList.contains("ql-header")?j(ie,G):ie.classList.contains("ql-size")&&j(ie,W)),new O.default(ie)});var re=function(){Q.pickers.forEach(function(ce){ce.update()})};this.quill.on(p.default.events.EDITOR_CHANGE,re)}}]),H}(w.default);Z.DEFAULTS=(0,u.default)(!0,{},w.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var H=this,Y=this.container.querySelector("input.ql-image[type=file]");Y==null&&(Y=document.createElement("input"),Y.setAttribute("type","file"),Y.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Y.classList.add("ql-image"),Y.addEventListener("change",function(){if(Y.files!=null&&Y.files[0]!=null){var J=new FileReader;J.onload=function(V){var Q=H.quill.getSelection(!0);H.quill.updateContents(new f.default().retain(Q.index).delete(Q.length).insert({image:V.target.result}),p.default.sources.USER),H.quill.setSelection(Q.index+1,p.default.sources.SILENT),Y.value=""},J.readAsDataURL(Y.files[0])}}),this.container.appendChild(Y)),Y.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var q=function(U){N(H,U);function H(Y,J){R(this,H);var V=P(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,Y,J));return V.textbox=V.root.querySelector('input[type="text"]'),V.listen(),V}return s(H,[{key:"listen",value:function(){var J=this;this.textbox.addEventListener("keydown",function(V){g.default.match(V,"enter")?(J.save(),V.preventDefault()):g.default.match(V,"escape")&&(J.cancel(),V.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),V!=null?this.textbox.value=V:J!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+J)||""),this.root.setAttribute("data-mode",J)}},{key:"restoreFocus",value:function(){var J=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=J}},{key:"save",value:function(){var J=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var V=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",J,p.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",J,p.default.sources.USER)),this.quill.root.scrollTop=V;break}case"video":J=B(J);case"formula":{if(!J)break;var Q=this.quill.getSelection(!0);if(Q!=null){var re=Q.index+Q.length;this.quill.insertEmbed(re,this.root.getAttribute("data-mode"),J,p.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(re+1," ",p.default.sources.USER),this.quill.setSelection(re+2,p.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),H}(C.default);function B(U){var H=U.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||U.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return H?(H[1]||"https")+"://www.youtube.com/embed/"+H[2]+"?showinfo=0":(H=U.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(H[1]||"https")+"://player.vimeo.com/video/"+H[2]+"/":U}function j(U,H){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;H.forEach(function(J){var V=document.createElement("option");J===Y?V.setAttribute("selected","selected"):V.setAttribute("value",J),U.appendChild(V)})}r.BaseTooltip=q,r.default=Z},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function a(){this.head=this.tail=null,this.length=0}return a.prototype.append=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},a.prototype.contains=function(l){for(var u,c=this.iterator();u=c();)if(u===l)return!0;return!1},a.prototype.insertBefore=function(l,u){l&&(l.next=u,u!=null?(l.prev=u.prev,u.prev!=null&&(u.prev.next=l),u.prev=l,u===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},a.prototype.offset=function(l){for(var u=0,c=this.head;c!=null;){if(c===l)return u;u+=c.length(),c=c.next}return-1},a.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},a.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var u=l;return l!=null&&(l=l.next),u}},a.prototype.find=function(l,u){u===void 0&&(u=!1);for(var c,f=this.iterator();c=f();){var d=c.length();if(l<d||u&&l===d&&(c.next==null||c.next.length()!==0))return[c,l];l-=d}return[null,0]},a.prototype.forEach=function(l){for(var u,c=this.iterator();u=c();)l(u)},a.prototype.forEachAt=function(l,u,c){if(!(u<=0))for(var f=this.find(l),d=f[0],p=f[1],m,g=l-p,b=this.iterator(d);(m=b())&&g<l+u;){var w=m.length();l>g?c(m,l-g,Math.min(u,g+w-l)):c(m,0,Math.min(w,l+u-g)),g+=w}},a.prototype.map=function(l){return this.reduce(function(u,c){return u.push(l(c)),u},[])},a.prototype.reduce=function(l,u){for(var c,f=this.iterator();c=f();)u=l(u,c);return u},a}();r.default=s},function(n,r,i){var s=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var g in m)m.hasOwnProperty(g)&&(p[g]=m[g])};return function(p,m){d(p,m);function g(){this.constructor=p}p.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(17),l=i(1),u={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},c=100,f=function(d){s(p,d);function p(m){var g=d.call(this,m)||this;return g.scroll=g,g.observer=new MutationObserver(function(b){g.update(b)}),g.observer.observe(g.domNode,u),g.attach(),g}return p.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},p.prototype.deleteAt=function(m,g){this.update(),m===0&&g===this.length()?this.children.forEach(function(b){b.remove()}):d.prototype.deleteAt.call(this,m,g)},p.prototype.formatAt=function(m,g,b,w){this.update(),d.prototype.formatAt.call(this,m,g,b,w)},p.prototype.insertAt=function(m,g,b){this.update(),d.prototype.insertAt.call(this,m,g,b)},p.prototype.optimize=function(m,g){var b=this;m===void 0&&(m=[]),g===void 0&&(g={}),d.prototype.optimize.call(this,g);for(var w=[].slice.call(this.observer.takeRecords());w.length>0;)m.push(w.pop());for(var y=function(T,O){O===void 0&&(O=!0),!(T==null||T===b)&&T.domNode.parentNode!=null&&(T.domNode[l.DATA_KEY].mutations==null&&(T.domNode[l.DATA_KEY].mutations=[]),O&&y(T.parent))},v=function(T){T.domNode[l.DATA_KEY]==null||T.domNode[l.DATA_KEY].mutations==null||(T instanceof a.default&&T.children.forEach(v),T.optimize(g))},x=m,E=0;x.length>0;E+=1){if(E>=c)throw new Error("[Parchment] Maximum optimize iterations reached");for(x.forEach(function(T){var O=l.find(T.target,!0);O!=null&&(O.domNode===T.target&&(T.type==="childList"?(y(l.find(T.previousSibling,!1)),[].forEach.call(T.addedNodes,function(A){var C=l.find(A,!1);y(C,!1),C instanceof a.default&&C.children.forEach(function(M){y(M,!1)})})):T.type==="attributes"&&y(O.prev)),y(O))}),this.children.forEach(v),x=[].slice.call(this.observer.takeRecords()),w=x.slice();w.length>0;)m.push(w.pop())}},p.prototype.update=function(m,g){var b=this;g===void 0&&(g={}),m=m||this.observer.takeRecords(),m.map(function(w){var y=l.find(w.target,!0);return y==null?null:y.domNode[l.DATA_KEY].mutations==null?(y.domNode[l.DATA_KEY].mutations=[w],y):(y.domNode[l.DATA_KEY].mutations.push(w),null)}).forEach(function(w){w==null||w===b||w.domNode[l.DATA_KEY]==null||w.update(w.domNode[l.DATA_KEY].mutations||[],g)}),this.domNode[l.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,g),this.optimize(m,g)},p.blotName="scroll",p.defaultChild="block",p.scope=l.Scope.BLOCK_BLOT,p.tagName="DIV",p}(a.default);r.default=f},function(n,r,i){var s=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var m in p)p.hasOwnProperty(m)&&(d[m]=p[m])};return function(d,p){f(d,p);function m(){this.constructor=d}d.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(18),l=i(1);function u(f,d){if(Object.keys(f).length!==Object.keys(d).length)return!1;for(var p in f)if(f[p]!==d[p])return!1;return!0}var c=function(f){s(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return d.formats=function(p){if(p.tagName!==d.tagName)return f.formats.call(this,p)},d.prototype.format=function(p,m){var g=this;p===this.statics.blotName&&!m?(this.children.forEach(function(b){b instanceof a.default||(b=b.wrap(d.blotName,!0)),g.attributes.copy(b)}),this.unwrap()):f.prototype.format.call(this,p,m)},d.prototype.formatAt=function(p,m,g,b){if(this.formats()[g]!=null||l.query(g,l.Scope.ATTRIBUTE)){var w=this.isolate(p,m);w.format(g,b)}else f.prototype.formatAt.call(this,p,m,g,b)},d.prototype.optimize=function(p){f.prototype.optimize.call(this,p);var m=this.formats();if(Object.keys(m).length===0)return this.unwrap();var g=this.next;g instanceof d&&g.prev===this&&u(m,g.formats())&&(g.moveChildren(this),g.remove())},d.blotName="inline",d.scope=l.Scope.INLINE_BLOT,d.tagName="SPAN",d}(a.default);r.default=c},function(n,r,i){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){c(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(18),l=i(1),u=function(c){s(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.formats=function(d){var p=l.query(f.blotName).tagName;if(d.tagName!==p)return c.formats.call(this,d)},f.prototype.format=function(d,p){l.query(d,l.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!p?this.replaceWith(f.blotName):c.prototype.format.call(this,d,p))},f.prototype.formatAt=function(d,p,m,g){l.query(m,l.Scope.BLOCK)!=null?this.format(m,g):c.prototype.formatAt.call(this,d,p,m,g)},f.prototype.insertAt=function(d,p,m){if(m==null||l.query(p,l.Scope.INLINE)!=null)c.prototype.insertAt.call(this,d,p,m);else{var g=this.split(d),b=l.create(p,m);g.parent.insertBefore(b,g)}},f.prototype.update=function(d,p){navigator.userAgent.match(/Trident/)?this.build():c.prototype.update.call(this,d,p)},f.blotName="block",f.scope=l.Scope.BLOCK_BLOT,f.tagName="P",f}(a.default);r.default=u},function(n,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)f.hasOwnProperty(d)&&(c[d]=f[d])};return function(c,f){u(c,f);function d(){this.constructor=c}c.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(19),l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.formats=function(f){},c.prototype.format=function(f,d){u.prototype.formatAt.call(this,0,this.length(),f,d)},c.prototype.formatAt=function(f,d,p,m){f===0&&d===this.length()?this.format(p,m):u.prototype.formatAt.call(this,f,d,p,m)},c.prototype.formats=function(){return this.statics.formats(this.domNode)},c}(a.default);r.default=l},function(n,r,i){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var p in d)d.hasOwnProperty(p)&&(f[p]=d[p])};return function(f,d){c(f,d);function p(){this.constructor=f}f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var a=i(19),l=i(1),u=function(c){s(f,c);function f(d){var p=c.call(this,d)||this;return p.text=p.statics.value(p.domNode),p}return f.create=function(d){return document.createTextNode(d)},f.value=function(d){var p=d.data;return p.normalize&&(p=p.normalize()),p},f.prototype.deleteAt=function(d,p){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+p)},f.prototype.index=function(d,p){return this.domNode===d?p:-1},f.prototype.insertAt=function(d,p,m){m==null?(this.text=this.text.slice(0,d)+p+this.text.slice(d),this.domNode.data=this.text):c.prototype.insertAt.call(this,d,p,m)},f.prototype.length=function(){return this.text.length},f.prototype.optimize=function(d){c.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof f&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},f.prototype.position=function(d,p){return[this.domNode,d]},f.prototype.split=function(d,p){if(p===void 0&&(p=!1),!p){if(d===0)return this;if(d===this.length())return this.next}var m=l.create(this.domNode.splitText(d));return this.parent.insertBefore(m,this.next),this.text=this.statics.value(this.domNode),m},f.prototype.update=function(d,p){var m=this;d.some(function(g){return g.type==="characterData"&&g.target===m.domNode})&&(this.text=this.statics.value(this.domNode))},f.prototype.value=function(){return this.text},f.blotName="text",f.scope=l.Scope.INLINE_BLOT,f}(a.default);r.default=u},function(n,r,i){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,u){return arguments.length>1&&!this.contains(l)==!u?u:a.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,u){return u=u||0,this.substr(u,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,u){var c=this.toString();(typeof u!="number"||!isFinite(u)||Math.floor(u)!==u||u>c.length)&&(u=c.length),u-=l.length;var f=c.indexOf(l,u);return f!==-1&&f===u}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(u){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof u!="function")throw new TypeError("predicate must be a function");for(var c=Object(this),f=c.length>>>0,d=arguments[1],p,m=0;m<f;m++)if(p=c[m],u.call(d,p,m,c))return p}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,r){var i=-1,s=1,a=0;function l(E,T,O){if(E==T)return E?[[a,E]]:[];(O<0||E.length<O)&&(O=null);var A=d(E,T),C=E.substring(0,A);E=E.substring(A),T=T.substring(A),A=p(E,T);var M=E.substring(E.length-A);E=E.substring(0,E.length-A),T=T.substring(0,T.length-A);var R=u(E,T);return C&&R.unshift([a,C]),M&&R.push([a,M]),g(R),O!=null&&(R=y(R,O)),R=v(R),R}function u(E,T){var O;if(!E)return[[s,T]];if(!T)return[[i,E]];var A=E.length>T.length?E:T,C=E.length>T.length?T:E,M=A.indexOf(C);if(M!=-1)return O=[[s,A.substring(0,M)],[a,C],[s,A.substring(M+C.length)]],E.length>T.length&&(O[0][0]=O[2][0]=i),O;if(C.length==1)return[[i,E],[s,T]];var R=m(E,T);if(R){var P=R[0],N=R[1],$=R[2],D=R[3],z=R[4],G=l(P,$),W=l(N,D);return G.concat([[a,z]],W)}return c(E,T)}function c(E,T){for(var O=E.length,A=T.length,C=Math.ceil((O+A)/2),M=C,R=2*C,P=new Array(R),N=new Array(R),$=0;$<R;$++)P[$]=-1,N[$]=-1;P[M+1]=0,N[M+1]=0;for(var D=O-A,z=D%2!=0,G=0,W=0,Z=0,q=0,B=0;B<C;B++){for(var j=-B+G;j<=B-W;j+=2){var U=M+j,H;j==-B||j!=B&&P[U-1]<P[U+1]?H=P[U+1]:H=P[U-1]+1;for(var Y=H-j;H<O&&Y<A&&E.charAt(H)==T.charAt(Y);)H++,Y++;if(P[U]=H,H>O)W+=2;else if(Y>A)G+=2;else if(z){var J=M+D-j;if(J>=0&&J<R&&N[J]!=-1){var V=O-N[J];if(H>=V)return f(E,T,H,Y)}}}for(var Q=-B+Z;Q<=B-q;Q+=2){var J=M+Q,V;Q==-B||Q!=B&&N[J-1]<N[J+1]?V=N[J+1]:V=N[J-1]+1;for(var re=V-Q;V<O&&re<A&&E.charAt(O-V-1)==T.charAt(A-re-1);)V++,re++;if(N[J]=V,V>O)q+=2;else if(re>A)Z+=2;else if(!z){var U=M+D-Q;if(U>=0&&U<R&&P[U]!=-1){var H=P[U],Y=M+H-U;if(V=O-V,H>=V)return f(E,T,H,Y)}}}}return[[i,E],[s,T]]}function f(E,T,O,A){var C=E.substring(0,O),M=T.substring(0,A),R=E.substring(O),P=T.substring(A),N=l(C,M),$=l(R,P);return N.concat($)}function d(E,T){if(!E||!T||E.charAt(0)!=T.charAt(0))return 0;for(var O=0,A=Math.min(E.length,T.length),C=A,M=0;O<C;)E.substring(M,C)==T.substring(M,C)?(O=C,M=O):A=C,C=Math.floor((A-O)/2+O);return C}function p(E,T){if(!E||!T||E.charAt(E.length-1)!=T.charAt(T.length-1))return 0;for(var O=0,A=Math.min(E.length,T.length),C=A,M=0;O<C;)E.substring(E.length-C,E.length-M)==T.substring(T.length-C,T.length-M)?(O=C,M=O):A=C,C=Math.floor((A-O)/2+O);return C}function m(E,T){var O=E.length>T.length?E:T,A=E.length>T.length?T:E;if(O.length<4||A.length*2<O.length)return null;function C(W,Z,q){for(var B=W.substring(q,q+Math.floor(W.length/4)),j=-1,U="",H,Y,J,V;(j=Z.indexOf(B,j+1))!=-1;){var Q=d(W.substring(q),Z.substring(j)),re=p(W.substring(0,q),Z.substring(0,j));U.length<re+Q&&(U=Z.substring(j-re,j)+Z.substring(j,j+Q),H=W.substring(0,q-re),Y=W.substring(q+Q),J=Z.substring(0,j-re),V=Z.substring(j+Q))}return U.length*2>=W.length?[H,Y,J,V,U]:null}var M=C(O,A,Math.ceil(O.length/4)),R=C(O,A,Math.ceil(O.length/2)),P;if(!M&&!R)return null;R?M?P=M[4].length>R[4].length?M:R:P=R:P=M;var N,$,D,z;E.length>T.length?(N=P[0],$=P[1],D=P[2],z=P[3]):(D=P[0],z=P[1],N=P[2],$=P[3]);var G=P[4];return[N,$,D,z,G]}function g(E){E.push([a,""]);for(var T=0,O=0,A=0,C="",M="",R;T<E.length;)switch(E[T][0]){case s:A++,M+=E[T][1],T++;break;case i:O++,C+=E[T][1],T++;break;case a:O+A>1?(O!==0&&A!==0&&(R=d(M,C),R!==0&&(T-O-A>0&&E[T-O-A-1][0]==a?E[T-O-A-1][1]+=M.substring(0,R):(E.splice(0,0,[a,M.substring(0,R)]),T++),M=M.substring(R),C=C.substring(R)),R=p(M,C),R!==0&&(E[T][1]=M.substring(M.length-R)+E[T][1],M=M.substring(0,M.length-R),C=C.substring(0,C.length-R))),O===0?E.splice(T-A,O+A,[s,M]):A===0?E.splice(T-O,O+A,[i,C]):E.splice(T-O-A,O+A,[i,C],[s,M]),T=T-O-A+(O?1:0)+(A?1:0)+1):T!==0&&E[T-1][0]==a?(E[T-1][1]+=E[T][1],E.splice(T,1)):T++,A=0,O=0,C="",M="";break}E[E.length-1][1]===""&&E.pop();var P=!1;for(T=1;T<E.length-1;)E[T-1][0]==a&&E[T+1][0]==a&&(E[T][1].substring(E[T][1].length-E[T-1][1].length)==E[T-1][1]?(E[T][1]=E[T-1][1]+E[T][1].substring(0,E[T][1].length-E[T-1][1].length),E[T+1][1]=E[T-1][1]+E[T+1][1],E.splice(T-1,1),P=!0):E[T][1].substring(0,E[T+1][1].length)==E[T+1][1]&&(E[T-1][1]+=E[T+1][1],E[T][1]=E[T][1].substring(E[T+1][1].length)+E[T+1][1],E.splice(T+1,1),P=!0)),T++;P&&g(E)}var b=l;b.INSERT=s,b.DELETE=i,b.EQUAL=a,n.exports=b;function w(E,T){if(T===0)return[a,E];for(var O=0,A=0;A<E.length;A++){var C=E[A];if(C[0]===i||C[0]===a){var M=O+C[1].length;if(T===M)return[A+1,E];if(T<M){E=E.slice();var R=T-O,P=[C[0],C[1].slice(0,R)],N=[C[0],C[1].slice(R)];return E.splice(A,1,P,N),[A+1,E]}else O=M}}throw new Error("cursor_pos is out of bounds!")}function y(E,T){var O=w(E,T),A=O[1],C=O[0],M=A[C],R=A[C+1];if(M==null)return E;if(M[0]!==a)return E;if(R!=null&&M[1]+R[1]===R[1]+M[1])return A.splice(C,2,R,M),x(A,C,2);if(R!=null&&R[1].indexOf(M[1])===0){A.splice(C,2,[R[0],M[1]],[0,M[1]]);var P=R[1].slice(M[1].length);return P.length>0&&A.splice(C+2,0,[R[0],P]),x(A,C,3)}else return E}function v(E){for(var T=!1,O=function(R){return R.charCodeAt(0)>=56320&&R.charCodeAt(0)<=57343},A=function(R){return R.charCodeAt(R.length-1)>=55296&&R.charCodeAt(R.length-1)<=56319},C=2;C<E.length;C+=1)E[C-2][0]===a&&A(E[C-2][1])&&E[C-1][0]===i&&O(E[C-1][1])&&E[C][0]===s&&O(E[C][1])&&(T=!0,E[C-1][1]=E[C-2][1].slice(-1)+E[C-1][1],E[C][1]=E[C-2][1].slice(-1)+E[C][1],E[C-2][1]=E[C-2][1].slice(0,-1));if(!T)return E;for(var M=[],C=0;C<E.length;C+=1)E[C][1].length>0&&M.push(E[C]);return M}function x(E,T,O){for(var A=T+O-1;A>=0&&A>=T-1;A--)if(A+1<E.length){var C=E[A],M=E[A+1];C[0]===M[1]&&E.splice(A,2,[C[0],C[1]+M[1]])}return E}},function(n,r){r=n.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(s){var a=[];for(var l in s)a.push(l);return a}},function(n,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=n.exports=i?s:a,r.supported=s;function s(l){return Object.prototype.toString.call(l)=="[object Arguments]"}r.unsupported=a;function a(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}},function(n,r){var i=Object.prototype.hasOwnProperty,s="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(s=!1));function l(c,f,d){this.fn=c,this.context=f,this.once=d||!1}function u(){this._events=new a,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],d,p;if(this._eventsCount===0)return f;for(p in d=this._events)i.call(d,p)&&f.push(s?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},u.prototype.listeners=function(f,d){var p=s?s+f:f,m=this._events[p];if(d)return!!m;if(!m)return[];if(m.fn)return[m.fn];for(var g=0,b=m.length,w=new Array(b);g<b;g++)w[g]=m[g].fn;return w},u.prototype.emit=function(f,d,p,m,g,b){var w=s?s+f:f;if(!this._events[w])return!1;var y=this._events[w],v=arguments.length,x,E;if(y.fn){switch(y.once&&this.removeListener(f,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,p),!0;case 4:return y.fn.call(y.context,d,p,m),!0;case 5:return y.fn.call(y.context,d,p,m,g),!0;case 6:return y.fn.call(y.context,d,p,m,g,b),!0}for(E=1,x=new Array(v-1);E<v;E++)x[E-1]=arguments[E];y.fn.apply(y.context,x)}else{var T=y.length,O;for(E=0;E<T;E++)switch(y[E].once&&this.removeListener(f,y[E].fn,void 0,!0),v){case 1:y[E].fn.call(y[E].context);break;case 2:y[E].fn.call(y[E].context,d);break;case 3:y[E].fn.call(y[E].context,d,p);break;case 4:y[E].fn.call(y[E].context,d,p,m);break;default:if(!x)for(O=1,x=new Array(v-1);O<v;O++)x[O-1]=arguments[O];y[E].fn.apply(y[E].context,x)}}return!0},u.prototype.on=function(f,d,p){var m=new l(d,p||this),g=s?s+f:f;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],m]:this._events[g].push(m):(this._events[g]=m,this._eventsCount++),this},u.prototype.once=function(f,d,p){var m=new l(d,p||this,!0),g=s?s+f:f;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],m]:this._events[g].push(m):(this._events[g]=m,this._eventsCount++),this},u.prototype.removeListener=function(f,d,p,m){var g=s?s+f:f;if(!this._events[g])return this;if(!d)return--this._eventsCount===0?this._events=new a:delete this._events[g],this;var b=this._events[g];if(b.fn)b.fn===d&&(!m||b.once)&&(!p||b.context===p)&&(--this._eventsCount===0?this._events=new a:delete this._events[g]);else{for(var w=0,y=[],v=b.length;w<v;w++)(b[w].fn!==d||m&&!b[w].once||p&&b[w].context!==p)&&y.push(b[w]);y.length?this._events[g]=y.length===1?y[0]:y:--this._eventsCount===0?this._events=new a:delete this._events[g]}return this},u.prototype.removeAllListeners=function(f){var d;return f?(d=s?s+f:f,this._events[d]&&(--this._eventsCount===0?this._events=new a:delete this._events[d])):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prototype.setMaxListeners=function(){return this},u.prefixed=s,u.EventEmitter=u,typeof n<"u"&&(n.exports=u)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},a=function(){function oe(fe,we){var be=[],he=!0,$e=!1,Be=void 0;try{for(var Ve=fe[Symbol.iterator](),Yt;!(he=(Yt=Ve.next()).done)&&(be.push(Yt.value),!(we&&be.length===we));he=!0);}catch(sn){$e=!0,Be=sn}finally{try{!he&&Ve.return&&Ve.return()}finally{if($e)throw Be}}return be}return function(fe,we){if(Array.isArray(fe))return fe;if(Symbol.iterator in Object(fe))return oe(fe,we);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function oe(fe,we){for(var be=0;be<we.length;be++){var he=we[be];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(fe,he.key,he)}}return function(fe,we,be){return we&&oe(fe.prototype,we),be&&oe(fe,be),fe}}(),u=i(3),c=N(u),f=i(2),d=N(f),p=i(0),m=N(p),g=i(5),b=N(g),w=i(10),y=N(w),v=i(9),x=N(v),E=i(36),T=i(37),O=i(13),A=N(O),C=i(26),M=i(38),R=i(39),P=i(40);function N(oe){return oe&&oe.__esModule?oe:{default:oe}}function $(oe,fe,we){return fe in oe?Object.defineProperty(oe,fe,{value:we,enumerable:!0,configurable:!0,writable:!0}):oe[fe]=we,oe}function D(oe,fe){if(!(oe instanceof fe))throw new TypeError("Cannot call a class as a function")}function z(oe,fe){if(!oe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe&&(typeof fe=="object"||typeof fe=="function")?fe:oe}function G(oe,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof fe);oe.prototype=Object.create(fe&&fe.prototype,{constructor:{value:oe,enumerable:!1,writable:!0,configurable:!0}}),fe&&(Object.setPrototypeOf?Object.setPrototypeOf(oe,fe):oe.__proto__=fe)}var W=(0,y.default)("quill:clipboard"),Z="__ql-matcher",q=[[Node.TEXT_NODE,At],[Node.TEXT_NODE,Ze],["br",me],[Node.ELEMENT_NODE,Ze],[Node.ELEMENT_NODE,ce],[Node.ELEMENT_NODE,We],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,$t],["li",je],["b",re.bind(re,"bold")],["i",re.bind(re,"italic")],["style",Ce]],B=[E.AlignAttribute,M.DirectionAttribute].reduce(function(oe,fe){return oe[fe.keyName]=fe,oe},{}),j=[E.AlignStyle,T.BackgroundStyle,C.ColorStyle,M.DirectionStyle,R.FontStyle,P.SizeStyle].reduce(function(oe,fe){return oe[fe.keyName]=fe,oe},{}),U=function(oe){G(fe,oe);function fe(we,be){D(this,fe);var he=z(this,(fe.__proto__||Object.getPrototypeOf(fe)).call(this,we,be));return he.quill.root.addEventListener("paste",he.onPaste.bind(he)),he.container=he.quill.addContainer("ql-clipboard"),he.container.setAttribute("contenteditable",!0),he.container.setAttribute("tabindex",-1),he.matchers=[],q.concat(he.options.matchers).forEach(function($e){var Be=a($e,2),Ve=Be[0],Yt=Be[1];!be.matchVisual&&Yt===We||he.addMatcher(Ve,Yt)}),he}return l(fe,[{key:"addMatcher",value:function(be,he){this.matchers.push([be,he])}},{key:"convert",value:function(be){if(typeof be=="string")return this.container.innerHTML=be.replace(/\>\r?\n +\</g,"><"),this.convert();var he=this.quill.getFormat(this.quill.selection.savedRange.index);if(he[A.default.blotName]){var $e=this.container.innerText;return this.container.innerHTML="",new d.default().insert($e,$({},A.default.blotName,he[A.default.blotName]))}var Be=this.prepareMatching(),Ve=a(Be,2),Yt=Ve[0],sn=Ve[1],bt=Q(this.container,Yt,sn);return J(bt,`
`)&&bt.ops[bt.ops.length-1].attributes==null&&(bt=bt.compose(new d.default().retain(bt.length()-1).delete(1))),W.log("convert",this.container.innerHTML,bt),this.container.innerHTML="",bt}},{key:"dangerouslyPasteHTML",value:function(be,he){var $e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof be=="string")this.quill.setContents(this.convert(be),he),this.quill.setSelection(0,b.default.sources.SILENT);else{var Be=this.convert(he);this.quill.updateContents(new d.default().retain(be).concat(Be),$e),this.quill.setSelection(be+Be.length(),b.default.sources.SILENT)}}},{key:"onPaste",value:function(be){var he=this;if(!(be.defaultPrevented||!this.quill.isEnabled())){var $e=this.quill.getSelection(),Be=new d.default().retain($e.index),Ve=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(b.default.sources.SILENT),setTimeout(function(){Be=Be.concat(he.convert()).delete($e.length),he.quill.updateContents(Be,b.default.sources.USER),he.quill.setSelection(Be.length()-$e.length,b.default.sources.SILENT),he.quill.scrollingContainer.scrollTop=Ve,he.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var be=this,he=[],$e=[];return this.matchers.forEach(function(Be){var Ve=a(Be,2),Yt=Ve[0],sn=Ve[1];switch(Yt){case Node.TEXT_NODE:$e.push(sn);break;case Node.ELEMENT_NODE:he.push(sn);break;default:[].forEach.call(be.container.querySelectorAll(Yt),function(bt){bt[Z]=bt[Z]||[],bt[Z].push(sn)});break}}),[he,$e]}}]),fe}(x.default);U.DEFAULTS={matchers:[],matchVisual:!0};function H(oe,fe,we){return(typeof fe>"u"?"undefined":s(fe))==="object"?Object.keys(fe).reduce(function(be,he){return H(be,he,fe[he])},oe):oe.reduce(function(be,he){return he.attributes&&he.attributes[fe]?be.push(he):be.insert(he.insert,(0,c.default)({},$({},fe,we),he.attributes))},new d.default)}function Y(oe){if(oe.nodeType!==Node.ELEMENT_NODE)return{};var fe="__ql-computed-style";return oe[fe]||(oe[fe]=window.getComputedStyle(oe))}function J(oe,fe){for(var we="",be=oe.ops.length-1;be>=0&&we.length<fe.length;--be){var he=oe.ops[be];if(typeof he.insert!="string")break;we=he.insert+we}return we.slice(-1*fe.length)===fe}function V(oe){if(oe.childNodes.length===0)return!1;var fe=Y(oe);return["block","list-item"].indexOf(fe.display)>-1}function Q(oe,fe,we){return oe.nodeType===oe.TEXT_NODE?we.reduce(function(be,he){return he(oe,be)},new d.default):oe.nodeType===oe.ELEMENT_NODE?[].reduce.call(oe.childNodes||[],function(be,he){var $e=Q(he,fe,we);return he.nodeType===oe.ELEMENT_NODE&&($e=fe.reduce(function(Be,Ve){return Ve(he,Be)},$e),$e=(he[Z]||[]).reduce(function(Be,Ve){return Ve(he,Be)},$e)),be.concat($e)},new d.default):new d.default}function re(oe,fe,we){return H(we,oe,!0)}function ie(oe,fe){var we=m.default.Attributor.Attribute.keys(oe),be=m.default.Attributor.Class.keys(oe),he=m.default.Attributor.Style.keys(oe),$e={};return we.concat(be).concat(he).forEach(function(Be){var Ve=m.default.query(Be,m.default.Scope.ATTRIBUTE);Ve!=null&&($e[Ve.attrName]=Ve.value(oe),$e[Ve.attrName])||(Ve=B[Be],Ve!=null&&(Ve.attrName===Be||Ve.keyName===Be)&&($e[Ve.attrName]=Ve.value(oe)||void 0),Ve=j[Be],Ve!=null&&(Ve.attrName===Be||Ve.keyName===Be)&&(Ve=j[Be],$e[Ve.attrName]=Ve.value(oe)||void 0))}),Object.keys($e).length>0&&(fe=H(fe,$e)),fe}function ce(oe,fe){var we=m.default.query(oe);if(we==null)return fe;if(we.prototype instanceof m.default.Embed){var be={},he=we.value(oe);he!=null&&(be[we.blotName]=he,fe=new d.default().insert(be,we.formats(oe)))}else typeof we.formats=="function"&&(fe=H(fe,we.blotName,we.formats(oe)));return fe}function me(oe,fe){return J(fe,`
`)||fe.insert(`
`),fe}function Ce(){return new d.default}function je(oe,fe){var we=m.default.query(oe);if(we==null||we.blotName!=="list-item"||!J(fe,`
`))return fe;for(var be=-1,he=oe.parentNode;!he.classList.contains("ql-clipboard");)(m.default.query(he)||{}).blotName==="list"&&(be+=1),he=he.parentNode;return be<=0?fe:fe.compose(new d.default().retain(fe.length()-1).retain(1,{indent:be}))}function Ze(oe,fe){return J(fe,`
`)||(V(oe)||fe.length()>0&&oe.nextSibling&&V(oe.nextSibling))&&fe.insert(`
`),fe}function We(oe,fe){if(V(oe)&&oe.nextElementSibling!=null&&!J(fe,`

`)){var we=oe.offsetHeight+parseFloat(Y(oe).marginTop)+parseFloat(Y(oe).marginBottom);oe.nextElementSibling.offsetTop>oe.offsetTop+we*1.5&&fe.insert(`
`)}return fe}function $t(oe,fe){var we={},be=oe.style||{};return be.fontStyle&&Y(oe).fontStyle==="italic"&&(we.italic=!0),be.fontWeight&&(Y(oe).fontWeight.startsWith("bold")||parseInt(Y(oe).fontWeight)>=700)&&(we.bold=!0),Object.keys(we).length>0&&(fe=H(fe,we)),parseFloat(be.textIndent||0)>0&&(fe=new d.default().insert("	").concat(fe)),fe}function At(oe,fe){var we=oe.data;if(oe.parentNode.tagName==="O:P")return fe.insert(we.trim());if(we.trim().length===0&&oe.parentNode.classList.contains("ql-clipboard"))return fe;if(!Y(oe.parentNode).whiteSpace.startsWith("pre")){var be=function($e,Be){return Be=Be.replace(/[^\u00a0]/g,""),Be.length<1&&$e?" ":Be};we=we.replace(/\r\n/g," ").replace(/\n/g," "),we=we.replace(/\s\s+/g,be.bind(be,!0)),(oe.previousSibling==null&&V(oe.parentNode)||oe.previousSibling!=null&&V(oe.previousSibling))&&(we=we.replace(/^\s+/,be.bind(be,!1))),(oe.nextSibling==null&&V(oe.parentNode)||oe.nextSibling!=null&&V(oe.nextSibling))&&(we=we.replace(/\s+$/,be.bind(be,!1)))}return fe.insert(we)}r.default=U,r.matchAttributor=ie,r.matchBlot=ce,r.matchNewline=Ze,r.matchSpacing=We,r.matchText=At},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function g(b,w){for(var y=0;y<w.length;y++){var v=w[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(b,v.key,v)}}return function(b,w,y){return w&&g(b.prototype,w),y&&g(b,y),b}}(),a=function g(b,w,y){b===null&&(b=Function.prototype);var v=Object.getOwnPropertyDescriptor(b,w);if(v===void 0){var x=Object.getPrototypeOf(b);return x===null?void 0:g(x,w,y)}else{if("value"in v)return v.value;var E=v.get;return E===void 0?void 0:E.call(y)}},l=i(6),u=c(l);function c(g){return g&&g.__esModule?g:{default:g}}function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function d(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function p(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var m=function(g){p(b,g);function b(){return f(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"optimize",value:function(y){a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,y),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return a(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),b}(u.default);m.blotName="bold",m.tagName=["STRONG","B"],r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var s=function(){function P(N,$){var D=[],z=!0,G=!1,W=void 0;try{for(var Z=N[Symbol.iterator](),q;!(z=(q=Z.next()).done)&&(D.push(q.value),!($&&D.length===$));z=!0);}catch(B){G=!0,W=B}finally{try{!z&&Z.return&&Z.return()}finally{if(G)throw W}}return D}return function(N,$){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return P(N,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function P(N,$){for(var D=0;D<$.length;D++){var z=$[D];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(N,z.key,z)}}return function(N,$,D){return $&&P(N.prototype,$),D&&P(N,D),N}}(),l=i(2),u=y(l),c=i(0),f=y(c),d=i(5),p=y(d),m=i(10),g=y(m),b=i(9),w=y(b);function y(P){return P&&P.__esModule?P:{default:P}}function v(P,N,$){return N in P?Object.defineProperty(P,N,{value:$,enumerable:!0,configurable:!0,writable:!0}):P[N]=$,P}function x(P,N){if(!(P instanceof N))throw new TypeError("Cannot call a class as a function")}function E(P,N){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:P}function T(P,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);P.prototype=Object.create(N&&N.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(P,N):P.__proto__=N)}var O=(0,g.default)("quill:toolbar"),A=function(P){T(N,P);function N($,D){x(this,N);var z=E(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,$,D));if(Array.isArray(z.options.container)){var G=document.createElement("div");M(G,z.options.container),$.container.parentNode.insertBefore(G,$.container),z.container=G}else typeof z.options.container=="string"?z.container=document.querySelector(z.options.container):z.container=z.options.container;if(!(z.container instanceof HTMLElement)){var W;return W=O.error("Container required for toolbar",z.options),E(z,W)}return z.container.classList.add("ql-toolbar"),z.controls=[],z.handlers={},Object.keys(z.options.handlers).forEach(function(Z){z.addHandler(Z,z.options.handlers[Z])}),[].forEach.call(z.container.querySelectorAll("button, select"),function(Z){z.attach(Z)}),z.quill.on(p.default.events.EDITOR_CHANGE,function(Z,q){Z===p.default.events.SELECTION_CHANGE&&z.update(q)}),z.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){var Z=z.quill.selection.getRange(),q=s(Z,1),B=q[0];z.update(B)}),z}return a(N,[{key:"addHandler",value:function(D,z){this.handlers[D]=z}},{key:"attach",value:function(D){var z=this,G=[].find.call(D.classList,function(Z){return Z.indexOf("ql-")===0});if(G){if(G=G.slice(3),D.tagName==="BUTTON"&&D.setAttribute("type","button"),this.handlers[G]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[G]==null){O.warn("ignoring attaching to disabled format",G,D);return}if(f.default.query(G)==null){O.warn("ignoring attaching to nonexistent format",G,D);return}}var W=D.tagName==="SELECT"?"change":"click";D.addEventListener(W,function(Z){var q=void 0;if(D.tagName==="SELECT"){if(D.selectedIndex<0)return;var B=D.options[D.selectedIndex];B.hasAttribute("selected")?q=!1:q=B.value||!1}else D.classList.contains("ql-active")?q=!1:q=D.value||!D.hasAttribute("value"),Z.preventDefault();z.quill.focus();var j=z.quill.selection.getRange(),U=s(j,1),H=U[0];if(z.handlers[G]!=null)z.handlers[G].call(z,q);else if(f.default.query(G).prototype instanceof f.default.Embed){if(q=prompt("Enter "+G),!q)return;z.quill.updateContents(new u.default().retain(H.index).delete(H.length).insert(v({},G,q)),p.default.sources.USER)}else z.quill.format(G,q,p.default.sources.USER);z.update(H)}),this.controls.push([G,D])}}},{key:"update",value:function(D){var z=D==null?{}:this.quill.getFormat(D);this.controls.forEach(function(G){var W=s(G,2),Z=W[0],q=W[1];if(q.tagName==="SELECT"){var B=void 0;if(D==null)B=null;else if(z[Z]==null)B=q.querySelector("option[selected]");else if(!Array.isArray(z[Z])){var j=z[Z];typeof j=="string"&&(j=j.replace(/\"/g,'\\"')),B=q.querySelector('option[value="'+j+'"]')}B==null?(q.value="",q.selectedIndex=-1):B.selected=!0}else if(D==null)q.classList.remove("ql-active");else if(q.hasAttribute("value")){var U=z[Z]===q.getAttribute("value")||z[Z]!=null&&z[Z].toString()===q.getAttribute("value")||z[Z]==null&&!q.getAttribute("value");q.classList.toggle("ql-active",U)}else q.classList.toggle("ql-active",z[Z]!=null)})}}]),N}(w.default);A.DEFAULTS={};function C(P,N,$){var D=document.createElement("button");D.setAttribute("type","button"),D.classList.add("ql-"+N),$!=null&&(D.value=$),P.appendChild(D)}function M(P,N){Array.isArray(N[0])||(N=[N]),N.forEach(function($){var D=document.createElement("span");D.classList.add("ql-formats"),$.forEach(function(z){if(typeof z=="string")C(D,z);else{var G=Object.keys(z)[0],W=z[G];Array.isArray(W)?R(D,G,W):C(D,G,W)}}),P.appendChild(D)})}function R(P,N,$){var D=document.createElement("select");D.classList.add("ql-"+N),$.forEach(function(z){var G=document.createElement("option");z!==!1?G.setAttribute("value",z):G.setAttribute("selected","selected"),D.appendChild(G)}),P.appendChild(D)}A.DEFAULTS={container:null,handlers:{clean:function(){var N=this,$=this.quill.getSelection();if($!=null)if($.length==0){var D=this.quill.getFormat();Object.keys(D).forEach(function(z){f.default.query(z,f.default.Scope.INLINE)!=null&&N.quill.format(z,!1)})}else this.quill.removeFormat($,p.default.sources.USER)},direction:function(N){var $=this.quill.getFormat().align;N==="rtl"&&$==null?this.quill.format("align","right",p.default.sources.USER):!N&&$==="right"&&this.quill.format("align",!1,p.default.sources.USER),this.quill.format("direction",N,p.default.sources.USER)},indent:function(N){var $=this.quill.getSelection(),D=this.quill.getFormat($),z=parseInt(D.indent||0);if(N==="+1"||N==="-1"){var G=N==="+1"?1:-1;D.direction==="rtl"&&(G*=-1),this.quill.format("indent",z+G,p.default.sources.USER)}},link:function(N){N===!0&&(N=prompt("Enter link URL:")),this.quill.format("link",N,p.default.sources.USER)},list:function(N){var $=this.quill.getSelection(),D=this.quill.getFormat($);N==="check"?D.list==="checked"||D.list==="unchecked"?this.quill.format("list",!1,p.default.sources.USER):this.quill.format("list","unchecked",p.default.sources.USER):this.quill.format("list",N,p.default.sources.USER)}}},r.default=A,r.addControls=M},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function g(b,w){for(var y=0;y<w.length;y++){var v=w[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(b,v.key,v)}}return function(b,w,y){return w&&g(b.prototype,w),y&&g(b,y),b}}(),a=function g(b,w,y){b===null&&(b=Function.prototype);var v=Object.getOwnPropertyDescriptor(b,w);if(v===void 0){var x=Object.getPrototypeOf(b);return x===null?void 0:g(x,w,y)}else{if("value"in v)return v.value;var E=v.get;return E===void 0?void 0:E.call(y)}},l=i(28),u=c(l);function c(g){return g&&g.__esModule?g:{default:g}}function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function d(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function p(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var m=function(g){p(b,g);function b(w,y){f(this,b);var v=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w));return v.label.innerHTML=y,v.container.classList.add("ql-color-picker"),[].slice.call(v.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(x){x.classList.add("ql-primary")}),v}return s(b,[{key:"buildItem",value:function(y){var v=a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"buildItem",this).call(this,y);return v.style.backgroundColor=y.getAttribute("value")||"",v}},{key:"selectItem",value:function(y,v){a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,y,v);var x=this.label.querySelector(".ql-color-label"),E=y&&y.getAttribute("data-value")||"";x&&(x.tagName==="line"?x.style.stroke=E:x.style.fill=E)}}]),b}(u.default);r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function g(b,w){for(var y=0;y<w.length;y++){var v=w[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(b,v.key,v)}}return function(b,w,y){return w&&g(b.prototype,w),y&&g(b,y),b}}(),a=function g(b,w,y){b===null&&(b=Function.prototype);var v=Object.getOwnPropertyDescriptor(b,w);if(v===void 0){var x=Object.getPrototypeOf(b);return x===null?void 0:g(x,w,y)}else{if("value"in v)return v.value;var E=v.get;return E===void 0?void 0:E.call(y)}},l=i(28),u=c(l);function c(g){return g&&g.__esModule?g:{default:g}}function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function d(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function p(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var m=function(g){p(b,g);function b(w,y){f(this,b);var v=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w));return v.container.classList.add("ql-icon-picker"),[].forEach.call(v.container.querySelectorAll(".ql-picker-item"),function(x){x.innerHTML=y[x.getAttribute("data-value")||""]}),v.defaultItem=v.container.querySelector(".ql-selected"),v.selectItem(v.defaultItem),v}return s(b,[{key:"selectItem",value:function(y,v){a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,y,v),y=y||this.defaultItem,this.label.innerHTML=y.innerHTML}}]),b}(u.default);r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function u(c,f){for(var d=0;d<f.length;d++){var p=f[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}return function(c,f,d){return f&&u(c.prototype,f),d&&u(c,d),c}}();function a(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")}var l=function(){function u(c,f){var d=this;a(this,u),this.quill=c,this.boundsContainer=f||document.body,this.root=c.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return s(u,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(f){var d=f.left+f.width/2-this.root.offsetWidth/2,p=f.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=p+"px",this.root.classList.remove("ql-flip");var m=this.boundsContainer.getBoundingClientRect(),g=this.root.getBoundingClientRect(),b=0;if(g.right>m.right&&(b=m.right-g.right,this.root.style.left=d+b+"px"),g.left<m.left&&(b=m.left-g.left,this.root.style.left=d+b+"px"),g.bottom>m.bottom){var w=g.bottom-g.top,y=f.bottom-f.top+w;this.root.style.top=p-y+"px",this.root.classList.add("ql-flip")}return b}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),u}();r.default=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function R(P,N){var $=[],D=!0,z=!1,G=void 0;try{for(var W=P[Symbol.iterator](),Z;!(D=(Z=W.next()).done)&&($.push(Z.value),!(N&&$.length===N));D=!0);}catch(q){z=!0,G=q}finally{try{!D&&W.return&&W.return()}finally{if(z)throw G}}return $}return function(P,N){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return R(P,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function R(P,N,$){P===null&&(P=Function.prototype);var D=Object.getOwnPropertyDescriptor(P,N);if(D===void 0){var z=Object.getPrototypeOf(P);return z===null?void 0:R(z,N,$)}else{if("value"in D)return D.value;var G=D.get;return G===void 0?void 0:G.call($)}},l=function(){function R(P,N){for(var $=0;$<N.length;$++){var D=N[$];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(P,D.key,D)}}return function(P,N,$){return N&&R(P.prototype,N),$&&R(P,$),P}}(),u=i(3),c=x(u),f=i(8),d=x(f),p=i(43),m=x(p),g=i(27),b=x(g),w=i(15),y=i(41),v=x(y);function x(R){return R&&R.__esModule?R:{default:R}}function E(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")}function T(R,P){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:R}function O(R,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);R.prototype=Object.create(P&&P.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(R,P):R.__proto__=P)}var A=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],C=function(R){O(P,R);function P(N,$){E(this,P),$.modules.toolbar!=null&&$.modules.toolbar.container==null&&($.modules.toolbar.container=A);var D=T(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,N,$));return D.quill.container.classList.add("ql-snow"),D}return l(P,[{key:"extendToolbar",value:function($){$.container.classList.add("ql-snow"),this.buildButtons([].slice.call($.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call($.container.querySelectorAll("select")),v.default),this.tooltip=new M(this.quill,this.options.bounds),$.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(D,z){$.handlers.link.call($,!z.format.link)})}}]),P}(m.default);C.DEFAULTS=(0,c.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(P){if(P){var N=this.quill.getSelection();if(N==null||N.length==0)return;var $=this.quill.getText(N);/^\S+@\S+\.\S+$/.test($)&&$.indexOf("mailto:")!==0&&($="mailto:"+$);var D=this.quill.theme.tooltip;D.edit("link",$)}else this.quill.format("link",!1)}}}}});var M=function(R){O(P,R);function P(N,$){E(this,P);var D=T(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,N,$));return D.preview=D.root.querySelector("a.ql-preview"),D}return l(P,[{key:"listen",value:function(){var $=this;a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(D){$.root.classList.contains("ql-editing")?$.save():$.edit("link",$.preview.textContent),D.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(D){if($.linkRange!=null){var z=$.linkRange;$.restoreFocus(),$.quill.formatText(z,"link",!1,d.default.sources.USER),delete $.linkRange}D.preventDefault(),$.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(D,z,G){if(D!=null){if(D.length===0&&G===d.default.sources.USER){var W=$.quill.scroll.descendant(b.default,D.index),Z=s(W,2),q=Z[0],B=Z[1];if(q!=null){$.linkRange=new w.Range(D.index-B,q.length());var j=b.default.formats(q.domNode);$.preview.textContent=j,$.preview.setAttribute("href",j),$.show(),$.position($.quill.getBounds($.linkRange));return}}else delete $.linkRange;$.hide()}})}},{key:"show",value:function(){a(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),P}(p.BaseTooltip);M.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=C},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(29),a=he(s),l=i(36),u=i(38),c=i(64),f=i(65),d=he(f),p=i(66),m=he(p),g=i(67),b=he(g),w=i(37),y=i(26),v=i(39),x=i(40),E=i(56),T=he(E),O=i(68),A=he(O),C=i(27),M=he(C),R=i(69),P=he(R),N=i(70),$=he(N),D=i(71),z=he(D),G=i(72),W=he(G),Z=i(73),q=he(Z),B=i(13),j=he(B),U=i(74),H=he(U),Y=i(75),J=he(Y),V=i(57),Q=he(V),re=i(41),ie=he(re),ce=i(28),me=he(ce),Ce=i(59),je=he(Ce),Ze=i(60),We=he(Ze),$t=i(61),At=he($t),oe=i(108),fe=he(oe),we=i(62),be=he(we);function he($e){return $e&&$e.__esModule?$e:{default:$e}}a.default.register({"attributors/attribute/direction":u.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":w.BackgroundClass,"attributors/class/color":y.ColorClass,"attributors/class/direction":u.DirectionClass,"attributors/class/font":v.FontClass,"attributors/class/size":x.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":w.BackgroundStyle,"attributors/style/color":y.ColorStyle,"attributors/style/direction":u.DirectionStyle,"attributors/style/font":v.FontStyle,"attributors/style/size":x.SizeStyle},!0),a.default.register({"formats/align":l.AlignClass,"formats/direction":u.DirectionClass,"formats/indent":c.IndentClass,"formats/background":w.BackgroundStyle,"formats/color":y.ColorStyle,"formats/font":v.FontClass,"formats/size":x.SizeClass,"formats/blockquote":d.default,"formats/code-block":j.default,"formats/header":m.default,"formats/list":b.default,"formats/bold":T.default,"formats/code":B.Code,"formats/italic":A.default,"formats/link":M.default,"formats/script":P.default,"formats/strike":$.default,"formats/underline":z.default,"formats/image":W.default,"formats/video":q.default,"formats/list/item":g.ListItem,"modules/formula":H.default,"modules/syntax":J.default,"modules/toolbar":Q.default,"themes/bubble":fe.default,"themes/snow":be.default,"ui/icons":ie.default,"ui/picker":me.default,"ui/icon-picker":We.default,"ui/color-picker":je.default,"ui/tooltip":At.default},!0),r.default=a.default},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var s=function(){function b(w,y){for(var v=0;v<y.length;v++){var x=y[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(w,x.key,x)}}return function(w,y,v){return y&&b(w.prototype,y),v&&b(w,v),w}}(),a=function b(w,y,v){w===null&&(w=Function.prototype);var x=Object.getOwnPropertyDescriptor(w,y);if(x===void 0){var E=Object.getPrototypeOf(w);return E===null?void 0:b(E,y,v)}else{if("value"in x)return x.value;var T=x.get;return T===void 0?void 0:T.call(v)}},l=i(0),u=c(l);function c(b){return b&&b.__esModule?b:{default:b}}function f(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function d(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function p(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var m=function(b){p(w,b);function w(){return f(this,w),d(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,[{key:"add",value:function(v,x){if(x==="+1"||x==="-1"){var E=this.value(v)||0;x=x==="+1"?E+1:E-1}return x===0?(this.remove(v),!0):a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"add",this).call(this,v,x)}},{key:"canAdd",value:function(v,x){return a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,v,x)||a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"canAdd",this).call(this,v,parseInt(x))}},{key:"value",value:function(v){return parseInt(a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,v))||void 0}}]),w}(u.default.Attributor.Class),g=new m("indent","ql-indent",{scope:u.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=g},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(4),a=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function u(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function c(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(){return u(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(a.default);d.blotName="blockquote",d.tagName="blockquote",r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function m(g,b){for(var w=0;w<b.length;w++){var y=b[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,b,w){return b&&m(g.prototype,b),w&&m(g,w),g}}(),a=i(4),l=u(a);function u(m){return m&&m.__esModule?m:{default:m}}function c(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function f(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function d(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var p=function(m){d(g,m);function g(){return c(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,null,[{key:"formats",value:function(w){return this.tagName.indexOf(w.tagName)+1}}]),g}(l.default);p.blotName="header",p.tagName=["H1","H2","H3","H4","H5","H6"],r.default=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var s=function(){function E(T,O){for(var A=0;A<O.length;A++){var C=O[A];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(T,C.key,C)}}return function(T,O,A){return O&&E(T.prototype,O),A&&E(T,A),T}}(),a=function E(T,O,A){T===null&&(T=Function.prototype);var C=Object.getOwnPropertyDescriptor(T,O);if(C===void 0){var M=Object.getPrototypeOf(T);return M===null?void 0:E(M,O,A)}else{if("value"in C)return C.value;var R=C.get;return R===void 0?void 0:R.call(A)}},l=i(0),u=m(l),c=i(4),f=m(c),d=i(25),p=m(d);function m(E){return E&&E.__esModule?E:{default:E}}function g(E,T,O){return T in E?Object.defineProperty(E,T,{value:O,enumerable:!0,configurable:!0,writable:!0}):E[T]=O,E}function b(E,T){if(!(E instanceof T))throw new TypeError("Cannot call a class as a function")}function w(E,T){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:E}function y(E,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);E.prototype=Object.create(T&&T.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(E,T):E.__proto__=T)}var v=function(E){y(T,E);function T(){return b(this,T),w(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return s(T,[{key:"format",value:function(A,C){A===x.blotName&&!C?this.replaceWith(u.default.create(this.statics.scope)):a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"format",this).call(this,A,C)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(A,C){return this.parent.isolate(this.offset(this.parent),this.length()),A===this.parent.statics.blotName?(this.parent.replaceWith(A,C),this):(this.parent.unwrap(),a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replaceWith",this).call(this,A,C))}}],[{key:"formats",value:function(A){return A.tagName===this.tagName?void 0:a(T.__proto__||Object.getPrototypeOf(T),"formats",this).call(this,A)}}]),T}(f.default);v.blotName="list-item",v.tagName="LI";var x=function(E){y(T,E),s(T,null,[{key:"create",value:function(A){var C=A==="ordered"?"OL":"UL",M=a(T.__proto__||Object.getPrototypeOf(T),"create",this).call(this,C);return(A==="checked"||A==="unchecked")&&M.setAttribute("data-checked",A==="checked"),M}},{key:"formats",value:function(A){if(A.tagName==="OL")return"ordered";if(A.tagName==="UL")return A.hasAttribute("data-checked")?A.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function T(O){b(this,T);var A=w(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,O)),C=function(R){if(R.target.parentNode===O){var P=A.statics.formats(O),N=u.default.find(R.target);P==="checked"?N.format("list","unchecked"):P==="unchecked"&&N.format("list","checked")}};return O.addEventListener("touchstart",C),O.addEventListener("mousedown",C),A}return s(T,[{key:"format",value:function(A,C){this.children.length>0&&this.children.tail.format(A,C)}},{key:"formats",value:function(){return g({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(A,C){if(A instanceof v)a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertBefore",this).call(this,A,C);else{var M=C==null?this.length():C.offset(this),R=this.split(M);R.parent.insertBefore(A,R)}}},{key:"optimize",value:function(A){a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,A);var C=this.next;C!=null&&C.prev===this&&C.statics.blotName===this.statics.blotName&&C.domNode.tagName===this.domNode.tagName&&C.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(C.moveChildren(this),C.remove())}},{key:"replace",value:function(A){if(A.statics.blotName!==this.statics.blotName){var C=u.default.create(this.statics.defaultChild);A.moveChildren(C),this.appendChild(C)}a(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replace",this).call(this,A)}}]),T}(p.default);x.blotName="list",x.scope=u.default.Scope.BLOCK_BLOT,x.tagName=["OL","UL"],x.defaultChild="list-item",x.allowedChildren=[v],r.ListItem=v,r.default=x},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(56),a=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function u(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function c(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(){return u(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(a.default);d.blotName="italic",d.tagName=["EM","I"],r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function g(b,w){for(var y=0;y<w.length;y++){var v=w[y];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(b,v.key,v)}}return function(b,w,y){return w&&g(b.prototype,w),y&&g(b,y),b}}(),a=function g(b,w,y){b===null&&(b=Function.prototype);var v=Object.getOwnPropertyDescriptor(b,w);if(v===void 0){var x=Object.getPrototypeOf(b);return x===null?void 0:g(x,w,y)}else{if("value"in v)return v.value;var E=v.get;return E===void 0?void 0:E.call(y)}},l=i(6),u=c(l);function c(g){return g&&g.__esModule?g:{default:g}}function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function d(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function p(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var m=function(g){p(b,g);function b(){return f(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,null,[{key:"create",value:function(y){return y==="super"?document.createElement("sup"):y==="sub"?document.createElement("sub"):a(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,y)}},{key:"formats",value:function(y){if(y.tagName==="SUB")return"sub";if(y.tagName==="SUP")return"super"}}]),b}(u.default);m.blotName="script",m.tagName=["SUB","SUP"],r.default=m},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),a=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function u(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function c(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(){return u(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(a.default);d.blotName="strike",d.tagName="S",r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),a=l(s);function l(p){return p&&p.__esModule?p:{default:p}}function u(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function c(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function f(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var d=function(p){f(m,p);function m(){return u(this,m),c(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m}(a.default);d.blotName="underline",d.tagName="U",r.default=d},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function w(y,v){for(var x=0;x<v.length;x++){var E=v[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}return function(y,v,x){return v&&w(y.prototype,v),x&&w(y,x),y}}(),a=function w(y,v,x){y===null&&(y=Function.prototype);var E=Object.getOwnPropertyDescriptor(y,v);if(E===void 0){var T=Object.getPrototypeOf(y);return T===null?void 0:w(T,v,x)}else{if("value"in E)return E.value;var O=E.get;return O===void 0?void 0:O.call(x)}},l=i(0),u=f(l),c=i(27);function f(w){return w&&w.__esModule?w:{default:w}}function d(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function p(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function m(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var g=["alt","height","width"],b=function(w){m(y,w);function y(){return d(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,[{key:"format",value:function(x,E){g.indexOf(x)>-1?E?this.domNode.setAttribute(x,E):this.domNode.removeAttribute(x):a(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,x,E)}}],[{key:"create",value:function(x){var E=a(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,x);return typeof x=="string"&&E.setAttribute("src",this.sanitize(x)),E}},{key:"formats",value:function(x){return g.reduce(function(E,T){return x.hasAttribute(T)&&(E[T]=x.getAttribute(T)),E},{})}},{key:"match",value:function(x){return/\.(jpe?g|gif|png)$/.test(x)||/^data:image\/.+;base64/.test(x)}},{key:"sanitize",value:function(x){return(0,c.sanitize)(x,["http","https","data"])?x:"//:0"}},{key:"value",value:function(x){return x.getAttribute("src")}}]),y}(u.default.Embed);b.blotName="image",b.tagName="IMG",r.default=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function w(y,v){for(var x=0;x<v.length;x++){var E=v[x];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}return function(y,v,x){return v&&w(y.prototype,v),x&&w(y,x),y}}(),a=function w(y,v,x){y===null&&(y=Function.prototype);var E=Object.getOwnPropertyDescriptor(y,v);if(E===void 0){var T=Object.getPrototypeOf(y);return T===null?void 0:w(T,v,x)}else{if("value"in E)return E.value;var O=E.get;return O===void 0?void 0:O.call(x)}},l=i(4),u=i(27),c=f(u);function f(w){return w&&w.__esModule?w:{default:w}}function d(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function p(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function m(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var g=["height","width"],b=function(w){m(y,w);function y(){return d(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,[{key:"format",value:function(x,E){g.indexOf(x)>-1?E?this.domNode.setAttribute(x,E):this.domNode.removeAttribute(x):a(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,x,E)}}],[{key:"create",value:function(x){var E=a(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,x);return E.setAttribute("frameborder","0"),E.setAttribute("allowfullscreen",!0),E.setAttribute("src",this.sanitize(x)),E}},{key:"formats",value:function(x){return g.reduce(function(E,T){return x.hasAttribute(T)&&(E[T]=x.getAttribute(T)),E},{})}},{key:"sanitize",value:function(x){return c.default.sanitize(x)}},{key:"value",value:function(x){return x.getAttribute("src")}}]),y}(l.BlockEmbed);b.blotName="video",b.className="ql-video",b.tagName="IFRAME",r.default=b},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var s=function(){function x(E,T){for(var O=0;O<T.length;O++){var A=T[O];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(E,A.key,A)}}return function(E,T,O){return T&&x(E.prototype,T),O&&x(E,O),E}}(),a=function x(E,T,O){E===null&&(E=Function.prototype);var A=Object.getOwnPropertyDescriptor(E,T);if(A===void 0){var C=Object.getPrototypeOf(E);return C===null?void 0:x(C,T,O)}else{if("value"in A)return A.value;var M=A.get;return M===void 0?void 0:M.call(O)}},l=i(35),u=m(l),c=i(5),f=m(c),d=i(9),p=m(d);function m(x){return x&&x.__esModule?x:{default:x}}function g(x,E){if(!(x instanceof E))throw new TypeError("Cannot call a class as a function")}function b(x,E){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:x}function w(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);x.prototype=Object.create(E&&E.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(x,E):x.__proto__=E)}var y=function(x){w(E,x);function E(){return g(this,E),b(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return s(E,null,[{key:"create",value:function(O){var A=a(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,O);return typeof O=="string"&&(window.katex.render(O,A,{throwOnError:!1,errorColor:"#f00"}),A.setAttribute("data-value",O)),A}},{key:"value",value:function(O){return O.getAttribute("data-value")}}]),E}(u.default);y.blotName="formula",y.className="ql-formula",y.tagName="SPAN";var v=function(x){w(E,x),s(E,null,[{key:"register",value:function(){f.default.register(y,!0)}}]);function E(){g(this,E);var T=b(this,(E.__proto__||Object.getPrototypeOf(E)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return T}return E}(p.default);r.FormulaBlot=y,r.default=v},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var s=function(){function O(A,C){for(var M=0;M<C.length;M++){var R=C[M];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(A,R.key,R)}}return function(A,C,M){return C&&O(A.prototype,C),M&&O(A,M),A}}(),a=function O(A,C,M){A===null&&(A=Function.prototype);var R=Object.getOwnPropertyDescriptor(A,C);if(R===void 0){var P=Object.getPrototypeOf(A);return P===null?void 0:O(P,C,M)}else{if("value"in R)return R.value;var N=R.get;return N===void 0?void 0:N.call(M)}},l=i(0),u=b(l),c=i(5),f=b(c),d=i(9),p=b(d),m=i(13),g=b(m);function b(O){return O&&O.__esModule?O:{default:O}}function w(O,A){if(!(O instanceof A))throw new TypeError("Cannot call a class as a function")}function y(O,A){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:O}function v(O,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);O.prototype=Object.create(A&&A.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(O,A):O.__proto__=A)}var x=function(O){v(A,O);function A(){return w(this,A),y(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return s(A,[{key:"replaceWith",value:function(M){this.domNode.textContent=this.domNode.textContent,this.attach(),a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replaceWith",this).call(this,M)}},{key:"highlight",value:function(M){var R=this.domNode.textContent;this.cachedText!==R&&((R.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=M(R),this.domNode.normalize(),this.attach()),this.cachedText=R)}}]),A}(g.default);x.className="ql-syntax";var E=new u.default.Attributor.Class("token","hljs",{scope:u.default.Scope.INLINE}),T=function(O){v(A,O),s(A,null,[{key:"register",value:function(){f.default.register(E,!0),f.default.register(x,!0)}}]);function A(C,M){w(this,A);var R=y(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C,M));if(typeof R.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var P=null;return R.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(P),P=setTimeout(function(){R.highlight(),P=null},R.options.interval)}),R.highlight(),R}return s(A,[{key:"highlight",value:function(){var M=this;if(!this.quill.selection.composing){this.quill.update(f.default.sources.USER);var R=this.quill.getSelection();this.quill.scroll.descendants(x).forEach(function(P){P.highlight(M.options.highlight)}),this.quill.update(f.default.sources.SILENT),R!=null&&this.quill.setSelection(R,f.default.sources.SILENT)}}}]),A}(p.default);T.DEFAULTS={highlight:function(){return window.hljs==null?null:function(O){var A=window.hljs.highlightAuto(O);return A.value}}(),interval:1e3},r.CodeBlock=x,r.CodeToken=E,r.default=T},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,r){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,r){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,r){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var s=function A(C,M,R){C===null&&(C=Function.prototype);var P=Object.getOwnPropertyDescriptor(C,M);if(P===void 0){var N=Object.getPrototypeOf(C);return N===null?void 0:A(N,M,R)}else{if("value"in P)return P.value;var $=P.get;return $===void 0?void 0:$.call(R)}},a=function(){function A(C,M){for(var R=0;R<M.length;R++){var P=M[R];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}return function(C,M,R){return M&&A(C.prototype,M),R&&A(C,R),C}}(),l=i(3),u=w(l),c=i(8),f=w(c),d=i(43),p=w(d),m=i(15),g=i(41),b=w(g);function w(A){return A&&A.__esModule?A:{default:A}}function y(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")}function v(A,C){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:A}function x(A,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);A.prototype=Object.create(C&&C.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(A,C):A.__proto__=C)}var E=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],T=function(A){x(C,A);function C(M,R){y(this,C),R.modules.toolbar!=null&&R.modules.toolbar.container==null&&(R.modules.toolbar.container=E);var P=v(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,M,R));return P.quill.container.classList.add("ql-bubble"),P}return a(C,[{key:"extendToolbar",value:function(R){this.tooltip=new O(this.quill,this.options.bounds),this.tooltip.root.appendChild(R.container),this.buildButtons([].slice.call(R.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(R.container.querySelectorAll("select")),b.default)}}]),C}(p.default);T.DEFAULTS=(0,u.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(C){C?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var O=function(A){x(C,A);function C(M,R){y(this,C);var P=v(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,M,R));return P.quill.on(f.default.events.EDITOR_CHANGE,function(N,$,D,z){if(N===f.default.events.SELECTION_CHANGE)if($!=null&&$.length>0&&z===f.default.sources.USER){P.show(),P.root.style.left="0px",P.root.style.width="",P.root.style.width=P.root.offsetWidth+"px";var G=P.quill.getLines($.index,$.length);if(G.length===1)P.position(P.quill.getBounds($));else{var W=G[G.length-1],Z=P.quill.getIndex(W),q=Math.min(W.length()-1,$.index+$.length-Z),B=P.quill.getBounds(new m.Range(Z,q));P.position(B)}}else document.activeElement!==P.textbox&&P.quill.hasFocus()&&P.hide()}),P}return a(C,[{key:"listen",value:function(){var R=this;s(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){R.root.classList.remove("ql-editing")}),this.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!R.root.classList.contains("ql-hidden")){var P=R.quill.getSelection();P!=null&&R.position(R.quill.getBounds(P))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(R){var P=s(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"position",this).call(this,R),N=this.root.querySelector(".ql-tooltip-arrow");if(N.style.marginLeft="",P===0)return P;N.style.marginLeft=-1*P-N.offsetWidth/2+"px"}}]),C}(d.BaseTooltip);O.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=O,r.default=T},function(n,r,i){n.exports=i(63)}]).default})})(BM);var cse=BM.exports,fse=Hn&&Hn.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fm=Hn&&Hn.__assign||function(){return fm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},fm.apply(this,arguments)},dse=Hn&&Hn.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],a=0,l=s.length;a<l;a++,i++)r[i]=s[a];return r},Eg=Hn&&Hn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Zi=Eg(K),hse=Eg(nd),yc=Eg(use),uA=Eg(cse),pse=function(t){fse(e,t);function e(n){var r=t.call(this,n)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(s,a,l,u){var c,f,d,p;s==="text-change"?(f=(c=r).onEditorChangeText)===null||f===void 0||f.call(c,r.editor.root.innerHTML,a,u,r.unprivilegedEditor):s==="selection-change"&&((p=(d=r).onEditorChangeSelection)===null||p===void 0||p.call(d,a,u,r.unprivilegedEditor))};var i=r.isControlled()?n.value:n.defaultValue;return r.value=i??"",r}return e.prototype.validateProps=function(n){var r;if(Zi.default.Children.count(n.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Zi.default.Children.count(n.children)){var i=Zi.default.Children.only(n.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&n.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(n,r){var i=this,s;if(this.validateProps(n),!this.editor||this.state.generation!==r.generation)return!0;if("value"in n){var a=this.getEditorContents(),l=(s=n.value,s??"");this.isEqualValue(l,a)||this.setEditorContents(this.editor,l)}return n.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,n.readOnly),dse(this.cleanProps,this.dirtyProps).some(function(u){return!yc.default(n[u],i.props[u])})},e.prototype.shouldComponentRegenerate=function(n){var r=this;return this.dirtyProps.some(function(i){return!yc.default(n[i],r.props[i])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(n,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(n)){var s=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var l=this.regenerationSnapshot,s=l.delta,u=l.selection;delete this.regenerationSnapshot,this.instantiateEditor();var c=this.editor;c.setContents(s),cA(function(){return i.setEditorSelection(c,u)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(n,r){var i=new uA.default(n,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},e.prototype.hookEditor=function(n){this.unprivilegedEditor=this.makeUnprivilegedEditor(n),n.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(n){n.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(n){return n&&n.ops},e.prototype.isEqualValue=function(n,r){return this.isDelta(n)&&this.isDelta(r)?yc.default(n.ops,r.ops):yc.default(n,r)},e.prototype.setEditorContents=function(n,r){var i=this;this.value=r;var s=this.getEditorSelection();typeof r=="string"?n.setContents(n.clipboard.convert(r)):n.setContents(r),cA(function(){return i.setEditorSelection(n,s)})},e.prototype.setEditorSelection=function(n,r){if(this.selection=r,r){var i=n.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),n.setSelection(r)}},e.prototype.setEditorTabIndex=function(n,r){var i,s;!((s=(i=n)===null||i===void 0?void 0:i.scroll)===null||s===void 0)&&s.domNode&&(n.scroll.domNode.tabIndex=r)},e.prototype.setEditorReadOnly=function(n,r){r?n.disable():n.enable()},e.prototype.makeUnprivilegedEditor=function(n){var r=n;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var n=hse.default.findDOMNode(this.editingArea);if(!n)throw new Error("Cannot find element for editing area");if(n.nodeType===3)throw new Error("Editing area cannot be a text node");return n},e.prototype.renderEditingArea=function(){var n=this,r=this.props,i=r.children,s=r.preserveWhitespace,a=this.state.generation,l={key:a,ref:function(u){n.editingArea=u}};return Zi.default.Children.count(i)?Zi.default.cloneElement(Zi.default.Children.only(i),l):s?Zi.default.createElement("pre",fm({},l)):Zi.default.createElement("div",fm({},l))},e.prototype.render=function(){var n;return Zi.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(n=this.props.className,n??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(n,r,i,s){var a,l;if(this.editor){var u=this.isDelta(this.value)?s.getContents():s.getHTML();u!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=u,(l=(a=this.props).onChange)===null||l===void 0||l.call(a,n,r,i,s))}},e.prototype.onEditorChangeSelection=function(n,r,i){var s,a,l,u,c,f;if(this.editor){var d=this.getEditorSelection(),p=!d&&n,m=d&&!n;yc.default(n,d)||(this.selection=n,(a=(s=this.props).onChangeSelection)===null||a===void 0||a.call(s,n,r,i),p?(u=(l=this.props).onFocus)===null||u===void 0||u.call(l,n,r,i):m&&((f=(c=this.props).onBlur)===null||f===void 0||f.call(c,d,r,i)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=uA.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(Zi.default.Component);function cA(t){Promise.resolve().then(t)}var mse=pse;const gse=Ro(mse);function yse(){const[t,e]=K.useState(""),[n,r]=K.useState([]),[i,s]=K.useState("");K.useState([]);const a=Zs(),l=async u=>{u.preventDefault();const c=new FormData(u.target),f=Object.fromEntries(c);try{const d=await gr.post("/posts",{postData:{title:f.title,price:parseInt(f.price),address:f.address,city:f.city,bedroom:parseInt(f.bedroom),bathroom:parseInt(f.bathroom),type:f.type,property:f.property,latitude:f.latitude,longitude:f.longitude,images:n},postDetail:{desc:t,utilities:f.utilities,pet:f.pet,income:f.income,size:parseInt(f.size),school:parseInt(f.school),bus:parseInt(f.bus),restaurant:parseInt(f.restaurant)}});a("/"+d.data.id)}catch(d){console.log(d),s(i)}};return I.jsxs("div",{className:"newPostPage",children:[I.jsxs("div",{className:"formContainer",children:[I.jsx("h1",{children:"Add New Post"}),I.jsx("div",{className:"wrapper",children:I.jsxs("form",{onSubmit:l,children:[I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"title",children:"Title"}),I.jsx("input",{id:"title",name:"title",type:"text"})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"price",children:"Price"}),I.jsx("input",{id:"price",name:"price",type:"number"})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"address",children:"Address"}),I.jsx("input",{id:"address",name:"address",type:"text"})]}),I.jsxs("div",{className:"item description",children:[I.jsx("label",{htmlFor:"desc",children:"Description"}),I.jsx(gse,{theme:"snow",onChange:e,value:t})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"city",children:"City"}),I.jsx("input",{id:"city",name:"city",type:"text"})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"bedroom",children:"Bedroom Number"}),I.jsx("input",{min:1,id:"bedroom",name:"bedroom",type:"number"})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"bathroom",children:"Bathroom Number"}),I.jsx("input",{min:1,id:"bathroom",name:"bathroom",type:"number"})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"latitude",children:"Latitude"}),I.jsx("input",{id:"latitude",name:"latitude",type:"text"})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"longitude",children:"Longitude"}),I.jsx("input",{id:"longitude",name:"longitude",type:"text"})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"type",children:"Type"}),I.jsxs("select",{name:"type",children:[I.jsx("option",{value:"rent",defaultChecked:!0,children:"Rent"}),I.jsx("option",{value:"buy",children:"Buy"})]})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"type",children:"Property"}),I.jsxs("select",{name:"property",children:[I.jsx("option",{value:"apartment",children:"Apartment"}),I.jsx("option",{value:"house",children:"House"}),I.jsx("option",{value:"condo",children:"Condo"}),I.jsx("option",{value:"land",children:"Land"})]})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"utilities",children:"Utilities Policy"}),I.jsxs("select",{name:"utilities",children:[I.jsx("option",{value:"owner",children:"Owner is responsible"}),I.jsx("option",{value:"tenant",children:"Tenant is responsible"}),I.jsx("option",{value:"shared",children:"Shared"})]})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"pet",children:"Pet Policy"}),I.jsxs("select",{name:"pet",children:[I.jsx("option",{value:"allowed",children:"Allowed"}),I.jsx("option",{value:"not-allowed",children:"Not Allowed"})]})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"income",children:"Income Policy"}),I.jsx("input",{id:"income",name:"income",type:"text",placeholder:"Income Policy"})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"size",children:"Total Size (sqft)"}),I.jsx("input",{min:0,id:"size",name:"size",type:"number"})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"school",children:"School"}),I.jsx("input",{min:0,id:"school",name:"school",type:"number"})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"bus",children:"bus"}),I.jsx("input",{min:0,id:"bus",name:"bus",type:"number"})]}),I.jsxs("div",{className:"item",children:[I.jsx("label",{htmlFor:"restaurant",children:"Restaurant"}),I.jsx("input",{min:0,id:"restaurant",name:"restaurant",type:"number"})]}),I.jsx("button",{className:"sendButton",children:"Add"}),i&&I.jsx("span",{children:"error"})]})})]}),I.jsxs("div",{className:"sideContainer",children:[n.map((u,c)=>I.jsx("img",{src:u,alt:""},c)),I.jsx(SM,{uwConfig:{multiple:!0,cloudName:"lamadev",uploadPreset:"estate",folder:"posts"},setState:r})]})]})}const vse=async({request:t,params:e})=>(await gr("/posts/"+e.id)).data,_se=async({request:t,params:e})=>{const n=t.url.split("?")[1],r=gr("/posts?"+n);return OC({postResponse:r})},bse=async()=>{const t=gr("/users/profilePosts"),e=gr("/chats");return OC({postResponse:t,chatResponse:e})};function wse(){const t=NF([{path:"/",element:I.jsx(uX,{}),children:[{path:"/",element:I.jsx(XF,{})},{path:"/list",element:I.jsx(_K,{}),loader:_se},{path:"/:id",element:I.jsx(LX,{}),loader:vse},{path:"/login",element:I.jsx(NY,{})},{path:"/register",element:I.jsx(IY,{})}]},{path:"/",element:I.jsx(cX,{}),children:[{path:"/profile",element:I.jsx(LY,{}),loader:bse},{path:"/profile/update",element:I.jsx(MY,{})},{path:"/add",element:I.jsx(yse,{})}]}]);return I.jsx(zF,{router:t})}Dv.createRoot(document.getElementById("root")).render(I.jsx(zl.StrictMode,{children:I.jsx(JF,{children:I.jsx(CY,{children:I.jsx(wse,{})})})}));export{Cb as B,Si as P,ZG as a,bj as c,kl as r};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
